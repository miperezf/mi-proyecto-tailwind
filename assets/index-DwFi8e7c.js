(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();function tb(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var bd={exports:{}},Tl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g_;function nb(){if(g_)return Tl;g_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,l,c){var f=null;if(c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:f,ref:l!==void 0?l:null,props:c}}return Tl.Fragment=e,Tl.jsx=n,Tl.jsxs=n,Tl}var y_;function ib(){return y_||(y_=1,bd.exports=nb()),bd.exports}var U=ib(),Ad={exports:{}},ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __;function rb(){if(__)return ze;__=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),I=Symbol.iterator;function x(D){return D===null||typeof D!="object"?null:(D=I&&D[I]||D["@@iterator"],typeof D=="function"?D:null)}var Q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ee=Object.assign,te={};function ne(D,J,oe){this.props=D,this.context=J,this.refs=te,this.updater=oe||Q}ne.prototype.isReactComponent={},ne.prototype.setState=function(D,J){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,J,"setState")},ne.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function xe(){}xe.prototype=ne.prototype;function we(D,J,oe){this.props=D,this.context=J,this.refs=te,this.updater=oe||Q}var ge=we.prototype=new xe;ge.constructor=we,ee(ge,ne.prototype),ge.isPureReactComponent=!0;var Ge=Array.isArray,ue={H:null,A:null,T:null,S:null,V:null},ke=Object.prototype.hasOwnProperty;function M(D,J,oe,ie,ve,Be){return oe=Be.ref,{$$typeof:r,type:D,key:J,ref:oe!==void 0?oe:null,props:Be}}function S(D,J){return M(D.type,J,void 0,void 0,void 0,D.props)}function C(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function O(D){var J={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(oe){return J[oe]})}var V=/\/+/g;function P(D,J){return typeof D=="object"&&D!==null&&D.key!=null?O(""+D.key):J.toString(36)}function w(){}function Tt(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(w,w):(D.status="pending",D.then(function(J){D.status==="pending"&&(D.status="fulfilled",D.value=J)},function(J){D.status==="pending"&&(D.status="rejected",D.reason=J)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function De(D,J,oe,ie,ve){var Be=typeof D;(Be==="undefined"||Be==="boolean")&&(D=null);var Ie=!1;if(D===null)Ie=!0;else switch(Be){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(D.$$typeof){case r:case e:Ie=!0;break;case T:return Ie=D._init,De(Ie(D._payload),J,oe,ie,ve)}}if(Ie)return ve=ve(D),Ie=ie===""?"."+P(D,0):ie,Ge(ve)?(oe="",Ie!=null&&(oe=Ie.replace(V,"$&/")+"/"),De(ve,J,oe,"",function(An){return An})):ve!=null&&(C(ve)&&(ve=S(ve,oe+(ve.key==null||D&&D.key===ve.key?"":(""+ve.key).replace(V,"$&/")+"/")+Ie)),J.push(ve)),1;Ie=0;var Ct=ie===""?".":ie+":";if(Ge(D))for(var ot=0;ot<D.length;ot++)ie=D[ot],Be=Ct+P(ie,ot),Ie+=De(ie,J,oe,Be,ve);else if(ot=x(D),typeof ot=="function")for(D=ot.call(D),ot=0;!(ie=D.next()).done;)ie=ie.value,Be=Ct+P(ie,ot++),Ie+=De(ie,J,oe,Be,ve);else if(Be==="object"){if(typeof D.then=="function")return De(Tt(D),J,oe,ie,ve);throw J=String(D),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function F(D,J,oe){if(D==null)return D;var ie=[],ve=0;return De(D,ie,"","",function(Be){return J.call(oe,Be,ve++)}),ie}function se(D){if(D._status===-1){var J=D._result;J=J(),J.then(function(oe){(D._status===0||D._status===-1)&&(D._status=1,D._result=oe)},function(oe){(D._status===0||D._status===-1)&&(D._status=2,D._result=oe)}),D._status===-1&&(D._status=0,D._result=J)}if(D._status===1)return D._result.default;throw D._result}var _e=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function tt(){}return ze.Children={map:F,forEach:function(D,J,oe){F(D,function(){J.apply(this,arguments)},oe)},count:function(D){var J=0;return F(D,function(){J++}),J},toArray:function(D){return F(D,function(J){return J})||[]},only:function(D){if(!C(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},ze.Component=ne,ze.Fragment=n,ze.Profiler=l,ze.PureComponent=we,ze.StrictMode=s,ze.Suspense=g,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ue,ze.__COMPILER_RUNTIME={__proto__:null,c:function(D){return ue.H.useMemoCache(D)}},ze.cache=function(D){return function(){return D.apply(null,arguments)}},ze.cloneElement=function(D,J,oe){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ie=ee({},D.props),ve=D.key,Be=void 0;if(J!=null)for(Ie in J.ref!==void 0&&(Be=void 0),J.key!==void 0&&(ve=""+J.key),J)!ke.call(J,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&J.ref===void 0||(ie[Ie]=J[Ie]);var Ie=arguments.length-2;if(Ie===1)ie.children=oe;else if(1<Ie){for(var Ct=Array(Ie),ot=0;ot<Ie;ot++)Ct[ot]=arguments[ot+2];ie.children=Ct}return M(D.type,ve,void 0,void 0,Be,ie)},ze.createContext=function(D){return D={$$typeof:f,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},ze.createElement=function(D,J,oe){var ie,ve={},Be=null;if(J!=null)for(ie in J.key!==void 0&&(Be=""+J.key),J)ke.call(J,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(ve[ie]=J[ie]);var Ie=arguments.length-2;if(Ie===1)ve.children=oe;else if(1<Ie){for(var Ct=Array(Ie),ot=0;ot<Ie;ot++)Ct[ot]=arguments[ot+2];ve.children=Ct}if(D&&D.defaultProps)for(ie in Ie=D.defaultProps,Ie)ve[ie]===void 0&&(ve[ie]=Ie[ie]);return M(D,Be,void 0,void 0,null,ve)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(D){return{$$typeof:p,render:D}},ze.isValidElement=C,ze.lazy=function(D){return{$$typeof:T,_payload:{_status:-1,_result:D},_init:se}},ze.memo=function(D,J){return{$$typeof:_,type:D,compare:J===void 0?null:J}},ze.startTransition=function(D){var J=ue.T,oe={};ue.T=oe;try{var ie=D(),ve=ue.S;ve!==null&&ve(oe,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(tt,_e)}catch(Be){_e(Be)}finally{ue.T=J}},ze.unstable_useCacheRefresh=function(){return ue.H.useCacheRefresh()},ze.use=function(D){return ue.H.use(D)},ze.useActionState=function(D,J,oe){return ue.H.useActionState(D,J,oe)},ze.useCallback=function(D,J){return ue.H.useCallback(D,J)},ze.useContext=function(D){return ue.H.useContext(D)},ze.useDebugValue=function(){},ze.useDeferredValue=function(D,J){return ue.H.useDeferredValue(D,J)},ze.useEffect=function(D,J,oe){var ie=ue.H;if(typeof oe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ie.useEffect(D,J)},ze.useId=function(){return ue.H.useId()},ze.useImperativeHandle=function(D,J,oe){return ue.H.useImperativeHandle(D,J,oe)},ze.useInsertionEffect=function(D,J){return ue.H.useInsertionEffect(D,J)},ze.useLayoutEffect=function(D,J){return ue.H.useLayoutEffect(D,J)},ze.useMemo=function(D,J){return ue.H.useMemo(D,J)},ze.useOptimistic=function(D,J){return ue.H.useOptimistic(D,J)},ze.useReducer=function(D,J,oe){return ue.H.useReducer(D,J,oe)},ze.useRef=function(D){return ue.H.useRef(D)},ze.useState=function(D){return ue.H.useState(D)},ze.useSyncExternalStore=function(D,J,oe){return ue.H.useSyncExternalStore(D,J,oe)},ze.useTransition=function(){return ue.H.useTransition()},ze.version="19.1.0",ze}var v_;function dm(){return v_||(v_=1,Ad.exports=rb()),Ad.exports}var rt=dm();const n0=tb(rt);var wd={exports:{}},bl={},Sd={exports:{}},Rd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E_;function sb(){return E_||(E_=1,function(r){function e(F,se){var _e=F.length;F.push(se);e:for(;0<_e;){var tt=_e-1>>>1,D=F[tt];if(0<l(D,se))F[tt]=se,F[_e]=D,_e=tt;else break e}}function n(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var se=F[0],_e=F.pop();if(_e!==se){F[0]=_e;e:for(var tt=0,D=F.length,J=D>>>1;tt<J;){var oe=2*(tt+1)-1,ie=F[oe],ve=oe+1,Be=F[ve];if(0>l(ie,_e))ve<D&&0>l(Be,ie)?(F[tt]=Be,F[ve]=_e,tt=ve):(F[tt]=ie,F[oe]=_e,tt=oe);else if(ve<D&&0>l(Be,_e))F[tt]=Be,F[ve]=_e,tt=ve;else break e}}return se}function l(F,se){var _e=F.sortIndex-se.sortIndex;return _e!==0?_e:F.id-se.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var f=Date,p=f.now();r.unstable_now=function(){return f.now()-p}}var g=[],_=[],T=1,I=null,x=3,Q=!1,ee=!1,te=!1,ne=!1,xe=typeof setTimeout=="function"?setTimeout:null,we=typeof clearTimeout=="function"?clearTimeout:null,ge=typeof setImmediate<"u"?setImmediate:null;function Ge(F){for(var se=n(_);se!==null;){if(se.callback===null)s(_);else if(se.startTime<=F)s(_),se.sortIndex=se.expirationTime,e(g,se);else break;se=n(_)}}function ue(F){if(te=!1,Ge(F),!ee)if(n(g)!==null)ee=!0,ke||(ke=!0,P());else{var se=n(_);se!==null&&De(ue,se.startTime-F)}}var ke=!1,M=-1,S=5,C=-1;function O(){return ne?!0:!(r.unstable_now()-C<S)}function V(){if(ne=!1,ke){var F=r.unstable_now();C=F;var se=!0;try{e:{ee=!1,te&&(te=!1,we(M),M=-1),Q=!0;var _e=x;try{t:{for(Ge(F),I=n(g);I!==null&&!(I.expirationTime>F&&O());){var tt=I.callback;if(typeof tt=="function"){I.callback=null,x=I.priorityLevel;var D=tt(I.expirationTime<=F);if(F=r.unstable_now(),typeof D=="function"){I.callback=D,Ge(F),se=!0;break t}I===n(g)&&s(g),Ge(F)}else s(g);I=n(g)}if(I!==null)se=!0;else{var J=n(_);J!==null&&De(ue,J.startTime-F),se=!1}}break e}finally{I=null,x=_e,Q=!1}se=void 0}}finally{se?P():ke=!1}}}var P;if(typeof ge=="function")P=function(){ge(V)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,Tt=w.port2;w.port1.onmessage=V,P=function(){Tt.postMessage(null)}}else P=function(){xe(V,0)};function De(F,se){M=xe(function(){F(r.unstable_now())},se)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(F){F.callback=null},r.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<F?Math.floor(1e3/F):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_next=function(F){switch(x){case 1:case 2:case 3:var se=3;break;default:se=x}var _e=x;x=se;try{return F()}finally{x=_e}},r.unstable_requestPaint=function(){ne=!0},r.unstable_runWithPriority=function(F,se){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var _e=x;x=F;try{return se()}finally{x=_e}},r.unstable_scheduleCallback=function(F,se,_e){var tt=r.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?tt+_e:tt):_e=tt,F){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=_e+D,F={id:T++,callback:se,priorityLevel:F,startTime:_e,expirationTime:D,sortIndex:-1},_e>tt?(F.sortIndex=_e,e(_,F),n(g)===null&&F===n(_)&&(te?(we(M),M=-1):te=!0,De(ue,_e-tt))):(F.sortIndex=D,e(g,F),ee||Q||(ee=!0,ke||(ke=!0,P()))),F},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(F){var se=x;return function(){var _e=x;x=se;try{return F.apply(this,arguments)}finally{x=_e}}}}(Rd)),Rd}var T_;function ab(){return T_||(T_=1,Sd.exports=sb()),Sd.exports}var Id={exports:{}},_n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b_;function ob(){if(b_)return _n;b_=1;var r=dm();function e(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)_+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(g,_,T){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:I==null?null:""+I,children:g,containerInfo:_,implementation:T}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return _n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,_n.createPortal=function(g,_){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return c(g,_,null,T)},_n.flushSync=function(g){var _=f.T,T=s.p;try{if(f.T=null,s.p=2,g)return g()}finally{f.T=_,s.p=T,s.d.f()}},_n.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,s.d.C(g,_))},_n.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},_n.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var T=_.as,I=p(T,_.crossOrigin),x=typeof _.integrity=="string"?_.integrity:void 0,Q=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;T==="style"?s.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:I,integrity:x,fetchPriority:Q}):T==="script"&&s.d.X(g,{crossOrigin:I,integrity:x,fetchPriority:Q,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},_n.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var T=p(_.as,_.crossOrigin);s.d.M(g,{crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&s.d.M(g)},_n.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var T=_.as,I=p(T,_.crossOrigin);s.d.L(g,T,{crossOrigin:I,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},_n.preloadModule=function(g,_){if(typeof g=="string")if(_){var T=p(_.as,_.crossOrigin);s.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else s.d.m(g)},_n.requestFormReset=function(g){s.d.r(g)},_n.unstable_batchedUpdates=function(g,_){return g(_)},_n.useFormState=function(g,_,T){return f.H.useFormState(g,_,T)},_n.useFormStatus=function(){return f.H.useHostTransitionStatus()},_n.version="19.1.0",_n}var A_;function lb(){if(A_)return Id.exports;A_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Id.exports=ob(),Id.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w_;function ub(){if(w_)return bl;w_=1;var r=ab(),e=dm(),n=lb();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(c(t)!==t)throw Error(s(188))}function g(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,o=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return p(h),t;if(d===o)return p(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=d;else{for(var v=!1,E=h.child;E;){if(E===a){v=!0,a=h,o=d;break}if(E===o){v=!0,o=h,a=d;break}E=E.sibling}if(!v){for(E=d.child;E;){if(E===a){v=!0,a=d,o=h;break}if(E===o){v=!0,o=d,a=h;break}E=E.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function _(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=_(t),i!==null)return i;t=t.sibling}return null}var T=Object.assign,I=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),Q=Symbol.for("react.portal"),ee=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),xe=Symbol.for("react.provider"),we=Symbol.for("react.consumer"),ge=Symbol.for("react.context"),Ge=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),ke=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function P(t){return t===null||typeof t!="object"?null:(t=V&&t[V]||t["@@iterator"],typeof t=="function"?t:null)}var w=Symbol.for("react.client.reference");function Tt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===w?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ee:return"Fragment";case ne:return"Profiler";case te:return"StrictMode";case ue:return"Suspense";case ke:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Q:return"Portal";case ge:return(t.displayName||"Context")+".Provider";case we:return(t._context.displayName||"Context")+".Consumer";case Ge:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case M:return i=t.displayName||null,i!==null?i:Tt(t.type)||"Memo";case S:i=t._payload,t=t._init;try{return Tt(t(i))}catch{}}return null}var De=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},tt=[],D=-1;function J(t){return{current:t}}function oe(t){0>D||(t.current=tt[D],tt[D]=null,D--)}function ie(t,i){D++,tt[D]=t.current,t.current=i}var ve=J(null),Be=J(null),Ie=J(null),Ct=J(null);function ot(t,i){switch(ie(Ie,i),ie(Be,t),ie(ve,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?Gy(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=Gy(i),t=Fy(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}oe(ve),ie(ve,t)}function An(){oe(ve),oe(Be),oe(Ie)}function Zn(t){t.memoizedState!==null&&ie(Ct,t);var i=ve.current,a=Fy(i,t.type);i!==a&&(ie(Be,t),ie(ve,a))}function Cn(t){Be.current===t&&(oe(ve),oe(Be)),Ct.current===t&&(oe(Ct),gl._currentValue=_e)}var Wn=Object.prototype.hasOwnProperty,kn=r.unstable_scheduleCallback,Gt=r.unstable_cancelCallback,je=r.unstable_shouldYield,Wt=r.unstable_requestPaint,kt=r.unstable_now,mi=r.unstable_getCurrentPriorityLevel,vs=r.unstable_ImmediatePriority,Ln=r.unstable_UserBlockingPriority,xn=r.unstable_NormalPriority,bi=r.unstable_LowPriority,Ot=r.unstable_IdlePriority,Lt=r.log,Es=r.unstable_setDisableYieldValue,bt=null,nt=null;function gn(t){if(typeof Lt=="function"&&Es(t),nt&&typeof nt.setStrictMode=="function")try{nt.setStrictMode(bt,t)}catch{}}var Jt=Math.clz32?Math.clz32:Gi,Ts=Math.log,bo=Math.LN2;function Gi(t){return t>>>=0,t===0?32:31-(Ts(t)/bo|0)|0}var Fi=256,Qi=4194304;function zn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Sr(t,i,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var E=o&134217727;return E!==0?(o=E&~d,o!==0?h=zn(o):(v&=E,v!==0?h=zn(v):a||(a=E&~t,a!==0&&(h=zn(a))))):(E=o&~d,E!==0?h=zn(E):v!==0?h=zn(v):a||(a=o&~t,a!==0&&(h=zn(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function Yi(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Rr(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bs(){var t=Fi;return Fi<<=1,(Fi&4194048)===0&&(Fi=256),t}function As(){var t=Qi;return Qi<<=1,(Qi&62914560)===0&&(Qi=4194304),t}function Jn(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function pi(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ws(t,i,a,o,h,d){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,R=t.expirationTimes,B=t.hiddenUpdates;for(a=v&~a;0<a;){var K=31-Jt(a),$=1<<K;E[K]=0,R[K]=-1;var q=B[K];if(q!==null)for(B[K]=null,K=0;K<q.length;K++){var H=q[K];H!==null&&(H.lane&=-536870913)}a&=~$}o!==0&&Bn(t,o,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~i))}function Bn(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var o=31-Jt(i);t.entangledLanes|=i,t.entanglements[o]=t.entanglements[o]|1073741824|a&4194090}function A(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var o=31-Jt(a),h=1<<o;h&i|t[o]&i&&(t[o]|=i),a&=~h}}function Y(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function j(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function re(){var t=se.p;return t!==0?t:(t=window.event,t===void 0?32:c_(t.type))}function me(t,i){var a=se.p;try{return se.p=t,i()}finally{se.p=a}}var ce=Math.random().toString(36).slice(2),le="__reactFiber$"+ce,Ee="__reactProps$"+ce,Ue="__reactContainer$"+ce,ye="__reactEvents$"+ce,Le="__reactListeners$"+ce,he="__reactHandles$"+ce,Qe="__reactResources$"+ce,Ne="__reactMarker$"+ce;function st(t){delete t[le],delete t[Ee],delete t[ye],delete t[Le],delete t[he]}function vt(t){var i=t[le];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Ue]||a[le]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=Xy(t);t!==null;){if(a=t[le])return a;t=Xy(t)}return i}t=a,a=t.parentNode}return null}function ft(t){if(t=t[le]||t[Ue]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function yt(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function At(t){var i=t[Qe];return i||(i=t[Qe]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Te(t){t[Ne]=!0}var Mt=new Set,xt={};function en(t,i){jn(t,i),jn(t+"Capture",i)}function jn(t,i){for(xt[t]=i,t=0;t<i.length;t++)Mt.add(i[t])}var Ai=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wi={},ei={};function iu(t){return Wn.call(ei,t)?!0:Wn.call(wi,t)?!1:Ai.test(t)?ei[t]=!0:(wi[t]=!0,!1)}function Ir(t,i,a){if(iu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function Si(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function ln(t,i,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+o)}}var Ss,ru;function Ki(t){if(Ss===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Ss=i&&i[1]||"",ru=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ss+t+ru}var la=!1;function ua(t,i){if(!t||la)return"";la=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(H){var q=H}Reflect.construct(t,[],$)}else{try{$.call()}catch(H){q=H}t.call($.prototype)}}else{try{throw Error()}catch(H){q=H}($=t())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(H){if(H&&q&&typeof H.stack=="string")return[H.stack,q.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),v=d[0],E=d[1];if(v&&E){var R=v.split(`
`),B=E.split(`
`);for(h=o=0;o<R.length&&!R[o].includes("DetermineComponentFrameRoot");)o++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(o===R.length||h===B.length)for(o=R.length-1,h=B.length-1;1<=o&&0<=h&&R[o]!==B[h];)h--;for(;1<=o&&0<=h;o--,h--)if(R[o]!==B[h]){if(o!==1||h!==1)do if(o--,h--,0>h||R[o]!==B[h]){var K=`
`+R[o].replace(" at new "," at ");return t.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",t.displayName)),K}while(1<=o&&0<=h);break}}}finally{la=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Ki(a):""}function Ao(t){switch(t.tag){case 26:case 27:case 5:return Ki(t.type);case 16:return Ki("Lazy");case 13:return Ki("Suspense");case 19:return Ki("SuspenseList");case 0:case 15:return ua(t.type,!1);case 11:return ua(t.type.render,!1);case 1:return ua(t.type,!0);case 31:return Ki("Activity");default:return""}}function ca(t){try{var i="";do i+=Ao(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function wn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wo(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Sh(t){var i=wo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),o=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){o=""+v,d.call(this,v)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function ha(t){t._valueTracker||(t._valueTracker=Sh(t))}function So(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return t&&(o=wo(t)?t.checked?"true":"false":t.value),t=o,t!==a?(i.setValue(t),!0):!1}function Rs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Rh=/[\n"\\]/g;function zt(t){return t.replace(Rh,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function qn(t,i,a,o,h,d,v,E){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),i!=null?v==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+wn(i)):t.value!==""+wn(i)&&(t.value=""+wn(i)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),i!=null?Cr(t,v,wn(i)):a!=null?Cr(t,v,wn(a)):o!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+wn(E):t.removeAttribute("name")}function Is(t,i,a,o,h,d,v,E){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+wn(a):"",i=i!=null?""+wn(i):a,E||i===t.value||(t.value=i),t.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=E?t.checked:!!o,t.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v)}function Cr(t,i,a){i==="number"&&Rs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Xi(t,i,a,o){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+wn(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function dt(t,i,a){if(i!=null&&(i=""+wn(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+wn(a):""}function Cs(t,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(De(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=wn(i),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o)}function ti(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var xs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function su(t,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":o?t.setProperty(i,a):typeof a!="number"||a===0||xs.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Ro(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&su(t,h,o)}else for(var d in i)i.hasOwnProperty(d)&&su(t,d,i[d])}function Io(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ih=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ch=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fa(t){return Ch.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var $i=null;function ni(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zi=null,Wi=null;function Co(t){var i=ft(t);if(i&&(t=i.stateNode)){var a=t[Ee]||null;e:switch(t=i.stateNode,i.type){case"input":if(qn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+zt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==t&&o.form===t.form){var h=o[Ee]||null;if(!h)throw Error(s(90));qn(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===t.form&&So(o)}break e;case"textarea":dt(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Xi(t,!!a.multiple,i,!1)}}}var Ri=!1;function au(t,i,a){if(Ri)return t(i,a);Ri=!0;try{var o=t(i);return o}finally{if(Ri=!1,(Zi!==null||Wi!==null)&&(Ju(),Zi&&(i=Zi,t=Wi,Wi=Zi=null,Co(i),t)))for(i=0;i<t.length;i++)Co(t[i])}}function Ds(t,i){var a=t.stateNode;if(a===null)return null;var o=a[Ee]||null;if(o===null)return null;a=o[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ii=!1;if(gi)try{var Ns={};Object.defineProperty(Ns,"passive",{get:function(){ii=!0}}),window.addEventListener("test",Ns,Ns),window.removeEventListener("test",Ns,Ns)}catch{ii=!1}var Ii=null,xr=null,Ji=null;function xo(){if(Ji)return Ji;var t,i=xr,a=i.length,o,h="value"in Ii?Ii.value:Ii.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var v=a-t;for(o=1;o<=v&&i[a-o]===h[d-o];o++);return Ji=h.slice(t,1<o?1-o:void 0)}function Ci(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function xi(){return!0}function Do(){return!1}function tn(t){function i(a,o,h,d,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(d):d[E]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?xi:Do,this.isPropagationStopped=Do,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=xi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=xi)},persist:function(){},isPersistent:xi}),i}var lt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},da=tn(lt),Os=T({},lt,{view:0,detail:0}),ou=tn(Os),ma,pa,Di,Ms=T({},Os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ps,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Di&&(Di&&t.type==="mousemove"?(ma=t.screenX-Di.screenX,pa=t.screenY-Di.screenY):pa=ma=0,Di=t),ma)},movementY:function(t){return"movementY"in t?t.movementY:pa}}),ri=tn(Ms),lu=T({},Ms,{dataTransfer:0}),xh=tn(lu),Vs=T({},Os,{relatedTarget:0}),ga=tn(Vs),No=T({},lt,{animationName:0,elapsedTime:0,pseudoElement:0}),ya=tn(No),uu=T({},lt,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_a=tn(uu),Dh=T({},lt,{data:0}),Oo=tn(Dh),Us={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mo(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=hu[t])?!!i[t]:!1}function Ps(){return Mo}var fu=T({},Os,{key:function(t){if(t.key){var i=Us[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Ci(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ps,charCode:function(t){return t.type==="keypress"?Ci(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ci(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),va=tn(fu),du=T({},Ms,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vo=tn(du),er=T({},Os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ps}),mu=tn(er),pu=T({},lt,{propertyName:0,elapsedTime:0,pseudoElement:0}),gu=tn(pu),yu=T({},Ms,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ea=tn(yu),Sn=T({},lt,{newState:0,oldState:0}),_u=tn(Sn),vu=[9,13,27,32],Ni=gi&&"CompositionEvent"in window,u=null;gi&&"documentMode"in document&&(u=document.documentMode);var m=gi&&"TextEvent"in window&&!u,y=gi&&(!Ni||u&&8<u&&11>=u),b=" ",L=!1;function G(t,i){switch(t){case"keyup":return vu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ae(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ze=!1;function Ft(t,i){switch(t){case"compositionend":return ae(i);case"keypress":return i.which!==32?null:(L=!0,b);case"textInput":return t=i.data,t===b&&L?null:t;default:return null}}function We(t,i){if(Ze)return t==="compositionend"||!Ni&&G(t,i)?(t=xo(),Ji=xr=Ii=null,Ze=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return y&&i.locale!=="ko"?null:i.data;default:return null}}var nn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qt(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!nn[t.type]:i==="textarea"}function tr(t,i,a,o){Zi?Wi?Wi.push(o):Wi=[o]:Zi=o,i=sc(i,"onChange"),0<i.length&&(a=new da("onChange","change",null,a,o),t.push({event:a,listeners:i}))}var un=null,Oi=null;function Uo(t){zy(t,0)}function Eu(t){var i=yt(t);if(So(i))return t}function ap(t,i){if(t==="change")return i}var op=!1;if(gi){var Nh;if(gi){var Oh="oninput"in document;if(!Oh){var lp=document.createElement("div");lp.setAttribute("oninput","return;"),Oh=typeof lp.oninput=="function"}Nh=Oh}else Nh=!1;op=Nh&&(!document.documentMode||9<document.documentMode)}function up(){un&&(un.detachEvent("onpropertychange",cp),Oi=un=null)}function cp(t){if(t.propertyName==="value"&&Eu(Oi)){var i=[];tr(i,Oi,t,ni(t)),au(Uo,i)}}function N1(t,i,a){t==="focusin"?(up(),un=i,Oi=a,un.attachEvent("onpropertychange",cp)):t==="focusout"&&up()}function O1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Eu(Oi)}function M1(t,i){if(t==="click")return Eu(i)}function V1(t,i){if(t==="input"||t==="change")return Eu(i)}function U1(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Hn=typeof Object.is=="function"?Object.is:U1;function Po(t,i){if(Hn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!Wn.call(i,h)||!Hn(t[h],i[h]))return!1}return!0}function hp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fp(t,i){var a=hp(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=i&&o>=i)return{node:a,offset:i-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=hp(a)}}function dp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?dp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function mp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Rs(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Rs(t.document)}return i}function Mh(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var P1=gi&&"documentMode"in document&&11>=document.documentMode,Ta=null,Vh=null,ko=null,Uh=!1;function pp(t,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Uh||Ta==null||Ta!==Rs(o)||(o=Ta,"selectionStart"in o&&Mh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),ko&&Po(ko,o)||(ko=o,o=sc(Vh,"onSelect"),0<o.length&&(i=new da("onSelect","select",null,i,a),t.push({event:i,listeners:o}),i.target=Ta)))}function ks(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var ba={animationend:ks("Animation","AnimationEnd"),animationiteration:ks("Animation","AnimationIteration"),animationstart:ks("Animation","AnimationStart"),transitionrun:ks("Transition","TransitionRun"),transitionstart:ks("Transition","TransitionStart"),transitioncancel:ks("Transition","TransitionCancel"),transitionend:ks("Transition","TransitionEnd")},Ph={},gp={};gi&&(gp=document.createElement("div").style,"AnimationEvent"in window||(delete ba.animationend.animation,delete ba.animationiteration.animation,delete ba.animationstart.animation),"TransitionEvent"in window||delete ba.transitionend.transition);function Ls(t){if(Ph[t])return Ph[t];if(!ba[t])return t;var i=ba[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in gp)return Ph[t]=i[a];return t}var yp=Ls("animationend"),_p=Ls("animationiteration"),vp=Ls("animationstart"),k1=Ls("transitionrun"),L1=Ls("transitionstart"),z1=Ls("transitioncancel"),Ep=Ls("transitionend"),Tp=new Map,kh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kh.push("scrollEnd");function yi(t,i){Tp.set(t,i),en(i,[t])}var bp=new WeakMap;function si(t,i){if(typeof t=="object"&&t!==null){var a=bp.get(t);return a!==void 0?a:(i={value:t,source:i,stack:ca(i)},bp.set(t,i),i)}return{value:t,source:i,stack:ca(i)}}var ai=[],Aa=0,Lh=0;function Tu(){for(var t=Aa,i=Lh=Aa=0;i<t;){var a=ai[i];ai[i++]=null;var o=ai[i];ai[i++]=null;var h=ai[i];ai[i++]=null;var d=ai[i];if(ai[i++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}d!==0&&Ap(a,h,d)}}function bu(t,i,a,o){ai[Aa++]=t,ai[Aa++]=i,ai[Aa++]=a,ai[Aa++]=o,Lh|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function zh(t,i,a,o){return bu(t,i,a,o),Au(t)}function wa(t,i){return bu(t,null,null,i),Au(t)}function Ap(t,i,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,o=d.alternate,o!==null&&(o.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-Jt(a),t=d.hiddenUpdates,o=t[h],o===null?t[h]=[i]:o.push(i),i.lane=a|536870912),d):null}function Au(t){if(50<ll)throw ll=0,Qf=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Sa={};function B1(t,i,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(t,i,a,o){return new B1(t,i,a,o)}function Bh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function nr(t,i){var a=t.alternate;return a===null?(a=Gn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function wp(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function wu(t,i,a,o,h,d){var v=0;if(o=t,typeof t=="function")Bh(t)&&(v=1);else if(typeof t=="string")v=qT(t,a,ve.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=Gn(31,a,i,h),t.elementType=C,t.lanes=d,t;case ee:return zs(a.children,h,d,i);case te:v=8,h|=24;break;case ne:return t=Gn(12,a,i,h|2),t.elementType=ne,t.lanes=d,t;case ue:return t=Gn(13,a,i,h),t.elementType=ue,t.lanes=d,t;case ke:return t=Gn(19,a,i,h),t.elementType=ke,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xe:case ge:v=10;break e;case we:v=9;break e;case Ge:v=11;break e;case M:v=14;break e;case S:v=16,o=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),o=null}return i=Gn(v,a,i,h),i.elementType=t,i.type=o,i.lanes=d,i}function zs(t,i,a,o){return t=Gn(7,t,o,i),t.lanes=a,t}function jh(t,i,a){return t=Gn(6,t,null,i),t.lanes=a,t}function qh(t,i,a){return i=Gn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Ra=[],Ia=0,Su=null,Ru=0,oi=[],li=0,Bs=null,ir=1,rr="";function js(t,i){Ra[Ia++]=Ru,Ra[Ia++]=Su,Su=t,Ru=i}function Sp(t,i,a){oi[li++]=ir,oi[li++]=rr,oi[li++]=Bs,Bs=t;var o=ir;t=rr;var h=32-Jt(o)-1;o&=~(1<<h),a+=1;var d=32-Jt(i)+h;if(30<d){var v=h-h%5;d=(o&(1<<v)-1).toString(32),o>>=v,h-=v,ir=1<<32-Jt(i)+h|a<<h|o,rr=d+t}else ir=1<<d|a<<h|o,rr=t}function Hh(t){t.return!==null&&(js(t,1),Sp(t,1,0))}function Gh(t){for(;t===Su;)Su=Ra[--Ia],Ra[Ia]=null,Ru=Ra[--Ia],Ra[Ia]=null;for(;t===Bs;)Bs=oi[--li],oi[li]=null,rr=oi[--li],oi[li]=null,ir=oi[--li],oi[li]=null}var Rn=null,Dt=null,at=!1,qs=null,Mi=!1,Fh=Error(s(519));function Hs(t){var i=Error(s(418,""));throw Bo(si(i,t)),Fh}function Rp(t){var i=t.stateNode,a=t.type,o=t.memoizedProps;switch(i[le]=t,i[Ee]=o,a){case"dialog":Ke("cancel",i),Ke("close",i);break;case"iframe":case"object":case"embed":Ke("load",i);break;case"video":case"audio":for(a=0;a<cl.length;a++)Ke(cl[a],i);break;case"source":Ke("error",i);break;case"img":case"image":case"link":Ke("error",i),Ke("load",i);break;case"details":Ke("toggle",i);break;case"input":Ke("invalid",i),Is(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),ha(i);break;case"select":Ke("invalid",i);break;case"textarea":Ke("invalid",i),Cs(i,o.value,o.defaultValue,o.children),ha(i)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||Hy(i.textContent,a)?(o.popover!=null&&(Ke("beforetoggle",i),Ke("toggle",i)),o.onScroll!=null&&Ke("scroll",i),o.onScrollEnd!=null&&Ke("scrollend",i),o.onClick!=null&&(i.onclick=ac),i=!0):i=!1,i||Hs(t)}function Ip(t){for(Rn=t.return;Rn;)switch(Rn.tag){case 5:case 13:Mi=!1;return;case 27:case 3:Mi=!0;return;default:Rn=Rn.return}}function Lo(t){if(t!==Rn)return!1;if(!at)return Ip(t),at=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||ld(t.type,t.memoizedProps)),a=!a),a&&Dt&&Hs(t),Ip(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){Dt=vi(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}Dt=null}}else i===27?(i=Dt,Fr(t.type)?(t=fd,fd=null,Dt=t):Dt=i):Dt=Rn?vi(t.stateNode.nextSibling):null;return!0}function zo(){Dt=Rn=null,at=!1}function Cp(){var t=qs;return t!==null&&(On===null?On=t:On.push.apply(On,t),qs=null),t}function Bo(t){qs===null?qs=[t]:qs.push(t)}var Qh=J(null),Gs=null,sr=null;function Dr(t,i,a){ie(Qh,i._currentValue),i._currentValue=a}function ar(t){t._currentValue=Qh.current,oe(Qh)}function Yh(t,i,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),t===a)break;t=t.return}}function Kh(t,i,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;e:for(;d!==null;){var E=d;d=h;for(var R=0;R<i.length;R++)if(E.context===i[R]){d.lanes|=a,E=d.alternate,E!==null&&(E.lanes|=a),Yh(d.return,a,t),o||(v=null);break e}d=E.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),Yh(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function jo(t,i,a,o){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=h.type;Hn(h.pendingProps.value,v.value)||(t!==null?t.push(E):t=[E])}}else if(h===Ct.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(gl):t=[gl])}h=h.return}t!==null&&Kh(i,t,a,o),i.flags|=262144}function Iu(t){for(t=t.firstContext;t!==null;){if(!Hn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Fs(t){Gs=t,sr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function yn(t){return xp(Gs,t)}function Cu(t,i){return Gs===null&&Fs(t),xp(t,i)}function xp(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},sr===null){if(t===null)throw Error(s(308));sr=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else sr=sr.next=i;return a}var j1=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},q1=r.unstable_scheduleCallback,H1=r.unstable_NormalPriority,Yt={$$typeof:ge,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xh(){return{controller:new j1,data:new Map,refCount:0}}function qo(t){t.refCount--,t.refCount===0&&q1(H1,function(){t.controller.abort()})}var Ho=null,$h=0,Ca=0,xa=null;function G1(t,i){if(Ho===null){var a=Ho=[];$h=0,Ca=Jf(),xa={status:"pending",value:void 0,then:function(o){a.push(o)}}}return $h++,i.then(Dp,Dp),i}function Dp(){if(--$h===0&&Ho!==null){xa!==null&&(xa.status="fulfilled");var t=Ho;Ho=null,Ca=0,xa=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function F1(t,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Np=F.S;F.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&G1(t,i),Np!==null&&Np(t,i)};var Qs=J(null);function Zh(){var t=Qs.current;return t!==null?t:Et.pooledCache}function xu(t,i){i===null?ie(Qs,Qs.current):ie(Qs,i.pool)}function Op(){var t=Zh();return t===null?null:{parent:Yt._currentValue,pool:t}}var Go=Error(s(460)),Mp=Error(s(474)),Du=Error(s(542)),Wh={then:function(){}};function Vp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Nu(){}function Up(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Nu,Nu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,kp(t),t;default:if(typeof i.status=="string")i.then(Nu,Nu);else{if(t=Et,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,kp(t),t}throw Fo=i,Go}}var Fo=null;function Pp(){if(Fo===null)throw Error(s(459));var t=Fo;return Fo=null,t}function kp(t){if(t===Go||t===Du)throw Error(s(483))}var Nr=!1;function Jh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ef(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Or(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Mr(t,i,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(ct&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=Au(t),Ap(t,null,a),i}return bu(t,o,i,a),Au(t)}function Qo(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,A(t,a)}}function tf(t,i){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var nf=!1;function Yo(){if(nf){var t=xa;if(t!==null)throw t}}function Ko(t,i,a,o){nf=!1;var h=t.updateQueue;Nr=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var R=E,B=R.next;R.next=null,v===null?d=B:v.next=B,v=R;var K=t.alternate;K!==null&&(K=K.updateQueue,E=K.lastBaseUpdate,E!==v&&(E===null?K.firstBaseUpdate=B:E.next=B,K.lastBaseUpdate=R))}if(d!==null){var $=h.baseState;v=0,K=B=R=null,E=d;do{var q=E.lane&-536870913,H=q!==E.lane;if(H?(Je&q)===q:(o&q)===q){q!==0&&q===Ca&&(nf=!0),K!==null&&(K=K.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Oe=t,Se=E;q=i;var gt=a;switch(Se.tag){case 1:if(Oe=Se.payload,typeof Oe=="function"){$=Oe.call(gt,$,q);break e}$=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Se.payload,q=typeof Oe=="function"?Oe.call(gt,$,q):Oe,q==null)break e;$=T({},$,q);break e;case 2:Nr=!0}}q=E.callback,q!==null&&(t.flags|=64,H&&(t.flags|=8192),H=h.callbacks,H===null?h.callbacks=[q]:H.push(q))}else H={lane:q,tag:E.tag,payload:E.payload,callback:E.callback,next:null},K===null?(B=K=H,R=$):K=K.next=H,v|=q;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;H=E,E=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);K===null&&(R=$),h.baseState=R,h.firstBaseUpdate=B,h.lastBaseUpdate=K,d===null&&(h.shared.lanes=0),jr|=v,t.lanes=v,t.memoizedState=$}}function Lp(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function zp(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Lp(a[t],i)}var Da=J(null),Ou=J(0);function Bp(t,i){t=dr,ie(Ou,t),ie(Da,i),dr=t|i.baseLanes}function rf(){ie(Ou,dr),ie(Da,Da.current)}function sf(){dr=Ou.current,oe(Da),oe(Ou)}var Vr=0,qe=null,mt=null,Bt=null,Mu=!1,Na=!1,Ys=!1,Vu=0,Xo=0,Oa=null,Q1=0;function Vt(){throw Error(s(321))}function af(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!Hn(t[a],i[a]))return!1;return!0}function of(t,i,a,o,h,d){return Vr=d,qe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,F.H=t===null||t.memoizedState===null?Ag:wg,Ys=!1,d=a(o,h),Ys=!1,Na&&(d=qp(i,a,o,h)),jp(t),d}function jp(t){F.H=Bu;var i=mt!==null&&mt.next!==null;if(Vr=0,Bt=mt=qe=null,Mu=!1,Xo=0,Oa=null,i)throw Error(s(300));t===null||rn||(t=t.dependencies,t!==null&&Iu(t)&&(rn=!0))}function qp(t,i,a,o){qe=t;var h=0;do{if(Na&&(Oa=null),Xo=0,Na=!1,25<=h)throw Error(s(301));if(h+=1,Bt=mt=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}F.H=J1,d=i(a,o)}while(Na);return d}function Y1(){var t=F.H,i=t.useState()[0];return i=typeof i.then=="function"?$o(i):i,t=t.useState()[0],(mt!==null?mt.memoizedState:null)!==t&&(qe.flags|=1024),i}function lf(){var t=Vu!==0;return Vu=0,t}function uf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function cf(t){if(Mu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Mu=!1}Vr=0,Bt=mt=qe=null,Na=!1,Xo=Vu=0,Oa=null}function Dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?qe.memoizedState=Bt=t:Bt=Bt.next=t,Bt}function jt(){if(mt===null){var t=qe.alternate;t=t!==null?t.memoizedState:null}else t=mt.next;var i=Bt===null?qe.memoizedState:Bt.next;if(i!==null)Bt=i,mt=t;else{if(t===null)throw qe.alternate===null?Error(s(467)):Error(s(310));mt=t,t={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},Bt===null?qe.memoizedState=Bt=t:Bt=Bt.next=t}return Bt}function hf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $o(t){var i=Xo;return Xo+=1,Oa===null&&(Oa=[]),t=Up(Oa,t,i),i=qe,(Bt===null?i.memoizedState:Bt.next)===null&&(i=i.alternate,F.H=i===null||i.memoizedState===null?Ag:wg),t}function Uu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return $o(t);if(t.$$typeof===ge)return yn(t)}throw Error(s(438,String(t)))}function ff(t){var i=null,a=qe.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=qe.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=hf(),qe.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),o=0;o<t;o++)a[o]=O;return i.index++,a}function or(t,i){return typeof i=="function"?i(t):i}function Pu(t){var i=jt();return df(i,mt,t)}function df(t,i,a){var o=t.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=t.baseQueue,d=o.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,o.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var E=v=null,R=null,B=i,K=!1;do{var $=B.lane&-536870913;if($!==B.lane?(Je&$)===$:(Vr&$)===$){var q=B.revertLane;if(q===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),$===Ca&&(K=!0);else if((Vr&q)===q){B=B.next,q===Ca&&(K=!0);continue}else $={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},R===null?(E=R=$,v=d):R=R.next=$,qe.lanes|=q,jr|=q;$=B.action,Ys&&a(d,$),d=B.hasEagerState?B.eagerState:a(d,$)}else q={lane:$,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},R===null?(E=R=q,v=d):R=R.next=q,qe.lanes|=$,jr|=$;B=B.next}while(B!==null&&B!==i);if(R===null?v=d:R.next=E,!Hn(d,t.memoizedState)&&(rn=!0,K&&(a=xa,a!==null)))throw a;t.memoizedState=d,t.baseState=v,t.baseQueue=R,o.lastRenderedState=d}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function mf(t){var i=jt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=t(d,v.action),v=v.next;while(v!==h);Hn(d,i.memoizedState)||(rn=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,o]}function Hp(t,i,a){var o=qe,h=jt(),d=at;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!Hn((mt||h).memoizedState,a);v&&(h.memoizedState=a,rn=!0),h=h.queue;var E=Qp.bind(null,o,h,t);if(Zo(2048,8,E,[t]),h.getSnapshot!==i||v||Bt!==null&&Bt.memoizedState.tag&1){if(o.flags|=2048,Ma(9,ku(),Fp.bind(null,o,h,a,i),null),Et===null)throw Error(s(349));d||(Vr&124)!==0||Gp(o,i,a)}return a}function Gp(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=qe.updateQueue,i===null?(i=hf(),qe.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Fp(t,i,a,o){i.value=a,i.getSnapshot=o,Yp(i)&&Kp(t)}function Qp(t,i,a){return a(function(){Yp(i)&&Kp(t)})}function Yp(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!Hn(t,a)}catch{return!0}}function Kp(t){var i=wa(t,2);i!==null&&Xn(i,t,2)}function pf(t){var i=Dn();if(typeof t=="function"){var a=t;if(t=a(),Ys){gn(!0);try{a()}finally{gn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:t},i}function Xp(t,i,a,o){return t.baseState=a,df(t,mt,typeof o=="function"?o:or)}function K1(t,i,a,o,h){if(zu(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};F.T!==null?a(!0):d.isTransition=!1,o(d),a=i.pending,a===null?(d.next=i.pending=d,$p(i,d)):(d.next=a.next,i.pending=a.next=d)}}function $p(t,i){var a=i.action,o=i.payload,h=t.state;if(i.isTransition){var d=F.T,v={};F.T=v;try{var E=a(h,o),R=F.S;R!==null&&R(v,E),Zp(t,i,E)}catch(B){gf(t,i,B)}finally{F.T=d}}else try{d=a(h,o),Zp(t,i,d)}catch(B){gf(t,i,B)}}function Zp(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Wp(t,i,o)},function(o){return gf(t,i,o)}):Wp(t,i,a)}function Wp(t,i,a){i.status="fulfilled",i.value=a,Jp(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,$p(t,a)))}function gf(t,i,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,Jp(i),i=i.next;while(i!==o)}t.action=null}function Jp(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function eg(t,i){return i}function tg(t,i){if(at){var a=Et.formState;if(a!==null){e:{var o=qe;if(at){if(Dt){t:{for(var h=Dt,d=Mi;h.nodeType!==8;){if(!d){h=null;break t}if(h=vi(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){Dt=vi(h.nextSibling),o=h.data==="F!";break e}}Hs(o)}o=!1}o&&(i=a[0])}}return a=Dn(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:eg,lastRenderedState:i},a.queue=o,a=Eg.bind(null,qe,o),o.dispatch=a,o=pf(!1),d=Tf.bind(null,qe,!1,o.queue),o=Dn(),h={state:i,dispatch:null,action:t,pending:null},o.queue=h,a=K1.bind(null,qe,h,d,a),h.dispatch=a,o.memoizedState=t,[i,a,!1]}function ng(t){var i=jt();return ig(i,mt,t)}function ig(t,i,a){if(i=df(t,i,eg)[0],t=Pu(or)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=$o(i)}catch(v){throw v===Go?Du:v}else o=i;i=jt();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(qe.flags|=2048,Ma(9,ku(),X1.bind(null,h,a),null)),[o,d,t]}function X1(t,i){t.action=i}function rg(t){var i=jt(),a=mt;if(a!==null)return ig(i,a,t);jt(),i=i.memoizedState,a=jt();var o=a.queue.dispatch;return a.memoizedState=t,[i,o,!1]}function Ma(t,i,a,o){return t={tag:t,create:a,deps:o,inst:i,next:null},i=qe.updateQueue,i===null&&(i=hf(),qe.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,i.lastEffect=t),t}function ku(){return{destroy:void 0,resource:void 0}}function sg(){return jt().memoizedState}function Lu(t,i,a,o){var h=Dn();o=o===void 0?null:o,qe.flags|=t,h.memoizedState=Ma(1|i,ku(),a,o)}function Zo(t,i,a,o){var h=jt();o=o===void 0?null:o;var d=h.memoizedState.inst;mt!==null&&o!==null&&af(o,mt.memoizedState.deps)?h.memoizedState=Ma(i,d,a,o):(qe.flags|=t,h.memoizedState=Ma(1|i,d,a,o))}function ag(t,i){Lu(8390656,8,t,i)}function og(t,i){Zo(2048,8,t,i)}function lg(t,i){return Zo(4,2,t,i)}function ug(t,i){return Zo(4,4,t,i)}function cg(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function hg(t,i,a){a=a!=null?a.concat([t]):null,Zo(4,4,cg.bind(null,i,t),a)}function yf(){}function fg(t,i){var a=jt();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&af(i,o[1])?o[0]:(a.memoizedState=[t,i],t)}function dg(t,i){var a=jt();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&af(i,o[1]))return o[0];if(o=t(),Ys){gn(!0);try{t()}finally{gn(!1)}}return a.memoizedState=[o,i],o}function _f(t,i,a){return a===void 0||(Vr&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=gy(),qe.lanes|=t,jr|=t,a)}function mg(t,i,a,o){return Hn(a,i)?a:Da.current!==null?(t=_f(t,a,o),Hn(t,i)||(rn=!0),t):(Vr&42)===0?(rn=!0,t.memoizedState=a):(t=gy(),qe.lanes|=t,jr|=t,i)}function pg(t,i,a,o,h){var d=se.p;se.p=d!==0&&8>d?d:8;var v=F.T,E={};F.T=E,Tf(t,!1,i,a);try{var R=h(),B=F.S;if(B!==null&&B(E,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var K=F1(R,o);Wo(t,i,K,Kn(t))}else Wo(t,i,o,Kn(t))}catch($){Wo(t,i,{then:function(){},status:"rejected",reason:$},Kn())}finally{se.p=d,F.T=v}}function $1(){}function vf(t,i,a,o){if(t.tag!==5)throw Error(s(476));var h=gg(t).queue;pg(t,h,i,_e,a===null?$1:function(){return yg(t),a(o)})}function gg(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:_e},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function yg(t){var i=gg(t).next.queue;Wo(t,i,{},Kn())}function Ef(){return yn(gl)}function _g(){return jt().memoizedState}function vg(){return jt().memoizedState}function Z1(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Kn();t=Or(a);var o=Mr(i,t,a);o!==null&&(Xn(o,i,a),Qo(o,i,a)),i={cache:Xh()},t.payload=i;return}i=i.return}}function W1(t,i,a){var o=Kn();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},zu(t)?Tg(i,a):(a=zh(t,i,a,o),a!==null&&(Xn(a,t,o),bg(a,i,o)))}function Eg(t,i,a){var o=Kn();Wo(t,i,a,o)}function Wo(t,i,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(zu(t))Tg(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,E=d(v,a);if(h.hasEagerState=!0,h.eagerState=E,Hn(E,v))return bu(t,i,h,0),Et===null&&Tu(),!1}catch{}finally{}if(a=zh(t,i,h,o),a!==null)return Xn(a,t,o),bg(a,i,o),!0}return!1}function Tf(t,i,a,o){if(o={lane:2,revertLane:Jf(),action:o,hasEagerState:!1,eagerState:null,next:null},zu(t)){if(i)throw Error(s(479))}else i=zh(t,a,o,2),i!==null&&Xn(i,t,2)}function zu(t){var i=t.alternate;return t===qe||i!==null&&i===qe}function Tg(t,i){Na=Mu=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function bg(t,i,a){if((a&4194048)!==0){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,A(t,a)}}var Bu={readContext:yn,use:Uu,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useLayoutEffect:Vt,useInsertionEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useSyncExternalStore:Vt,useId:Vt,useHostTransitionStatus:Vt,useFormState:Vt,useActionState:Vt,useOptimistic:Vt,useMemoCache:Vt,useCacheRefresh:Vt},Ag={readContext:yn,use:Uu,useCallback:function(t,i){return Dn().memoizedState=[t,i===void 0?null:i],t},useContext:yn,useEffect:ag,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,Lu(4194308,4,cg.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Lu(4194308,4,t,i)},useInsertionEffect:function(t,i){Lu(4,2,t,i)},useMemo:function(t,i){var a=Dn();i=i===void 0?null:i;var o=t();if(Ys){gn(!0);try{t()}finally{gn(!1)}}return a.memoizedState=[o,i],o},useReducer:function(t,i,a){var o=Dn();if(a!==void 0){var h=a(i);if(Ys){gn(!0);try{a(i)}finally{gn(!1)}}}else h=i;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=W1.bind(null,qe,t),[o.memoizedState,t]},useRef:function(t){var i=Dn();return t={current:t},i.memoizedState=t},useState:function(t){t=pf(t);var i=t.queue,a=Eg.bind(null,qe,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:yf,useDeferredValue:function(t,i){var a=Dn();return _f(a,t,i)},useTransition:function(){var t=pf(!1);return t=pg.bind(null,qe,t.queue,!0,!1),Dn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var o=qe,h=Dn();if(at){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),Et===null)throw Error(s(349));(Je&124)!==0||Gp(o,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,ag(Qp.bind(null,o,d,t),[t]),o.flags|=2048,Ma(9,ku(),Fp.bind(null,o,d,a,i),null),a},useId:function(){var t=Dn(),i=Et.identifierPrefix;if(at){var a=rr,o=ir;a=(o&~(1<<32-Jt(o)-1)).toString(32)+a,i="«"+i+"R"+a,a=Vu++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=Q1++,i="«"+i+"r"+a.toString(32)+"»";return t.memoizedState=i},useHostTransitionStatus:Ef,useFormState:tg,useActionState:tg,useOptimistic:function(t){var i=Dn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Tf.bind(null,qe,!0,a),a.dispatch=i,[t,i]},useMemoCache:ff,useCacheRefresh:function(){return Dn().memoizedState=Z1.bind(null,qe)}},wg={readContext:yn,use:Uu,useCallback:fg,useContext:yn,useEffect:og,useImperativeHandle:hg,useInsertionEffect:lg,useLayoutEffect:ug,useMemo:dg,useReducer:Pu,useRef:sg,useState:function(){return Pu(or)},useDebugValue:yf,useDeferredValue:function(t,i){var a=jt();return mg(a,mt.memoizedState,t,i)},useTransition:function(){var t=Pu(or)[0],i=jt().memoizedState;return[typeof t=="boolean"?t:$o(t),i]},useSyncExternalStore:Hp,useId:_g,useHostTransitionStatus:Ef,useFormState:ng,useActionState:ng,useOptimistic:function(t,i){var a=jt();return Xp(a,mt,t,i)},useMemoCache:ff,useCacheRefresh:vg},J1={readContext:yn,use:Uu,useCallback:fg,useContext:yn,useEffect:og,useImperativeHandle:hg,useInsertionEffect:lg,useLayoutEffect:ug,useMemo:dg,useReducer:mf,useRef:sg,useState:function(){return mf(or)},useDebugValue:yf,useDeferredValue:function(t,i){var a=jt();return mt===null?_f(a,t,i):mg(a,mt.memoizedState,t,i)},useTransition:function(){var t=mf(or)[0],i=jt().memoizedState;return[typeof t=="boolean"?t:$o(t),i]},useSyncExternalStore:Hp,useId:_g,useHostTransitionStatus:Ef,useFormState:rg,useActionState:rg,useOptimistic:function(t,i){var a=jt();return mt!==null?Xp(a,mt,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:ff,useCacheRefresh:vg},Va=null,Jo=0;function ju(t){var i=Jo;return Jo+=1,Va===null&&(Va=[]),Up(Va,t,i)}function el(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function qu(t,i){throw i.$$typeof===I?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Sg(t){var i=t._init;return i(t._payload)}function Rg(t){function i(k,N){if(t){var z=k.deletions;z===null?(k.deletions=[N],k.flags|=16):z.push(N)}}function a(k,N){if(!t)return null;for(;N!==null;)i(k,N),N=N.sibling;return null}function o(k){for(var N=new Map;k!==null;)k.key!==null?N.set(k.key,k):N.set(k.index,k),k=k.sibling;return N}function h(k,N){return k=nr(k,N),k.index=0,k.sibling=null,k}function d(k,N,z){return k.index=z,t?(z=k.alternate,z!==null?(z=z.index,z<N?(k.flags|=67108866,N):z):(k.flags|=67108866,N)):(k.flags|=1048576,N)}function v(k){return t&&k.alternate===null&&(k.flags|=67108866),k}function E(k,N,z,X){return N===null||N.tag!==6?(N=jh(z,k.mode,X),N.return=k,N):(N=h(N,z),N.return=k,N)}function R(k,N,z,X){var pe=z.type;return pe===ee?K(k,N,z.props.children,X,z.key):N!==null&&(N.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===S&&Sg(pe)===N.type)?(N=h(N,z.props),el(N,z),N.return=k,N):(N=wu(z.type,z.key,z.props,null,k.mode,X),el(N,z),N.return=k,N)}function B(k,N,z,X){return N===null||N.tag!==4||N.stateNode.containerInfo!==z.containerInfo||N.stateNode.implementation!==z.implementation?(N=qh(z,k.mode,X),N.return=k,N):(N=h(N,z.children||[]),N.return=k,N)}function K(k,N,z,X,pe){return N===null||N.tag!==7?(N=zs(z,k.mode,X,pe),N.return=k,N):(N=h(N,z),N.return=k,N)}function $(k,N,z){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=jh(""+N,k.mode,z),N.return=k,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case x:return z=wu(N.type,N.key,N.props,null,k.mode,z),el(z,N),z.return=k,z;case Q:return N=qh(N,k.mode,z),N.return=k,N;case S:var X=N._init;return N=X(N._payload),$(k,N,z)}if(De(N)||P(N))return N=zs(N,k.mode,z,null),N.return=k,N;if(typeof N.then=="function")return $(k,ju(N),z);if(N.$$typeof===ge)return $(k,Cu(k,N),z);qu(k,N)}return null}function q(k,N,z,X){var pe=N!==null?N.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return pe!==null?null:E(k,N,""+z,X);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case x:return z.key===pe?R(k,N,z,X):null;case Q:return z.key===pe?B(k,N,z,X):null;case S:return pe=z._init,z=pe(z._payload),q(k,N,z,X)}if(De(z)||P(z))return pe!==null?null:K(k,N,z,X,null);if(typeof z.then=="function")return q(k,N,ju(z),X);if(z.$$typeof===ge)return q(k,N,Cu(k,z),X);qu(k,z)}return null}function H(k,N,z,X,pe){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return k=k.get(z)||null,E(N,k,""+X,pe);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case x:return k=k.get(X.key===null?z:X.key)||null,R(N,k,X,pe);case Q:return k=k.get(X.key===null?z:X.key)||null,B(N,k,X,pe);case S:var Fe=X._init;return X=Fe(X._payload),H(k,N,z,X,pe)}if(De(X)||P(X))return k=k.get(z)||null,K(N,k,X,pe,null);if(typeof X.then=="function")return H(k,N,z,ju(X),pe);if(X.$$typeof===ge)return H(k,N,z,Cu(N,X),pe);qu(N,X)}return null}function Oe(k,N,z,X){for(var pe=null,Fe=null,be=N,Re=N=0,an=null;be!==null&&Re<z.length;Re++){be.index>Re?(an=be,be=null):an=be.sibling;var it=q(k,be,z[Re],X);if(it===null){be===null&&(be=an);break}t&&be&&it.alternate===null&&i(k,be),N=d(it,N,Re),Fe===null?pe=it:Fe.sibling=it,Fe=it,be=an}if(Re===z.length)return a(k,be),at&&js(k,Re),pe;if(be===null){for(;Re<z.length;Re++)be=$(k,z[Re],X),be!==null&&(N=d(be,N,Re),Fe===null?pe=be:Fe.sibling=be,Fe=be);return at&&js(k,Re),pe}for(be=o(be);Re<z.length;Re++)an=H(be,k,Re,z[Re],X),an!==null&&(t&&an.alternate!==null&&be.delete(an.key===null?Re:an.key),N=d(an,N,Re),Fe===null?pe=an:Fe.sibling=an,Fe=an);return t&&be.forEach(function($r){return i(k,$r)}),at&&js(k,Re),pe}function Se(k,N,z,X){if(z==null)throw Error(s(151));for(var pe=null,Fe=null,be=N,Re=N=0,an=null,it=z.next();be!==null&&!it.done;Re++,it=z.next()){be.index>Re?(an=be,be=null):an=be.sibling;var $r=q(k,be,it.value,X);if($r===null){be===null&&(be=an);break}t&&be&&$r.alternate===null&&i(k,be),N=d($r,N,Re),Fe===null?pe=$r:Fe.sibling=$r,Fe=$r,be=an}if(it.done)return a(k,be),at&&js(k,Re),pe;if(be===null){for(;!it.done;Re++,it=z.next())it=$(k,it.value,X),it!==null&&(N=d(it,N,Re),Fe===null?pe=it:Fe.sibling=it,Fe=it);return at&&js(k,Re),pe}for(be=o(be);!it.done;Re++,it=z.next())it=H(be,k,Re,it.value,X),it!==null&&(t&&it.alternate!==null&&be.delete(it.key===null?Re:it.key),N=d(it,N,Re),Fe===null?pe=it:Fe.sibling=it,Fe=it);return t&&be.forEach(function(eb){return i(k,eb)}),at&&js(k,Re),pe}function gt(k,N,z,X){if(typeof z=="object"&&z!==null&&z.type===ee&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case x:e:{for(var pe=z.key;N!==null;){if(N.key===pe){if(pe=z.type,pe===ee){if(N.tag===7){a(k,N.sibling),X=h(N,z.props.children),X.return=k,k=X;break e}}else if(N.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===S&&Sg(pe)===N.type){a(k,N.sibling),X=h(N,z.props),el(X,z),X.return=k,k=X;break e}a(k,N);break}else i(k,N);N=N.sibling}z.type===ee?(X=zs(z.props.children,k.mode,X,z.key),X.return=k,k=X):(X=wu(z.type,z.key,z.props,null,k.mode,X),el(X,z),X.return=k,k=X)}return v(k);case Q:e:{for(pe=z.key;N!==null;){if(N.key===pe)if(N.tag===4&&N.stateNode.containerInfo===z.containerInfo&&N.stateNode.implementation===z.implementation){a(k,N.sibling),X=h(N,z.children||[]),X.return=k,k=X;break e}else{a(k,N);break}else i(k,N);N=N.sibling}X=qh(z,k.mode,X),X.return=k,k=X}return v(k);case S:return pe=z._init,z=pe(z._payload),gt(k,N,z,X)}if(De(z))return Oe(k,N,z,X);if(P(z)){if(pe=P(z),typeof pe!="function")throw Error(s(150));return z=pe.call(z),Se(k,N,z,X)}if(typeof z.then=="function")return gt(k,N,ju(z),X);if(z.$$typeof===ge)return gt(k,N,Cu(k,z),X);qu(k,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,N!==null&&N.tag===6?(a(k,N.sibling),X=h(N,z),X.return=k,k=X):(a(k,N),X=jh(z,k.mode,X),X.return=k,k=X),v(k)):a(k,N)}return function(k,N,z,X){try{Jo=0;var pe=gt(k,N,z,X);return Va=null,pe}catch(be){if(be===Go||be===Du)throw be;var Fe=Gn(29,be,null,k.mode);return Fe.lanes=X,Fe.return=k,Fe}finally{}}}var Ua=Rg(!0),Ig=Rg(!1),ui=J(null),Vi=null;function Ur(t){var i=t.alternate;ie(Kt,Kt.current&1),ie(ui,t),Vi===null&&(i===null||Da.current!==null||i.memoizedState!==null)&&(Vi=t)}function Cg(t){if(t.tag===22){if(ie(Kt,Kt.current),ie(ui,t),Vi===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(Vi=t)}}else Pr()}function Pr(){ie(Kt,Kt.current),ie(ui,ui.current)}function lr(t){oe(ui),Vi===t&&(Vi=null),oe(Kt)}var Kt=J(0);function Hu(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||hd(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function bf(t,i,a,o){i=t.memoizedState,a=a(o,i),a=a==null?i:T({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Af={enqueueSetState:function(t,i,a){t=t._reactInternals;var o=Kn(),h=Or(o);h.payload=i,a!=null&&(h.callback=a),i=Mr(t,h,o),i!==null&&(Xn(i,t,o),Qo(i,t,o))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var o=Kn(),h=Or(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Mr(t,h,o),i!==null&&(Xn(i,t,o),Qo(i,t,o))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Kn(),o=Or(a);o.tag=2,i!=null&&(o.callback=i),i=Mr(t,o,a),i!==null&&(Xn(i,t,a),Qo(i,t,a))}};function xg(t,i,a,o,h,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,d,v):i.prototype&&i.prototype.isPureReactComponent?!Po(a,o)||!Po(h,d):!0}function Dg(t,i,a,o){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==t&&Af.enqueueReplaceState(i,i.state,null)}function Ks(t,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(t=t.defaultProps){a===i&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var Gu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Ng(t){Gu(t)}function Og(t){console.error(t)}function Mg(t){Gu(t)}function Fu(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function Vg(t,i,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function wf(t,i,a){return a=Or(a),a.tag=3,a.payload={element:null},a.callback=function(){Fu(t,i)},a}function Ug(t){return t=Or(t),t.tag=3,t}function Pg(t,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;t.payload=function(){return h(d)},t.callback=function(){Vg(i,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Vg(i,a,o),typeof h!="function"&&(qr===null?qr=new Set([this]):qr.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function eT(t,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&jo(i,a,h,!0),a=ui.current,a!==null){switch(a.tag){case 13:return Vi===null?Kf():a.alternate===null&&Nt===0&&(Nt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===Wh?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),$f(t,o,h)),!1;case 22:return a.flags|=65536,o===Wh?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),$f(t,o,h)),!1}throw Error(s(435,a.tag))}return $f(t,o,h),Kf(),!1}if(at)return i=ui.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==Fh&&(t=Error(s(422),{cause:o}),Bo(si(t,a)))):(o!==Fh&&(i=Error(s(423),{cause:o}),Bo(si(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=si(o,a),h=wf(t.stateNode,o,h),tf(t,h),Nt!==4&&(Nt=2)),!1;var d=Error(s(520),{cause:o});if(d=si(d,a),ol===null?ol=[d]:ol.push(d),Nt!==4&&(Nt=2),i===null)return!0;o=si(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=wf(a.stateNode,o,t),tf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(qr===null||!qr.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Ug(h),Pg(h,t,a,o),tf(a,h),!1}a=a.return}while(a!==null);return!1}var kg=Error(s(461)),rn=!1;function cn(t,i,a,o){i.child=t===null?Ig(i,null,a,o):Ua(i,t.child,a,o)}function Lg(t,i,a,o,h){a=a.render;var d=i.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return Fs(i),o=of(t,i,a,v,d,h),E=lf(),t!==null&&!rn?(uf(t,i,h),ur(t,i,h)):(at&&E&&Hh(i),i.flags|=1,cn(t,i,o,h),i.child)}function zg(t,i,a,o,h){if(t===null){var d=a.type;return typeof d=="function"&&!Bh(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Bg(t,i,d,o,h)):(t=wu(a.type,null,o,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!Of(t,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Po,a(v,o)&&t.ref===i.ref)return ur(t,i,h)}return i.flags|=1,t=nr(d,o),t.ref=i.ref,t.return=i,i.child=t}function Bg(t,i,a,o,h){if(t!==null){var d=t.memoizedProps;if(Po(d,o)&&t.ref===i.ref)if(rn=!1,i.pendingProps=o=d,Of(t,h))(t.flags&131072)!==0&&(rn=!0);else return i.lanes=t.lanes,ur(t,i,h)}return Sf(t,i,a,o,h)}function jg(t,i,a){var o=i.pendingProps,h=o.children,d=t!==null?t.memoizedState:null;if(o.mode==="hidden"){if((i.flags&128)!==0){if(o=d!==null?d.baseLanes|a:a,t!==null){for(h=i.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~o}else i.childLanes=0,i.child=null;return qg(t,i,o,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&xu(i,d!==null?d.cachePool:null),d!==null?Bp(i,d):rf(),Cg(i);else return i.lanes=i.childLanes=536870912,qg(t,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(xu(i,d.cachePool),Bp(i,d),Pr(),i.memoizedState=null):(t!==null&&xu(i,null),rf(),Pr());return cn(t,i,h,a),i.child}function qg(t,i,a,o){var h=Zh();return h=h===null?null:{parent:Yt._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&xu(i,null),rf(),Cg(i),t!==null&&jo(t,i,o,!0),null}function Qu(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Sf(t,i,a,o,h){return Fs(i),a=of(t,i,a,o,void 0,h),o=lf(),t!==null&&!rn?(uf(t,i,h),ur(t,i,h)):(at&&o&&Hh(i),i.flags|=1,cn(t,i,a,h),i.child)}function Hg(t,i,a,o,h,d){return Fs(i),i.updateQueue=null,a=qp(i,o,a,h),jp(t),o=lf(),t!==null&&!rn?(uf(t,i,d),ur(t,i,d)):(at&&o&&Hh(i),i.flags|=1,cn(t,i,a,d),i.child)}function Gg(t,i,a,o,h){if(Fs(i),i.stateNode===null){var d=Sa,v=a.contextType;typeof v=="object"&&v!==null&&(d=yn(v)),d=new a(o,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Af,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=o,d.state=i.memoizedState,d.refs={},Jh(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?yn(v):Sa,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(bf(i,a,v,o),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&Af.enqueueReplaceState(d,d.state,null),Ko(i,o,d,h),Yo(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(t===null){d=i.stateNode;var E=i.memoizedProps,R=Ks(a,E);d.props=R;var B=d.context,K=a.contextType;v=Sa,typeof K=="object"&&K!==null&&(v=yn(K));var $=a.getDerivedStateFromProps;K=typeof $=="function"||typeof d.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,K||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E||B!==v)&&Dg(i,d,o,v),Nr=!1;var q=i.memoizedState;d.state=q,Ko(i,o,d,h),Yo(),B=i.memoizedState,E||q!==B||Nr?(typeof $=="function"&&(bf(i,a,$,o),B=i.memoizedState),(R=Nr||xg(i,a,R,o,q,B,v))?(K||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=B),d.props=o,d.state=B,d.context=v,o=R):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{d=i.stateNode,ef(t,i),v=i.memoizedProps,K=Ks(a,v),d.props=K,$=i.pendingProps,q=d.context,B=a.contextType,R=Sa,typeof B=="object"&&B!==null&&(R=yn(B)),E=a.getDerivedStateFromProps,(B=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==$||q!==R)&&Dg(i,d,o,R),Nr=!1,q=i.memoizedState,d.state=q,Ko(i,o,d,h),Yo();var H=i.memoizedState;v!==$||q!==H||Nr||t!==null&&t.dependencies!==null&&Iu(t.dependencies)?(typeof E=="function"&&(bf(i,a,E,o),H=i.memoizedState),(K=Nr||xg(i,a,K,o,q,H,R)||t!==null&&t.dependencies!==null&&Iu(t.dependencies))?(B||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,H,R),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,H,R)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=H),d.props=o,d.state=H,d.context=R,o=K):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),o=!1)}return d=o,Qu(t,i),o=(i.flags&128)!==0,d||o?(d=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&o?(i.child=Ua(i,t.child,null,h),i.child=Ua(i,null,a,h)):cn(t,i,a,h),i.memoizedState=d.state,t=i.child):t=ur(t,i,h),t}function Fg(t,i,a,o){return zo(),i.flags|=256,cn(t,i,a,o),i.child}var Rf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function If(t){return{baseLanes:t,cachePool:Op()}}function Cf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=ci),t}function Qg(t,i,a){var o=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(Kt.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,t===null){if(at){if(h?Ur(i):Pr(),at){var E=Dt,R;if(R=E){e:{for(R=E,E=Mi;R.nodeType!==8;){if(!E){E=null;break e}if(R=vi(R.nextSibling),R===null){E=null;break e}}E=R}E!==null?(i.memoizedState={dehydrated:E,treeContext:Bs!==null?{id:ir,overflow:rr}:null,retryLane:536870912,hydrationErrors:null},R=Gn(18,null,null,0),R.stateNode=E,R.return=i,i.child=R,Rn=i,Dt=null,R=!0):R=!1}R||Hs(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return hd(E)?i.lanes=32:i.lanes=536870912,null;lr(i)}return E=o.children,o=o.fallback,h?(Pr(),h=i.mode,E=Yu({mode:"hidden",children:E},h),o=zs(o,h,a,null),E.return=i,o.return=i,E.sibling=o,i.child=E,h=i.child,h.memoizedState=If(a),h.childLanes=Cf(t,v,a),i.memoizedState=Rf,o):(Ur(i),xf(i,E))}if(R=t.memoizedState,R!==null&&(E=R.dehydrated,E!==null)){if(d)i.flags&256?(Ur(i),i.flags&=-257,i=Df(t,i,a)):i.memoizedState!==null?(Pr(),i.child=t.child,i.flags|=128,i=null):(Pr(),h=o.fallback,E=i.mode,o=Yu({mode:"visible",children:o.children},E),h=zs(h,E,a,null),h.flags|=2,o.return=i,h.return=i,o.sibling=h,i.child=o,Ua(i,t.child,null,a),o=i.child,o.memoizedState=If(a),o.childLanes=Cf(t,v,a),i.memoizedState=Rf,i=h);else if(Ur(i),hd(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var B=v.dgst;v=B,o=Error(s(419)),o.stack="",o.digest=v,Bo({value:o,source:null,stack:null}),i=Df(t,i,a)}else if(rn||jo(t,i,a,!1),v=(a&t.childLanes)!==0,rn||v){if(v=Et,v!==null&&(o=a&-a,o=(o&42)!==0?1:Y(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==R.retryLane))throw R.retryLane=o,wa(t,o),Xn(v,t,o),kg;E.data==="$?"||Kf(),i=Df(t,i,a)}else E.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=R.treeContext,Dt=vi(E.nextSibling),Rn=i,at=!0,qs=null,Mi=!1,t!==null&&(oi[li++]=ir,oi[li++]=rr,oi[li++]=Bs,ir=t.id,rr=t.overflow,Bs=i),i=xf(i,o.children),i.flags|=4096);return i}return h?(Pr(),h=o.fallback,E=i.mode,R=t.child,B=R.sibling,o=nr(R,{mode:"hidden",children:o.children}),o.subtreeFlags=R.subtreeFlags&65011712,B!==null?h=nr(B,h):(h=zs(h,E,a,null),h.flags|=2),h.return=i,o.return=i,o.sibling=h,i.child=o,o=h,h=i.child,E=t.child.memoizedState,E===null?E=If(a):(R=E.cachePool,R!==null?(B=Yt._currentValue,R=R.parent!==B?{parent:B,pool:B}:R):R=Op(),E={baseLanes:E.baseLanes|a,cachePool:R}),h.memoizedState=E,h.childLanes=Cf(t,v,a),i.memoizedState=Rf,o):(Ur(i),a=t.child,t=a.sibling,a=nr(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,t!==null&&(v=i.deletions,v===null?(i.deletions=[t],i.flags|=16):v.push(t)),i.child=a,i.memoizedState=null,a)}function xf(t,i){return i=Yu({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Yu(t,i){return t=Gn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Df(t,i,a){return Ua(i,t.child,null,a),t=xf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Yg(t,i,a){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i),Yh(t.return,i,a)}function Nf(t,i,a,o,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=a,d.tailMode=h)}function Kg(t,i,a){var o=i.pendingProps,h=o.revealOrder,d=o.tail;if(cn(t,i,o.children,a),o=Kt.current,(o&2)!==0)o=o&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Yg(t,a,i);else if(t.tag===19)Yg(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}switch(ie(Kt,o),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&Hu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Nf(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&Hu(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Nf(i,!0,a,null,d);break;case"together":Nf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ur(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),jr|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(jo(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=nr(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=nr(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Of(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Iu(t)))}function tT(t,i,a){switch(i.tag){case 3:ot(i,i.stateNode.containerInfo),Dr(i,Yt,t.memoizedState.cache),zo();break;case 27:case 5:Zn(i);break;case 4:ot(i,i.stateNode.containerInfo);break;case 10:Dr(i,i.type,i.memoizedProps.value);break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(Ur(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Qg(t,i,a):(Ur(i),t=ur(t,i,a),t!==null?t.sibling:null);Ur(i);break;case 19:var h=(t.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(jo(t,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return Kg(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ie(Kt,Kt.current),o)break;return null;case 22:case 23:return i.lanes=0,jg(t,i,a);case 24:Dr(i,Yt,t.memoizedState.cache)}return ur(t,i,a)}function Xg(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)rn=!0;else{if(!Of(t,a)&&(i.flags&128)===0)return rn=!1,tT(t,i,a);rn=(t.flags&131072)!==0}else rn=!1,at&&(i.flags&1048576)!==0&&Sp(i,Ru,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var o=i.elementType,h=o._init;if(o=h(o._payload),i.type=o,typeof o=="function")Bh(o)?(t=Ks(o,t),i.tag=1,i=Gg(null,i,o,t,a)):(i.tag=0,i=Sf(null,i,o,t,a));else{if(o!=null){if(h=o.$$typeof,h===Ge){i.tag=11,i=Lg(null,i,o,t,a);break e}else if(h===M){i.tag=14,i=zg(null,i,o,t,a);break e}}throw i=Tt(o)||o,Error(s(306,i,""))}}return i;case 0:return Sf(t,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=Ks(o,i.pendingProps),Gg(t,i,o,h,a);case 3:e:{if(ot(i,i.stateNode.containerInfo),t===null)throw Error(s(387));o=i.pendingProps;var d=i.memoizedState;h=d.element,ef(t,i),Ko(i,o,null,a);var v=i.memoizedState;if(o=v.cache,Dr(i,Yt,o),o!==d.cache&&Kh(i,[Yt],a,!0),Yo(),o=v.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Fg(t,i,o,a);break e}else if(o!==h){h=si(Error(s(424)),i),Bo(h),i=Fg(t,i,o,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Dt=vi(t.firstChild),Rn=i,at=!0,qs=null,Mi=!0,a=Ig(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(zo(),o===h){i=ur(t,i,a);break e}cn(t,i,o,a)}i=i.child}return i;case 26:return Qu(t,i),t===null?(a=Jy(i.type,null,i.pendingProps,null))?i.memoizedState=a:at||(a=i.type,t=i.pendingProps,o=oc(Ie.current).createElement(a),o[le]=i,o[Ee]=t,fn(o,a,t),Te(o),i.stateNode=o):i.memoizedState=Jy(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Zn(i),t===null&&at&&(o=i.stateNode=$y(i.type,i.pendingProps,Ie.current),Rn=i,Mi=!0,h=Dt,Fr(i.type)?(fd=h,Dt=vi(o.firstChild)):Dt=h),cn(t,i,i.pendingProps.children,a),Qu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&at&&((h=o=Dt)&&(o=xT(o,i.type,i.pendingProps,Mi),o!==null?(i.stateNode=o,Rn=i,Dt=vi(o.firstChild),Mi=!1,h=!0):h=!1),h||Hs(i)),Zn(i),h=i.type,d=i.pendingProps,v=t!==null?t.memoizedProps:null,o=d.children,ld(h,d)?o=null:v!==null&&ld(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=of(t,i,Y1,null,null,a),gl._currentValue=h),Qu(t,i),cn(t,i,o,a),i.child;case 6:return t===null&&at&&((t=a=Dt)&&(a=DT(a,i.pendingProps,Mi),a!==null?(i.stateNode=a,Rn=i,Dt=null,t=!0):t=!1),t||Hs(i)),null;case 13:return Qg(t,i,a);case 4:return ot(i,i.stateNode.containerInfo),o=i.pendingProps,t===null?i.child=Ua(i,null,o,a):cn(t,i,o,a),i.child;case 11:return Lg(t,i,i.type,i.pendingProps,a);case 7:return cn(t,i,i.pendingProps,a),i.child;case 8:return cn(t,i,i.pendingProps.children,a),i.child;case 12:return cn(t,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,Dr(i,i.type,o.value),cn(t,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,Fs(i),h=yn(h),o=o(h),i.flags|=1,cn(t,i,o,a),i.child;case 14:return zg(t,i,i.type,i.pendingProps,a);case 15:return Bg(t,i,i.type,i.pendingProps,a);case 19:return Kg(t,i,a);case 31:return o=i.pendingProps,a=i.mode,o={mode:o.mode,children:o.children},t===null?(a=Yu(o,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=nr(t.child,o),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return jg(t,i,a);case 24:return Fs(i),o=yn(Yt),t===null?(h=Zh(),h===null&&(h=Et,d=Xh(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:o,cache:h},Jh(i),Dr(i,Yt,h)):((t.lanes&a)!==0&&(ef(t,i),Ko(i,null,null,a),Yo()),h=t.memoizedState,d=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Dr(i,Yt,o)):(o=d.cache,Dr(i,Yt,o),o!==h.cache&&Kh(i,[Yt],a,!0))),cn(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function cr(t){t.flags|=4}function $g(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!r_(i)){if(i=ui.current,i!==null&&((Je&4194048)===Je?Vi!==null:(Je&62914560)!==Je&&(Je&536870912)===0||i!==Vi))throw Fo=Wh,Mp;t.flags|=8192}}function Ku(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?As():536870912,t.lanes|=i,za|=i)}function tl(t,i){if(!at)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Rt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,i}function nT(t,i,a){var o=i.pendingProps;switch(Gh(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(i),null;case 1:return Rt(i),null;case 3:return a=i.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ar(Yt),An(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Lo(i)?cr(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Cp())),Rt(i),null;case 26:return a=i.memoizedState,t===null?(cr(i),a!==null?(Rt(i),$g(i,a)):(Rt(i),i.flags&=-16777217)):a?a!==t.memoizedState?(cr(i),Rt(i),$g(i,a)):(Rt(i),i.flags&=-16777217):(t.memoizedProps!==o&&cr(i),Rt(i),i.flags&=-16777217),null;case 27:Cn(i),a=Ie.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==o&&cr(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return Rt(i),null}t=ve.current,Lo(i)?Rp(i):(t=$y(h,o,a),i.stateNode=t,cr(i))}return Rt(i),null;case 5:if(Cn(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&cr(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return Rt(i),null}if(t=ve.current,Lo(i))Rp(i);else{switch(h=oc(Ie.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?t.multiple=!0:o.size&&(t.size=o.size);break;default:t=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}t[le]=i,t[Ee]=o;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(fn(t,a,o),a){case"button":case"input":case"select":case"textarea":t=!!o.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&cr(i)}}return Rt(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==o&&cr(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(t=Ie.current,Lo(i)){if(t=i.stateNode,a=i.memoizedProps,o=null,h=Rn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[le]=i,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||Hy(t.nodeValue,a)),t||Hs(i)}else t=oc(t).createTextNode(o),t[le]=i,i.stateNode=t}return Rt(i),null;case 13:if(o=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Lo(i),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[le]=i}else zo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Rt(i),h=!1}else h=Cp(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(lr(i),i):(lr(i),null)}if(lr(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=o!==null,t=t!==null&&t.memoizedState!==null,a){o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var d=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),Ku(i,i.updateQueue),Rt(i),null;case 4:return An(),t===null&&id(i.stateNode.containerInfo),Rt(i),null;case 10:return ar(i.type),Rt(i),null;case 19:if(oe(Kt),h=i.memoizedState,h===null)return Rt(i),null;if(o=(i.flags&128)!==0,d=h.rendering,d===null)if(o)tl(h,!1);else{if(Nt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=Hu(t),d!==null){for(i.flags|=128,tl(h,!1),t=d.updateQueue,i.updateQueue=t,Ku(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)wp(a,t),a=a.sibling;return ie(Kt,Kt.current&1|2),i.child}t=t.sibling}h.tail!==null&&kt()>Zu&&(i.flags|=128,o=!0,tl(h,!1),i.lanes=4194304)}else{if(!o)if(t=Hu(d),t!==null){if(i.flags|=128,o=!0,t=t.updateQueue,i.updateQueue=t,Ku(i,t),tl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!at)return Rt(i),null}else 2*kt()-h.renderingStartTime>Zu&&a!==536870912&&(i.flags|=128,o=!0,tl(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(t=h.last,t!==null?t.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=kt(),i.sibling=null,t=Kt.current,ie(Kt,o?t&1|2:t&1),i):(Rt(i),null);case 22:case 23:return lr(i),sf(),o=i.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(Rt(i),i.subtreeFlags&6&&(i.flags|=8192)):Rt(i),a=i.updateQueue,a!==null&&Ku(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),t!==null&&oe(Qs),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ar(Yt),Rt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function iT(t,i){switch(Gh(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return ar(Yt),An(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Cn(i),null;case 13:if(lr(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));zo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return oe(Kt),null;case 4:return An(),null;case 10:return ar(i.type),null;case 22:case 23:return lr(i),sf(),t!==null&&oe(Qs),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return ar(Yt),null;case 25:return null;default:return null}}function Zg(t,i){switch(Gh(i),i.tag){case 3:ar(Yt),An();break;case 26:case 27:case 5:Cn(i);break;case 4:An();break;case 13:lr(i);break;case 19:oe(Kt);break;case 10:ar(i.type);break;case 22:case 23:lr(i),sf(),t!==null&&oe(Qs);break;case 24:ar(Yt)}}function nl(t,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var d=a.create,v=a.inst;o=d(),v.destroy=o}a=a.next}while(a!==h)}}catch(E){_t(i,i.return,E)}}function kr(t,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&t)===t){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,h=i;var R=a,B=E;try{B()}catch(K){_t(h,R,K)}}}o=o.next}while(o!==d)}}catch(K){_t(i,i.return,K)}}function Wg(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{zp(i,a)}catch(o){_t(t,t.return,o)}}}function Jg(t,i,a){a.props=Ks(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){_t(t,i,o)}}function il(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){_t(t,i,h)}}function Ui(t,i){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){_t(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){_t(t,i,h)}else a.current=null}function ey(t){var i=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){_t(t,t.return,h)}}function Mf(t,i,a){try{var o=t.stateNode;wT(o,t.type,a,i),o[Ee]=i}catch(h){_t(t,t.return,h)}}function ty(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Fr(t.type)||t.tag===4}function Vf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ty(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Fr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Uf(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=ac));else if(o!==4&&(o===27&&Fr(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Uf(t,i,a),t=t.sibling;t!==null;)Uf(t,i,a),t=t.sibling}function Xu(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(o!==4&&(o===27&&Fr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Xu(t,i,a),t=t.sibling;t!==null;)Xu(t,i,a),t=t.sibling}function ny(t){var i=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);fn(i,o,a),i[le]=t,i[Ee]=a}catch(d){_t(t,t.return,d)}}var hr=!1,Ut=!1,Pf=!1,iy=typeof WeakSet=="function"?WeakSet:Set,sn=null;function rT(t,i){if(t=t.containerInfo,ad=dc,t=mp(t),Mh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,E=-1,R=-1,B=0,K=0,$=t,q=null;t:for(;;){for(var H;$!==a||h!==0&&$.nodeType!==3||(E=v+h),$!==d||o!==0&&$.nodeType!==3||(R=v+o),$.nodeType===3&&(v+=$.nodeValue.length),(H=$.firstChild)!==null;)q=$,$=H;for(;;){if($===t)break t;if(q===a&&++B===h&&(E=v),q===d&&++K===o&&(R=v),(H=$.nextSibling)!==null)break;$=q,q=$.parentNode}$=H}a=E===-1||R===-1?null:{start:E,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(od={focusedElem:t,selectionRange:a},dc=!1,sn=i;sn!==null;)if(i=sn,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,sn=t;else for(;sn!==null;){switch(i=sn,d=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,o=a.stateNode;try{var Oe=Ks(a.type,h,a.elementType===a.type);t=o.getSnapshotBeforeUpdate(Oe,d),o.__reactInternalSnapshotBeforeUpdate=t}catch(Se){_t(a,a.return,Se)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)cd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":cd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,sn=t;break}sn=i.return}}function ry(t,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Lr(t,a),o&4&&nl(5,a);break;case 1:if(Lr(t,a),o&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(v){_t(a,a.return,v)}else{var h=Ks(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(v){_t(a,a.return,v)}}o&64&&Wg(a),o&512&&il(a,a.return);break;case 3:if(Lr(t,a),o&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{zp(t,i)}catch(v){_t(a,a.return,v)}}break;case 27:i===null&&o&4&&ny(a);case 26:case 5:Lr(t,a),i===null&&o&4&&ey(a),o&512&&il(a,a.return);break;case 12:Lr(t,a);break;case 13:Lr(t,a),o&4&&oy(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=dT.bind(null,a),NT(t,a))));break;case 22:if(o=a.memoizedState!==null||hr,!o){i=i!==null&&i.memoizedState!==null||Ut,h=hr;var d=Ut;hr=o,(Ut=i)&&!d?zr(t,a,(a.subtreeFlags&8772)!==0):Lr(t,a),hr=h,Ut=d}break;case 30:break;default:Lr(t,a)}}function sy(t){var i=t.alternate;i!==null&&(t.alternate=null,sy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&st(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var St=null,Nn=!1;function fr(t,i,a){for(a=a.child;a!==null;)ay(t,i,a),a=a.sibling}function ay(t,i,a){if(nt&&typeof nt.onCommitFiberUnmount=="function")try{nt.onCommitFiberUnmount(bt,a)}catch{}switch(a.tag){case 26:Ut||Ui(a,i),fr(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ut||Ui(a,i);var o=St,h=Nn;Fr(a.type)&&(St=a.stateNode,Nn=!1),fr(t,i,a),fl(a.stateNode),St=o,Nn=h;break;case 5:Ut||Ui(a,i);case 6:if(o=St,h=Nn,St=null,fr(t,i,a),St=o,Nn=h,St!==null)if(Nn)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(a.stateNode)}catch(d){_t(a,i,d)}else try{St.removeChild(a.stateNode)}catch(d){_t(a,i,d)}break;case 18:St!==null&&(Nn?(t=St,Ky(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),El(t)):Ky(St,a.stateNode));break;case 4:o=St,h=Nn,St=a.stateNode.containerInfo,Nn=!0,fr(t,i,a),St=o,Nn=h;break;case 0:case 11:case 14:case 15:Ut||kr(2,a,i),Ut||kr(4,a,i),fr(t,i,a);break;case 1:Ut||(Ui(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Jg(a,i,o)),fr(t,i,a);break;case 21:fr(t,i,a);break;case 22:Ut=(o=Ut)||a.memoizedState!==null,fr(t,i,a),Ut=o;break;default:fr(t,i,a)}}function oy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{El(t)}catch(a){_t(i,i.return,a)}}function sT(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new iy),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new iy),i;default:throw Error(s(435,t.tag))}}function kf(t,i){var a=sT(t);i.forEach(function(o){var h=mT.bind(null,t,o);a.has(o)||(a.add(o),o.then(h,h))})}function Fn(t,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],d=t,v=i,E=v;e:for(;E!==null;){switch(E.tag){case 27:if(Fr(E.type)){St=E.stateNode,Nn=!1;break e}break;case 5:St=E.stateNode,Nn=!1;break e;case 3:case 4:St=E.stateNode.containerInfo,Nn=!0;break e}E=E.return}if(St===null)throw Error(s(160));ay(d,v,h),St=null,Nn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)ly(i,t),i=i.sibling}var _i=null;function ly(t,i){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Fn(i,t),Qn(t),o&4&&(kr(3,t,t.return),nl(3,t),kr(5,t,t.return));break;case 1:Fn(i,t),Qn(t),o&512&&(Ut||a===null||Ui(a,a.return)),o&64&&hr&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=_i;if(Fn(i,t),Qn(t),o&512&&(Ut||a===null||Ui(a,a.return)),o&4){var d=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[Ne]||d[le]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),fn(d,o,a),d[le]=t,Te(d),o=d;break e;case"link":var v=n_("link","href",h).get(o+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(d=v[E],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break t}}d=h.createElement(o),fn(d,o,a),h.head.appendChild(d);break;case"meta":if(v=n_("meta","content",h).get(o+(a.content||""))){for(E=0;E<v.length;E++)if(d=v[E],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break t}}d=h.createElement(o),fn(d,o,a),h.head.appendChild(d);break;default:throw Error(s(468,o))}d[le]=t,Te(d),o=d}t.stateNode=o}else i_(h,t.type,t.stateNode);else t.stateNode=t_(h,o,t.memoizedProps);else d!==o?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,o===null?i_(h,t.type,t.stateNode):t_(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Mf(t,t.memoizedProps,a.memoizedProps)}break;case 27:Fn(i,t),Qn(t),o&512&&(Ut||a===null||Ui(a,a.return)),a!==null&&o&4&&Mf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Fn(i,t),Qn(t),o&512&&(Ut||a===null||Ui(a,a.return)),t.flags&32){h=t.stateNode;try{ti(h,"")}catch(H){_t(t,t.return,H)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,Mf(t,h,a!==null?a.memoizedProps:h)),o&1024&&(Pf=!0);break;case 6:if(Fn(i,t),Qn(t),o&4){if(t.stateNode===null)throw Error(s(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(H){_t(t,t.return,H)}}break;case 3:if(cc=null,h=_i,_i=lc(i.containerInfo),Fn(i,t),_i=h,Qn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{El(i.containerInfo)}catch(H){_t(t,t.return,H)}Pf&&(Pf=!1,uy(t));break;case 4:o=_i,_i=lc(t.stateNode.containerInfo),Fn(i,t),Qn(t),_i=o;break;case 12:Fn(i,t),Qn(t);break;case 13:Fn(i,t),Qn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Hf=kt()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,kf(t,o)));break;case 22:h=t.memoizedState!==null;var R=a!==null&&a.memoizedState!==null,B=hr,K=Ut;if(hr=B||h,Ut=K||R,Fn(i,t),Ut=K,hr=B,Qn(t),o&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||R||hr||Ut||Xs(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){R=a=i;try{if(d=R.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=R.stateNode;var $=R.memoizedProps.style,q=$!=null&&$.hasOwnProperty("display")?$.display:null;E.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(H){_t(R,R.return,H)}}}else if(i.tag===6){if(a===null){R=i;try{R.stateNode.nodeValue=h?"":R.memoizedProps}catch(H){_t(R,R.return,H)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,kf(t,a))));break;case 19:Fn(i,t),Qn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,kf(t,o)));break;case 30:break;case 21:break;default:Fn(i,t),Qn(t)}}function Qn(t){var i=t.flags;if(i&2){try{for(var a,o=t.return;o!==null;){if(ty(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=Vf(t);Xu(t,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(ti(v,""),a.flags&=-33);var E=Vf(t);Xu(t,E,v);break;case 3:case 4:var R=a.stateNode.containerInfo,B=Vf(t);Uf(t,B,R);break;default:throw Error(s(161))}}catch(K){_t(t,t.return,K)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function uy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;uy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Lr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)ry(t,i.alternate,i),i=i.sibling}function Xs(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:kr(4,i,i.return),Xs(i);break;case 1:Ui(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Jg(i,i.return,a),Xs(i);break;case 27:fl(i.stateNode);case 26:case 5:Ui(i,i.return),Xs(i);break;case 22:i.memoizedState===null&&Xs(i);break;case 30:Xs(i);break;default:Xs(i)}t=t.sibling}}function zr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=t,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:zr(h,d,a),nl(4,d);break;case 1:if(zr(h,d,a),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){_t(o,o.return,B)}if(o=d,h=o.updateQueue,h!==null){var E=o.stateNode;try{var R=h.shared.hiddenCallbacks;if(R!==null)for(h.shared.hiddenCallbacks=null,h=0;h<R.length;h++)Lp(R[h],E)}catch(B){_t(o,o.return,B)}}a&&v&64&&Wg(d),il(d,d.return);break;case 27:ny(d);case 26:case 5:zr(h,d,a),a&&o===null&&v&4&&ey(d),il(d,d.return);break;case 12:zr(h,d,a);break;case 13:zr(h,d,a),a&&v&4&&oy(h,d);break;case 22:d.memoizedState===null&&zr(h,d,a),il(d,d.return);break;case 30:break;default:zr(h,d,a)}i=i.sibling}}function Lf(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&qo(a))}function zf(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&qo(t))}function Pi(t,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)cy(t,i,a,o),i=i.sibling}function cy(t,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Pi(t,i,a,o),h&2048&&nl(9,i);break;case 1:Pi(t,i,a,o);break;case 3:Pi(t,i,a,o),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&qo(t)));break;case 12:if(h&2048){Pi(t,i,a,o),t=i.stateNode;try{var d=i.memoizedProps,v=d.id,E=d.onPostCommit;typeof E=="function"&&E(v,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(R){_t(i,i.return,R)}}else Pi(t,i,a,o);break;case 13:Pi(t,i,a,o);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?Pi(t,i,a,o):rl(t,i):d._visibility&2?Pi(t,i,a,o):(d._visibility|=2,Pa(t,i,a,o,(i.subtreeFlags&10256)!==0)),h&2048&&Lf(v,i);break;case 24:Pi(t,i,a,o),h&2048&&zf(i.alternate,i);break;default:Pi(t,i,a,o)}}function Pa(t,i,a,o,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=t,v=i,E=a,R=o,B=v.flags;switch(v.tag){case 0:case 11:case 15:Pa(d,v,E,R,h),nl(8,v);break;case 23:break;case 22:var K=v.stateNode;v.memoizedState!==null?K._visibility&2?Pa(d,v,E,R,h):rl(d,v):(K._visibility|=2,Pa(d,v,E,R,h)),h&&B&2048&&Lf(v.alternate,v);break;case 24:Pa(d,v,E,R,h),h&&B&2048&&zf(v.alternate,v);break;default:Pa(d,v,E,R,h)}i=i.sibling}}function rl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,o=i,h=o.flags;switch(o.tag){case 22:rl(a,o),h&2048&&Lf(o.alternate,o);break;case 24:rl(a,o),h&2048&&zf(o.alternate,o);break;default:rl(a,o)}i=i.sibling}}var sl=8192;function ka(t){if(t.subtreeFlags&sl)for(t=t.child;t!==null;)hy(t),t=t.sibling}function hy(t){switch(t.tag){case 26:ka(t),t.flags&sl&&t.memoizedState!==null&&GT(_i,t.memoizedState,t.memoizedProps);break;case 5:ka(t);break;case 3:case 4:var i=_i;_i=lc(t.stateNode.containerInfo),ka(t),_i=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=sl,sl=16777216,ka(t),sl=i):ka(t));break;default:ka(t)}}function fy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function al(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];sn=o,my(o,t)}fy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)dy(t),t=t.sibling}function dy(t){switch(t.tag){case 0:case 11:case 15:al(t),t.flags&2048&&kr(9,t,t.return);break;case 3:al(t);break;case 12:al(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,$u(t)):al(t);break;default:al(t)}}function $u(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];sn=o,my(o,t)}fy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:kr(8,i,i.return),$u(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,$u(i));break;default:$u(i)}t=t.sibling}}function my(t,i){for(;sn!==null;){var a=sn;switch(a.tag){case 0:case 11:case 15:kr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:qo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,sn=o;else e:for(a=t;sn!==null;){o=sn;var h=o.sibling,d=o.return;if(sy(o),o===a){sn=null;break e}if(h!==null){h.return=d,sn=h;break e}sn=d}}}var aT={getCacheForType:function(t){var i=yn(Yt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},oT=typeof WeakMap=="function"?WeakMap:Map,ct=0,Et=null,Ye=null,Je=0,ht=0,Yn=null,Br=!1,La=!1,Bf=!1,dr=0,Nt=0,jr=0,$s=0,jf=0,ci=0,za=0,ol=null,On=null,qf=!1,Hf=0,Zu=1/0,Wu=null,qr=null,hn=0,Hr=null,Ba=null,ja=0,Gf=0,Ff=null,py=null,ll=0,Qf=null;function Kn(){if((ct&2)!==0&&Je!==0)return Je&-Je;if(F.T!==null){var t=Ca;return t!==0?t:Jf()}return re()}function gy(){ci===0&&(ci=(Je&536870912)===0||at?bs():536870912);var t=ui.current;return t!==null&&(t.flags|=32),ci}function Xn(t,i,a){(t===Et&&(ht===2||ht===9)||t.cancelPendingCommit!==null)&&(qa(t,0),Gr(t,Je,ci,!1)),pi(t,a),((ct&2)===0||t!==Et)&&(t===Et&&((ct&2)===0&&($s|=a),Nt===4&&Gr(t,Je,ci,!1)),ki(t))}function yy(t,i,a){if((ct&6)!==0)throw Error(s(327));var o=!a&&(i&124)===0&&(i&t.expiredLanes)===0||Yi(t,i),h=o?cT(t,i):Xf(t,i,!0),d=o;do{if(h===0){La&&!o&&Gr(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!lT(a)){h=Xf(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var E=t;h=ol;var R=E.current.memoizedState.isDehydrated;if(R&&(qa(E,v).flags|=256),v=Xf(E,v,!1),v!==2){if(Bf&&!R){E.errorRecoveryDisabledLanes|=d,$s|=d,h=4;break e}d=On,On=h,d!==null&&(On===null?On=d:On.push.apply(On,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){qa(t,0),Gr(t,i,0,!0);break}e:{switch(o=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Gr(o,i,ci,!Br);break e;case 2:On=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Hf+300-kt(),10<h)){if(Gr(o,i,ci,!Br),Sr(o,0,!0)!==0)break e;o.timeoutHandle=Qy(_y.bind(null,o,a,On,Wu,qf,i,ci,$s,za,Br,d,2,-0,0),h);break e}_y(o,a,On,Wu,qf,i,ci,$s,za,Br,d,0,-0,0)}}break}while(!0);ki(t)}function _y(t,i,a,o,h,d,v,E,R,B,K,$,q,H){if(t.timeoutHandle=-1,$=i.subtreeFlags,($&8192||($&16785408)===16785408)&&(pl={stylesheets:null,count:0,unsuspend:HT},hy(i),$=FT(),$!==null)){t.cancelPendingCommit=$(Sy.bind(null,t,i,d,a,o,h,v,E,R,K,1,q,H)),Gr(t,d,v,!B);return}Sy(t,i,d,a,o,h,v,E,R)}function lT(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],d=h.getSnapshot;h=h.value;try{if(!Hn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Gr(t,i,a,o){i&=~jf,i&=~$s,t.suspendedLanes|=i,t.pingedLanes&=~i,o&&(t.warmLanes|=i),o=t.expirationTimes;for(var h=i;0<h;){var d=31-Jt(h),v=1<<d;o[d]=-1,h&=~v}a!==0&&Bn(t,a,i)}function Ju(){return(ct&6)===0?(ul(0),!1):!0}function Yf(){if(Ye!==null){if(ht===0)var t=Ye.return;else t=Ye,sr=Gs=null,cf(t),Va=null,Jo=0,t=Ye;for(;t!==null;)Zg(t.alternate,t),t=t.return;Ye=null}}function qa(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,RT(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Yf(),Et=t,Ye=a=nr(t.current,null),Je=i,ht=0,Yn=null,Br=!1,La=Yi(t,i),Bf=!1,za=ci=jf=$s=jr=Nt=0,On=ol=null,qf=!1,(i&8)!==0&&(i|=i&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=i;0<o;){var h=31-Jt(o),d=1<<h;i|=t[h],o&=~d}return dr=i,Tu(),a}function vy(t,i){qe=null,F.H=Bu,i===Go||i===Du?(i=Pp(),ht=3):i===Mp?(i=Pp(),ht=4):ht=i===kg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Yn=i,Ye===null&&(Nt=1,Fu(t,si(i,t.current)))}function Ey(){var t=F.H;return F.H=Bu,t===null?Bu:t}function Ty(){var t=F.A;return F.A=aT,t}function Kf(){Nt=4,Br||(Je&4194048)!==Je&&ui.current!==null||(La=!0),(jr&134217727)===0&&($s&134217727)===0||Et===null||Gr(Et,Je,ci,!1)}function Xf(t,i,a){var o=ct;ct|=2;var h=Ey(),d=Ty();(Et!==t||Je!==i)&&(Wu=null,qa(t,i)),i=!1;var v=Nt;e:do try{if(ht!==0&&Ye!==null){var E=Ye,R=Yn;switch(ht){case 8:Yf(),v=6;break e;case 3:case 2:case 9:case 6:ui.current===null&&(i=!0);var B=ht;if(ht=0,Yn=null,Ha(t,E,R,B),a&&La){v=0;break e}break;default:B=ht,ht=0,Yn=null,Ha(t,E,R,B)}}uT(),v=Nt;break}catch(K){vy(t,K)}while(!0);return i&&t.shellSuspendCounter++,sr=Gs=null,ct=o,F.H=h,F.A=d,Ye===null&&(Et=null,Je=0,Tu()),v}function uT(){for(;Ye!==null;)by(Ye)}function cT(t,i){var a=ct;ct|=2;var o=Ey(),h=Ty();Et!==t||Je!==i?(Wu=null,Zu=kt()+500,qa(t,i)):La=Yi(t,i);e:do try{if(ht!==0&&Ye!==null){i=Ye;var d=Yn;t:switch(ht){case 1:ht=0,Yn=null,Ha(t,i,d,1);break;case 2:case 9:if(Vp(d)){ht=0,Yn=null,Ay(i);break}i=function(){ht!==2&&ht!==9||Et!==t||(ht=7),ki(t)},d.then(i,i);break e;case 3:ht=7;break e;case 4:ht=5;break e;case 7:Vp(d)?(ht=0,Yn=null,Ay(i)):(ht=0,Yn=null,Ha(t,i,d,7));break;case 5:var v=null;switch(Ye.tag){case 26:v=Ye.memoizedState;case 5:case 27:var E=Ye;if(!v||r_(v)){ht=0,Yn=null;var R=E.sibling;if(R!==null)Ye=R;else{var B=E.return;B!==null?(Ye=B,ec(B)):Ye=null}break t}}ht=0,Yn=null,Ha(t,i,d,5);break;case 6:ht=0,Yn=null,Ha(t,i,d,6);break;case 8:Yf(),Nt=6;break e;default:throw Error(s(462))}}hT();break}catch(K){vy(t,K)}while(!0);return sr=Gs=null,F.H=o,F.A=h,ct=a,Ye!==null?0:(Et=null,Je=0,Tu(),Nt)}function hT(){for(;Ye!==null&&!je();)by(Ye)}function by(t){var i=Xg(t.alternate,t,dr);t.memoizedProps=t.pendingProps,i===null?ec(t):Ye=i}function Ay(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Hg(a,i,i.pendingProps,i.type,void 0,Je);break;case 11:i=Hg(a,i,i.pendingProps,i.type.render,i.ref,Je);break;case 5:cf(i);default:Zg(a,i),i=Ye=wp(i,dr),i=Xg(a,i,dr)}t.memoizedProps=t.pendingProps,i===null?ec(t):Ye=i}function Ha(t,i,a,o){sr=Gs=null,cf(i),Va=null,Jo=0;var h=i.return;try{if(eT(t,h,i,a,Je)){Nt=1,Fu(t,si(a,t.current)),Ye=null;return}}catch(d){if(h!==null)throw Ye=h,d;Nt=1,Fu(t,si(a,t.current)),Ye=null;return}i.flags&32768?(at||o===1?t=!0:La||(Je&536870912)!==0?t=!1:(Br=t=!0,(o===2||o===9||o===3||o===6)&&(o=ui.current,o!==null&&o.tag===13&&(o.flags|=16384))),wy(i,t)):ec(i)}function ec(t){var i=t;do{if((i.flags&32768)!==0){wy(i,Br);return}t=i.return;var a=nT(i.alternate,i,dr);if(a!==null){Ye=a;return}if(i=i.sibling,i!==null){Ye=i;return}Ye=i=t}while(i!==null);Nt===0&&(Nt=5)}function wy(t,i){do{var a=iT(t.alternate,t);if(a!==null){a.flags&=32767,Ye=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ye=t;return}Ye=t=a}while(t!==null);Nt=6,Ye=null}function Sy(t,i,a,o,h,d,v,E,R){t.cancelPendingCommit=null;do tc();while(hn!==0);if((ct&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Lh,ws(t,a,d,v,E,R),t===Et&&(Ye=Et=null,Je=0),Ba=i,Hr=t,ja=a,Gf=d,Ff=h,py=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,pT(xn,function(){return Dy(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=F.T,F.T=null,h=se.p,se.p=2,v=ct,ct|=4;try{rT(t,i,a)}finally{ct=v,se.p=h,F.T=o}}hn=1,Ry(),Iy(),Cy()}}function Ry(){if(hn===1){hn=0;var t=Hr,i=Ba,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=F.T,F.T=null;var o=se.p;se.p=2;var h=ct;ct|=4;try{ly(i,t);var d=od,v=mp(t.containerInfo),E=d.focusedElem,R=d.selectionRange;if(v!==E&&E&&E.ownerDocument&&dp(E.ownerDocument.documentElement,E)){if(R!==null&&Mh(E)){var B=R.start,K=R.end;if(K===void 0&&(K=B),"selectionStart"in E)E.selectionStart=B,E.selectionEnd=Math.min(K,E.value.length);else{var $=E.ownerDocument||document,q=$&&$.defaultView||window;if(q.getSelection){var H=q.getSelection(),Oe=E.textContent.length,Se=Math.min(R.start,Oe),gt=R.end===void 0?Se:Math.min(R.end,Oe);!H.extend&&Se>gt&&(v=gt,gt=Se,Se=v);var k=fp(E,Se),N=fp(E,gt);if(k&&N&&(H.rangeCount!==1||H.anchorNode!==k.node||H.anchorOffset!==k.offset||H.focusNode!==N.node||H.focusOffset!==N.offset)){var z=$.createRange();z.setStart(k.node,k.offset),H.removeAllRanges(),Se>gt?(H.addRange(z),H.extend(N.node,N.offset)):(z.setEnd(N.node,N.offset),H.addRange(z))}}}}for($=[],H=E;H=H.parentNode;)H.nodeType===1&&$.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<$.length;E++){var X=$[E];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}dc=!!ad,od=ad=null}finally{ct=h,se.p=o,F.T=a}}t.current=i,hn=2}}function Iy(){if(hn===2){hn=0;var t=Hr,i=Ba,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=F.T,F.T=null;var o=se.p;se.p=2;var h=ct;ct|=4;try{ry(t,i.alternate,i)}finally{ct=h,se.p=o,F.T=a}}hn=3}}function Cy(){if(hn===4||hn===3){hn=0,Wt();var t=Hr,i=Ba,a=ja,o=py;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?hn=5:(hn=0,Ba=Hr=null,xy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(qr=null),j(a),i=i.stateNode,nt&&typeof nt.onCommitFiberRoot=="function")try{nt.onCommitFiberRoot(bt,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=F.T,h=se.p,se.p=2,F.T=null;try{for(var d=t.onRecoverableError,v=0;v<o.length;v++){var E=o[v];d(E.value,{componentStack:E.stack})}}finally{F.T=i,se.p=h}}(ja&3)!==0&&tc(),ki(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Qf?ll++:(ll=0,Qf=t):ll=0,ul(0)}}function xy(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,qo(i)))}function tc(t){return Ry(),Iy(),Cy(),Dy()}function Dy(){if(hn!==5)return!1;var t=Hr,i=Gf;Gf=0;var a=j(ja),o=F.T,h=se.p;try{se.p=32>a?32:a,F.T=null,a=Ff,Ff=null;var d=Hr,v=ja;if(hn=0,Ba=Hr=null,ja=0,(ct&6)!==0)throw Error(s(331));var E=ct;if(ct|=4,dy(d.current),cy(d,d.current,v,a),ct=E,ul(0,!1),nt&&typeof nt.onPostCommitFiberRoot=="function")try{nt.onPostCommitFiberRoot(bt,d)}catch{}return!0}finally{se.p=h,F.T=o,xy(t,i)}}function Ny(t,i,a){i=si(a,i),i=wf(t.stateNode,i,2),t=Mr(t,i,2),t!==null&&(pi(t,2),ki(t))}function _t(t,i,a){if(t.tag===3)Ny(t,t,a);else for(;i!==null;){if(i.tag===3){Ny(i,t,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(qr===null||!qr.has(o))){t=si(a,t),a=Ug(2),o=Mr(i,a,2),o!==null&&(Pg(a,o,i,t),pi(o,2),ki(o));break}}i=i.return}}function $f(t,i,a){var o=t.pingCache;if(o===null){o=t.pingCache=new oT;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(Bf=!0,h.add(a),t=fT.bind(null,t,i,a),i.then(t,t))}function fT(t,i,a){var o=t.pingCache;o!==null&&o.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Et===t&&(Je&a)===a&&(Nt===4||Nt===3&&(Je&62914560)===Je&&300>kt()-Hf?(ct&2)===0&&qa(t,0):jf|=a,za===Je&&(za=0)),ki(t)}function Oy(t,i){i===0&&(i=As()),t=wa(t,i),t!==null&&(pi(t,i),ki(t))}function dT(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),Oy(t,a)}function mT(t,i){var a=0;switch(t.tag){case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),Oy(t,a)}function pT(t,i){return kn(t,i)}var nc=null,Ga=null,Zf=!1,ic=!1,Wf=!1,Zs=0;function ki(t){t!==Ga&&t.next===null&&(Ga===null?nc=Ga=t:Ga=Ga.next=t),ic=!0,Zf||(Zf=!0,yT())}function ul(t,i){if(!Wf&&ic){Wf=!0;do for(var a=!1,o=nc;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var v=o.suspendedLanes,E=o.pingedLanes;d=(1<<31-Jt(42|t)+1)-1,d&=h&~(v&~E),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Py(o,d))}else d=Je,d=Sr(o,o===Et?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||Yi(o,d)||(a=!0,Py(o,d));o=o.next}while(a);Wf=!1}}function gT(){My()}function My(){ic=Zf=!1;var t=0;Zs!==0&&(ST()&&(t=Zs),Zs=0);for(var i=kt(),a=null,o=nc;o!==null;){var h=o.next,d=Vy(o,i);d===0?(o.next=null,a===null?nc=h:a.next=h,h===null&&(Ga=a)):(a=o,(t!==0||(d&3)!==0)&&(ic=!0)),o=h}ul(t)}function Vy(t,i){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-Jt(d),E=1<<v,R=h[v];R===-1?((E&a)===0||(E&o)!==0)&&(h[v]=Rr(E,i)):R<=i&&(t.expiredLanes|=E),d&=~E}if(i=Et,a=Je,a=Sr(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===i&&(ht===2||ht===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&Gt(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Yi(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(o!==null&&Gt(o),j(a)){case 2:case 8:a=Ln;break;case 32:a=xn;break;case 268435456:a=Ot;break;default:a=xn}return o=Uy.bind(null,t),a=kn(a,o),t.callbackPriority=i,t.callbackNode=a,i}return o!==null&&o!==null&&Gt(o),t.callbackPriority=2,t.callbackNode=null,2}function Uy(t,i){if(hn!==0&&hn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(tc()&&t.callbackNode!==a)return null;var o=Je;return o=Sr(t,t===Et?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(yy(t,o,i),Vy(t,kt()),t.callbackNode!=null&&t.callbackNode===a?Uy.bind(null,t):null)}function Py(t,i){if(tc())return null;yy(t,i,!0)}function yT(){IT(function(){(ct&6)!==0?kn(vs,gT):My()})}function Jf(){return Zs===0&&(Zs=bs()),Zs}function ky(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:fa(""+t)}function Ly(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function _T(t,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var d=ky((h[Ee]||null).action),v=o.submitter;v&&(i=(i=v[Ee]||null)?ky(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var E=new da("action","action",null,o,h);t.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Zs!==0){var R=v?Ly(h,v):new FormData(h);vf(a,{pending:!0,data:R,method:h.method,action:d},null,R)}}else typeof d=="function"&&(E.preventDefault(),R=v?Ly(h,v):new FormData(h),vf(a,{pending:!0,data:R,method:h.method,action:d},d,R))},currentTarget:h}]})}}for(var ed=0;ed<kh.length;ed++){var td=kh[ed],vT=td.toLowerCase(),ET=td[0].toUpperCase()+td.slice(1);yi(vT,"on"+ET)}yi(yp,"onAnimationEnd"),yi(_p,"onAnimationIteration"),yi(vp,"onAnimationStart"),yi("dblclick","onDoubleClick"),yi("focusin","onFocus"),yi("focusout","onBlur"),yi(k1,"onTransitionRun"),yi(L1,"onTransitionStart"),yi(z1,"onTransitionCancel"),yi(Ep,"onTransitionEnd"),jn("onMouseEnter",["mouseout","mouseover"]),jn("onMouseLeave",["mouseout","mouseover"]),jn("onPointerEnter",["pointerout","pointerover"]),jn("onPointerLeave",["pointerout","pointerover"]),en("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),en("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),en("onBeforeInput",["compositionend","keypress","textInput","paste"]),en("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),en("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),en("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cl));function zy(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var d=void 0;if(i)for(var v=o.length-1;0<=v;v--){var E=o[v],R=E.instance,B=E.currentTarget;if(E=E.listener,R!==d&&h.isPropagationStopped())break e;d=E,h.currentTarget=B;try{d(h)}catch(K){Gu(K)}h.currentTarget=null,d=R}else for(v=0;v<o.length;v++){if(E=o[v],R=E.instance,B=E.currentTarget,E=E.listener,R!==d&&h.isPropagationStopped())break e;d=E,h.currentTarget=B;try{d(h)}catch(K){Gu(K)}h.currentTarget=null,d=R}}}}function Ke(t,i){var a=i[ye];a===void 0&&(a=i[ye]=new Set);var o=t+"__bubble";a.has(o)||(By(i,t,2,!1),a.add(o))}function nd(t,i,a){var o=0;i&&(o|=4),By(a,t,o,i)}var rc="_reactListening"+Math.random().toString(36).slice(2);function id(t){if(!t[rc]){t[rc]=!0,Mt.forEach(function(a){a!=="selectionchange"&&(TT.has(a)||nd(a,!1,t),nd(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[rc]||(i[rc]=!0,nd("selectionchange",!1,i))}}function By(t,i,a,o){switch(c_(i)){case 2:var h=KT;break;case 8:h=XT;break;default:h=yd}a=h.bind(null,i,a,t),h=void 0,!ii||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function rd(t,i,a,o,h){var d=o;if((i&1)===0&&(i&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===h)break;if(v===4)for(v=o.return;v!==null;){var R=v.tag;if((R===3||R===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;E!==null;){if(v=vt(E),v===null)return;if(R=v.tag,R===5||R===6||R===26||R===27){o=d=v;continue e}E=E.parentNode}}o=o.return}au(function(){var B=d,K=ni(a),$=[];e:{var q=Tp.get(t);if(q!==void 0){var H=da,Oe=t;switch(t){case"keypress":if(Ci(a)===0)break e;case"keydown":case"keyup":H=va;break;case"focusin":Oe="focus",H=ga;break;case"focusout":Oe="blur",H=ga;break;case"beforeblur":case"afterblur":H=ga;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=ri;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=xh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=mu;break;case yp:case _p:case vp:H=ya;break;case Ep:H=gu;break;case"scroll":case"scrollend":H=ou;break;case"wheel":H=Ea;break;case"copy":case"cut":case"paste":H=_a;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Vo;break;case"toggle":case"beforetoggle":H=_u}var Se=(i&4)!==0,gt=!Se&&(t==="scroll"||t==="scrollend"),k=Se?q!==null?q+"Capture":null:q;Se=[];for(var N=B,z;N!==null;){var X=N;if(z=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||z===null||k===null||(X=Ds(N,k),X!=null&&Se.push(hl(N,X,z))),gt)break;N=N.return}0<Se.length&&(q=new H(q,Oe,null,a,K),$.push({event:q,listeners:Se}))}}if((i&7)===0){e:{if(q=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",q&&a!==$i&&(Oe=a.relatedTarget||a.fromElement)&&(vt(Oe)||Oe[Ue]))break e;if((H||q)&&(q=K.window===K?K:(q=K.ownerDocument)?q.defaultView||q.parentWindow:window,H?(Oe=a.relatedTarget||a.toElement,H=B,Oe=Oe?vt(Oe):null,Oe!==null&&(gt=c(Oe),Se=Oe.tag,Oe!==gt||Se!==5&&Se!==27&&Se!==6)&&(Oe=null)):(H=null,Oe=B),H!==Oe)){if(Se=ri,X="onMouseLeave",k="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(Se=Vo,X="onPointerLeave",k="onPointerEnter",N="pointer"),gt=H==null?q:yt(H),z=Oe==null?q:yt(Oe),q=new Se(X,N+"leave",H,a,K),q.target=gt,q.relatedTarget=z,X=null,vt(K)===B&&(Se=new Se(k,N+"enter",Oe,a,K),Se.target=z,Se.relatedTarget=gt,X=Se),gt=X,H&&Oe)t:{for(Se=H,k=Oe,N=0,z=Se;z;z=Fa(z))N++;for(z=0,X=k;X;X=Fa(X))z++;for(;0<N-z;)Se=Fa(Se),N--;for(;0<z-N;)k=Fa(k),z--;for(;N--;){if(Se===k||k!==null&&Se===k.alternate)break t;Se=Fa(Se),k=Fa(k)}Se=null}else Se=null;H!==null&&jy($,q,H,Se,!1),Oe!==null&&gt!==null&&jy($,gt,Oe,Se,!0)}}e:{if(q=B?yt(B):window,H=q.nodeName&&q.nodeName.toLowerCase(),H==="select"||H==="input"&&q.type==="file")var pe=ap;else if(Qt(q))if(op)pe=V1;else{pe=O1;var Fe=N1}else H=q.nodeName,!H||H.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&Io(B.elementType)&&(pe=ap):pe=M1;if(pe&&(pe=pe(t,B))){tr($,pe,a,K);break e}Fe&&Fe(t,q,B),t==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&Cr(q,"number",q.value)}switch(Fe=B?yt(B):window,t){case"focusin":(Qt(Fe)||Fe.contentEditable==="true")&&(Ta=Fe,Vh=B,ko=null);break;case"focusout":ko=Vh=Ta=null;break;case"mousedown":Uh=!0;break;case"contextmenu":case"mouseup":case"dragend":Uh=!1,pp($,a,K);break;case"selectionchange":if(P1)break;case"keydown":case"keyup":pp($,a,K)}var be;if(Ni)e:{switch(t){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else Ze?G(t,a)&&(Re="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Re="onCompositionStart");Re&&(y&&a.locale!=="ko"&&(Ze||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&Ze&&(be=xo()):(Ii=K,xr="value"in Ii?Ii.value:Ii.textContent,Ze=!0)),Fe=sc(B,Re),0<Fe.length&&(Re=new Oo(Re,t,null,a,K),$.push({event:Re,listeners:Fe}),be?Re.data=be:(be=ae(a),be!==null&&(Re.data=be)))),(be=m?Ft(t,a):We(t,a))&&(Re=sc(B,"onBeforeInput"),0<Re.length&&(Fe=new Oo("onBeforeInput","beforeinput",null,a,K),$.push({event:Fe,listeners:Re}),Fe.data=be)),_T($,t,B,a,K)}zy($,i)})}function hl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function sc(t,i){for(var a=i+"Capture",o=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Ds(t,a),h!=null&&o.unshift(hl(t,h,d)),h=Ds(t,i),h!=null&&o.push(hl(t,h,d))),t.tag===3)return o;t=t.return}return[]}function Fa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function jy(t,i,a,o,h){for(var d=i._reactName,v=[];a!==null&&a!==o;){var E=a,R=E.alternate,B=E.stateNode;if(E=E.tag,R!==null&&R===o)break;E!==5&&E!==26&&E!==27||B===null||(R=B,h?(B=Ds(a,d),B!=null&&v.unshift(hl(a,B,R))):h||(B=Ds(a,d),B!=null&&v.push(hl(a,B,R)))),a=a.return}v.length!==0&&t.push({event:i,listeners:v})}var bT=/\r\n?/g,AT=/\u0000|\uFFFD/g;function qy(t){return(typeof t=="string"?t:""+t).replace(bT,`
`).replace(AT,"")}function Hy(t,i){return i=qy(i),qy(t)===i}function ac(){}function pt(t,i,a,o,h,d){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||ti(t,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&ti(t,""+o);break;case"className":Si(t,"class",o);break;case"tabIndex":Si(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Si(t,a,o);break;case"style":Ro(t,o,d);break;case"data":if(i!=="object"){Si(t,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=fa(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&pt(t,i,"name",h.name,h,null),pt(t,i,"formEncType",h.formEncType,h,null),pt(t,i,"formMethod",h.formMethod,h,null),pt(t,i,"formTarget",h.formTarget,h,null)):(pt(t,i,"encType",h.encType,h,null),pt(t,i,"method",h.method,h,null),pt(t,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=fa(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=ac);break;case"onScroll":o!=null&&Ke("scroll",t);break;case"onScrollEnd":o!=null&&Ke("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=fa(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":Ke("beforetoggle",t),Ke("toggle",t),Ir(t,"popover",o);break;case"xlinkActuate":ln(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":ln(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":ln(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":ln(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":ln(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":ln(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":ln(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":ln(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":ln(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Ir(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ih.get(a)||a,Ir(t,a,o))}}function sd(t,i,a,o,h,d){switch(a){case"style":Ro(t,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof o=="string"?ti(t,o):(typeof o=="number"||typeof o=="bigint")&&ti(t,""+o);break;case"onScroll":o!=null&&Ke("scroll",t);break;case"onScrollEnd":o!=null&&Ke("scrollend",t);break;case"onClick":o!=null&&(t.onclick=ac);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xt.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[Ee]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):Ir(t,a,o)}}}function fn(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",t),Ke("load",t);var o=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:pt(t,i,d,v,a,null)}}h&&pt(t,i,"srcSet",a.srcSet,a,null),o&&pt(t,i,"src",a.src,a,null);return;case"input":Ke("invalid",t);var E=d=v=h=null,R=null,B=null;for(o in a)if(a.hasOwnProperty(o)){var K=a[o];if(K!=null)switch(o){case"name":h=K;break;case"type":v=K;break;case"checked":R=K;break;case"defaultChecked":B=K;break;case"value":d=K;break;case"defaultValue":E=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,i));break;default:pt(t,i,o,K,a,null)}}Is(t,d,E,R,B,v,h,!1),ha(t);return;case"select":Ke("invalid",t),o=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":d=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:pt(t,i,h,E,a,null)}i=d,a=v,t.multiple=!!o,i!=null?Xi(t,!!o,i,!1):a!=null&&Xi(t,!!o,a,!0);return;case"textarea":Ke("invalid",t),d=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":h=E;break;case"children":d=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:pt(t,i,v,E,a,null)}Cs(t,o,h,d),ha(t);return;case"option":for(R in a)if(a.hasOwnProperty(R)&&(o=a[R],o!=null))switch(R){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:pt(t,i,R,o,a,null)}return;case"dialog":Ke("beforetoggle",t),Ke("toggle",t),Ke("cancel",t),Ke("close",t);break;case"iframe":case"object":Ke("load",t);break;case"video":case"audio":for(o=0;o<cl.length;o++)Ke(cl[o],t);break;case"image":Ke("error",t),Ke("load",t);break;case"details":Ke("toggle",t);break;case"embed":case"source":case"link":Ke("error",t),Ke("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(o=a[B],o!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:pt(t,i,B,o,a,null)}return;default:if(Io(i)){for(K in a)a.hasOwnProperty(K)&&(o=a[K],o!==void 0&&sd(t,i,K,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&pt(t,i,E,o,a,null))}function wT(t,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,E=null,R=null,B=null,K=null;for(H in a){var $=a[H];if(a.hasOwnProperty(H)&&$!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":R=$;default:o.hasOwnProperty(H)||pt(t,i,H,null,o,$)}}for(var q in o){var H=o[q];if($=a[q],o.hasOwnProperty(q)&&(H!=null||$!=null))switch(q){case"type":d=H;break;case"name":h=H;break;case"checked":B=H;break;case"defaultChecked":K=H;break;case"value":v=H;break;case"defaultValue":E=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:H!==$&&pt(t,i,q,H,o,$)}}qn(t,v,E,R,B,K,d,h);return;case"select":H=v=E=q=null;for(d in a)if(R=a[d],a.hasOwnProperty(d)&&R!=null)switch(d){case"value":break;case"multiple":H=R;default:o.hasOwnProperty(d)||pt(t,i,d,null,o,R)}for(h in o)if(d=o[h],R=a[h],o.hasOwnProperty(h)&&(d!=null||R!=null))switch(h){case"value":q=d;break;case"defaultValue":E=d;break;case"multiple":v=d;default:d!==R&&pt(t,i,h,d,o,R)}i=E,a=v,o=H,q!=null?Xi(t,!!a,q,!1):!!o!=!!a&&(i!=null?Xi(t,!!a,i,!0):Xi(t,!!a,a?[]:"",!1));return;case"textarea":H=q=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:pt(t,i,E,null,o,h)}for(v in o)if(h=o[v],d=a[v],o.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":q=h;break;case"defaultValue":H=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&pt(t,i,v,h,o,d)}dt(t,q,H);return;case"option":for(var Oe in a)if(q=a[Oe],a.hasOwnProperty(Oe)&&q!=null&&!o.hasOwnProperty(Oe))switch(Oe){case"selected":t.selected=!1;break;default:pt(t,i,Oe,null,o,q)}for(R in o)if(q=o[R],H=a[R],o.hasOwnProperty(R)&&q!==H&&(q!=null||H!=null))switch(R){case"selected":t.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:pt(t,i,R,q,o,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in a)q=a[Se],a.hasOwnProperty(Se)&&q!=null&&!o.hasOwnProperty(Se)&&pt(t,i,Se,null,o,q);for(B in o)if(q=o[B],H=a[B],o.hasOwnProperty(B)&&q!==H&&(q!=null||H!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,i));break;default:pt(t,i,B,q,o,H)}return;default:if(Io(i)){for(var gt in a)q=a[gt],a.hasOwnProperty(gt)&&q!==void 0&&!o.hasOwnProperty(gt)&&sd(t,i,gt,void 0,o,q);for(K in o)q=o[K],H=a[K],!o.hasOwnProperty(K)||q===H||q===void 0&&H===void 0||sd(t,i,K,q,o,H);return}}for(var k in a)q=a[k],a.hasOwnProperty(k)&&q!=null&&!o.hasOwnProperty(k)&&pt(t,i,k,null,o,q);for($ in o)q=o[$],H=a[$],!o.hasOwnProperty($)||q===H||q==null&&H==null||pt(t,i,$,q,o,H)}var ad=null,od=null;function oc(t){return t.nodeType===9?t:t.ownerDocument}function Gy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Fy(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function ld(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ud=null;function ST(){var t=window.event;return t&&t.type==="popstate"?t===ud?!1:(ud=t,!0):(ud=null,!1)}var Qy=typeof setTimeout=="function"?setTimeout:void 0,RT=typeof clearTimeout=="function"?clearTimeout:void 0,Yy=typeof Promise=="function"?Promise:void 0,IT=typeof queueMicrotask=="function"?queueMicrotask:typeof Yy<"u"?function(t){return Yy.resolve(null).then(t).catch(CT)}:Qy;function CT(t){setTimeout(function(){throw t})}function Fr(t){return t==="head"}function Ky(t,i){var a=i,o=0,h=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<o&&8>o){a=o;var v=t.ownerDocument;if(a&1&&fl(v.documentElement),a&2&&fl(v.body),a&4)for(a=v.head,fl(a),v=a.firstChild;v;){var E=v.nextSibling,R=v.nodeName;v[Ne]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(h===0){t.removeChild(d),El(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:o=a.charCodeAt(0)-48;else o=0;a=d}while(a);El(i)}function cd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":cd(a),st(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function xT(t,i,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Ne])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=vi(t.nextSibling),t===null)break}return null}function DT(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=vi(t.nextSibling),t===null))return null;return t}function hd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function NT(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function vi(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var fd=null;function Xy(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function $y(t,i,a){switch(i=oc(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function fl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);st(t)}var hi=new Map,Zy=new Set;function lc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var mr=se.d;se.d={f:OT,r:MT,D:VT,C:UT,L:PT,m:kT,X:zT,S:LT,M:BT};function OT(){var t=mr.f(),i=Ju();return t||i}function MT(t){var i=ft(t);i!==null&&i.tag===5&&i.type==="form"?yg(i):mr.r(t)}var Qa=typeof document>"u"?null:document;function Wy(t,i,a){var o=Qa;if(o&&typeof i=="string"&&i){var h=zt(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Zy.has(h)||(Zy.add(h),t={rel:t,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),fn(i,"link",t),Te(i),o.head.appendChild(i)))}}function VT(t){mr.D(t),Wy("dns-prefetch",t,null)}function UT(t,i){mr.C(t,i),Wy("preconnect",t,i)}function PT(t,i,a){mr.L(t,i,a);var o=Qa;if(o&&t&&i){var h='link[rel="preload"][as="'+zt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+zt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+zt(a.imageSizes)+'"]')):h+='[href="'+zt(t)+'"]';var d=h;switch(i){case"style":d=Ya(t);break;case"script":d=Ka(t)}hi.has(d)||(t=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),hi.set(d,t),o.querySelector(h)!==null||i==="style"&&o.querySelector(dl(d))||i==="script"&&o.querySelector(ml(d))||(i=o.createElement("link"),fn(i,"link",t),Te(i),o.head.appendChild(i)))}}function kT(t,i){mr.m(t,i);var a=Qa;if(a&&t){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+zt(o)+'"][href="'+zt(t)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ka(t)}if(!hi.has(d)&&(t=T({rel:"modulepreload",href:t},i),hi.set(d,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ml(d)))return}o=a.createElement("link"),fn(o,"link",t),Te(o),a.head.appendChild(o)}}}function LT(t,i,a){mr.S(t,i,a);var o=Qa;if(o&&t){var h=At(o).hoistableStyles,d=Ya(t);i=i||"default";var v=h.get(d);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(dl(d)))E.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":i},a),(a=hi.get(d))&&dd(t,a);var R=v=o.createElement("link");Te(R),fn(R,"link",t),R._p=new Promise(function(B,K){R.onload=B,R.onerror=K}),R.addEventListener("load",function(){E.loading|=1}),R.addEventListener("error",function(){E.loading|=2}),E.loading|=4,uc(v,i,o)}v={type:"stylesheet",instance:v,count:1,state:E},h.set(d,v)}}}function zT(t,i){mr.X(t,i);var a=Qa;if(a&&t){var o=At(a).hoistableScripts,h=Ka(t),d=o.get(h);d||(d=a.querySelector(ml(h)),d||(t=T({src:t,async:!0},i),(i=hi.get(h))&&md(t,i),d=a.createElement("script"),Te(d),fn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function BT(t,i){mr.M(t,i);var a=Qa;if(a&&t){var o=At(a).hoistableScripts,h=Ka(t),d=o.get(h);d||(d=a.querySelector(ml(h)),d||(t=T({src:t,async:!0,type:"module"},i),(i=hi.get(h))&&md(t,i),d=a.createElement("script"),Te(d),fn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function Jy(t,i,a,o){var h=(h=Ie.current)?lc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ya(a.href),a=At(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Ya(a.href);var d=At(h).hoistableStyles,v=d.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=h.querySelector(dl(t)))&&!d._p&&(v.instance=d,v.state.loading=5),hi.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},hi.set(t,a),d||jT(h,t,a,v.state))),i&&o===null)throw Error(s(528,""));return v}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ka(a),a=At(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Ya(t){return'href="'+zt(t)+'"'}function dl(t){return'link[rel="stylesheet"]['+t+"]"}function e_(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function jT(t,i,a,o){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=t.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),fn(i,"link",a),Te(i),t.head.appendChild(i))}function Ka(t){return'[src="'+zt(t)+'"]'}function ml(t){return"script[async]"+t}function t_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=t.querySelector('style[data-href~="'+zt(a.href)+'"]');if(o)return i.instance=o,Te(o),o;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Te(o),fn(o,"style",h),uc(o,a.precedence,t),i.instance=o;case"stylesheet":h=Ya(a.href);var d=t.querySelector(dl(h));if(d)return i.state.loading|=4,i.instance=d,Te(d),d;o=e_(a),(h=hi.get(h))&&dd(o,h),d=(t.ownerDocument||t).createElement("link"),Te(d);var v=d;return v._p=new Promise(function(E,R){v.onload=E,v.onerror=R}),fn(d,"link",o),i.state.loading|=4,uc(d,a.precedence,t),i.instance=d;case"script":return d=Ka(a.src),(h=t.querySelector(ml(d)))?(i.instance=h,Te(h),h):(o=a,(h=hi.get(d))&&(o=T({},a),md(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),Te(h),fn(h,"link",o),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,uc(o,a.precedence,t));return i.instance}function uc(t,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===i)d=E;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function dd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function md(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var cc=null;function n_(t,i,a){if(cc===null){var o=new Map,h=cc=new Map;h.set(a,o)}else h=cc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[Ne]||d[le]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=t+v;var E=o.get(v);E?E.push(d):o.set(v,[d])}}return o}function i_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function qT(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function r_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var pl=null;function HT(){}function GT(t,i,a){if(pl===null)throw Error(s(475));var o=pl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Ya(a.href),d=t.querySelector(dl(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(o.count++,o=hc.bind(o),t.then(o,o)),i.state.loading|=4,i.instance=d,Te(d);return}d=t.ownerDocument||t,a=e_(a),(h=hi.get(h))&&dd(a,h),d=d.createElement("link"),Te(d);var v=d;v._p=new Promise(function(E,R){v.onload=E,v.onerror=R}),fn(d,"link",a),i.instance=d}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(o.count++,i=hc.bind(o),t.addEventListener("load",i),t.addEventListener("error",i))}}function FT(){if(pl===null)throw Error(s(475));var t=pl;return t.stylesheets&&t.count===0&&pd(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&pd(t,t.stylesheets),t.unsuspend){var o=t.unsuspend;t.unsuspend=null,o()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function hc(){if(this.count--,this.count===0){if(this.stylesheets)pd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var fc=null;function pd(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,fc=new Map,i.forEach(QT,t),fc=null,hc.call(t))}function QT(t,i){if(!(i.state.loading&4)){var a=fc.get(t);if(a)var o=a.get(null);else{a=new Map,fc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||o,d===o&&a.set(null,h),a.set(v,h),this.count++,o=hc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var gl={$$typeof:ge,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function YT(t,i,a,o,h,d,v,E){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jn(0),this.hiddenUpdates=Jn(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function s_(t,i,a,o,h,d,v,E,R,B,K,$){return t=new YT(t,i,a,v,E,R,B,$),i=1,d===!0&&(i|=24),d=Gn(3,null,null,i),t.current=d,d.stateNode=t,i=Xh(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:o,isDehydrated:a,cache:i},Jh(d),t}function a_(t){return t?(t=Sa,t):Sa}function o_(t,i,a,o,h,d){h=a_(h),o.context===null?o.context=h:o.pendingContext=h,o=Or(i),o.payload={element:a},d=d===void 0?null:d,d!==null&&(o.callback=d),a=Mr(t,o,i),a!==null&&(Xn(a,t,i),Qo(a,t,i))}function l_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function gd(t,i){l_(t,i),(t=t.alternate)&&l_(t,i)}function u_(t){if(t.tag===13){var i=wa(t,67108864);i!==null&&Xn(i,t,67108864),gd(t,67108864)}}var dc=!0;function KT(t,i,a,o){var h=F.T;F.T=null;var d=se.p;try{se.p=2,yd(t,i,a,o)}finally{se.p=d,F.T=h}}function XT(t,i,a,o){var h=F.T;F.T=null;var d=se.p;try{se.p=8,yd(t,i,a,o)}finally{se.p=d,F.T=h}}function yd(t,i,a,o){if(dc){var h=_d(o);if(h===null)rd(t,i,o,mc,a),h_(t,o);else if(ZT(h,t,i,a,o))o.stopPropagation();else if(h_(t,o),i&4&&-1<$T.indexOf(t)){for(;h!==null;){var d=ft(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=zn(d.pendingLanes);if(v!==0){var E=d;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var R=1<<31-Jt(v);E.entanglements[1]|=R,v&=~R}ki(d),(ct&6)===0&&(Zu=kt()+500,ul(0))}}break;case 13:E=wa(d,2),E!==null&&Xn(E,d,2),Ju(),gd(d,2)}if(d=_d(o),d===null&&rd(t,i,o,mc,a),d===h)break;h=d}h!==null&&o.stopPropagation()}else rd(t,i,o,null,a)}}function _d(t){return t=ni(t),vd(t)}var mc=null;function vd(t){if(mc=null,t=vt(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return mc=t,null}function c_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mi()){case vs:return 2;case Ln:return 8;case xn:case bi:return 32;case Ot:return 268435456;default:return 32}default:return 32}}var Ed=!1,Qr=null,Yr=null,Kr=null,yl=new Map,_l=new Map,Xr=[],$T="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function h_(t,i){switch(t){case"focusin":case"focusout":Qr=null;break;case"dragenter":case"dragleave":Yr=null;break;case"mouseover":case"mouseout":Kr=null;break;case"pointerover":case"pointerout":yl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":_l.delete(i.pointerId)}}function vl(t,i,a,o,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},i!==null&&(i=ft(i),i!==null&&u_(i)),t):(t.eventSystemFlags|=o,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function ZT(t,i,a,o,h){switch(i){case"focusin":return Qr=vl(Qr,t,i,a,o,h),!0;case"dragenter":return Yr=vl(Yr,t,i,a,o,h),!0;case"mouseover":return Kr=vl(Kr,t,i,a,o,h),!0;case"pointerover":var d=h.pointerId;return yl.set(d,vl(yl.get(d)||null,t,i,a,o,h)),!0;case"gotpointercapture":return d=h.pointerId,_l.set(d,vl(_l.get(d)||null,t,i,a,o,h)),!0}return!1}function f_(t){var i=vt(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,me(t.priority,function(){if(a.tag===13){var o=Kn();o=Y(o);var h=wa(a,o);h!==null&&Xn(h,a,o),gd(a,o)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=_d(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);$i=o,a.target.dispatchEvent(o),$i=null}else return i=ft(a),i!==null&&u_(i),t.blockedOn=a,!1;i.shift()}return!0}function d_(t,i,a){pc(t)&&a.delete(i)}function WT(){Ed=!1,Qr!==null&&pc(Qr)&&(Qr=null),Yr!==null&&pc(Yr)&&(Yr=null),Kr!==null&&pc(Kr)&&(Kr=null),yl.forEach(d_),_l.forEach(d_)}function gc(t,i){t.blockedOn===i&&(t.blockedOn=null,Ed||(Ed=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,WT)))}var yc=null;function m_(t){yc!==t&&(yc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){yc===t&&(yc=null);for(var i=0;i<t.length;i+=3){var a=t[i],o=t[i+1],h=t[i+2];if(typeof o!="function"){if(vd(o||a)===null)continue;break}var d=ft(a);d!==null&&(t.splice(i,3),i-=3,vf(d,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function El(t){function i(R){return gc(R,t)}Qr!==null&&gc(Qr,t),Yr!==null&&gc(Yr,t),Kr!==null&&gc(Kr,t),yl.forEach(i),_l.forEach(i);for(var a=0;a<Xr.length;a++){var o=Xr[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Xr.length&&(a=Xr[0],a.blockedOn===null);)f_(a),a.blockedOn===null&&Xr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],d=a[o+1],v=h[Ee]||null;if(typeof d=="function")v||m_(a);else if(v){var E=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[Ee]||null)E=v.formAction;else if(vd(h)!==null)continue}else E=v.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),m_(a)}}}function Td(t){this._internalRoot=t}_c.prototype.render=Td.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=Kn();o_(a,o,t,i,null,null)},_c.prototype.unmount=Td.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;o_(t.current,2,null,t,null,null),Ju(),i[Ue]=null}};function _c(t){this._internalRoot=t}_c.prototype.unstable_scheduleHydration=function(t){if(t){var i=re();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Xr.length&&i!==0&&i<Xr[a].priority;a++);Xr.splice(a,0,t),a===0&&f_(t)}};var p_=e.version;if(p_!=="19.1.0")throw Error(s(527,p_,"19.1.0"));se.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=g(i),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var JT={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vc.isDisabled&&vc.supportsFiber)try{bt=vc.inject(JT),nt=vc}catch{}}return bl.createRoot=function(t,i){if(!l(t))throw Error(s(299));var a=!1,o="",h=Ng,d=Og,v=Mg,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=s_(t,1,!1,null,null,a,o,h,d,v,E,null),t[Ue]=i.current,id(t),new Td(i)},bl.hydrateRoot=function(t,i,a){if(!l(t))throw Error(s(299));var o=!1,h="",d=Ng,v=Og,E=Mg,R=null,B=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(R=a.unstable_transitionCallbacks),a.formState!==void 0&&(B=a.formState)),i=s_(t,1,!0,i,a??null,o,h,d,v,E,R,B),i.context=a_(null),a=i.current,o=Kn(),o=Y(o),h=Or(o),h.callback=null,Mr(a,h,o),a=o,i.current.lanes=a,pi(i,a),ki(i),t[Ue]=i.current,id(t),new _c(i)},bl.version="19.1.0",bl}var S_;function cb(){if(S_)return wd.exports;S_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),wd.exports=ub(),wd.exports}var hb=cb();const fb=()=>{};var R_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},db=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[n++];e[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[n++],f=r[n++],p=r[n++],g=((l&7)<<18|(c&63)<<12|(f&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const c=r[n++],f=r[n++];e[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|f&63)}}return e.join("")},r0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],f=l+1<r.length,p=f?r[l+1]:0,g=l+2<r.length,_=g?r[l+2]:0,T=c>>2,I=(c&3)<<4|p>>4;let x=(p&15)<<2|_>>6,Q=_&63;g||(Q=64,f||(x=64)),s.push(n[T],n[I],n[x],n[Q])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(i0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):db(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=n[r.charAt(l++)],p=l<r.length?n[r.charAt(l)]:0;++l;const _=l<r.length?n[r.charAt(l)]:64;++l;const I=l<r.length?n[r.charAt(l)]:64;if(++l,c==null||p==null||_==null||I==null)throw new mb;const x=c<<2|p>>4;if(s.push(x),_!==64){const Q=p<<4&240|_>>2;if(s.push(Q),I!==64){const ee=_<<6&192|I;s.push(ee)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class mb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pb=function(r){const e=i0(r);return r0.encodeByteArray(e,!0)},kc=function(r){return pb(r).replace(/\./g,"")},s0=function(r){try{return r0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb=()=>gb().__FIREBASE_DEFAULTS__,_b=()=>{if(typeof process>"u"||typeof R_>"u")return;const r=R_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},vb=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&s0(r[1]);return e&&JSON.parse(e)},ih=()=>{try{return fb()||yb()||_b()||vb()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},a0=r=>{var e,n;return(n=(e=ih())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[r]},Eb=r=>{const e=a0(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},o0=()=>{var r;return(r=ih())===null||r===void 0?void 0:r.config},l0=r=>{var e;return(e=ih())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(r){return r.endsWith(".cloudworkstations.dev")}async function u0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},r);return[kc(JSON.stringify(n)),kc(JSON.stringify(f)),""].join(".")}const xl={};function Ab(){const r={prod:[],emulator:[]};for(const e of Object.keys(xl))xl[e]?r.emulator.push(e):r.prod.push(e);return r}function wb(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let I_=!1;function c0(r,e){if(typeof window>"u"||typeof document>"u"||!po(window.location.host)||xl[r]===e||xl[r]||I_)return;xl[r]=e;function n(x){return`__firebase__banner__${x}`}const s="__firebase__banner",c=Ab().prod.length>0;function f(){const x=document.getElementById(s);x&&x.remove()}function p(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function g(x,Q){x.setAttribute("width","24"),x.setAttribute("id",Q),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function _(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{I_=!0,f()},x}function T(x,Q){x.setAttribute("id",Q),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function I(){const x=wb(s),Q=n("text"),ee=document.getElementById(Q)||document.createElement("span"),te=n("learnmore"),ne=document.getElementById(te)||document.createElement("a"),xe=n("preprendIcon"),we=document.getElementById(xe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const ge=x.element;p(ge),T(ne,te);const Ge=_();g(we,xe),ge.append(we,ee,ne,Ge),document.body.appendChild(ge)}c?(ee.innerText="Preview backend disconnected.",we.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(we.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,ee.innerText="Preview backend running in this workspace."),ee.setAttribute("id",Q)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Sb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bn())}function Rb(){var r;const e=(r=ih())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ib(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Cb(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function xb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Db(){const r=bn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Nb(){return!Rb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ob(){try{return typeof indexedDB=="object"}catch{return!1}}function Mb(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var c;e(((c=l.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="FirebaseError";class wr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Vb,Object.setPrototypeOf(this,wr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hl.prototype.create)}}class Hl{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},l=`${this.service}/${e}`,c=this.errors[e],f=c?Ub(c,s):"Error",p=`${this.serviceName}: ${f} (${l}).`;return new wr(l,p,s)}}function Ub(r,e){return r.replace(Pb,(n,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const Pb=/\{\$([^}]+)}/g;function kb(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ea(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const l of n){if(!s.includes(l))return!1;const c=r[l],f=e[l];if(C_(c)&&C_(f)){if(!ea(c,f))return!1}else if(c!==f)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function C_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Lb(r,e){const n=new zb(r,e);return n.subscribe.bind(n)}class zb{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let l;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Bb(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:s},l.next===void 0&&(l.next=Cd),l.error===void 0&&(l.error=Cd),l.complete===void 0&&(l.complete=Cd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Bb(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Cd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(r){return r&&r._delegate?r._delegate:r}class ta{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Tb;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),l=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(l)return null;throw c}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Hb(e))try{this.getOrInitializeService({instanceIdentifier:Ws})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(e=Ws){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ws){return this.instances.has(e)}getOptions(e=Ws){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);s===p&&f.resolve(l)}return l}onInit(e,n){var s;const l=this.normalizeInstanceIdentifier(n),c=(s=this.onInitCallbacks.get(l))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(l,c);const f=this.instances.get(l);return f&&e(f,l),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:qb(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ws){return this.component?this.component.multipleInstances?e:Ws:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qb(r){return r===Ws?void 0:r}function Hb(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new jb(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Xe||(Xe={}));const Fb={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},Qb=Xe.INFO,Yb={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},Kb=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),l=Yb[e];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mm{constructor(e){this.name=e,this._logLevel=Qb,this._logHandler=Kb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Fb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const Xb=(r,e)=>e.some(n=>r instanceof n);let x_,D_;function $b(){return x_||(x_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Zb(){return D_||(D_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const h0=new WeakMap,Bd=new WeakMap,f0=new WeakMap,xd=new WeakMap,pm=new WeakMap;function Wb(r){const e=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",f)},c=()=>{n(rs(r.result)),l()},f=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&h0.set(n,r)}).catch(()=>{}),pm.set(e,r),e}function Jb(r){if(Bd.has(r))return;const e=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",f),r.removeEventListener("abort",f)},c=()=>{n(),l()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",f),r.addEventListener("abort",f)});Bd.set(r,e)}let jd={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Bd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||f0.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return rs(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function eA(r){jd=r(jd)}function tA(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(Dd(this),e,...n);return f0.set(s,e.sort?e.sort():[e]),rs(s)}:Zb().includes(r)?function(...e){return r.apply(Dd(this),e),rs(h0.get(this))}:function(...e){return rs(r.apply(Dd(this),e))}}function nA(r){return typeof r=="function"?tA(r):(r instanceof IDBTransaction&&Jb(r),Xb(r,$b())?new Proxy(r,jd):r)}function rs(r){if(r instanceof IDBRequest)return Wb(r);if(xd.has(r))return xd.get(r);const e=nA(r);return e!==r&&(xd.set(r,e),pm.set(e,r)),e}const Dd=r=>pm.get(r);function iA(r,e,{blocked:n,upgrade:s,blocking:l,terminated:c}={}){const f=indexedDB.open(r,e),p=rs(f);return s&&f.addEventListener("upgradeneeded",g=>{s(rs(f.result),g.oldVersion,g.newVersion,rs(f.transaction),g)}),n&&f.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),l&&g.addEventListener("versionchange",_=>l(_.oldVersion,_.newVersion,_))}).catch(()=>{}),p}const rA=["get","getKey","getAll","getAllKeys","count"],sA=["put","add","delete","clear"],Nd=new Map;function N_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Nd.get(e))return Nd.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,l=sA.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||rA.includes(n)))return;const c=async function(f,...p){const g=this.transaction(f,l?"readwrite":"readonly");let _=g.store;return s&&(_=_.index(p.shift())),(await Promise.all([_[n](...p),l&&g.done]))[0]};return Nd.set(e,c),c}eA(r=>({...r,get:(e,n,s)=>N_(e,n)||r.get(e,n,s),has:(e,n)=>!!N_(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oA(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function oA(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qd="@firebase/app",O_="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r=new mm("@firebase/app"),lA="@firebase/app-compat",uA="@firebase/analytics-compat",cA="@firebase/analytics",hA="@firebase/app-check-compat",fA="@firebase/app-check",dA="@firebase/auth",mA="@firebase/auth-compat",pA="@firebase/database",gA="@firebase/data-connect",yA="@firebase/database-compat",_A="@firebase/functions",vA="@firebase/functions-compat",EA="@firebase/installations",TA="@firebase/installations-compat",bA="@firebase/messaging",AA="@firebase/messaging-compat",wA="@firebase/performance",SA="@firebase/performance-compat",RA="@firebase/remote-config",IA="@firebase/remote-config-compat",CA="@firebase/storage",xA="@firebase/storage-compat",DA="@firebase/firestore",NA="@firebase/ai",OA="@firebase/firestore-compat",MA="firebase",VA="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="[DEFAULT]",UA={[qd]:"fire-core",[lA]:"fire-core-compat",[cA]:"fire-analytics",[uA]:"fire-analytics-compat",[fA]:"fire-app-check",[hA]:"fire-app-check-compat",[dA]:"fire-auth",[mA]:"fire-auth-compat",[pA]:"fire-rtdb",[gA]:"fire-data-connect",[yA]:"fire-rtdb-compat",[_A]:"fire-fn",[vA]:"fire-fn-compat",[EA]:"fire-iid",[TA]:"fire-iid-compat",[bA]:"fire-fcm",[AA]:"fire-fcm-compat",[wA]:"fire-perf",[SA]:"fire-perf-compat",[RA]:"fire-rc",[IA]:"fire-rc-compat",[CA]:"fire-gcs",[xA]:"fire-gcs-compat",[DA]:"fire-fst",[OA]:"fire-fst-compat",[NA]:"fire-vertex","fire-js":"fire-js",[MA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=new Map,PA=new Map,Gd=new Map;function M_(r,e){try{r.container.addComponent(e)}catch(n){_r.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function ao(r){const e=r.name;if(Gd.has(e))return _r.debug(`There were multiple attempts to register component ${e}.`),!1;Gd.set(e,r);for(const n of Lc.values())M_(n,r);for(const n of PA.values())M_(n,r);return!0}function gm(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function fi(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ss=new Hl("app","Firebase",kA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ta("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ss.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=VA;function d0(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Hd,automaticDataCollectionEnabled:!0},e),l=s.name;if(typeof l!="string"||!l)throw ss.create("bad-app-name",{appName:String(l)});if(n||(n=o0()),!n)throw ss.create("no-options");const c=Lc.get(l);if(c){if(ea(n,c.options)&&ea(s,c.config))return c;throw ss.create("duplicate-app",{appName:l})}const f=new Gb(l);for(const g of Gd.values())f.addComponent(g);const p=new LA(n,s,f);return Lc.set(l,p),p}function m0(r=Hd){const e=Lc.get(r);if(!e&&r===Hd&&o0())return d0();if(!e)throw ss.create("no-app",{appName:r});return e}function as(r,e,n){var s;let l=(s=UA[r])!==null&&s!==void 0?s:r;n&&(l+=`-${n}`);const c=l.match(/\s|\//),f=e.match(/\s|\//);if(c||f){const p=[`Unable to register library "${l}" with version "${e}":`];c&&p.push(`library name "${l}" contains illegal characters (whitespace or "/")`),c&&f&&p.push("and"),f&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_r.warn(p.join(" "));return}ao(new ta(`${l}-version`,()=>({library:l,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="firebase-heartbeat-database",BA=1,Ul="firebase-heartbeat-store";let Od=null;function p0(){return Od||(Od=iA(zA,BA,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ul)}catch(n){console.warn(n)}}}}).catch(r=>{throw ss.create("idb-open",{originalErrorMessage:r.message})})),Od}async function jA(r){try{const n=(await p0()).transaction(Ul),s=await n.objectStore(Ul).get(g0(r));return await n.done,s}catch(e){if(e instanceof wr)_r.warn(e.message);else{const n=ss.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_r.warn(n.message)}}}async function V_(r,e){try{const s=(await p0()).transaction(Ul,"readwrite");await s.objectStore(Ul).put(e,g0(r)),await s.done}catch(n){if(n instanceof wr)_r.warn(n.message);else{const s=ss.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});_r.warn(s.message)}}}function g0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=1024,HA=30;class GA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new QA(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=U_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>HA){const f=YA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){_r.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=U_(),{heartbeatsToSend:s,unsentEntries:l}=FA(this._heartbeatsCache.heartbeats),c=kc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return _r.warn(n),""}}}function U_(){return new Date().toISOString().substring(0,10)}function FA(r,e=qA){const n=[];let s=r.slice();for(const l of r){const c=n.find(f=>f.agent===l.agent);if(c){if(c.dates.push(l.date),P_(n)>e){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),P_(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class QA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ob()?Mb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await jA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return V_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return V_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...e.heartbeats]})}else return}}function P_(r){return kc(JSON.stringify({version:2,heartbeats:r})).length}function YA(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(r){ao(new ta("platform-logger",e=>new aA(e),"PRIVATE")),ao(new ta("heartbeat",e=>new GA(e),"PRIVATE")),as(qd,O_,r),as(qd,O_,"esm2017"),as("fire-js","")}KA("");var XA="firebase",$A="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */as(XA,$A,"app");function ym(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(r);l<s.length;l++)e.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(r,s[l])&&(n[s[l]]=r[s[l]]);return n}function y0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ZA=y0,_0=new Hl("auth","Firebase",y0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc=new mm("@firebase/auth");function WA(r,...e){zc.logLevel<=Xe.WARN&&zc.warn(`Auth (${go}): ${r}`,...e)}function Ic(r,...e){zc.logLevel<=Xe.ERROR&&zc.error(`Auth (${go}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(r,...e){throw _m(r,...e)}function zi(r,...e){return _m(r,...e)}function v0(r,e,n){const s=Object.assign(Object.assign({},ZA()),{[e]:n});return new Hl("auth","Firebase",s).create(e,{appName:r.name})}function yr(r){return v0(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _m(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return _0.create(r,...e)}function Me(r,e,...n){if(!r)throw _m(e,...n)}function pr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Ic(e),new Error(e)}function Er(r,e){r||pr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function JA(){return k_()==="http:"||k_()==="https:"}function k_(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JA()||Cb()||"connection"in navigator)?navigator.onLine:!0}function tw(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Er(n>e,"Short delay should be less than long delay!"),this.isMobile=Sb()||xb()}get(){return ew()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(r,e){Er(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rw=new Fl(3e4,6e4);function Ql(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function yo(r,e,n,s,l={}){return T0(r,l,async()=>{let c={},f={};s&&(e==="GET"?f=s:c={body:JSON.stringify(s)});const p=Gl(Object.assign({key:r.config.apiKey},f)).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const _=Object.assign({method:e,headers:g},c);return Ib()||(_.referrerPolicy="no-referrer"),r.emulatorConfig&&po(r.emulatorConfig.host)&&(_.credentials="include"),E0.fetch()(await b0(r,r.config.apiHost,n,p),_)})}async function T0(r,e,n){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},nw),e);try{const l=new sw(r),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw Ec(r,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const p=c.ok?f.errorMessage:f.error.message,[g,_]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ec(r,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw Ec(r,"email-already-in-use",f);if(g==="USER_DISABLED")throw Ec(r,"user-disabled",f);const T=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw v0(r,T,_);vr(r,T)}}catch(l){if(l instanceof wr)throw l;vr(r,"network-request-failed",{message:String(l)})}}async function Em(r,e,n,s,l={}){const c=await yo(r,e,n,s,l);return"mfaPendingCredential"in c&&vr(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function b0(r,e,n,s){const l=`${e}${n}?${s}`,c=r,f=c.config.emulator?vm(r.config,l):`${r.config.apiScheme}://${l}`;return iw.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}class sw{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(zi(this.auth,"network-request-failed")),rw.get())})}}function Ec(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=zi(r,e,s);return l.customData._tokenResponse=n,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aw(r,e){return yo(r,"POST","/v1/accounts:delete",e)}async function Bc(r,e){return yo(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ow(r,e=!1){const n=Zt(r),s=await n.getIdToken(e),l=Tm(s);Me(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,f=c==null?void 0:c.sign_in_provider;return{claims:l,token:s,authTime:Dl(Md(l.auth_time)),issuedAtTime:Dl(Md(l.iat)),expirationTime:Dl(Md(l.exp)),signInProvider:f||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Md(r){return Number(r)*1e3}function Tm(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return Ic("JWT malformed, contained fewer than 3 sections"),null;try{const l=s0(n);return l?JSON.parse(l):(Ic("Failed to decode base64 JWT payload"),null)}catch(l){return Ic("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function L_(r){const e=Tm(r);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof wr&&lw(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function lw({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const l=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,l)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dl(this.lastLoginAt),this.creationTime=Dl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jc(r){var e;const n=r.auth,s=await r.getIdToken(),l=await Pl(r,Bc(n,{idToken:s}));Me(l==null?void 0:l.users.length,n,"internal-error");const c=l.users[0];r._notifyReloadListener(c);const f=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?A0(c.providerUserInfo):[],p=hw(r.providerData,f),g=r.isAnonymous,_=!(r.email&&c.passwordHash)&&!(p!=null&&p.length),T=g?_:!1,I={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:p,metadata:new Qd(c.createdAt,c.lastLoginAt),isAnonymous:T};Object.assign(r,I)}async function cw(r){const e=Zt(r);await jc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hw(r,e){return[...r.filter(s=>!e.some(l=>l.providerId===s.providerId)),...e]}function A0(r){return r.map(e=>{var{providerId:n}=e,s=ym(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fw(r,e){const n=await T0(r,{},async()=>{const s=Gl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,f=await b0(r,l,"/v1/token",`key=${c}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:s};return r.emulatorConfig&&po(r.emulatorConfig.host)&&(g.credentials="include"),E0.fetch()(f,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function dw(r,e){return yo(r,"POST","/v2/accounts:revokeToken",Ql(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):L_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const n=L_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:l,expiresIn:c}=await fw(e,n);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:l,expirationTime:c}=n,f=new no;return s&&(Me(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),l&&(Me(typeof l=="string","internal-error",{appName:e}),f.accessToken=l),c&&(Me(typeof c=="number","internal-error",{appName:e}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new no,this.toJSON())}_performRefresh(){return pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(r,e){Me(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Ei{constructor(e){var{uid:n,auth:s,stsTokenManager:l}=e,c=ym(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=l,this.accessToken=l.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Qd(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const n=await Pl(this,this.stsTokenManager.getToken(this.auth,e));return Me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ow(this,e)}reload(){return cw(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ei(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await jc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fi(this.auth.app))return Promise.reject(yr(this.auth));const e=await this.getIdToken();return await Pl(this,aw(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,l,c,f,p,g,_,T;const I=(s=n.displayName)!==null&&s!==void 0?s:void 0,x=(l=n.email)!==null&&l!==void 0?l:void 0,Q=(c=n.phoneNumber)!==null&&c!==void 0?c:void 0,ee=(f=n.photoURL)!==null&&f!==void 0?f:void 0,te=(p=n.tenantId)!==null&&p!==void 0?p:void 0,ne=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,xe=(_=n.createdAt)!==null&&_!==void 0?_:void 0,we=(T=n.lastLoginAt)!==null&&T!==void 0?T:void 0,{uid:ge,emailVerified:Ge,isAnonymous:ue,providerData:ke,stsTokenManager:M}=n;Me(ge&&M,e,"internal-error");const S=no.fromJSON(this.name,M);Me(typeof ge=="string",e,"internal-error"),Zr(I,e.name),Zr(x,e.name),Me(typeof Ge=="boolean",e,"internal-error"),Me(typeof ue=="boolean",e,"internal-error"),Zr(Q,e.name),Zr(ee,e.name),Zr(te,e.name),Zr(ne,e.name),Zr(xe,e.name),Zr(we,e.name);const C=new Ei({uid:ge,auth:e,email:x,emailVerified:Ge,displayName:I,isAnonymous:ue,photoURL:ee,phoneNumber:Q,tenantId:te,stsTokenManager:S,createdAt:xe,lastLoginAt:we});return ke&&Array.isArray(ke)&&(C.providerData=ke.map(O=>Object.assign({},O))),ne&&(C._redirectEventId=ne),C}static async _fromIdTokenResponse(e,n,s=!1){const l=new no;l.updateFromServerResponse(n);const c=new Ei({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:s});return await jc(c),c}static async _fromGetAccountInfoResponse(e,n,s){const l=n.users[0];Me(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?A0(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!(c!=null&&c.length),p=new no;p.updateFromIdToken(s);const g=new Ei({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:f}),_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new Qd(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,_),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_=new Map;function gr(r){Er(r instanceof Function,"Expected a class definition");let e=z_.get(r);return e?(Er(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,z_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}w0.type="NONE";const B_=w0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(r,e,n){return`firebase:${r}:${e}:${n}`}class io{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=Cc(this.userKey,l.apiKey,c),this.fullPersistenceKey=Cc("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Bc(this.auth,{idToken:e}).catch(()=>{});return n?Ei._fromGetAccountInfoResponse(this.auth,n,e):null}return Ei._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new io(gr(B_),e,s);const l=(await Promise.all(n.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let c=l[0]||gr(B_);const f=Cc(s,e.config.apiKey,e.name);let p=null;for(const _ of n)try{const T=await _._get(f);if(T){let I;if(typeof T=="string"){const x=await Bc(e,{idToken:T}).catch(()=>{});if(!x)break;I=await Ei._fromGetAccountInfoResponse(e,x,T)}else I=Ei._fromJSON(e,T);_!==c&&(p=I),c=_;break}}catch{}const g=l.filter(_=>_._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new io(c,e,s):(c=g[0],p&&await c._set(f,p.toJSON()),await Promise.all(n.map(async _=>{if(_!==c)try{await _._remove(f)}catch{}})),new io(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(C0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(S0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(D0(e))return"Blackberry";if(N0(e))return"Webos";if(R0(e))return"Safari";if((e.includes("chrome/")||I0(e))&&!e.includes("edge/"))return"Chrome";if(x0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function S0(r=bn()){return/firefox\//i.test(r)}function R0(r=bn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function I0(r=bn()){return/crios\//i.test(r)}function C0(r=bn()){return/iemobile/i.test(r)}function x0(r=bn()){return/android/i.test(r)}function D0(r=bn()){return/blackberry/i.test(r)}function N0(r=bn()){return/webos/i.test(r)}function bm(r=bn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function mw(r=bn()){var e;return bm(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function pw(){return Db()&&document.documentMode===10}function O0(r=bn()){return bm(r)||x0(r)||N0(r)||D0(r)||/windows phone/i.test(r)||C0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(r,e=[]){let n;switch(r){case"Browser":n=j_(bn());break;case"Worker":n=`${j_(bn())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${go}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((f,p)=>{try{const g=e(c);f(g)}catch(g){p(g)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yw(r,e={}){return yo(r,"GET","/v2/passwordPolicy",Ql(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w=6;class vw{constructor(e){var n,s,l,c;const f=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=f.minPasswordLength)!==null&&n!==void 0?n:_w,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(l=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&l!==void 0?l:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,l,c,f,p;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(s=g.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),g.isValid&&(g.isValid=(l=g.containsLowercaseLetter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(c=g.containsUppercaseLetter)!==null&&c!==void 0?c:!0),g.isValid&&(g.isValid=(f=g.containsNumericCharacter)!==null&&f!==void 0?f:!0),g.isValid&&(g.isValid=(p=g.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),g}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<e.length;l++)s=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,n,s,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new q_(this),this.idTokenSubscription=new q_(this),this.beforeStateQueue=new gw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gr(n)),this._initializationPromise=this.queue(async()=>{var s,l,c;if(!this._deleted&&(this.persistenceManager=await io.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((l=this._popupRedirectResolver)===null||l===void 0)&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Bc(this,{idToken:e}),s=await Ei._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(fi(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(p,p))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let l=s,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,p=l==null?void 0:l._redirectEventId,g=await this.tryRedirectSignIn(e);(!f||f===p)&&(g!=null&&g.user)&&(l=g.user,c=!0)}if(!l)return this.directlySetCurrentUser(null);if(!l._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(l)}catch(f){l=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return l?this.reloadAndSetCurrentUserOrClear(l):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===l._redirectEventId?this.directlySetCurrentUser(l):this.reloadAndSetCurrentUserOrClear(l)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await jc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tw()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fi(this.app))return Promise.reject(yr(this));const n=e?Zt(e):null;return n&&Me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fi(this.app)?Promise.reject(yr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fi(this.app)?Promise.reject(yr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yw(this),n=new vw(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Hl("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await dw(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gr(e)||this._popupRedirectResolver;Me(n,this,"argument-error"),this.redirectPersistenceManager=await io.create(this,[gr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(p,this,"internal-error"),p.then(()=>{f||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,s,l);return()=>{f=!0,g()}}else{const g=e.addObserver(n);return()=>{f=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=M0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const l=await this._getAppCheckToken();return l&&(n["X-Firebase-AppCheck"]=l),n}async _getAppCheckToken(){var e;if(fi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&WA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Yl(r){return Zt(r)}class q_{constructor(e){this.auth=e,this.observer=null,this.addObserver=Lb(n=>this.observer=n)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Am={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Tw(r){Am=r}function bw(r){return Am.loadJS(r)}function Aw(){return Am.gapiScript}function ww(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(r,e){const n=gm(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(ea(c,e??{}))return l;vr(l,"already-initialized")}return n.initialize({options:e})}function Rw(r,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(gr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function Iw(r,e,n){const s=Yl(r);Me(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const l=!1,c=V0(e),{host:f,port:p}=Cw(e),g=p===null?"":`:${p}`,_={url:`${c}//${f}${g}/`},T=Object.freeze({host:f,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){Me(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Me(ea(_,s.config.emulator)&&ea(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=_,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,po(f)?(u0(`${c}//${f}${g}`),c0("Auth",!0)):xw()}function V0(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function Cw(r){const e=V0(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:H_(s.substr(c.length+1))}}else{const[c,f]=s.split(":");return{host:c,port:H_(f)}}}function H_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function xw(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pr("not implemented")}_getIdTokenResponse(e){return pr("not implemented")}_linkToIdToken(e,n){return pr("not implemented")}_getReauthenticationResolver(e){return pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ro(r,e){return Em(r,"POST","/v1/accounts:signInWithIdp",Ql(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="http://localhost";class na extends U0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new na(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):vr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:l}=n,c=ym(n,["providerId","signInMethod"]);if(!s||!l)return null;const f=new na(s,l);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return ro(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,ro(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ro(e,n)}buildRequest(){const e={requestUri:Dw,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Gl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends P0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends Kl{constructor(){super("facebook.com")}static credential(e){return na._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jr.credential(e.oauthAccessToken)}catch{return null}}}Jr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Jr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends Kl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return na._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return es.credential(n,s)}catch{return null}}}es.GOOGLE_SIGN_IN_METHOD="google.com";es.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Kl{constructor(){super("github.com")}static credential(e){return na._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.GITHUB_SIGN_IN_METHOD="github.com";ts.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends Kl{constructor(){super("twitter.com")}static credential(e,n){return na._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ns.credential(n,s)}catch{return null}}}ns.TWITTER_SIGN_IN_METHOD="twitter.com";ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nw(r,e){return Em(r,"POST","/v1/accounts:signUp",Ql(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,l=!1){const c=await Ei._fromIdTokenResponse(e,s,l),f=G_(s);return new Tr({user:c,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const l=G_(s);return new Tr({user:e,providerId:l,_tokenResponse:s,operationType:n})}}function G_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ow(r){var e;if(fi(r.app))return Promise.reject(yr(r));const n=Yl(r);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Tr({user:n.currentUser,providerId:null,operationType:"signIn"});const s=await Nw(n,{returnSecureToken:!0}),l=await Tr._fromIdTokenResponse(n,"signIn",s,!0);return await n._updateCurrentUser(l.user),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends wr{constructor(e,n,s,l){var c;super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,qc.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,l){return new qc(e,n,s,l)}}function k0(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?qc._fromErrorAndOperation(r,c,e,s):c})}async function Mw(r,e,n=!1){const s=await Pl(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Tr._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vw(r,e,n=!1){const{auth:s}=r;if(fi(s.app))return Promise.reject(yr(s));const l="reauthenticate";try{const c=await Pl(r,k0(s,l,e,r),n);Me(c.idToken,s,"internal-error");const f=Tm(c.idToken);Me(f,s,"internal-error");const{sub:p}=f;return Me(r.uid===p,s,"user-mismatch"),Tr._forOperation(r,l,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&vr(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uw(r,e,n=!1){if(fi(r.app))return Promise.reject(yr(r));const s="signIn",l=await k0(r,s,e),c=await Tr._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(c.user),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pw(r,e){return Em(r,"POST","/v1/accounts:signInWithCustomToken",Ql(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kw(r,e){if(fi(r.app))return Promise.reject(yr(r));const n=Yl(r),s=await Pw(n,{token:e,returnSecureToken:!0}),l=await Tr._fromIdTokenResponse(n,"signIn",s);return await n._updateCurrentUser(l.user),l}function Lw(r,e,n,s){return Zt(r).onIdTokenChanged(e,n,s)}function zw(r,e,n){return Zt(r).beforeAuthStateChanged(e,n)}function Bw(r,e,n,s){return Zt(r).onAuthStateChanged(e,n,s)}const Hc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hc,"1"),this.storage.removeItem(Hc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw=1e3,qw=10;class z0 extends L0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=O0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&e(n,l,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,p,g)=>{this.notifyListeners(f,g)});return}const s=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},c=this.storage.getItem(s);pw()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,qw):l()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},jw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}z0.type="LOCAL";const Hw=z0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0 extends L0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}B0.type="SESSION";const j0=B0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const s=new rh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:l,data:c}=n.data,f=this.handlersMap[l];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const p=Array.from(f).map(async _=>_(n.origin,c)),g=await Gw(p);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,f;return new Promise((p,g)=>{const _=wm("",20);l.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},s);f={messageChannel:l,onMessage(I){const x=I;if(x.data.eventId===_)switch(x.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(x.data.response);break;default:clearTimeout(T),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:_,data:n},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(){return window}function Qw(r){Bi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(){return typeof Bi().WorkerGlobalScope<"u"&&typeof Bi().importScripts=="function"}async function Yw(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Kw(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function Xw(){return q0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="firebaseLocalStorageDb",$w=1,Gc="firebaseLocalStorage",G0="fbase_key";class Xl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function sh(r,e){return r.transaction([Gc],e?"readwrite":"readonly").objectStore(Gc)}function Zw(){const r=indexedDB.deleteDatabase(H0);return new Xl(r).toPromise()}function Yd(){const r=indexedDB.open(H0,$w);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Gc,{keyPath:G0})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Gc)?e(s):(s.close(),await Zw(),e(await Yd()))})})}async function F_(r,e,n){const s=sh(r,!0).put({[G0]:e,value:n});return new Xl(s).toPromise()}async function Ww(r,e){const n=sh(r,!1).get(e),s=await new Xl(n).toPromise();return s===void 0?null:s.value}function Q_(r,e){const n=sh(r,!0).delete(e);return new Xl(n).toPromise()}const Jw=800,eS=3;class F0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>eS)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return q0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rh._getInstance(Xw()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Yw(),!this.activeServiceWorker)return;this.sender=new Fw(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Kw()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yd();return await F_(e,Hc,"1"),await Q_(e,Hc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>F_(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>Ww(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Q_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=sh(l,!1).getAll();return new Xl(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Jw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}F0.type="LOCAL";const tS=F0;new Fl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(r,e){return e?gr(e):(Me(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm extends U0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ro(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ro(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ro(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function iS(r){return Uw(r.auth,new Sm(r),r.bypassAuthState)}function rS(r){const{auth:e,user:n}=r;return Me(n,e,"internal-error"),Vw(n,new Sm(r),r.bypassAuthState)}async function sS(r){const{auth:e,user:n}=r;return Me(n,e,"internal-error"),Mw(n,new Sm(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e,n,s,l,c=!1){this.auth=e,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:l,tenantId:c,error:f,type:p}=e;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return iS;case"linkViaPopup":case"linkViaRedirect":return sS;case"reauthViaPopup":case"reauthViaRedirect":return rS;default:vr(this.auth,"internal-error")}}resolve(e){Er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS=new Fl(2e3,1e4);class to extends Q0{constructor(e,n,s,l,c){super(e,n,l,c),this.provider=s,this.authWindow=null,this.pollId=null,to.currentPopupAction&&to.currentPopupAction.cancel(),to.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){Er(this.filter.length===1,"Popup operations only handle one event");const e=wm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(zi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(zi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,to.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,aS.get())};e()}}to.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="pendingRedirect",xc=new Map;class lS extends Q0{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=xc.get(this.auth._key());if(!e){try{const s=await uS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}xc.set(this.auth._key(),e)}return this.bypassAuthState||xc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uS(r,e){const n=fS(e),s=hS(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function cS(r,e){xc.set(r._key(),e)}function hS(r){return gr(r._redirectPersistence)}function fS(r){return Cc(oS,r.config.apiKey,r.name)}async function dS(r,e,n=!1){if(fi(r.app))return Promise.reject(yr(r));const s=Yl(r),l=nS(s,e),f=await new lS(s,l,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS=10*60*1e3;class pS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!Y0(e)){const l=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(zi(this.auth,l))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Y_(e))}saveEventToCache(e){this.cachedEventUids.add(Y_(e)),this.lastProcessedEventTime=Date.now()}}function Y_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Y0({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function gS(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Y0(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yS(r,e={}){return yo(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vS=/^https?/;async function ES(r){if(r.config.emulator)return;const{authorizedDomains:e}=await yS(r);for(const n of e)try{if(TS(n))return}catch{}vr(r,"unauthorized-domain")}function TS(r){const e=Fd(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!vS.test(n))return!1;if(_S.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS=new Fl(3e4,6e4);function K_(){const r=Bi().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function AS(r){return new Promise((e,n)=>{var s,l,c;function f(){K_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{K_(),n(zi(r,"network-request-failed"))},timeout:bS.get()})}if(!((l=(s=Bi().gapi)===null||s===void 0?void 0:s.iframes)===null||l===void 0)&&l.Iframe)e(gapi.iframes.getContext());else if(!((c=Bi().gapi)===null||c===void 0)&&c.load)f();else{const p=ww("iframefcb");return Bi()[p]=()=>{gapi.load?f():n(zi(r,"network-request-failed"))},bw(`${Aw()}?onload=${p}`).catch(g=>n(g))}}).catch(e=>{throw Dc=null,e})}let Dc=null;function wS(r){return Dc=Dc||AS(r),Dc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS=new Fl(5e3,15e3),RS="__/auth/iframe",IS="emulator/auth/iframe",CS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DS(r){const e=r.config;Me(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?vm(e,IS):`https://${r.config.authDomain}/${RS}`,s={apiKey:e.apiKey,appName:r.name,v:go},l=xS.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${Gl(s).slice(1)}`}async function NS(r){const e=await wS(r),n=Bi().gapi;return Me(n,r,"internal-error"),e.open({where:document.body,url:DS(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CS,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const f=zi(r,"network-request-failed"),p=Bi().setTimeout(()=>{c(f)},SS.get());function g(){Bi().clearTimeout(p),l(s)}s.ping(g).then(g,()=>{c(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MS=500,VS=600,US="_blank",PS="http://localhost";class X_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kS(r,e,n,s=MS,l=VS){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const g=Object.assign(Object.assign({},OS),{width:s.toString(),height:l.toString(),top:c,left:f}),_=bn().toLowerCase();n&&(p=I0(_)?US:n),S0(_)&&(e=e||PS,g.scrollbars="yes");const T=Object.entries(g).reduce((x,[Q,ee])=>`${x}${Q}=${ee},`,"");if(mw(_)&&p!=="_self")return LS(e||"",p),new X_(null);const I=window.open(e||"",p,T);Me(I,r,"popup-blocked");try{I.focus()}catch{}return new X_(I)}function LS(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="__/auth/handler",BS="emulator/auth/handler",jS=encodeURIComponent("fac");async function $_(r,e,n,s,l,c){Me(r.config.authDomain,r,"auth-domain-config-required"),Me(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:go,eventId:l};if(e instanceof P0){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",kb(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,I]of Object.entries({}))f[T]=I}if(e instanceof Kl){const T=e.getScopes().filter(I=>I!=="");T.length>0&&(f.scopes=T.join(","))}r.tenantId&&(f.tid=r.tenantId);const p=f;for(const T of Object.keys(p))p[T]===void 0&&delete p[T];const g=await r._getAppCheckToken(),_=g?`#${jS}=${encodeURIComponent(g)}`:"";return`${qS(r)}?${Gl(p).slice(1)}${_}`}function qS({config:r}){return r.emulator?vm(r,BS):`https://${r.authDomain}/${zS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd="webStorageSupport";class HS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=j0,this._completeRedirectFn=dS,this._overrideRedirectResult=cS}async _openPopup(e,n,s,l){var c;Er((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const f=await $_(e,n,s,Fd(),l);return kS(e,f,wm())}async _openRedirect(e,n,s,l){await this._originValidation(e);const c=await $_(e,n,s,Fd(),l);return Qw(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(Er(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await NS(e),s=new pS(e);return n.register("authEvent",l=>(Me(l==null?void 0:l.authEvent,e,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Vd,{type:Vd},l=>{var c;const f=(c=l==null?void 0:l[0])===null||c===void 0?void 0:c[Vd];f!==void 0&&n(!!f),vr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ES(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return O0()||R0()||bm()}}const GS=HS;var Z_="@firebase/auth",W_="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function YS(r){ao(new ta("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=s.options;Me(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:f,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:M0(r)},_=new Ew(s,l,c,g);return Rw(_,n),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),ao(new ta("auth-internal",e=>{const n=Yl(e.getProvider("auth").getImmediate());return(s=>new FS(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),as(Z_,W_,QS(r)),as(Z_,W_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=5*60,XS=l0("authIdTokenMaxAge")||KS;let J_=null;const $S=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>XS)return;const l=n==null?void 0:n.token;J_!==l&&(J_=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function ZS(r=m0()){const e=gm(r,"auth");if(e.isInitialized())return e.getImmediate();const n=Sw(r,{popupRedirectResolver:GS,persistence:[tS,Hw,j0]}),s=l0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const f=$S(c.toString());zw(n,f,()=>f(n.currentUser)),Lw(n,p=>f(p))}}const l=a0("auth");return l&&Iw(n,`http://${l}`),n}function WS(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}Tw({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=l=>{const c=zi("internal-error");c.customData=l,n(c)},s.type="text/javascript",s.charset="UTF-8",WS().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});YS("Browser");var ev=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var os,K0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,S){function C(){}C.prototype=S.prototype,M.D=S.prototype,M.prototype=new C,M.prototype.constructor=M,M.C=function(O,V,P){for(var w=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)w[Tt-2]=arguments[Tt];return S.prototype[V].apply(O,w)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(M,S,C){C||(C=0);var O=Array(16);if(typeof S=="string")for(var V=0;16>V;++V)O[V]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(V=0;16>V;++V)O[V]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=M.g[0],C=M.g[1],V=M.g[2];var P=M.g[3],w=S+(P^C&(V^P))+O[0]+3614090360&4294967295;S=C+(w<<7&4294967295|w>>>25),w=P+(V^S&(C^V))+O[1]+3905402710&4294967295,P=S+(w<<12&4294967295|w>>>20),w=V+(C^P&(S^C))+O[2]+606105819&4294967295,V=P+(w<<17&4294967295|w>>>15),w=C+(S^V&(P^S))+O[3]+3250441966&4294967295,C=V+(w<<22&4294967295|w>>>10),w=S+(P^C&(V^P))+O[4]+4118548399&4294967295,S=C+(w<<7&4294967295|w>>>25),w=P+(V^S&(C^V))+O[5]+1200080426&4294967295,P=S+(w<<12&4294967295|w>>>20),w=V+(C^P&(S^C))+O[6]+2821735955&4294967295,V=P+(w<<17&4294967295|w>>>15),w=C+(S^V&(P^S))+O[7]+4249261313&4294967295,C=V+(w<<22&4294967295|w>>>10),w=S+(P^C&(V^P))+O[8]+1770035416&4294967295,S=C+(w<<7&4294967295|w>>>25),w=P+(V^S&(C^V))+O[9]+2336552879&4294967295,P=S+(w<<12&4294967295|w>>>20),w=V+(C^P&(S^C))+O[10]+4294925233&4294967295,V=P+(w<<17&4294967295|w>>>15),w=C+(S^V&(P^S))+O[11]+2304563134&4294967295,C=V+(w<<22&4294967295|w>>>10),w=S+(P^C&(V^P))+O[12]+1804603682&4294967295,S=C+(w<<7&4294967295|w>>>25),w=P+(V^S&(C^V))+O[13]+4254626195&4294967295,P=S+(w<<12&4294967295|w>>>20),w=V+(C^P&(S^C))+O[14]+2792965006&4294967295,V=P+(w<<17&4294967295|w>>>15),w=C+(S^V&(P^S))+O[15]+1236535329&4294967295,C=V+(w<<22&4294967295|w>>>10),w=S+(V^P&(C^V))+O[1]+4129170786&4294967295,S=C+(w<<5&4294967295|w>>>27),w=P+(C^V&(S^C))+O[6]+3225465664&4294967295,P=S+(w<<9&4294967295|w>>>23),w=V+(S^C&(P^S))+O[11]+643717713&4294967295,V=P+(w<<14&4294967295|w>>>18),w=C+(P^S&(V^P))+O[0]+3921069994&4294967295,C=V+(w<<20&4294967295|w>>>12),w=S+(V^P&(C^V))+O[5]+3593408605&4294967295,S=C+(w<<5&4294967295|w>>>27),w=P+(C^V&(S^C))+O[10]+38016083&4294967295,P=S+(w<<9&4294967295|w>>>23),w=V+(S^C&(P^S))+O[15]+3634488961&4294967295,V=P+(w<<14&4294967295|w>>>18),w=C+(P^S&(V^P))+O[4]+3889429448&4294967295,C=V+(w<<20&4294967295|w>>>12),w=S+(V^P&(C^V))+O[9]+568446438&4294967295,S=C+(w<<5&4294967295|w>>>27),w=P+(C^V&(S^C))+O[14]+3275163606&4294967295,P=S+(w<<9&4294967295|w>>>23),w=V+(S^C&(P^S))+O[3]+4107603335&4294967295,V=P+(w<<14&4294967295|w>>>18),w=C+(P^S&(V^P))+O[8]+1163531501&4294967295,C=V+(w<<20&4294967295|w>>>12),w=S+(V^P&(C^V))+O[13]+2850285829&4294967295,S=C+(w<<5&4294967295|w>>>27),w=P+(C^V&(S^C))+O[2]+4243563512&4294967295,P=S+(w<<9&4294967295|w>>>23),w=V+(S^C&(P^S))+O[7]+1735328473&4294967295,V=P+(w<<14&4294967295|w>>>18),w=C+(P^S&(V^P))+O[12]+2368359562&4294967295,C=V+(w<<20&4294967295|w>>>12),w=S+(C^V^P)+O[5]+4294588738&4294967295,S=C+(w<<4&4294967295|w>>>28),w=P+(S^C^V)+O[8]+2272392833&4294967295,P=S+(w<<11&4294967295|w>>>21),w=V+(P^S^C)+O[11]+1839030562&4294967295,V=P+(w<<16&4294967295|w>>>16),w=C+(V^P^S)+O[14]+4259657740&4294967295,C=V+(w<<23&4294967295|w>>>9),w=S+(C^V^P)+O[1]+2763975236&4294967295,S=C+(w<<4&4294967295|w>>>28),w=P+(S^C^V)+O[4]+1272893353&4294967295,P=S+(w<<11&4294967295|w>>>21),w=V+(P^S^C)+O[7]+4139469664&4294967295,V=P+(w<<16&4294967295|w>>>16),w=C+(V^P^S)+O[10]+3200236656&4294967295,C=V+(w<<23&4294967295|w>>>9),w=S+(C^V^P)+O[13]+681279174&4294967295,S=C+(w<<4&4294967295|w>>>28),w=P+(S^C^V)+O[0]+3936430074&4294967295,P=S+(w<<11&4294967295|w>>>21),w=V+(P^S^C)+O[3]+3572445317&4294967295,V=P+(w<<16&4294967295|w>>>16),w=C+(V^P^S)+O[6]+76029189&4294967295,C=V+(w<<23&4294967295|w>>>9),w=S+(C^V^P)+O[9]+3654602809&4294967295,S=C+(w<<4&4294967295|w>>>28),w=P+(S^C^V)+O[12]+3873151461&4294967295,P=S+(w<<11&4294967295|w>>>21),w=V+(P^S^C)+O[15]+530742520&4294967295,V=P+(w<<16&4294967295|w>>>16),w=C+(V^P^S)+O[2]+3299628645&4294967295,C=V+(w<<23&4294967295|w>>>9),w=S+(V^(C|~P))+O[0]+4096336452&4294967295,S=C+(w<<6&4294967295|w>>>26),w=P+(C^(S|~V))+O[7]+1126891415&4294967295,P=S+(w<<10&4294967295|w>>>22),w=V+(S^(P|~C))+O[14]+2878612391&4294967295,V=P+(w<<15&4294967295|w>>>17),w=C+(P^(V|~S))+O[5]+4237533241&4294967295,C=V+(w<<21&4294967295|w>>>11),w=S+(V^(C|~P))+O[12]+1700485571&4294967295,S=C+(w<<6&4294967295|w>>>26),w=P+(C^(S|~V))+O[3]+2399980690&4294967295,P=S+(w<<10&4294967295|w>>>22),w=V+(S^(P|~C))+O[10]+4293915773&4294967295,V=P+(w<<15&4294967295|w>>>17),w=C+(P^(V|~S))+O[1]+2240044497&4294967295,C=V+(w<<21&4294967295|w>>>11),w=S+(V^(C|~P))+O[8]+1873313359&4294967295,S=C+(w<<6&4294967295|w>>>26),w=P+(C^(S|~V))+O[15]+4264355552&4294967295,P=S+(w<<10&4294967295|w>>>22),w=V+(S^(P|~C))+O[6]+2734768916&4294967295,V=P+(w<<15&4294967295|w>>>17),w=C+(P^(V|~S))+O[13]+1309151649&4294967295,C=V+(w<<21&4294967295|w>>>11),w=S+(V^(C|~P))+O[4]+4149444226&4294967295,S=C+(w<<6&4294967295|w>>>26),w=P+(C^(S|~V))+O[11]+3174756917&4294967295,P=S+(w<<10&4294967295|w>>>22),w=V+(S^(P|~C))+O[2]+718787259&4294967295,V=P+(w<<15&4294967295|w>>>17),w=C+(P^(V|~S))+O[9]+3951481745&4294967295,M.g[0]=M.g[0]+S&4294967295,M.g[1]=M.g[1]+(V+(w<<21&4294967295|w>>>11))&4294967295,M.g[2]=M.g[2]+V&4294967295,M.g[3]=M.g[3]+P&4294967295}s.prototype.u=function(M,S){S===void 0&&(S=M.length);for(var C=S-this.blockSize,O=this.B,V=this.h,P=0;P<S;){if(V==0)for(;P<=C;)l(this,M,P),P+=this.blockSize;if(typeof M=="string"){for(;P<S;)if(O[V++]=M.charCodeAt(P++),V==this.blockSize){l(this,O),V=0;break}}else for(;P<S;)if(O[V++]=M[P++],V==this.blockSize){l(this,O),V=0;break}}this.h=V,this.o+=S},s.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var S=1;S<M.length-8;++S)M[S]=0;var C=8*this.o;for(S=M.length-8;S<M.length;++S)M[S]=C&255,C/=256;for(this.u(M),M=Array(16),S=C=0;4>S;++S)for(var O=0;32>O;O+=8)M[C++]=this.g[S]>>>O&255;return M};function c(M,S){var C=p;return Object.prototype.hasOwnProperty.call(C,M)?C[M]:C[M]=S(M)}function f(M,S){this.h=S;for(var C=[],O=!0,V=M.length-1;0<=V;V--){var P=M[V]|0;O&&P==S||(C[V]=P,O=!1)}this.g=C}var p={};function g(M){return-128<=M&&128>M?c(M,function(S){return new f([S|0],0>S?-1:0)}):new f([M|0],0>M?-1:0)}function _(M){if(isNaN(M)||!isFinite(M))return I;if(0>M)return ne(_(-M));for(var S=[],C=1,O=0;M>=C;O++)S[O]=M/C|0,C*=4294967296;return new f(S,0)}function T(M,S){if(M.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(M.charAt(0)=="-")return ne(T(M.substring(1),S));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=_(Math.pow(S,8)),O=I,V=0;V<M.length;V+=8){var P=Math.min(8,M.length-V),w=parseInt(M.substring(V,V+P),S);8>P?(P=_(Math.pow(S,P)),O=O.j(P).add(_(w))):(O=O.j(C),O=O.add(_(w)))}return O}var I=g(0),x=g(1),Q=g(16777216);r=f.prototype,r.m=function(){if(te(this))return-ne(this).m();for(var M=0,S=1,C=0;C<this.g.length;C++){var O=this.i(C);M+=(0<=O?O:4294967296+O)*S,S*=4294967296}return M},r.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(ee(this))return"0";if(te(this))return"-"+ne(this).toString(M);for(var S=_(Math.pow(M,6)),C=this,O="";;){var V=Ge(C,S).g;C=xe(C,V.j(S));var P=((0<C.g.length?C.g[0]:C.h)>>>0).toString(M);if(C=V,ee(C))return P+O;for(;6>P.length;)P="0"+P;O=P+O}},r.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function ee(M){if(M.h!=0)return!1;for(var S=0;S<M.g.length;S++)if(M.g[S]!=0)return!1;return!0}function te(M){return M.h==-1}r.l=function(M){return M=xe(this,M),te(M)?-1:ee(M)?0:1};function ne(M){for(var S=M.g.length,C=[],O=0;O<S;O++)C[O]=~M.g[O];return new f(C,~M.h).add(x)}r.abs=function(){return te(this)?ne(this):this},r.add=function(M){for(var S=Math.max(this.g.length,M.g.length),C=[],O=0,V=0;V<=S;V++){var P=O+(this.i(V)&65535)+(M.i(V)&65535),w=(P>>>16)+(this.i(V)>>>16)+(M.i(V)>>>16);O=w>>>16,P&=65535,w&=65535,C[V]=w<<16|P}return new f(C,C[C.length-1]&-2147483648?-1:0)};function xe(M,S){return M.add(ne(S))}r.j=function(M){if(ee(this)||ee(M))return I;if(te(this))return te(M)?ne(this).j(ne(M)):ne(ne(this).j(M));if(te(M))return ne(this.j(ne(M)));if(0>this.l(Q)&&0>M.l(Q))return _(this.m()*M.m());for(var S=this.g.length+M.g.length,C=[],O=0;O<2*S;O++)C[O]=0;for(O=0;O<this.g.length;O++)for(var V=0;V<M.g.length;V++){var P=this.i(O)>>>16,w=this.i(O)&65535,Tt=M.i(V)>>>16,De=M.i(V)&65535;C[2*O+2*V]+=w*De,we(C,2*O+2*V),C[2*O+2*V+1]+=P*De,we(C,2*O+2*V+1),C[2*O+2*V+1]+=w*Tt,we(C,2*O+2*V+1),C[2*O+2*V+2]+=P*Tt,we(C,2*O+2*V+2)}for(O=0;O<S;O++)C[O]=C[2*O+1]<<16|C[2*O];for(O=S;O<2*S;O++)C[O]=0;return new f(C,0)};function we(M,S){for(;(M[S]&65535)!=M[S];)M[S+1]+=M[S]>>>16,M[S]&=65535,S++}function ge(M,S){this.g=M,this.h=S}function Ge(M,S){if(ee(S))throw Error("division by zero");if(ee(M))return new ge(I,I);if(te(M))return S=Ge(ne(M),S),new ge(ne(S.g),ne(S.h));if(te(S))return S=Ge(M,ne(S)),new ge(ne(S.g),S.h);if(30<M.g.length){if(te(M)||te(S))throw Error("slowDivide_ only works with positive integers.");for(var C=x,O=S;0>=O.l(M);)C=ue(C),O=ue(O);var V=ke(C,1),P=ke(O,1);for(O=ke(O,2),C=ke(C,2);!ee(O);){var w=P.add(O);0>=w.l(M)&&(V=V.add(C),P=w),O=ke(O,1),C=ke(C,1)}return S=xe(M,V.j(S)),new ge(V,S)}for(V=I;0<=M.l(S);){for(C=Math.max(1,Math.floor(M.m()/S.m())),O=Math.ceil(Math.log(C)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),P=_(C),w=P.j(S);te(w)||0<w.l(M);)C-=O,P=_(C),w=P.j(S);ee(P)&&(P=x),V=V.add(P),M=xe(M,w)}return new ge(V,M)}r.A=function(M){return Ge(this,M).h},r.and=function(M){for(var S=Math.max(this.g.length,M.g.length),C=[],O=0;O<S;O++)C[O]=this.i(O)&M.i(O);return new f(C,this.h&M.h)},r.or=function(M){for(var S=Math.max(this.g.length,M.g.length),C=[],O=0;O<S;O++)C[O]=this.i(O)|M.i(O);return new f(C,this.h|M.h)},r.xor=function(M){for(var S=Math.max(this.g.length,M.g.length),C=[],O=0;O<S;O++)C[O]=this.i(O)^M.i(O);return new f(C,this.h^M.h)};function ue(M){for(var S=M.g.length+1,C=[],O=0;O<S;O++)C[O]=M.i(O)<<1|M.i(O-1)>>>31;return new f(C,M.h)}function ke(M,S){var C=S>>5;S%=32;for(var O=M.g.length-C,V=[],P=0;P<O;P++)V[P]=0<S?M.i(P+C)>>>S|M.i(P+C+1)<<32-S:M.i(P+C);return new f(V,M.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,K0=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=_,f.fromString=T,os=f}).apply(typeof ev<"u"?ev:typeof self<"u"?self:typeof window<"u"?window:{});var Tc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var X0,Sl,$0,Nc,Kd,Z0,W0,J0;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,y){return u==Array.prototype||u==Object.prototype||(u[m]=y.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Tc=="object"&&Tc];for(var m=0;m<u.length;++m){var y=u[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=n(this);function l(u,m){if(m)e:{var y=s;u=u.split(".");for(var b=0;b<u.length-1;b++){var L=u[b];if(!(L in y))break e;y=y[L]}u=u[u.length-1],b=y[u],m=m(b),m!=b&&m!=null&&e(y,u,{configurable:!0,writable:!0,value:m})}}function c(u,m){u instanceof String&&(u+="");var y=0,b=!1,L={next:function(){if(!b&&y<u.length){var G=y++;return{value:m(G,u[G]),done:!1}}return b=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}l("Array.prototype.values",function(u){return u||function(){return c(this,function(m,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},p=this||self;function g(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function _(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function T(u,m,y){return u.call.apply(u.bind,arguments)}function I(u,m,y){if(!u)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,b),u.apply(m,L)}}return function(){return u.apply(m,arguments)}}function x(u,m,y){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:I,x.apply(null,arguments)}function Q(u,m){var y=Array.prototype.slice.call(arguments,1);return function(){var b=y.slice();return b.push.apply(b,arguments),u.apply(this,b)}}function ee(u,m){function y(){}y.prototype=m.prototype,u.aa=m.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(b,L,G){for(var ae=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)ae[Ze-2]=arguments[Ze];return m.prototype[L].apply(b,ae)}}function te(u){const m=u.length;if(0<m){const y=Array(m);for(let b=0;b<m;b++)y[b]=u[b];return y}return[]}function ne(u,m){for(let y=1;y<arguments.length;y++){const b=arguments[y];if(g(b)){const L=u.length||0,G=b.length||0;u.length=L+G;for(let ae=0;ae<G;ae++)u[L+ae]=b[ae]}else u.push(b)}}class xe{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function we(u){return/^[\s\xa0]*$/.test(u)}function ge(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function Ge(u){return Ge[" "](u),u}Ge[" "]=function(){};var ue=ge().indexOf("Gecko")!=-1&&!(ge().toLowerCase().indexOf("webkit")!=-1&&ge().indexOf("Edge")==-1)&&!(ge().indexOf("Trident")!=-1||ge().indexOf("MSIE")!=-1)&&ge().indexOf("Edge")==-1;function ke(u,m,y){for(const b in u)m.call(y,u[b],b,u)}function M(u,m){for(const y in u)m.call(void 0,u[y],y,u)}function S(u){const m={};for(const y in u)m[y]=u[y];return m}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(u,m){let y,b;for(let L=1;L<arguments.length;L++){b=arguments[L];for(y in b)u[y]=b[y];for(let G=0;G<C.length;G++)y=C[G],Object.prototype.hasOwnProperty.call(b,y)&&(u[y]=b[y])}}function V(u){var m=1;u=u.split(":");const y=[];for(;0<m&&u.length;)y.push(u.shift()),m--;return u.length&&y.push(u.join(":")),y}function P(u){p.setTimeout(()=>{throw u},0)}function w(){var u=tt;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Tt{constructor(){this.h=this.g=null}add(m,y){const b=De.get();b.set(m,y),this.h?this.h.next=b:this.g=b,this.h=b}}var De=new xe(()=>new F,u=>u.reset());class F{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let se,_e=!1,tt=new Tt,D=()=>{const u=p.Promise.resolve(void 0);se=()=>{u.then(J)}};var J=()=>{for(var u;u=w();){try{u.h.call(u.g)}catch(y){P(y)}var m=De;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}_e=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var ve=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};p.addEventListener("test",y,m),p.removeEventListener("test",y,m)}catch{}return u}();function Be(u,m){if(ie.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,b=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(ue){e:{try{Ge(m.nodeName);var L=!0;break e}catch{}L=!1}L||(m=null)}}else y=="mouseover"?m=u.fromElement:y=="mouseout"&&(m=u.toElement);this.relatedTarget=m,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ie[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Be.aa.h.call(this)}}ee(Be,ie);var Ie={2:"touch",3:"pen",4:"mouse"};Be.prototype.h=function(){Be.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ct="closure_listenable_"+(1e6*Math.random()|0),ot=0;function An(u,m,y,b,L){this.listener=u,this.proxy=null,this.src=m,this.type=y,this.capture=!!b,this.ha=L,this.key=++ot,this.da=this.fa=!1}function Zn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Cn(u){this.src=u,this.g={},this.h=0}Cn.prototype.add=function(u,m,y,b,L){var G=u.toString();u=this.g[G],u||(u=this.g[G]=[],this.h++);var ae=kn(u,m,b,L);return-1<ae?(m=u[ae],y||(m.fa=!1)):(m=new An(m,this.src,G,!!b,L),m.fa=y,u.push(m)),m};function Wn(u,m){var y=m.type;if(y in u.g){var b=u.g[y],L=Array.prototype.indexOf.call(b,m,void 0),G;(G=0<=L)&&Array.prototype.splice.call(b,L,1),G&&(Zn(m),u.g[y].length==0&&(delete u.g[y],u.h--))}}function kn(u,m,y,b){for(var L=0;L<u.length;++L){var G=u[L];if(!G.da&&G.listener==m&&G.capture==!!y&&G.ha==b)return L}return-1}var Gt="closure_lm_"+(1e6*Math.random()|0),je={};function Wt(u,m,y,b,L){if(Array.isArray(m)){for(var G=0;G<m.length;G++)Wt(u,m[G],y,b,L);return null}return y=Es(y),u&&u[Ct]?u.K(m,y,_(b)?!!b.capture:!1,L):kt(u,m,y,!1,b,L)}function kt(u,m,y,b,L,G){if(!m)throw Error("Invalid event type");var ae=_(L)?!!L.capture:!!L,Ze=Ot(u);if(Ze||(u[Gt]=Ze=new Cn(u)),y=Ze.add(m,y,b,ae,G),y.proxy)return y;if(b=mi(),y.proxy=b,b.src=u,b.listener=y,u.addEventListener)ve||(L=ae),L===void 0&&(L=!1),u.addEventListener(m.toString(),b,L);else if(u.attachEvent)u.attachEvent(xn(m.toString()),b);else if(u.addListener&&u.removeListener)u.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return y}function mi(){function u(y){return m.call(u.src,u.listener,y)}const m=bi;return u}function vs(u,m,y,b,L){if(Array.isArray(m))for(var G=0;G<m.length;G++)vs(u,m[G],y,b,L);else b=_(b)?!!b.capture:!!b,y=Es(y),u&&u[Ct]?(u=u.i,m=String(m).toString(),m in u.g&&(G=u.g[m],y=kn(G,y,b,L),-1<y&&(Zn(G[y]),Array.prototype.splice.call(G,y,1),G.length==0&&(delete u.g[m],u.h--)))):u&&(u=Ot(u))&&(m=u.g[m.toString()],u=-1,m&&(u=kn(m,y,b,L)),(y=-1<u?m[u]:null)&&Ln(y))}function Ln(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Ct])Wn(m.i,u);else{var y=u.type,b=u.proxy;m.removeEventListener?m.removeEventListener(y,b,u.capture):m.detachEvent?m.detachEvent(xn(y),b):m.addListener&&m.removeListener&&m.removeListener(b),(y=Ot(m))?(Wn(y,u),y.h==0&&(y.src=null,m[Gt]=null)):Zn(u)}}}function xn(u){return u in je?je[u]:je[u]="on"+u}function bi(u,m){if(u.da)u=!0;else{m=new Be(m,this);var y=u.listener,b=u.ha||u.src;u.fa&&Ln(u),u=y.call(b,m)}return u}function Ot(u){return u=u[Gt],u instanceof Cn?u:null}var Lt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Es(u){return typeof u=="function"?u:(u[Lt]||(u[Lt]=function(m){return u.handleEvent(m)}),u[Lt])}function bt(){oe.call(this),this.i=new Cn(this),this.M=this,this.F=null}ee(bt,oe),bt.prototype[Ct]=!0,bt.prototype.removeEventListener=function(u,m,y,b){vs(this,u,m,y,b)};function nt(u,m){var y,b=u.F;if(b)for(y=[];b;b=b.F)y.push(b);if(u=u.M,b=m.type||m,typeof m=="string")m=new ie(m,u);else if(m instanceof ie)m.target=m.target||u;else{var L=m;m=new ie(b,u),O(m,L)}if(L=!0,y)for(var G=y.length-1;0<=G;G--){var ae=m.g=y[G];L=gn(ae,b,!0,m)&&L}if(ae=m.g=u,L=gn(ae,b,!0,m)&&L,L=gn(ae,b,!1,m)&&L,y)for(G=0;G<y.length;G++)ae=m.g=y[G],L=gn(ae,b,!1,m)&&L}bt.prototype.N=function(){if(bt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var y=u.g[m],b=0;b<y.length;b++)Zn(y[b]);delete u.g[m],u.h--}}this.F=null},bt.prototype.K=function(u,m,y,b){return this.i.add(String(u),m,!1,y,b)},bt.prototype.L=function(u,m,y,b){return this.i.add(String(u),m,!0,y,b)};function gn(u,m,y,b){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var L=!0,G=0;G<m.length;++G){var ae=m[G];if(ae&&!ae.da&&ae.capture==y){var Ze=ae.listener,Ft=ae.ha||ae.src;ae.fa&&Wn(u.i,ae),L=Ze.call(Ft,b)!==!1&&L}}return L&&!b.defaultPrevented}function Jt(u,m,y){if(typeof u=="function")y&&(u=x(u,y));else if(u&&typeof u.handleEvent=="function")u=x(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:p.setTimeout(u,m||0)}function Ts(u){u.g=Jt(()=>{u.g=null,u.i&&(u.i=!1,Ts(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class bo extends oe{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Ts(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gi(u){oe.call(this),this.h=u,this.g={}}ee(Gi,oe);var Fi=[];function Qi(u){ke(u.g,function(m,y){this.g.hasOwnProperty(y)&&Ln(m)},u),u.g={}}Gi.prototype.N=function(){Gi.aa.N.call(this),Qi(this)},Gi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zn=p.JSON.stringify,Sr=p.JSON.parse,Yi=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function Rr(){}Rr.prototype.h=null;function bs(u){return u.h||(u.h=u.i())}function As(){}var Jn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pi(){ie.call(this,"d")}ee(pi,ie);function ws(){ie.call(this,"c")}ee(ws,ie);var Bn={},A=null;function Y(){return A=A||new bt}Bn.La="serverreachability";function j(u){ie.call(this,Bn.La,u)}ee(j,ie);function re(u){const m=Y();nt(m,new j(m))}Bn.STAT_EVENT="statevent";function me(u,m){ie.call(this,Bn.STAT_EVENT,u),this.stat=m}ee(me,ie);function ce(u){const m=Y();nt(m,new me(m,u))}Bn.Ma="timingevent";function le(u,m){ie.call(this,Bn.Ma,u),this.size=m}ee(le,ie);function Ee(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},m)}function Ue(){this.g=!0}Ue.prototype.xa=function(){this.g=!1};function ye(u,m,y,b,L,G){u.info(function(){if(u.g)if(G)for(var ae="",Ze=G.split("&"),Ft=0;Ft<Ze.length;Ft++){var We=Ze[Ft].split("=");if(1<We.length){var nn=We[0];We=We[1];var Qt=nn.split("_");ae=2<=Qt.length&&Qt[1]=="type"?ae+(nn+"="+We+"&"):ae+(nn+"=redacted&")}}else ae=null;else ae=G;return"XMLHTTP REQ ("+b+") [attempt "+L+"]: "+m+`
`+y+`
`+ae})}function Le(u,m,y,b,L,G,ae){u.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+L+"]: "+m+`
`+y+`
`+G+" "+ae})}function he(u,m,y,b){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Ne(u,y)+(b?" "+b:"")})}function Qe(u,m){u.info(function(){return"TIMEOUT: "+m})}Ue.prototype.info=function(){};function Ne(u,m){if(!u.g)return m;if(!m)return null;try{var y=JSON.parse(m);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var b=y[u];if(!(2>b.length)){var L=b[1];if(Array.isArray(L)&&!(1>L.length)){var G=L[0];if(G!="noop"&&G!="stop"&&G!="close")for(var ae=1;ae<L.length;ae++)L[ae]=""}}}}return zn(y)}catch{return m}}var st={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ft;function yt(){}ee(yt,Rr),yt.prototype.g=function(){return new XMLHttpRequest},yt.prototype.i=function(){return{}},ft=new yt;function At(u,m,y,b){this.j=u,this.i=m,this.l=y,this.R=b||1,this.U=new Gi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Te}function Te(){this.i=null,this.g="",this.h=!1}var Mt={},xt={};function en(u,m,y){u.L=1,u.v=Cs(qn(m)),u.m=y,u.P=!0,jn(u,null)}function jn(u,m){u.F=Date.now(),ei(u),u.A=qn(u.v);var y=u.A,b=u.R;Array.isArray(b)||(b=[String(b)]),Co(y.i,"t",b),u.C=0,y=u.j.J,u.h=new Te,u.g=gu(u.j,y?m:null,!u.m),0<u.O&&(u.M=new bo(x(u.Y,u,u.g),u.O)),m=u.U,y=u.g,b=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(Fi[0]=L.toString()),L=Fi);for(var G=0;G<L.length;G++){var ae=Wt(y,L[G],b||m.handleEvent,!1,m.h||m);if(!ae)break;m.g[ae.key]=ae}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),re(),ye(u.i,u.u,u.A,u.l,u.R,u.m)}At.prototype.ca=function(u){u=u.target;const m=this.M;m&&ri(u)==3?m.j():this.Y(u)},At.prototype.Y=function(u){try{if(u==this.g)e:{const Qt=ri(this.g);var m=this.g.Ba();const tr=this.g.Z();if(!(3>Qt)&&(Qt!=3||this.g&&(this.h.h||this.g.oa()||lu(this.g)))){this.J||Qt!=4||m==7||(m==8||0>=tr?re(3):re(2)),Ir(this);var y=this.g.Z();this.X=y;t:if(Ai(this)){var b=lu(this.g);u="";var L=b.length,G=ri(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ln(this),Si(this);var ae="";break t}this.h.i=new p.TextDecoder}for(m=0;m<L;m++)this.h.h=!0,u+=this.h.i.decode(b[m],{stream:!(G&&m==L-1)});b.length=0,this.h.g+=u,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=y==200,Le(this.i,this.u,this.A,this.l,this.R,Qt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,Ft=this.g;if((Ze=Ft.g?Ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!we(Ze)){var We=Ze;break t}}We=null}if(y=We)he(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ss(this,y);else{this.o=!1,this.s=3,ce(12),ln(this),Si(this);break e}}if(this.P){y=!0;let un;for(;!this.J&&this.C<ae.length;)if(un=wi(this,ae),un==xt){Qt==4&&(this.s=4,ce(14),y=!1),he(this.i,this.l,null,"[Incomplete Response]");break}else if(un==Mt){this.s=4,ce(15),he(this.i,this.l,ae,"[Invalid Chunk]"),y=!1;break}else he(this.i,this.l,un,null),Ss(this,un);if(Ai(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qt!=4||ae.length!=0||this.h.h||(this.s=1,ce(16),y=!1),this.o=this.o&&y,!y)he(this.i,this.l,ae,"[Invalid Chunked Response]"),ln(this),Si(this);else if(0<ae.length&&!this.W){this.W=!0;var nn=this.j;nn.g==this&&nn.ba&&!nn.M&&(nn.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),Ps(nn),nn.M=!0,ce(11))}}else he(this.i,this.l,ae,null),Ss(this,ae);Qt==4&&ln(this),this.o&&!this.J&&(Qt==4?du(this.j,this):(this.o=!1,ei(this)))}else xh(this.g),y==400&&0<ae.indexOf("Unknown SID")?(this.s=3,ce(12)):(this.s=0,ce(13)),ln(this),Si(this)}}}catch{}finally{}};function Ai(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function wi(u,m){var y=u.C,b=m.indexOf(`
`,y);return b==-1?xt:(y=Number(m.substring(y,b)),isNaN(y)?Mt:(b+=1,b+y>m.length?xt:(m=m.slice(b,b+y),u.C=b+y,m)))}At.prototype.cancel=function(){this.J=!0,ln(this)};function ei(u){u.S=Date.now()+u.I,iu(u,u.I)}function iu(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ee(x(u.ba,u),m)}function Ir(u){u.B&&(p.clearTimeout(u.B),u.B=null)}At.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Qe(this.i,this.A),this.L!=2&&(re(),ce(17)),ln(this),this.s=2,Si(this)):iu(this,this.S-u)};function Si(u){u.j.G==0||u.J||du(u.j,u)}function ln(u){Ir(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Qi(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Ss(u,m){try{var y=u.j;if(y.G!=0&&(y.g==u||Ao(y.h,u))){if(!u.K&&Ao(y.h,u)&&y.G==3){try{var b=y.Da.g.parse(m)}catch{b=null}if(Array.isArray(b)&&b.length==3){var L=b;if(L[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)va(y),ya(y);else break e;Mo(y),ce(18)}}else y.za=L[1],0<y.za-y.T&&37500>L[2]&&y.F&&y.v==0&&!y.C&&(y.C=Ee(x(y.Za,y),6e3));if(1>=ua(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else er(y,11)}else if((u.K||y.g==u)&&va(y),!we(m))for(L=y.Da.g.parse(m),m=0;m<L.length;m++){let We=L[m];if(y.T=We[0],We=We[1],y.G==2)if(We[0]=="c"){y.K=We[1],y.ia=We[2];const nn=We[3];nn!=null&&(y.la=nn,y.j.info("VER="+y.la));const Qt=We[4];Qt!=null&&(y.Aa=Qt,y.j.info("SVER="+y.Aa));const tr=We[5];tr!=null&&typeof tr=="number"&&0<tr&&(b=1.5*tr,y.L=b,y.j.info("backChannelRequestTimeoutMs_="+b)),b=y;const un=u.g;if(un){const Oi=un.g?un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oi){var G=b.h;G.g||Oi.indexOf("spdy")==-1&&Oi.indexOf("quic")==-1&&Oi.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(ca(G,G.h),G.h=null))}if(b.D){const Uo=un.g?un.g.getResponseHeader("X-HTTP-Session-Id"):null;Uo&&(b.ya=Uo,dt(b.I,b.D,Uo))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),b=y;var ae=u;if(b.qa=pu(b,b.J?b.ia:null,b.W),ae.K){wn(b.h,ae);var Ze=ae,Ft=b.L;Ft&&(Ze.I=Ft),Ze.B&&(Ir(Ze),ei(Ze)),b.g=ae}else hu(b);0<y.i.length&&_a(y)}else We[0]!="stop"&&We[0]!="close"||er(y,7);else y.G==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?er(y,7):No(y):We[0]!="noop"&&y.l&&y.l.ta(We),y.v=0)}}re(4)}catch{}}var ru=class{constructor(u,m){this.g=u,this.map=m}};function Ki(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function la(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ua(u){return u.h?1:u.g?u.g.size:0}function Ao(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ca(u,m){u.g?u.g.add(m):u.h=m}function wn(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ki.prototype.cancel=function(){if(this.i=wo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function wo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const y of u.g.values())m=m.concat(y.D);return m}return te(u.i)}function Sh(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var m=[],y=u.length,b=0;b<y;b++)m.push(u[b]);return m}m=[],y=0;for(b in u)m[y++]=u[b];return m}function ha(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var m=[];u=u.length;for(var y=0;y<u;y++)m.push(y);return m}m=[],y=0;for(const b in u)m[y++]=b;return m}}}function So(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var y=ha(u),b=Sh(u),L=b.length,G=0;G<L;G++)m.call(void 0,b[G],y&&y[G],u)}var Rs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rh(u,m){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var b=u[y].indexOf("="),L=null;if(0<=b){var G=u[y].substring(0,b);L=u[y].substring(b+1)}else G=u[y];m(G,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function zt(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof zt){this.h=u.h,Is(this,u.j),this.o=u.o,this.g=u.g,Cr(this,u.s),this.l=u.l;var m=u.i,y=new $i;y.i=m.i,m.g&&(y.g=new Map(m.g),y.h=m.h),Xi(this,y),this.m=u.m}else u&&(m=String(u).match(Rs))?(this.h=!1,Is(this,m[1]||"",!0),this.o=ti(m[2]||""),this.g=ti(m[3]||"",!0),Cr(this,m[4]),this.l=ti(m[5]||"",!0),Xi(this,m[6]||"",!0),this.m=ti(m[7]||"")):(this.h=!1,this.i=new $i(null,this.h))}zt.prototype.toString=function(){var u=[],m=this.j;m&&u.push(xs(m,Ro,!0),":");var y=this.g;return(y||m=="file")&&(u.push("//"),(m=this.o)&&u.push(xs(m,Ro,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(xs(y,y.charAt(0)=="/"?Ih:Io,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",xs(y,fa)),u.join("")};function qn(u){return new zt(u)}function Is(u,m,y){u.j=y?ti(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Cr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Xi(u,m,y){m instanceof $i?(u.i=m,au(u.i,u.h)):(y||(m=xs(m,Ch)),u.i=new $i(m,u.h))}function dt(u,m,y){u.i.set(m,y)}function Cs(u){return dt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ti(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function xs(u,m,y){return typeof u=="string"?(u=encodeURI(u).replace(m,su),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function su(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ro=/[#\/\?@]/g,Io=/[#\?:]/g,Ih=/[#\?]/g,Ch=/[#\?@]/g,fa=/#/g;function $i(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function ni(u){u.g||(u.g=new Map,u.h=0,u.i&&Rh(u.i,function(m,y){u.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}r=$i.prototype,r.add=function(u,m){ni(this),this.i=null,u=Ri(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(m),this.h+=1,this};function Zi(u,m){ni(u),m=Ri(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Wi(u,m){return ni(u),m=Ri(u,m),u.g.has(m)}r.forEach=function(u,m){ni(this),this.g.forEach(function(y,b){y.forEach(function(L){u.call(m,L,b,this)},this)},this)},r.na=function(){ni(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),y=[];for(let b=0;b<m.length;b++){const L=u[b];for(let G=0;G<L.length;G++)y.push(m[b])}return y},r.V=function(u){ni(this);let m=[];if(typeof u=="string")Wi(this,u)&&(m=m.concat(this.g.get(Ri(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)m=m.concat(u[y])}return m},r.set=function(u,m){return ni(this),this.i=null,u=Ri(this,u),Wi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Co(u,m,y){Zi(u,m),0<y.length&&(u.i=null,u.g.set(Ri(u,m),te(y)),u.h+=y.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var y=0;y<m.length;y++){var b=m[y];const G=encodeURIComponent(String(b)),ae=this.V(b);for(b=0;b<ae.length;b++){var L=G;ae[b]!==""&&(L+="="+encodeURIComponent(String(ae[b]))),u.push(L)}}return this.i=u.join("&")};function Ri(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function au(u,m){m&&!u.j&&(ni(u),u.i=null,u.g.forEach(function(y,b){var L=b.toLowerCase();b!=L&&(Zi(this,b),Co(this,L,y))},u)),u.j=m}function Ds(u,m){const y=new Ue;if(p.Image){const b=new Image;b.onload=Q(ii,y,"TestLoadImage: loaded",!0,m,b),b.onerror=Q(ii,y,"TestLoadImage: error",!1,m,b),b.onabort=Q(ii,y,"TestLoadImage: abort",!1,m,b),b.ontimeout=Q(ii,y,"TestLoadImage: timeout",!1,m,b),p.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=u}else m(!1)}function gi(u,m){const y=new Ue,b=new AbortController,L=setTimeout(()=>{b.abort(),ii(y,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:b.signal}).then(G=>{clearTimeout(L),G.ok?ii(y,"TestPingServer: ok",!0,m):ii(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),ii(y,"TestPingServer: error",!1,m)})}function ii(u,m,y,b,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),b(y)}catch{}}function Ns(){this.g=new Yi}function Ii(u,m,y){const b=y||"";try{So(u,function(L,G){let ae=L;_(L)&&(ae=zn(L)),m.push(b+G+"="+encodeURIComponent(ae))})}catch(L){throw m.push(b+"type="+encodeURIComponent("_badmap")),L}}function xr(u){this.l=u.Ub||null,this.j=u.eb||!1}ee(xr,Rr),xr.prototype.g=function(){return new Ji(this.l,this.j)},xr.prototype.i=function(u){return function(){return u}}({});function Ji(u,m){bt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}ee(Ji,bt),r=Ji.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,xi(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||p).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ci(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,xi(this)),this.g&&(this.readyState=3,xi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xo(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function xo(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Ci(this):xi(this),this.readyState==3&&xo(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Ci(this))},r.Qa=function(u){this.g&&(this.response=u,Ci(this))},r.ga=function(){this.g&&Ci(this)};function Ci(u){u.readyState=4,u.l=null,u.j=null,u.v=null,xi(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=m.next();return u.join(`\r
`)};function xi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ji.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Do(u){let m="";return ke(u,function(y,b){m+=b,m+=":",m+=y,m+=`\r
`}),m}function tn(u,m,y){e:{for(b in y){var b=!1;break e}b=!0}b||(y=Do(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):dt(u,m,y))}function lt(u){bt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}ee(lt,bt);var da=/^https?$/i,Os=["POST","PUT"];r=lt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,y,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ft.g(),this.v=this.o?bs(this.o):bs(ft),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(G){ou(this,G);return}if(u=y||"",y=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var L in b)y.set(L,b[L]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const G of b.keys())y.set(G,b.get(G));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(y.keys()).find(G=>G.toLowerCase()=="content-type"),L=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(Os,m,void 0))||b||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ae]of y)this.g.setRequestHeader(G,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ms(this),this.u=!0,this.g.send(u),this.u=!1}catch(G){ou(this,G)}};function ou(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,ma(u),Di(u)}function ma(u){u.A||(u.A=!0,nt(u,"complete"),nt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,nt(this,"complete"),nt(this,"abort"),Di(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Di(this,!0)),lt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?pa(this):this.bb())},r.bb=function(){pa(this)};function pa(u){if(u.h&&typeof f<"u"&&(!u.v[1]||ri(u)!=4||u.Z()!=2)){if(u.u&&ri(u)==4)Jt(u.Ea,0,u);else if(nt(u,"readystatechange"),ri(u)==4){u.h=!1;try{const ae=u.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var b;if(b=ae===0){var L=String(u.D).match(Rs)[1]||null;!L&&p.self&&p.self.location&&(L=p.self.location.protocol.slice(0,-1)),b=!da.test(L?L.toLowerCase():"")}y=b}if(y)nt(u,"complete"),nt(u,"success");else{u.m=6;try{var G=2<ri(u)?u.g.statusText:""}catch{G=""}u.l=G+" ["+u.Z()+"]",ma(u)}}finally{Di(u)}}}}function Di(u,m){if(u.g){Ms(u);const y=u.g,b=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||nt(u,"ready");try{y.onreadystatechange=b}catch{}}}function Ms(u){u.I&&(p.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function ri(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<ri(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Sr(m)}};function lu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function xh(u){const m={};u=(u.g&&2<=ri(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<u.length;b++){if(we(u[b]))continue;var y=V(u[b]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const G=m[L]||[];m[L]=G,G.push(y)}M(m,function(b){return b.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vs(u,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||m}function ga(u){this.Aa=0,this.i=[],this.j=new Ue,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vs("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vs("baseRetryDelayMs",5e3,u),this.cb=Vs("retryDelaySeedMs",1e4,u),this.Wa=Vs("forwardChannelMaxRetries",2,u),this.wa=Vs("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ki(u&&u.concurrentRequestLimit),this.Da=new Ns,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ga.prototype,r.la=8,r.G=1,r.connect=function(u,m,y,b){ce(0),this.W=u,this.H=m||{},y&&b!==void 0&&(this.H.OSID=y,this.H.OAID=b),this.F=this.X,this.I=pu(this,null,this.W),_a(this)};function No(u){if(uu(u),u.G==3){var m=u.U++,y=qn(u.I);if(dt(y,"SID",u.K),dt(y,"RID",m),dt(y,"TYPE","terminate"),Us(u,y),m=new At(u,u.j,m),m.L=2,m.v=Cs(qn(y)),y=!1,p.navigator&&p.navigator.sendBeacon)try{y=p.navigator.sendBeacon(m.v.toString(),"")}catch{}!y&&p.Image&&(new Image().src=m.v,y=!0),y||(m.g=gu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),ei(m)}mu(u)}function ya(u){u.g&&(Ps(u),u.g.cancel(),u.g=null)}function uu(u){ya(u),u.u&&(p.clearTimeout(u.u),u.u=null),va(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function _a(u){if(!la(u.h)&&!u.s){u.s=!0;var m=u.Ga;se||D(),_e||(se(),_e=!0),tt.add(m,u),u.B=0}}function Dh(u,m){return ua(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ee(x(u.Ga,u,m),Vo(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new At(this,this.j,u);let G=this.o;if(this.S&&(G?(G=S(G),O(G,this.S)):G=this.S),this.m!==null||this.O||(L.H=G,G=null),this.P)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var b=this.i[y];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(m+=b,4096<m){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=cu(this,L,m),y=qn(this.I),dt(y,"RID",u),dt(y,"CVER",22),this.D&&dt(y,"X-HTTP-Session-Id",this.D),Us(this,y),G&&(this.O?m="headers="+encodeURIComponent(String(Do(G)))+"&"+m:this.m&&tn(y,this.m,G)),ca(this.h,L),this.Ua&&dt(y,"TYPE","init"),this.P?(dt(y,"$req",m),dt(y,"SID","null"),L.T=!0,en(L,y,null)):en(L,y,m),this.G=2}}else this.G==3&&(u?Oo(this,u):this.i.length==0||la(this.h)||Oo(this))};function Oo(u,m){var y;m?y=m.l:y=u.U++;const b=qn(u.I);dt(b,"SID",u.K),dt(b,"RID",y),dt(b,"AID",u.T),Us(u,b),u.m&&u.o&&tn(b,u.m,u.o),y=new At(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),m&&(u.i=m.D.concat(u.i)),m=cu(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ca(u.h,y),en(y,b,m)}function Us(u,m){u.H&&ke(u.H,function(y,b){dt(m,b,y)}),u.l&&So({},function(y,b){dt(m,b,y)})}function cu(u,m,y){y=Math.min(u.i.length,y);var b=u.l?x(u.l.Na,u.l,u):null;e:{var L=u.i;let G=-1;for(;;){const ae=["count="+y];G==-1?0<y?(G=L[0].g,ae.push("ofs="+G)):G=0:ae.push("ofs="+G);let Ze=!0;for(let Ft=0;Ft<y;Ft++){let We=L[Ft].g;const nn=L[Ft].map;if(We-=G,0>We)G=Math.max(0,L[Ft].g-100),Ze=!1;else try{Ii(nn,ae,"req"+We+"_")}catch{b&&b(nn)}}if(Ze){b=ae.join("&");break e}}}return u=u.i.splice(0,y),m.D=u,b}function hu(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;se||D(),_e||(se(),_e=!0),tt.add(m,u),u.v=0}}function Mo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ee(x(u.Fa,u),Vo(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,fu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ee(x(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ce(10),ya(this),fu(this))};function Ps(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function fu(u){u.g=new At(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=qn(u.qa);dt(m,"RID","rpc"),dt(m,"SID",u.K),dt(m,"AID",u.T),dt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&dt(m,"TO",u.ja),dt(m,"TYPE","xmlhttp"),Us(u,m),u.m&&u.o&&tn(m,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=Cs(qn(m)),y.m=null,y.P=!0,jn(y,u)}r.Za=function(){this.C!=null&&(this.C=null,ya(this),Mo(this),ce(19))};function va(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function du(u,m){var y=null;if(u.g==m){va(u),Ps(u),u.g=null;var b=2}else if(Ao(u.h,m))y=m.D,wn(u.h,m),b=1;else return;if(u.G!=0){if(m.o)if(b==1){y=m.m?m.m.length:0,m=Date.now()-m.F;var L=u.B;b=Y(),nt(b,new le(b,y)),_a(u)}else hu(u);else if(L=m.s,L==3||L==0&&0<m.X||!(b==1&&Dh(u,m)||b==2&&Mo(u)))switch(y&&0<y.length&&(m=u.h,m.i=m.i.concat(y)),L){case 1:er(u,5);break;case 4:er(u,10);break;case 3:er(u,6);break;default:er(u,2)}}}function Vo(u,m){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*m}function er(u,m){if(u.j.info("Error code "+m),m==2){var y=x(u.fb,u),b=u.Xa;const L=!b;b=new zt(b||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||Is(b,"https"),Cs(b),L?Ds(b.toString(),y):gi(b.toString(),y)}else ce(2);u.G=0,u.l&&u.l.sa(m),mu(u),uu(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ce(2)):(this.j.info("Failed to ping google.com"),ce(1))};function mu(u){if(u.G=0,u.ka=[],u.l){const m=wo(u.h);(m.length!=0||u.i.length!=0)&&(ne(u.ka,m),ne(u.ka,u.i),u.h.i.length=0,te(u.i),u.i.length=0),u.l.ra()}}function pu(u,m,y){var b=y instanceof zt?qn(y):new zt(y);if(b.g!="")m&&(b.g=m+"."+b.g),Cr(b,b.s);else{var L=p.location;b=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;var G=new zt(null);b&&Is(G,b),m&&(G.g=m),L&&Cr(G,L),y&&(G.l=y),b=G}return y=u.D,m=u.ya,y&&m&&dt(b,y,m),dt(b,"VER",u.la),Us(u,b),b}function gu(u,m,y){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new lt(new xr({eb:y})):new lt(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function yu(){}r=yu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ea(){}Ea.prototype.g=function(u,m){return new Sn(u,m)};function Sn(u,m){bt.call(this),this.g=new ga(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!we(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!we(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Ni(this)}ee(Sn,bt),Sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Sn.prototype.close=function(){No(this.g)},Sn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=zn(u),u=y);m.i.push(new ru(m.Ya++,u)),m.G==3&&_a(m)},Sn.prototype.N=function(){this.g.l=null,delete this.j,No(this.g),delete this.g,Sn.aa.N.call(this)};function _u(u){pi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const y in m){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}ee(_u,pi);function vu(){ws.call(this),this.status=1}ee(vu,ws);function Ni(u){this.g=u}ee(Ni,yu),Ni.prototype.ua=function(){nt(this.g,"a")},Ni.prototype.ta=function(u){nt(this.g,new _u(u))},Ni.prototype.sa=function(u){nt(this.g,new vu)},Ni.prototype.ra=function(){nt(this.g,"b")},Ea.prototype.createWebChannel=Ea.prototype.g,Sn.prototype.send=Sn.prototype.o,Sn.prototype.open=Sn.prototype.m,Sn.prototype.close=Sn.prototype.close,J0=function(){return new Ea},W0=function(){return Y()},Z0=Bn,Kd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},st.NO_ERROR=0,st.TIMEOUT=8,st.HTTP_ERROR=6,Nc=st,vt.COMPLETE="complete",$0=vt,As.EventType=Jn,Jn.OPEN="a",Jn.CLOSE="b",Jn.ERROR="c",Jn.MESSAGE="d",bt.prototype.listen=bt.prototype.K,Sl=As,lt.prototype.listenOnce=lt.prototype.L,lt.prototype.getLastError=lt.prototype.Ka,lt.prototype.getLastErrorCode=lt.prototype.Ba,lt.prototype.getStatus=lt.prototype.Z,lt.prototype.getResponseJson=lt.prototype.Oa,lt.prototype.getResponseText=lt.prototype.oa,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Ha,X0=lt}).apply(typeof Tc<"u"?Tc:typeof self<"u"?self:typeof window<"u"?window:{});const tv="@firebase/firestore",nv="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _o="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=new mm("@firebase/firestore");function Za(){return ia.logLevel}function fe(r,...e){if(ia.logLevel<=Xe.DEBUG){const n=e.map(Rm);ia.debug(`Firestore (${_o}): ${r}`,...n)}}function br(r,...e){if(ia.logLevel<=Xe.ERROR){const n=e.map(Rm);ia.error(`Firestore (${_o}): ${r}`,...n)}}function oo(r,...e){if(ia.logLevel<=Xe.WARN){const n=e.map(Rm);ia.warn(`Firestore (${_o}): ${r}`,...n)}}function Rm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,eE(r,s,n)}function eE(r,e,n){let s=`FIRESTORE (${_o}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw br(s),new Error(s)}function ut(r,e,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||eE(e,l,s)}function Pe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends wr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class JS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(En.UNAUTHENTICATED))}shutdown(){}}class eR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class tR{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ut(this.o===void 0,42304);let s=this.i;const l=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let c=new ls;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ls,e.enqueueRetryable(()=>l(this.currentUser))};const f=()=>{const g=c;e.enqueueRetryable(async()=>{await g.promise,await l(this.currentUser)})},p=g=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(g=>p(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ls)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ut(typeof s.accessToken=="string",31837,{l:s}),new tE(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ut(e===null||typeof e=="string",2055,{h:e}),new En(e)}}class nR{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=En.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class iR{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new nR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(En.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class iv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ut(this.o===void 0,3512);const s=c=>{c.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,fe("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const l=c=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>l(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new iv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ut(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new iv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=sR(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<n&&(s+=e.charAt(l[c]%62))}return s}}function He(r,e){return r<e?-1:r>e?1:0}function Xd(r,e){let n=0;for(;n<r.length&&n<e.length;){const s=r.codePointAt(n),l=e.codePointAt(n);if(s!==l){if(s<128&&l<128)return He(s,l);{const c=nE(),f=aR(c.encode(rv(r,n)),c.encode(rv(e,n)));return f!==0?f:He(s,l)}}n+=s>65535?2:1}return He(r.length,e.length)}function rv(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function aR(r,e){for(let n=0;n<r.length&&n<e.length;++n)if(r[n]!==e[n])return He(r[n],e[n]);return He(r.length,e.length)}function lo(r,e,n){return r.length===e.length&&r.every((s,l)=>n(s,e[l]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv=-62135596800,av=1e6;class Xt{static now(){return Xt.fromMillis(Date.now())}static fromDate(e){return Xt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*av);return new Xt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<sv)throw new de(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/av}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-sv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new Xt(0,0))}static max(){return new Ve(new Xt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="__name__";class Li{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ce(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ce(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Li.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Li?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let l=0;l<s;l++){const c=Li.compareSegments(e.get(l),n.get(l));if(c!==0)return c}return He(e.length,n.length)}static compareSegments(e,n){const s=Li.isNumericId(e),l=Li.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?Li.extractNumericId(e).compare(Li.extractNumericId(n)):Xd(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return os.fromString(e.substring(4,e.length-2))}}class wt extends Li{construct(e,n,s){return new wt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new de(W.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(l=>l.length>0))}return new wt(n)}static emptyPath(){return new wt([])}}const oR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mn extends Li{construct(e,n,s){return new mn(e,n,s)}static isValidIdentifier(e){return oR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ov}static keyField(){return new mn([ov])}static fromServerFormat(e){const n=[];let s="",l=0;const c=()=>{if(s.length===0)throw new de(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new de(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new de(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,l+=2}else p==="`"?(f=!f,l++):p!=="."||f?(s+=p,l++):(c(),l++)}if(c(),f)throw new de(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mn(n)}static emptyPath(){return new mn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(wt.fromString(e))}static fromName(e){return new Ae(wt.fromString(e).popFirst(5))}static empty(){return new Ae(wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&wt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return wt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new wt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=-1;function lR(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=Ve.fromTimestamp(s===1e9?new Xt(n+1,0):new Xt(n,s));return new cs(l,Ae.empty(),e)}function uR(r){return new cs(r.readTime,r.key,kl)}class cs{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new cs(Ve.min(),Ae.empty(),kl)}static max(){return new cs(Ve.max(),Ae.empty(),kl)}}function cR(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=Ae.comparator(r.documentKey,e.documentKey),n!==0?n:He(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vo(r){if(r.code!==W.FAILED_PRECONDITION||r.message!==hR)throw r;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,l)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.reject(n)}static resolve(e){return new Z((n,s)=>{n(e)})}static reject(e){return new Z((n,s)=>{s(e)})}static waitFor(e){return new Z((n,s)=>{let l=0,c=0,f=!1;e.forEach(p=>{++l,p.next(()=>{++c,f&&c===l&&n()},g=>s(g))}),f=!0,c===l&&n()})}static or(e){let n=Z.resolve(!1);for(const s of e)n=n.next(l=>l?Z.resolve(l):s());return n}static forEach(e,n){const s=[];return e.forEach((l,c)=>{s.push(n.call(this,l,c))}),this.waitFor(s)}static mapArray(e,n){return new Z((s,l)=>{const c=e.length,f=new Array(c);let p=0;for(let g=0;g<c;g++){const _=g;n(e[_]).next(T=>{f[_]=T,++p,p===c&&s(f)},T=>l(T))}})}static doWhile(e,n){return new Z((s,l)=>{const c=()=>{e()===!0?n().next(()=>{c()},l):s()};c()})}}function dR(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Eo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}ah.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im=-1;function oh(r){return r==null}function Fc(r){return r===0&&1/r==-1/0}function mR(r){return typeof r=="number"&&Number.isInteger(r)&&!Fc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="";function pR(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=lv(e)),e=gR(r.get(n),e);return lv(e)}function gR(r,e){let n=e;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":n+="";break;case rE:n+="";break;default:n+=c}}return n}function lv(r){return r+rE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function ys(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function sE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,n){this.comparator=e,this.root=n||dn.EMPTY}insert(e,n){return new It(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dn.BLACK,null,null))}remove(e){return new It(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(e,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bc(this.root,e,this.comparator,!1)}getReverseIterator(){return new bc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bc(this.root,e,this.comparator,!0)}}class bc{constructor(e,n,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dn{constructor(e,n,s,l,c){this.key=e,this.value=n,this.color=s??dn.RED,this.left=l??dn.EMPTY,this.right=c??dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,l,c){return new dn(e??this.key,n??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let l=this;const c=s(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,n,s),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return dn.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}dn.EMPTY=null,dn.RED=!0,dn.BLACK=!1;dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,n,s,l,c){return this}insert(e,n,s){return new dn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.comparator=e,this.data=new It(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new cv(this.data.getIterator())}getIteratorFrom(e){return new cv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof $t)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new $t(this.comparator);return n.data=e,n}}class cv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.fields=e,e.sort(mn.comparator)}static empty(){return new $n([])}unionWith(e){let n=new $t(mn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new $n(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return lo(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new aE("Invalid base64 string: "+c):c}}(e);return new pn(n)}static fromUint8Array(e){const n=function(l){let c="";for(let f=0;f<l.length;++f)c+=String.fromCharCode(l[f]);return c}(e);return new pn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pn.EMPTY_BYTE_STRING=new pn("");const yR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hs(r){if(ut(!!r,39018),typeof r=="string"){let e=0;const n=yR.exec(r);if(ut(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Pt(r.seconds),nanos:Pt(r.nanos)}}function Pt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function fs(r){return typeof r=="string"?pn.fromBase64String(r):pn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="server_timestamp",lE="__type__",uE="__previous_value__",cE="__local_write_time__";function Cm(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[lE])===null||n===void 0?void 0:n.stringValue)===oE}function lh(r){const e=r.mapValue.fields[uE];return Cm(e)?lh(e):e}function Ll(r){const e=hs(r.mapValue.fields[cE].timestampValue);return new Xt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,n,s,l,c,f,p,g,_,T){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=_,this.isUsingEmulator=T}}const Qc="(default)";class zl{constructor(e,n){this.projectId=e,this.database=n||Qc}static empty(){return new zl("","")}get isDefaultDatabase(){return this.database===Qc}isEqual(e){return e instanceof zl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="__type__",vR="__max__",Ac={mapValue:{}},fE="__vector__",Yc="value";function ds(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Cm(r)?4:TR(r)?9007199254740991:ER(r)?10:11:Ce(28295,{value:r})}function Hi(r,e){if(r===e)return!0;const n=ds(r);if(n!==ds(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ll(r).isEqual(Ll(e));case 3:return function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const f=hs(l.timestampValue),p=hs(c.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(l,c){return fs(l.bytesValue).isEqual(fs(c.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(l,c){return Pt(l.geoPointValue.latitude)===Pt(c.geoPointValue.latitude)&&Pt(l.geoPointValue.longitude)===Pt(c.geoPointValue.longitude)}(r,e);case 2:return function(l,c){if("integerValue"in l&&"integerValue"in c)return Pt(l.integerValue)===Pt(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const f=Pt(l.doubleValue),p=Pt(c.doubleValue);return f===p?Fc(f)===Fc(p):isNaN(f)&&isNaN(p)}return!1}(r,e);case 9:return lo(r.arrayValue.values||[],e.arrayValue.values||[],Hi);case 10:case 11:return function(l,c){const f=l.mapValue.fields||{},p=c.mapValue.fields||{};if(uv(f)!==uv(p))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(p[g]===void 0||!Hi(f[g],p[g])))return!1;return!0}(r,e);default:return Ce(52216,{left:r})}}function Bl(r,e){return(r.values||[]).find(n=>Hi(n,e))!==void 0}function uo(r,e){if(r===e)return 0;const n=ds(r),s=ds(e);if(n!==s)return He(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return He(r.booleanValue,e.booleanValue);case 2:return function(c,f){const p=Pt(c.integerValue||c.doubleValue),g=Pt(f.integerValue||f.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1}(r,e);case 3:return hv(r.timestampValue,e.timestampValue);case 4:return hv(Ll(r),Ll(e));case 5:return Xd(r.stringValue,e.stringValue);case 6:return function(c,f){const p=fs(c),g=fs(f);return p.compareTo(g)}(r.bytesValue,e.bytesValue);case 7:return function(c,f){const p=c.split("/"),g=f.split("/");for(let _=0;_<p.length&&_<g.length;_++){const T=He(p[_],g[_]);if(T!==0)return T}return He(p.length,g.length)}(r.referenceValue,e.referenceValue);case 8:return function(c,f){const p=He(Pt(c.latitude),Pt(f.latitude));return p!==0?p:He(Pt(c.longitude),Pt(f.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return fv(r.arrayValue,e.arrayValue);case 10:return function(c,f){var p,g,_,T;const I=c.fields||{},x=f.fields||{},Q=(p=I[Yc])===null||p===void 0?void 0:p.arrayValue,ee=(g=x[Yc])===null||g===void 0?void 0:g.arrayValue,te=He(((_=Q==null?void 0:Q.values)===null||_===void 0?void 0:_.length)||0,((T=ee==null?void 0:ee.values)===null||T===void 0?void 0:T.length)||0);return te!==0?te:fv(Q,ee)}(r.mapValue,e.mapValue);case 11:return function(c,f){if(c===Ac.mapValue&&f===Ac.mapValue)return 0;if(c===Ac.mapValue)return 1;if(f===Ac.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),_=f.fields||{},T=Object.keys(_);g.sort(),T.sort();for(let I=0;I<g.length&&I<T.length;++I){const x=Xd(g[I],T[I]);if(x!==0)return x;const Q=uo(p[g[I]],_[T[I]]);if(Q!==0)return Q}return He(g.length,T.length)}(r.mapValue,e.mapValue);default:throw Ce(23264,{Pe:n})}}function hv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return He(r,e);const n=hs(r),s=hs(e),l=He(n.seconds,s.seconds);return l!==0?l:He(n.nanos,s.nanos)}function fv(r,e){const n=r.values||[],s=e.values||[];for(let l=0;l<n.length&&l<s.length;++l){const c=uo(n[l],s[l]);if(c)return c}return He(n.length,s.length)}function co(r){return $d(r)}function $d(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const s=hs(n);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return fs(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return Ae.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let s="[",l=!0;for(const c of n.values||[])l?l=!1:s+=",",s+=$d(c);return s+"]"}(r.arrayValue):"mapValue"in r?function(n){const s=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const f of s)c?c=!1:l+=",",l+=`${f}:${$d(n.fields[f])}`;return l+"}"}(r.mapValue):Ce(61005,{value:r})}function Oc(r){switch(ds(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=lh(r);return e?16+Oc(e):16;case 5:return 2*r.stringValue.length;case 6:return fs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((l,c)=>l+Oc(c),0)}(r.arrayValue);case 10:case 11:return function(s){let l=0;return ys(s.fields,(c,f)=>{l+=c.length+Oc(f)}),l}(r.mapValue);default:throw Ce(13486,{value:r})}}function dv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Zd(r){return!!r&&"integerValue"in r}function xm(r){return!!r&&"arrayValue"in r}function mv(r){return!!r&&"nullValue"in r}function pv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Mc(r){return!!r&&"mapValue"in r}function ER(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[hE])===null||n===void 0?void 0:n.stringValue)===fE}function Nl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return ys(r.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Nl(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Nl(r.arrayValue.values[n]);return e}return Object.assign({},r)}function TR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===vR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Mc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nl(n)}setAll(e){let n=mn.emptyPath(),s={},l=[];e.forEach((f,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,s,l),s={},l=[],n=p.popLast()}f?s[p.lastSegment()]=Nl(f):l.push(p.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,s,l)}delete(e){const n=this.field(e.popLast());Mc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let l=n.mapValue.fields[e.get(s)];Mc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,s){ys(n,(l,c)=>e[l]=c);for(const l of s)delete e[l]}clone(){return new Un(Nl(this.value))}}function dE(r){const e=[];return ys(r.fields,(n,s)=>{const l=new mn([n]);if(Mc(s)){const c=dE(s.mapValue).fields;if(c.length===0)e.push(l);else for(const f of c)e.push(l.child(f))}else e.push(l)}),new $n(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,n,s,l,c,f,p){this.key=e,this.documentType=n,this.version=s,this.readTime=l,this.createTime=c,this.data=f,this.documentState=p}static newInvalidDocument(e){return new Tn(e,0,Ve.min(),Ve.min(),Ve.min(),Un.empty(),0)}static newFoundDocument(e,n,s,l){return new Tn(e,1,n,Ve.min(),s,l,0)}static newNoDocument(e,n){return new Tn(e,2,n,Ve.min(),Ve.min(),Un.empty(),0)}static newUnknownDocument(e,n){return new Tn(e,3,n,Ve.min(),Ve.min(),Un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n){this.position=e,this.inclusive=n}}function gv(r,e,n){let s=0;for(let l=0;l<r.position.length;l++){const c=e[l],f=r.position[l];if(c.field.isKeyField()?s=Ae.comparator(Ae.fromName(f.referenceValue),n.key):s=uo(f,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function yv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Hi(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n="asc"){this.field=e,this.dir=n}}function bR(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{}class Ht extends mE{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new wR(e,n,s):n==="array-contains"?new IR(e,s):n==="in"?new CR(e,s):n==="not-in"?new xR(e,s):n==="array-contains-any"?new DR(e,s):new Ht(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new SR(e,s):new RR(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(uo(n,this.value)):n!==null&&ds(this.value)===ds(n)&&this.matchesComparison(uo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ti extends mE{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Ti(e,n)}matches(e){return pE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function pE(r){return r.op==="and"}function gE(r){return AR(r)&&pE(r)}function AR(r){for(const e of r.filters)if(e instanceof Ti)return!1;return!0}function Wd(r){if(r instanceof Ht)return r.field.canonicalString()+r.op.toString()+co(r.value);if(gE(r))return r.filters.map(e=>Wd(e)).join(",");{const e=r.filters.map(n=>Wd(n)).join(",");return`${r.op}(${e})`}}function yE(r,e){return r instanceof Ht?function(s,l){return l instanceof Ht&&s.op===l.op&&s.field.isEqual(l.field)&&Hi(s.value,l.value)}(r,e):r instanceof Ti?function(s,l){return l instanceof Ti&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce((c,f,p)=>c&&yE(f,l.filters[p]),!0):!1}(r,e):void Ce(19439)}function _E(r){return r instanceof Ht?function(n){return`${n.field.canonicalString()} ${n.op} ${co(n.value)}`}(r):r instanceof Ti?function(n){return n.op.toString()+" {"+n.getFilters().map(_E).join(" ,")+"}"}(r):"Filter"}class wR extends Ht{constructor(e,n,s){super(e,n,s),this.key=Ae.fromName(s.referenceValue)}matches(e){const n=Ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class SR extends Ht{constructor(e,n){super(e,"in",n),this.keys=vE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class RR extends Ht{constructor(e,n){super(e,"not-in",n),this.keys=vE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function vE(r,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>Ae.fromName(s.referenceValue))}class IR extends Ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return xm(n)&&Bl(n.arrayValue,this.value)}}class CR extends Ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Bl(this.value.arrayValue,n)}}class xR extends Ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Bl(this.value.arrayValue,n)}}class DR extends Ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!xm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Bl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n=null,s=[],l=[],c=null,f=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=f,this.endAt=p,this.Ie=null}}function _v(r,e=null,n=[],s=[],l=null,c=null,f=null){return new NR(r,e,n,s,l,c,f)}function Dm(r){const e=Pe(r);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Wd(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(c){return c.field.canonicalString()+c.dir}(s)).join(","),oh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>co(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>co(s)).join(",")),e.Ie=n}return e.Ie}function Nm(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!bR(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!yE(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!yv(r.startAt,e.startAt)&&yv(r.endAt,e.endAt)}function Jd(r){return Ae.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n=null,s=[],l=[],c=null,f="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=f,this.startAt=p,this.endAt=g,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function OR(r,e,n,s,l,c,f,p){return new $l(r,e,n,s,l,c,f,p)}function Om(r){return new $l(r)}function vv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function EE(r){return r.collectionGroup!==null}function Ol(r){const e=Pe(r);if(e.Ee===null){e.Ee=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ee.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new $t(mn.comparator);return f.filters.forEach(g=>{g.getFlattenedFilters().forEach(_=>{_.isInequality()&&(p=p.add(_.field))})}),p})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ee.push(new Xc(c,s))}),n.has(mn.keyField().canonicalString())||e.Ee.push(new Xc(mn.keyField(),s))}return e.Ee}function ji(r){const e=Pe(r);return e.de||(e.de=MR(e,Ol(r))),e.de}function MR(r,e){if(r.limitType==="F")return _v(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(l=>{const c=l.dir==="desc"?"asc":"desc";return new Xc(l.field,c)});const n=r.endAt?new Kc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Kc(r.startAt.position,r.startAt.inclusive):null;return _v(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function em(r,e){const n=r.filters.concat([e]);return new $l(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function tm(r,e,n){return new $l(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function uh(r,e){return Nm(ji(r),ji(e))&&r.limitType===e.limitType}function TE(r){return`${Dm(ji(r))}|lt:${r.limitType}`}function Wa(r){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(l=>_E(l)).join(", ")}]`),oh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(l=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(l)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(l=>co(l)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(l=>co(l)).join(",")),`Target(${s})`}(ji(r))}; limitType=${r.limitType})`}function ch(r,e){return e.isFoundDocument()&&function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Ae.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(r,e)&&function(s,l){for(const c of Ol(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0}(r,e)&&function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0}(r,e)&&function(s,l){return!(s.startAt&&!function(f,p,g){const _=gv(f,p,g);return f.inclusive?_<=0:_<0}(s.startAt,Ol(s),l)||s.endAt&&!function(f,p,g){const _=gv(f,p,g);return f.inclusive?_>=0:_>0}(s.endAt,Ol(s),l))}(r,e)}function VR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function bE(r){return(e,n)=>{let s=!1;for(const l of Ol(r)){const c=UR(l,e,n);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function UR(r,e,n){const s=r.field.isKeyField()?Ae.comparator(e.key,n.key):function(c,f,p){const g=f.data.field(c),_=p.data.field(c);return g!==null&&_!==null?uo(g,_):Ce(42886)}(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ce(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),l=this.inner[s];if(l===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(e){ys(this.inner,(n,s)=>{for(const[l,c]of s)e(l,c)})}isEmpty(){return sE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=new It(Ae.comparator);function Ar(){return PR}const AE=new It(Ae.comparator);function Rl(...r){let e=AE;for(const n of r)e=e.insert(n.key,n);return e}function wE(r){let e=AE;return r.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Js(){return Ml()}function SE(){return Ml()}function Ml(){return new sa(r=>r.toString(),(r,e)=>r.isEqual(e))}const kR=new It(Ae.comparator),LR=new $t(Ae.comparator);function $e(...r){let e=LR;for(const n of r)e=e.add(n);return e}const zR=new $t(He);function BR(){return zR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fc(e)?"-0":e}}function RE(r){return{integerValue:""+r}}function jR(r,e){return mR(e)?RE(e):Mm(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(){this._=void 0}}function qR(r,e,n){return r instanceof $c?function(l,c){const f={fields:{[lE]:{stringValue:oE},[cE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Cm(c)&&(c=lh(c)),c&&(f.fields[uE]=c),{mapValue:f}}(n,e):r instanceof jl?CE(r,e):r instanceof ql?xE(r,e):function(l,c){const f=IE(l,c),p=Ev(f)+Ev(l.Re);return Zd(f)&&Zd(l.Re)?RE(p):Mm(l.serializer,p)}(r,e)}function HR(r,e,n){return r instanceof jl?CE(r,e):r instanceof ql?xE(r,e):n}function IE(r,e){return r instanceof Zc?function(s){return Zd(s)||function(c){return!!c&&"doubleValue"in c}(s)}(e)?e:{integerValue:0}:null}class $c extends hh{}class jl extends hh{constructor(e){super(),this.elements=e}}function CE(r,e){const n=DE(e);for(const s of r.elements)n.some(l=>Hi(l,s))||n.push(s);return{arrayValue:{values:n}}}class ql extends hh{constructor(e){super(),this.elements=e}}function xE(r,e){let n=DE(e);for(const s of r.elements)n=n.filter(l=>!Hi(l,s));return{arrayValue:{values:n}}}class Zc extends hh{constructor(e,n){super(),this.serializer=e,this.Re=n}}function Ev(r){return Pt(r.integerValue||r.doubleValue)}function DE(r){return xm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function GR(r,e){return r.field.isEqual(e.field)&&function(s,l){return s instanceof jl&&l instanceof jl||s instanceof ql&&l instanceof ql?lo(s.elements,l.elements,Hi):s instanceof Zc&&l instanceof Zc?Hi(s.Re,l.Re):s instanceof $c&&l instanceof $c}(r.transform,e.transform)}class FR{constructor(e,n){this.version=e,this.transformResults=n}}class Pn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Pn}static exists(e){return new Pn(void 0,e)}static updateTime(e){return new Pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class fh{}function NE(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new dh(r.key,Pn.none()):new Zl(r.key,r.data,Pn.none());{const n=r.data,s=Un.empty();let l=new $t(mn.comparator);for(let c of e.fields)if(!l.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?s.delete(c):s.set(c,f),l=l.add(c)}return new _s(r.key,s,new $n(l.toArray()),Pn.none())}}function QR(r,e,n){r instanceof Zl?function(l,c,f){const p=l.value.clone(),g=bv(l.fieldTransforms,c,f.transformResults);p.setAll(g),c.convertToFoundDocument(f.version,p).setHasCommittedMutations()}(r,e,n):r instanceof _s?function(l,c,f){if(!Vc(l.precondition,c))return void c.convertToUnknownDocument(f.version);const p=bv(l.fieldTransforms,c,f.transformResults),g=c.data;g.setAll(OE(l)),g.setAll(p),c.convertToFoundDocument(f.version,g).setHasCommittedMutations()}(r,e,n):function(l,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function Vl(r,e,n,s){return r instanceof Zl?function(c,f,p,g){if(!Vc(c.precondition,f))return p;const _=c.value.clone(),T=Av(c.fieldTransforms,g,f);return _.setAll(T),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),null}(r,e,n,s):r instanceof _s?function(c,f,p,g){if(!Vc(c.precondition,f))return p;const _=Av(c.fieldTransforms,g,f),T=f.data;return T.setAll(OE(c)),T.setAll(_),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(I=>I.field))}(r,e,n,s):function(c,f,p){return Vc(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p}(r,e,n)}function YR(r,e){let n=null;for(const s of r.fieldTransforms){const l=e.data.field(s.field),c=IE(s.transform,l||null);c!=null&&(n===null&&(n=Un.empty()),n.set(s.field,c))}return n||null}function Tv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&lo(s,l,(c,f)=>GR(c,f))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Zl extends fh{constructor(e,n,s,l=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class _s extends fh{constructor(e,n,s,l,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function OE(r){const e=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}}),e}function bv(r,e,n){const s=new Map;ut(r.length===n.length,32656,{Ve:n.length,me:r.length});for(let l=0;l<n.length;l++){const c=r[l],f=c.transform,p=e.data.field(c.field);s.set(c.field,HR(f,p,n[l]))}return s}function Av(r,e,n){const s=new Map;for(const l of r){const c=l.transform,f=n.data.field(l.field);s.set(l.field,qR(c,f,e))}return s}class dh extends fh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KR extends fh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n,s,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&QR(c,e,s[l])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Vl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Vl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=SE();return this.mutations.forEach(l=>{const c=e.get(l.key),f=c.overlayedDocument;let p=this.applyToLocalView(f,c.mutatedFields);p=n.has(l.key)?null:p;const g=NE(f,p);g!==null&&s.set(l.key,g),f.isValidDocument()||f.convertToNoDocument(Ve.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),$e())}isEqual(e){return this.batchId===e.batchId&&lo(this.mutations,e.mutations,(n,s)=>Tv(n,s))&&lo(this.baseMutations,e.baseMutations,(n,s)=>Tv(n,s))}}class Vm{constructor(e,n,s,l){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(e,n,s){ut(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let l=function(){return kR}();const c=e.mutations;for(let f=0;f<c.length;f++)l=l.insert(c[f].key,s[f].version);return new Vm(e,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,et;function WR(r){switch(r){case W.OK:return Ce(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return Ce(15467,{code:r})}}function ME(r){if(r===void 0)return br("GRPC error has no .code"),W.UNKNOWN;switch(r){case qt.OK:return W.OK;case qt.CANCELLED:return W.CANCELLED;case qt.UNKNOWN:return W.UNKNOWN;case qt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case qt.INTERNAL:return W.INTERNAL;case qt.UNAVAILABLE:return W.UNAVAILABLE;case qt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case qt.NOT_FOUND:return W.NOT_FOUND;case qt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case qt.ABORTED:return W.ABORTED;case qt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case qt.DATA_LOSS:return W.DATA_LOSS;default:return Ce(39323,{code:r})}}(et=qt||(qt={}))[et.OK=0]="OK",et[et.CANCELLED=1]="CANCELLED",et[et.UNKNOWN=2]="UNKNOWN",et[et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",et[et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",et[et.NOT_FOUND=5]="NOT_FOUND",et[et.ALREADY_EXISTS=6]="ALREADY_EXISTS",et[et.PERMISSION_DENIED=7]="PERMISSION_DENIED",et[et.UNAUTHENTICATED=16]="UNAUTHENTICATED",et[et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",et[et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",et[et.ABORTED=10]="ABORTED",et[et.OUT_OF_RANGE=11]="OUT_OF_RANGE",et[et.UNIMPLEMENTED=12]="UNIMPLEMENTED",et[et.INTERNAL=13]="INTERNAL",et[et.UNAVAILABLE=14]="UNAVAILABLE",et[et.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=new os([4294967295,4294967295],0);function wv(r){const e=nE().encode(r),n=new K0;return n.update(e),new Uint8Array(n.digest())}function Sv(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new os([n,s],0),new os([l,c],0)]}class Um{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Il(`Invalid padding: ${n}`);if(s<0)throw new Il(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Il(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Il(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=os.fromNumber(this.pe)}we(e,n,s){let l=e.add(n.multiply(os.fromNumber(s)));return l.compare(JR)===1&&(l=new os([l.getBits(0),l.getBits(1)],0)),l.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=wv(e),[s,l]=Sv(n);for(let c=0;c<this.hashCount;c++){const f=this.we(s,l,c);if(!this.be(f))return!1}return!0}static create(e,n,s){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new Um(c,l,n);return s.forEach(p=>f.insert(p)),f}insert(e){if(this.pe===0)return;const n=wv(e),[s,l]=Sv(n);for(let c=0;c<this.hashCount;c++){const f=this.we(s,l,c);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Il extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,n,s,l,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const l=new Map;return l.set(e,Wl.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new mh(Ve.min(),l,new It(He),Ar(),$e())}}class Wl{constructor(e,n,s,l,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Wl(s,n,$e(),$e(),$e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,n,s,l){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=l}}class VE{constructor(e,n){this.targetId=e,this.Ce=n}}class UE{constructor(e,n,s=pn.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=l}}class Rv{constructor(){this.Fe=0,this.Me=Iv(),this.xe=pn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=$e(),n=$e(),s=$e();return this.Me.forEach((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:Ce(38017,{changeType:c})}}),new Wl(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=Iv()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ut(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class eI{constructor(e){this.ze=e,this.je=new Map,this.He=Ar(),this.Je=wc(),this.Ye=wc(),this.Ze=new It(He)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:Ce(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,l)=>{this.it(l)&&n(l)})}ot(e){const n=e.targetId,s=e.Ce.count,l=this._t(n);if(l){const c=l.target;if(Jd(c))if(s===0){const f=new Ae(c.path);this.tt(n,f,Tn.newNoDocument(f,Ve.min()))}else ut(s===1,20013,{expectedCount:s});else{const f=this.ut(n);if(f!==s){const p=this.ct(e),g=p?this.lt(p,e,f):1;if(g!==0){this.st(n);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,_)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=n;let f,p;try{f=fs(s).toUint8Array()}catch(g){if(g instanceof aE)return oo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Um(f,l,c)}catch(g){return oo(g instanceof Il?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.pe===0?null:p}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let l=0;return s.forEach(c=>{const f=this.ze.Pt(),p=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.tt(n,c,null),l++)}),l}It(e){const n=new Map;this.je.forEach((c,f)=>{const p=this._t(f);if(p){if(c.current&&Jd(p.target)){const g=new Ae(p.target.path);this.Et(g).has(f)||this.dt(f,g)||this.tt(f,g,Tn.newNoDocument(g,e))}c.Le&&(n.set(f,c.qe()),c.Qe())}});let s=$e();this.Ye.forEach((c,f)=>{let p=!0;f.forEachWhile(g=>{const _=this._t(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)}),p&&(s=s.add(c))}),this.He.forEach((c,f)=>f.setReadTime(e));const l=new mh(e,n,this.Ze,this.He,s);return this.He=Ar(),this.Je=wc(),this.Ye=wc(),this.Ze=new It(He),l}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const l=this.rt(e);this.dt(e,n)?l.$e(n,1):l.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new Rv,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new $t(He),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new $t(He),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||fe("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Rv),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function wc(){return new It(Ae.comparator)}function Iv(){return new It(Ae.comparator)}const tI={asc:"ASCENDING",desc:"DESCENDING"},nI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iI={and:"AND",or:"OR"};class rI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function nm(r,e){return r.useProto3Json||oh(e)?e:{value:e}}function Wc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PE(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function sI(r,e){return Wc(r,e.toTimestamp())}function qi(r){return ut(!!r,49232),Ve.fromTimestamp(function(n){const s=hs(n);return new Xt(s.seconds,s.nanos)}(r))}function Pm(r,e){return im(r,e).canonicalString()}function im(r,e){const n=function(l){return new wt(["projects",l.projectId,"databases",l.database])}(r).child("documents");return e===void 0?n:n.child(e)}function kE(r){const e=wt.fromString(r);return ut(qE(e),10190,{key:e.toString()}),e}function rm(r,e){return Pm(r.databaseId,e.path)}function Ud(r,e){const n=kE(e);if(n.get(1)!==r.databaseId.projectId)throw new de(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new de(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Ae(zE(n))}function LE(r,e){return Pm(r.databaseId,e)}function aI(r){const e=kE(r);return e.length===4?wt.emptyPath():zE(e)}function sm(r){return new wt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function zE(r){return ut(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Cv(r,e,n){return{name:rm(r,e),fields:n.value.mapValue.fields}}function oI(r,e){let n;if("targetChange"in e){e.targetChange;const s=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Ce(39313,{state:_})}(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=function(_,T){return _.useProto3Json?(ut(T===void 0||typeof T=="string",58123),pn.fromBase64String(T||"")):(ut(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),pn.fromUint8Array(T||new Uint8Array))}(r,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&function(_){const T=_.code===void 0?W.UNKNOWN:ME(_.code);return new de(T,_.message||"")}(f);n=new UE(s,l,c,p||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const l=Ud(r,s.document.name),c=qi(s.document.updateTime),f=s.document.createTime?qi(s.document.createTime):Ve.min(),p=new Un({mapValue:{fields:s.document.fields}}),g=Tn.newFoundDocument(l,c,f,p),_=s.targetIds||[],T=s.removedTargetIds||[];n=new Uc(_,T,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const l=Ud(r,s.document),c=s.readTime?qi(s.readTime):Ve.min(),f=Tn.newNoDocument(l,c),p=s.removedTargetIds||[];n=new Uc([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const l=Ud(r,s.document),c=s.removedTargetIds||[];n=new Uc([],c,l,null)}else{if(!("filter"in e))return Ce(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,f=new ZR(l,c),p=s.targetId;n=new VE(p,f)}}return n}function lI(r,e){let n;if(e instanceof Zl)n={update:Cv(r,e.key,e.value)};else if(e instanceof dh)n={delete:rm(r,e.key)};else if(e instanceof _s)n={update:Cv(r,e.key,e.data),updateMask:yI(e.fieldMask)};else{if(!(e instanceof KR))return Ce(16599,{ft:e.type});n={verify:rm(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(c,f){const p=f.transform;if(p instanceof $c)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof jl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof ql)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Zc)return{fieldPath:f.field.canonicalString(),increment:p.Re};throw Ce(20930,{transform:f.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(l,c){return c.updateTime!==void 0?{updateTime:sI(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ce(27497)}(r,e.precondition)),n}function uI(r,e){return r&&r.length>0?(ut(e!==void 0,14353),r.map(n=>function(l,c){let f=l.updateTime?qi(l.updateTime):qi(c);return f.isEqual(Ve.min())&&(f=qi(c)),new FR(f,l.transformResults||[])}(n,e))):[]}function cI(r,e){return{documents:[LE(r,e.path)]}}function hI(r,e){const n={structuredQuery:{}},s=e.path;let l;e.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=LE(r,l);const c=function(_){if(_.length!==0)return jE(Ti.create(_,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const f=function(_){if(_.length!==0)return _.map(T=>function(x){return{field:Ja(x.field),direction:mI(x.dir)}}(T))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const p=nm(r,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(e.endAt)),{gt:n,parent:l}}function fI(r){let e=aI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){ut(s===1,65062);const T=n.from[0];T.allDescendants?l=T.collectionId:e=e.child(T.collectionId)}let c=[];n.where&&(c=function(I){const x=BE(I);return x instanceof Ti&&gE(x)?x.getFilters():[x]}(n.where));let f=[];n.orderBy&&(f=function(I){return I.map(x=>function(ee){return new Xc(eo(ee.field),function(ne){switch(ne){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ee.direction))}(x))}(n.orderBy));let p=null;n.limit&&(p=function(I){let x;return x=typeof I=="object"?I.value:I,oh(x)?null:x}(n.limit));let g=null;n.startAt&&(g=function(I){const x=!!I.before,Q=I.values||[];return new Kc(Q,x)}(n.startAt));let _=null;return n.endAt&&(_=function(I){const x=!I.before,Q=I.values||[];return new Kc(Q,x)}(n.endAt)),OR(e,l,f,c,p,"F",g,_)}function dI(r,e){const n=function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:l})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function BE(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=eo(n.unaryFilter.field);return Ht.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=eo(n.unaryFilter.field);return Ht.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=eo(n.unaryFilter.field);return Ht.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=eo(n.unaryFilter.field);return Ht.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}}(r):r.fieldFilter!==void 0?function(n){return Ht.create(eo(n.fieldFilter.field),function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return Ti.create(n.compositeFilter.filters.map(s=>BE(s)),function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}}(n.compositeFilter.op))}(r):Ce(30097,{filter:r})}function mI(r){return tI[r]}function pI(r){return nI[r]}function gI(r){return iI[r]}function Ja(r){return{fieldPath:r.canonicalString()}}function eo(r){return mn.fromServerFormat(r.fieldPath)}function jE(r){return r instanceof Ht?function(n){if(n.op==="=="){if(pv(n.value))return{unaryFilter:{field:Ja(n.field),op:"IS_NAN"}};if(mv(n.value))return{unaryFilter:{field:Ja(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(pv(n.value))return{unaryFilter:{field:Ja(n.field),op:"IS_NOT_NAN"}};if(mv(n.value))return{unaryFilter:{field:Ja(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ja(n.field),op:pI(n.op),value:n.value}}}(r):r instanceof Ti?function(n){const s=n.getFilters().map(l=>jE(l));return s.length===1?s[0]:{compositeFilter:{op:gI(n.op),filters:s}}}(r):Ce(54877,{filter:r})}function yI(r){const e=[];return r.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function qE(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n,s,l,c=Ve.min(),f=Ve.min(),p=pn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new is(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e){this.wt=e}}function vI(r){const e=fI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?tm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(){this.Cn=new TI}addToCollectionParentIndex(e,n){return this.Cn.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(cs.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(cs.min())}updateCollectionGroup(e,n,s){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class TI{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n]||new $t(wt.comparator),c=!l.has(s);return this.index[n]=l.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(e){return(this.index[e]||new $t(wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},HE=41943040;class Vn{static withCacheSize(e){return new Vn(e,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vn.DEFAULT_COLLECTION_PERCENTILE=10,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vn.DEFAULT=new Vn(HE,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vn.DISABLED=new Vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new ho(0)}static lr(){return new ho(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="LruGarbageCollector",bI=1048576;function Nv([r,e],[n,s]){const l=He(r,n);return l===0?He(e,s):l}class AI{constructor(e){this.Er=e,this.buffer=new $t(Nv),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Nv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class wI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){fe(Dv,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Eo(n)?fe(Dv,"Ignoring IndexedDB error during garbage collection: ",n):await vo(n)}await this.mr(3e5)})}}class SI{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return Z.resolve(ah.le);const s=new AI(n);return this.gr.forEachTarget(e,l=>s.Rr(l.sequenceNumber)).next(()=>this.gr.yr(e,l=>s.Rr(l))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(xv)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xv):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,l,c,f,p,g,_;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),l=this.params.maximumSequenceNumbersToCollect):l=I,f=Date.now(),this.nthSequenceNumber(e,l))).next(I=>(s=I,p=Date.now(),this.removeTargets(e,s,n))).next(I=>(c=I,g=Date.now(),this.removeOrphanedDocuments(e,s))).next(I=>(_=Date.now(),Za()<=Xe.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${l} in `+(p-f)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${I} documents in `+(_-g)+`ms
Total Duration: ${_-T}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:I})))}}function RI(r,e){return new SI(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this.changes=new sa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?Z.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e,n,s,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(l=>(s=l,this.remoteDocumentCache.getEntry(e,n))).next(l=>(s!==null&&Vl(s.mutation,l,$n.empty(),Xt.now()),l))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,$e()).next(()=>s))}getLocalViewOfDocuments(e,n,s=$e()){const l=Js();return this.populateOverlays(e,l,n).next(()=>this.computeViews(e,n,l,s).next(c=>{let f=Rl();return c.forEach((p,g)=>{f=f.insert(p,g.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const s=Js();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,$e()))}populateOverlays(e,n,s){const l=[];return s.forEach(c=>{n.has(c)||l.push(c)}),this.documentOverlayCache.getOverlays(e,l).next(c=>{c.forEach((f,p)=>{n.set(f,p)})})}computeViews(e,n,s,l){let c=Ar();const f=Ml(),p=function(){return Ml()}();return n.forEach((g,_)=>{const T=s.get(_.key);l.has(_.key)&&(T===void 0||T.mutation instanceof _s)?c=c.insert(_.key,_):T!==void 0?(f.set(_.key,T.mutation.getFieldMask()),Vl(T.mutation,_,T.mutation.getFieldMask(),Xt.now())):f.set(_.key,$n.empty())}),this.recalculateAndSaveOverlays(e,c).next(g=>(g.forEach((_,T)=>f.set(_,T)),n.forEach((_,T)=>{var I;return p.set(_,new CI(T,(I=f.get(_))!==null&&I!==void 0?I:null))}),p))}recalculateAndSaveOverlays(e,n){const s=Ml();let l=new It((f,p)=>f-p),c=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const p of f)p.keys().forEach(g=>{const _=n.get(g);if(_===null)return;let T=s.get(g)||$n.empty();T=p.applyToLocalView(_,T),s.set(g,T);const I=(l.get(p.batchId)||$e()).add(g);l=l.insert(p.batchId,I)})}).next(()=>{const f=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),_=g.key,T=g.value,I=SE();T.forEach(x=>{if(!c.has(x)){const Q=NE(n.get(x),s.get(x));Q!==null&&I.set(x,Q),c=c.add(x)}}),f.push(this.documentOverlayCache.saveOverlays(e,_,I))}return Z.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,l){return function(f){return Ae.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):EE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,l):this.getDocumentsMatchingCollectionQuery(e,n,s,l)}getNextDocuments(e,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,l).next(c=>{const f=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,l-c.size):Z.resolve(Js());let p=kl,g=c;return f.next(_=>Z.forEach(_,(T,I)=>(p<I.largestBatchId&&(p=I.largestBatchId),c.get(T)?Z.resolve():this.remoteDocumentCache.getEntry(e,T).next(x=>{g=g.insert(T,x)}))).next(()=>this.populateOverlays(e,_,c)).next(()=>this.computeViews(e,g,_,$e())).next(T=>({batchId:p,changes:wE(T)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ae(n)).next(s=>{let l=Rl();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l})}getDocumentsMatchingCollectionGroupQuery(e,n,s,l){const c=n.collectionGroup;let f=Rl();return this.indexManager.getCollectionParents(e,c).next(p=>Z.forEach(p,g=>{const _=function(I,x){return new $l(x,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)}(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,_,s,l).next(T=>{T.forEach((I,x)=>{f=f.insert(I,x)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,l))).next(f=>{c.forEach((g,_)=>{const T=_.getKey();f.get(T)===null&&(f=f.insert(T,Tn.newInvalidDocument(T)))});let p=Rl();return f.forEach((g,_)=>{const T=c.get(g);T!==void 0&&Vl(T.mutation,_,$n.empty(),Xt.now()),ch(n,_)&&(p=p.insert(g,_))}),p})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return Z.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(l){return{id:l.id,version:l.version,createTime:qi(l.createTime)}}(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(l){return{name:l.name,query:vI(l.bundledQuery),readTime:qi(l.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(){this.overlays=new It(Ae.comparator),this.Qr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Js();return Z.forEach(n,l=>this.getOverlay(e,l).next(c=>{c!==null&&s.set(l,c)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((l,c)=>{this.St(e,n,c)}),Z.resolve()}removeOverlaysForBatchId(e,n,s){const l=this.Qr.get(s);return l!==void 0&&(l.forEach(c=>this.overlays=this.overlays.remove(c)),this.Qr.delete(s)),Z.resolve()}getOverlaysForCollection(e,n,s){const l=Js(),c=n.length+1,f=new Ae(n.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const g=p.getNext().value,_=g.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===c&&g.largestBatchId>s&&l.set(g.getKey(),g)}return Z.resolve(l)}getOverlaysForCollectionGroup(e,n,s,l){let c=new It((_,T)=>_-T);const f=this.overlays.getIterator();for(;f.hasNext();){const _=f.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>s){let T=c.get(_.largestBatchId);T===null&&(T=Js(),c=c.insert(_.largestBatchId,T)),T.set(_.getKey(),_)}}const p=Js(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((_,T)=>p.set(_,T)),!(p.size()>=l)););return Z.resolve(p)}St(e,n,s){const l=this.overlays.get(s.key);if(l!==null){const f=this.Qr.get(l.largestBatchId).delete(s.key);this.Qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new $R(n,s));let c=this.Qr.get(n);c===void 0&&(c=$e(),this.Qr.set(n,c)),this.Qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(){this.sessionToken=pn.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(){this.$r=new $t(on.Ur),this.Kr=new $t(on.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new on(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new on(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new Ae(new wt([])),s=new on(n,e),l=new on(n,e+1),c=[];return this.Kr.forEachInRange([s,l],f=>{this.zr(f),c.push(f.key)}),c}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Ae(new wt([])),s=new on(n,e),l=new on(n,e+1);let c=$e();return this.Kr.forEachInRange([s,l],f=>{c=c.add(f.key)}),c}containsKey(e){const n=new on(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class on{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Ae.comparator(e.key,n.key)||He(e.Zr,n.Zr)}static Wr(e,n){return He(e.Zr,n.Zr)||Ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new $t(on.Ur)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,l){const c=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new XR(c,n,s,l);this.mutationQueue.push(f);for(const p of l)this.Xr=this.Xr.add(new on(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return Z.resolve(f)}lookupMutationBatch(e,n){return Z.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,l=this.ti(s),c=l<0?0:l;return Z.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?Im:this.nr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new on(n,0),l=new on(n,Number.POSITIVE_INFINITY),c=[];return this.Xr.forEachInRange([s,l],f=>{const p=this.ei(f.Zr);c.push(p)}),Z.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new $t(He);return n.forEach(l=>{const c=new on(l,0),f=new on(l,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([c,f],p=>{s=s.add(p.Zr)})}),Z.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,l=s.length+1;let c=s;Ae.isDocumentKey(c)||(c=c.child(""));const f=new on(new Ae(c),0);let p=new $t(He);return this.Xr.forEachWhile(g=>{const _=g.key.path;return!!s.isPrefixOf(_)&&(_.length===l&&(p=p.add(g.Zr)),!0)},f),Z.resolve(this.ni(p))}ni(e){const n=[];return e.forEach(s=>{const l=this.ei(s);l!==null&&n.push(l)}),n}removeMutationBatch(e,n){ut(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return Z.forEach(n.mutations,l=>{const c=new on(l.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new on(n,0),l=this.Xr.firstAfterOrEqual(s);return Z.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.ii=e,this.docs=function(){return new It(Ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,l=this.docs.get(s),c=l?l.size:0,f=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return Z.resolve(s?s.document.mutableCopy():Tn.newInvalidDocument(n))}getEntries(e,n){let s=Ar();return n.forEach(l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():Tn.newInvalidDocument(l))}),Z.resolve(s)}getDocumentsMatchingQuery(e,n,s,l){let c=Ar();const f=n.path,p=new Ae(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:_,value:{document:T}}=g.getNext();if(!f.isPrefixOf(_.path))break;_.path.length>f.length+1||cR(uR(T),s)<=0||(l.has(T.key)||ch(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return Z.resolve(c)}getAllFromCollectionGroup(e,n,s,l){Ce(9500)}si(e,n){return Z.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new UI(this)}getSize(e){return Z.resolve(this.size)}}class UI extends II{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,l)=>{l.isValidDocument()?n.push(this.Br.addEntry(e,l)):this.Br.removeEntry(s)}),Z.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e){this.persistence=e,this.oi=new sa(n=>Dm(n),Nm),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this._i=0,this.ai=new km,this.targetCount=0,this.ui=ho.cr()}forEachTarget(e,n){return this.oi.forEach((s,l)=>n(l)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),Z.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new ho(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Tr(n),Z.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,s){let l=0;const c=[];return this.oi.forEach((f,p)=>{p.sequenceNumber<=n&&s.get(p.targetId)===null&&(this.oi.delete(f),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)}),Z.waitFor(c).next(()=>l)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return Z.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),Z.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach(f=>{c.push(l.markPotentiallyOrphaned(e,f))}),Z.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return Z.resolve(s)}containsKey(e,n){return Z.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,n){this.ci={},this.overlays={},this.li=new ah(0),this.hi=!1,this.hi=!0,this.Pi=new OI,this.referenceDelegate=e(this),this.Ti=new PI(this),this.indexManager=new EI,this.remoteDocumentCache=function(l){return new VI(l)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new _I(n),this.Ei=new DI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new NI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new MI(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){fe("MemoryPersistence","Starting transaction:",e);const l=new kI(this.li.next());return this.referenceDelegate.di(),s(l).next(c=>this.referenceDelegate.Ai(l).next(()=>c)).toPromise().then(c=>(l.raiseOnCommittedEvent(),c))}Ri(e,n){return Z.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class kI extends fR{constructor(e){super(),this.currentSequenceNumber=e}}class Lm{constructor(e){this.persistence=e,this.Vi=new km,this.mi=null}static fi(e){return new Lm(e)}get gi(){if(this.mi)return this.mi;throw Ce(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),Z.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(l=>this.gi.add(l.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(l=>{l.forEach(c=>this.gi.add(c.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.gi,s=>{const l=Ae.fromPath(s);return this.pi(e,l).next(c=>{c||n.removeEntry(l,Ve.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return Z.or([()=>Z.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Jc{constructor(e,n){this.persistence=e,this.yi=new sa(s=>pR(s.path),(s,l)=>s.isEqual(l)),this.garbageCollector=RI(this,n)}static fi(e,n){return new Jc(e,n)}di(){}Ai(e){return Z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(l=>s+l))}br(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return Z.forEach(this.yi,(s,l)=>this.Dr(e,s,l).next(c=>c?Z.resolve():n(l)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.si(e,f=>this.Dr(e,f,n).next(p=>{p||(s++,c.removeEntry(f,Ve.min()))})).next(()=>c.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),Z.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),Z.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),Z.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Oc(e.data.value)),n}Dr(e,n,s){return Z.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.yi.get(n);return Z.resolve(l!==void 0&&l>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,n,s,l){this.targetId=e,this.fromCache=n,this.ds=s,this.As=l}static Rs(e,n){let s=$e(),l=$e();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new zm(e,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return Nb()?8:dR(bn())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,l){const c={result:null};return this.ws(e,n).next(f=>{c.result=f}).next(()=>{if(!c.result)return this.bs(e,n,l,s).next(f=>{c.result=f})}).next(()=>{if(c.result)return;const f=new LI;return this.Ss(e,n,f).next(p=>{if(c.result=p,this.fs)return this.Ds(e,n,f,p.size)})}).next(()=>c.result)}Ds(e,n,s,l){return s.documentReadCount<this.gs?(Za()<=Xe.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",Wa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),Z.resolve()):(Za()<=Xe.DEBUG&&fe("QueryEngine","Query:",Wa(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.ps*l?(Za()<=Xe.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",Wa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ji(n))):Z.resolve())}ws(e,n){if(vv(n))return Z.resolve(null);let s=ji(n);return this.indexManager.getIndexType(e,s).next(l=>l===0?null:(n.limit!==null&&l===1&&(n=tm(n,null,"F"),s=ji(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const f=$e(...c);return this.ys.getDocuments(e,f).next(p=>this.indexManager.getMinOffset(e,s).next(g=>{const _=this.vs(n,p);return this.Cs(n,_,f,g.readTime)?this.ws(e,tm(n,null,"F")):this.Fs(e,_,n,g)}))})))}bs(e,n,s,l){return vv(n)||l.isEqual(Ve.min())?Z.resolve(null):this.ys.getDocuments(e,s).next(c=>{const f=this.vs(n,c);return this.Cs(n,f,s,l)?Z.resolve(null):(Za()<=Xe.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Wa(n)),this.Fs(e,f,n,lR(l,kl)).next(p=>p))})}vs(e,n){let s=new $t(bE(e));return n.forEach((l,c)=>{ch(e,c)&&(s=s.add(c))}),s}Cs(e,n,s,l){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,n,s){return Za()<=Xe.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",Wa(n)),this.ys.getDocumentsMatchingQuery(e,n,cs.min(),s)}Fs(e,n,s,l){return this.ys.getDocumentsMatchingQuery(e,s,l).next(c=>(n.forEach(f=>{c=c.insert(f.key,f)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="LocalStore",BI=3e8;class jI{constructor(e,n,s,l){this.persistence=e,this.Ms=n,this.serializer=l,this.xs=new It(He),this.Os=new sa(c=>Dm(c),Nm),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xI(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function qI(r,e,n,s){return new jI(r,e,n,s)}async function FE(r,e){const n=Pe(r);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next(c=>(l=c,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(c=>{const f=[],p=[];let g=$e();for(const _ of l){f.push(_.batchId);for(const T of _.mutations)g=g.add(T.key)}for(const _ of c){p.push(_.batchId);for(const T of _.mutations)g=g.add(T.key)}return n.localDocuments.getDocuments(s,g).next(_=>({ks:_,removedBatchIds:f,addedBatchIds:p}))})})}function HI(r,e){const n=Pe(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const l=e.batch.keys(),c=n.Bs.newChangeBuffer({trackRemovals:!0});return function(p,g,_,T){const I=_.batch,x=I.keys();let Q=Z.resolve();return x.forEach(ee=>{Q=Q.next(()=>T.getEntry(g,ee)).next(te=>{const ne=_.docVersions.get(ee);ut(ne!==null,48541),te.version.compareTo(ne)<0&&(I.applyToRemoteDocument(te,_),te.isValidDocument()&&(te.setReadTime(_.commitVersion),T.addEntry(te)))})}),Q.next(()=>p.mutationQueue.removeMutationBatch(g,I))}(n,s,e,c).next(()=>c.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(p){let g=$e();for(let _=0;_<p.mutationResults.length;++_)p.mutationResults[_].transformResults.length>0&&(g=g.add(p.batch.mutations[_].key));return g}(e))).next(()=>n.localDocuments.getDocuments(s,l))})}function QE(r){const e=Pe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function GI(r,e){const n=Pe(r),s=e.snapshotVersion;let l=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const f=n.Bs.newChangeBuffer({trackRemovals:!0});l=n.xs;const p=[];e.targetChanges.forEach((T,I)=>{const x=l.get(I);if(!x)return;p.push(n.Ti.removeMatchingKeys(c,T.removedDocuments,I).next(()=>n.Ti.addMatchingKeys(c,T.addedDocuments,I)));let Q=x.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(I)!==null?Q=Q.withResumeToken(pn.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):T.resumeToken.approximateByteSize()>0&&(Q=Q.withResumeToken(T.resumeToken,s)),l=l.insert(I,Q),function(te,ne,xe){return te.resumeToken.approximateByteSize()===0||ne.snapshotVersion.toMicroseconds()-te.snapshotVersion.toMicroseconds()>=BI?!0:xe.addedDocuments.size+xe.modifiedDocuments.size+xe.removedDocuments.size>0}(x,Q,T)&&p.push(n.Ti.updateTargetData(c,Q))});let g=Ar(),_=$e();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))}),p.push(FI(c,f,e.documentUpdates).next(T=>{g=T.qs,_=T.Qs})),!s.isEqual(Ve.min())){const T=n.Ti.getLastRemoteSnapshotVersion(c).next(I=>n.Ti.setTargetsMetadata(c,c.currentSequenceNumber,s));p.push(T)}return Z.waitFor(p).next(()=>f.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,g,_)).next(()=>g)}).then(c=>(n.xs=l,c))}function FI(r,e,n){let s=$e(),l=$e();return n.forEach(c=>s=s.add(c)),e.getEntries(r,s).next(c=>{let f=Ar();return n.forEach((p,g)=>{const _=c.get(p);g.isFoundDocument()!==_.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(Ve.min())?(e.removeEntry(p,g.readTime),f=f.insert(p,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(g),f=f.insert(p,g)):fe(Bm,"Ignoring outdated watch update for ",p,". Current version:",_.version," Watch version:",g.version)}),{qs:f,Qs:l}})}function QI(r,e){const n=Pe(r);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Im),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function YI(r,e){const n=Pe(r);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let l;return n.Ti.getTargetData(s,e).next(c=>c?(l=c,Z.resolve(l)):n.Ti.allocateTargetId(s).next(f=>(l=new is(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,l).next(()=>l))))}).then(s=>{const l=n.xs.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function am(r,e,n){const s=Pe(r),l=s.xs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,f=>s.persistence.referenceDelegate.removeTarget(f,l))}catch(f){if(!Eo(f))throw f;fe(Bm,`Failed to update sequence numbers for target ${e}: ${f}`)}s.xs=s.xs.remove(e),s.Os.delete(l.target)}function Ov(r,e,n){const s=Pe(r);let l=Ve.min(),c=$e();return s.persistence.runTransaction("Execute query","readwrite",f=>function(g,_,T){const I=Pe(g),x=I.Os.get(T);return x!==void 0?Z.resolve(I.xs.get(x)):I.Ti.getTargetData(_,T)}(s,f,ji(e)).next(p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(f,p.targetId).next(g=>{c=g})}).next(()=>s.Ms.getDocumentsMatchingQuery(f,e,n?l:Ve.min(),n?c:$e())).next(p=>(KI(s,VR(e),p),{documents:p,$s:c})))}function KI(r,e,n){let s=r.Ns.get(e)||Ve.min();n.forEach((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),r.Ns.set(e,s)}class Mv{constructor(){this.activeTargetIds=BR()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XI{constructor(){this.xo=new Mv,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Mv,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="ConnectivityMonitor";class Uv{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){fe(Vv,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){fe(Vv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sc=null;function om(){return Sc===null?Sc=function(){return 268435456+Math.round(2147483648*Math.random())}():Sc++,"0x"+Sc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="RestConnection",ZI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class WI{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${l}`,this.Go=this.databaseId.database===Qc?`project_id=${s}`:`project_id=${s}&database_id=${l}`}zo(e,n,s,l,c){const f=om(),p=this.jo(e,n.toUriEncodedString());fe(Pd,`Sending RPC '${e}' ${f}:`,p,s);const g={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(g,l,c);const{host:_}=new URL(p),T=po(_);return this.Jo(e,p,g,s,T).then(I=>(fe(Pd,`Received RPC '${e}' ${f}: `,I),I),I=>{throw oo(Pd,`RPC '${e}' ${f} failed with error: `,I,"url: ",p,"request:",s),I})}Yo(e,n,s,l,c,f){return this.zo(e,n,s,l,c)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_o}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((l,c)=>e[c]=l),s&&s.headers.forEach((l,c)=>e[c]=l)}jo(e,n){const s=ZI[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn="WebChannelConnection";class e2 extends WI{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,l,c){const f=om();return new Promise((p,g)=>{const _=new X0;_.setWithCredentials(!0),_.listenOnce($0.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case Nc.NO_ERROR:const I=_.getResponseJson();fe(vn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(I)),p(I);break;case Nc.TIMEOUT:fe(vn,`RPC '${e}' ${f} timed out`),g(new de(W.DEADLINE_EXCEEDED,"Request time out"));break;case Nc.HTTP_ERROR:const x=_.getStatus();if(fe(vn,`RPC '${e}' ${f} failed with status:`,x,"response text:",_.getResponseText()),x>0){let Q=_.getResponseJson();Array.isArray(Q)&&(Q=Q[0]);const ee=Q==null?void 0:Q.error;if(ee&&ee.status&&ee.message){const te=function(xe){const we=xe.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(we)>=0?we:W.UNKNOWN}(ee.status);g(new de(te,ee.message))}else g(new de(W.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new de(W.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{h_:e,streamId:f,P_:_.getLastErrorCode(),T_:_.getLastError()})}}finally{fe(vn,`RPC '${e}' ${f} completed.`)}});const T=JSON.stringify(l);fe(vn,`RPC '${e}' ${f} sending request:`,l),_.send(n,"POST",T,s,15)})}I_(e,n,s){const l=om(),c=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=J0(),p=W0(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Ho(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const T=c.join("");fe(vn,`Creating RPC '${e}' stream ${l}: ${T}`,g);const I=f.createWebChannel(T,g);this.E_(I);let x=!1,Q=!1;const ee=new JI({Zo:ne=>{Q?fe(vn,`Not sending because RPC '${e}' stream ${l} is closed:`,ne):(x||(fe(vn,`Opening RPC '${e}' stream ${l} transport.`),I.open(),x=!0),fe(vn,`RPC '${e}' stream ${l} sending:`,ne),I.send(ne))},Xo:()=>I.close()}),te=(ne,xe,we)=>{ne.listen(xe,ge=>{try{we(ge)}catch(Ge){setTimeout(()=>{throw Ge},0)}})};return te(I,Sl.EventType.OPEN,()=>{Q||(fe(vn,`RPC '${e}' stream ${l} transport opened.`),ee.__())}),te(I,Sl.EventType.CLOSE,()=>{Q||(Q=!0,fe(vn,`RPC '${e}' stream ${l} transport closed`),ee.u_(),this.d_(I))}),te(I,Sl.EventType.ERROR,ne=>{Q||(Q=!0,oo(vn,`RPC '${e}' stream ${l} transport errored. Name:`,ne.name,"Message:",ne.message),ee.u_(new de(W.UNAVAILABLE,"The operation could not be completed")))}),te(I,Sl.EventType.MESSAGE,ne=>{var xe;if(!Q){const we=ne.data[0];ut(!!we,16349);const ge=we,Ge=(ge==null?void 0:ge.error)||((xe=ge[0])===null||xe===void 0?void 0:xe.error);if(Ge){fe(vn,`RPC '${e}' stream ${l} received error:`,Ge);const ue=Ge.status;let ke=function(C){const O=qt[C];if(O!==void 0)return ME(O)}(ue),M=Ge.message;ke===void 0&&(ke=W.INTERNAL,M="Unknown error status: "+ue+" with message "+Ge.message),Q=!0,ee.u_(new de(ke,M)),I.close()}else fe(vn,`RPC '${e}' stream ${l} received:`,we),ee.c_(we)}}),te(p,Z0.STAT_EVENT,ne=>{ne.stat===Kd.PROXY?fe(vn,`RPC '${e}' stream ${l} detected buffering proxy`):ne.stat===Kd.NOPROXY&&fe(vn,`RPC '${e}' stream ${l} detected no buffering proxy`)}),setTimeout(()=>{ee.a_()},0),ee}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function kd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(r){return new rI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n,s=1e3,l=1.5,c=6e4){this.xi=e,this.timerId=n,this.A_=s,this.R_=l,this.V_=c,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),l=Math.max(0,n-s);l>0&&fe("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,l,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv="PersistentStream";class KE{constructor(e,n,s,l,c,f,p,g){this.xi=e,this.S_=s,this.D_=l,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new YE(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(br(n.toString()),br("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,l])=>{this.v_===n&&this.z_(s,l)},s=>{e(()=>{const l=new de(W.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(l)})})}z_(e,n){const s=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(l=>{s(()=>this.j_(l))}),this.stream.onMessage(l=>{s(()=>++this.M_==1?this.J_(l):this.onNext(l))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return fe(Pv,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(fe(Pv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class t2 extends KE{constructor(e,n,s,l,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,f),this.serializer=c}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=oI(this.serializer,e),s=function(c){if(!("targetChange"in c))return Ve.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Ve.min():f.readTime?qi(f.readTime):Ve.min()}(e);return this.listener.Y_(n,s)}Z_(e){const n={};n.database=sm(this.serializer),n.addTarget=function(c,f){let p;const g=f.target;if(p=Jd(g)?{documents:cI(c,g)}:{query:hI(c,g).gt},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=PE(c,f.resumeToken);const _=nm(c,f.expectedCount);_!==null&&(p.expectedCount=_)}else if(f.snapshotVersion.compareTo(Ve.min())>0){p.readTime=Wc(c,f.snapshotVersion.toTimestamp());const _=nm(c,f.expectedCount);_!==null&&(p.expectedCount=_)}return p}(this.serializer,e);const s=dI(this.serializer,e);s&&(n.labels=s),this.Q_(n)}X_(e){const n={};n.database=sm(this.serializer),n.removeTarget=e,this.Q_(n)}}class n2 extends KE{constructor(e,n,s,l,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,f),this.serializer=c}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return ut(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ut(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){ut(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=uI(e.writeResults,e.commitTime),s=qi(e.commitTime);return this.listener.ra(s,n)}ia(){const e={};e.database=sm(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>lI(this.serializer,s))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{}class r2 extends i2{constructor(e,n,s,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.sa=!1}oa(){if(this.sa)throw new de(W.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.zo(e,im(n,s),l,c,f)).catch(c=>{throw c.name==="FirebaseError"?(c.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new de(W.UNKNOWN,c.toString())})}Yo(e,n,s,l,c){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,p])=>this.connection.Yo(e,im(n,s),l,f,p,c)).catch(f=>{throw f.name==="FirebaseError"?(f.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new de(W.UNKNOWN,f.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class s2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(br(n),this.ua=!1):fe("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="RemoteStore";class a2{constructor(e,n,s,l,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=c,this.Ra.No(f=>{s.enqueueAndForget(async()=>{aa(this)&&(fe(ra,"Restarting streams for network reachability change."),await async function(g){const _=Pe(g);_.da.add(4),await Jl(_),_.Va.set("Unknown"),_.da.delete(4),await gh(_)}(this))})}),this.Va=new s2(s,l)}}async function gh(r){if(aa(r))for(const e of r.Aa)await e(!0)}async function Jl(r){for(const e of r.Aa)await e(!1)}function XE(r,e){const n=Pe(r);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),Gm(n)?Hm(n):To(n).N_()&&qm(n,e))}function jm(r,e){const n=Pe(r),s=To(n);n.Ea.delete(e),s.N_()&&$E(n,e),n.Ea.size===0&&(s.N_()?s.k_():aa(n)&&n.Va.set("Unknown"))}function qm(r,e){if(r.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}To(r).Z_(e)}function $E(r,e){r.ma.Ke(e),To(r).X_(e)}function Hm(r){r.ma=new eI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>r.Ea.get(e)||null,Pt:()=>r.datastore.serializer.databaseId}),To(r).start(),r.Va.ca()}function Gm(r){return aa(r)&&!To(r).O_()&&r.Ea.size>0}function aa(r){return Pe(r).da.size===0}function ZE(r){r.ma=void 0}async function o2(r){r.Va.set("Online")}async function l2(r){r.Ea.forEach((e,n)=>{qm(r,e)})}async function u2(r,e){ZE(r),Gm(r)?(r.Va.Pa(e),Hm(r)):r.Va.set("Unknown")}async function c2(r,e,n){if(r.Va.set("Online"),e instanceof UE&&e.state===2&&e.cause)try{await async function(l,c){const f=c.cause;for(const p of c.targetIds)l.Ea.has(p)&&(await l.remoteSyncer.rejectListen(p,f),l.Ea.delete(p),l.ma.removeTarget(p))}(r,e)}catch(s){fe(ra,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await eh(r,s)}else if(e instanceof Uc?r.ma.Xe(e):e instanceof VE?r.ma.ot(e):r.ma.nt(e),!n.isEqual(Ve.min()))try{const s=await QE(r.localStore);n.compareTo(s)>=0&&await function(c,f){const p=c.ma.It(f);return p.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const T=c.Ea.get(_);T&&c.Ea.set(_,T.withResumeToken(g.resumeToken,f))}}),p.targetMismatches.forEach((g,_)=>{const T=c.Ea.get(g);if(!T)return;c.Ea.set(g,T.withResumeToken(pn.EMPTY_BYTE_STRING,T.snapshotVersion)),$E(c,g);const I=new is(T.target,g,_,T.sequenceNumber);qm(c,I)}),c.remoteSyncer.applyRemoteEvent(p)}(r,n)}catch(s){fe(ra,"Failed to raise snapshot:",s),await eh(r,s)}}async function eh(r,e,n){if(!Eo(e))throw e;r.da.add(1),await Jl(r),r.Va.set("Offline"),n||(n=()=>QE(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{fe(ra,"Retrying IndexedDB access"),await n(),r.da.delete(1),await gh(r)})}function WE(r,e){return e().catch(n=>eh(r,n,e))}async function yh(r){const e=Pe(r),n=ms(e);let s=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Im;for(;h2(e);)try{const l=await QI(e.localStore,s);if(l===null){e.Ia.length===0&&n.k_();break}s=l.batchId,f2(e,l)}catch(l){await eh(e,l)}JE(e)&&e1(e)}function h2(r){return aa(r)&&r.Ia.length<10}function f2(r,e){r.Ia.push(e);const n=ms(r);n.N_()&&n.ea&&n.ta(e.mutations)}function JE(r){return aa(r)&&!ms(r).O_()&&r.Ia.length>0}function e1(r){ms(r).start()}async function d2(r){ms(r).ia()}async function m2(r){const e=ms(r);for(const n of r.Ia)e.ta(n.mutations)}async function p2(r,e,n){const s=r.Ia.shift(),l=Vm.from(s,e,n);await WE(r,()=>r.remoteSyncer.applySuccessfulWrite(l)),await yh(r)}async function g2(r,e){e&&ms(r).ea&&await async function(s,l){if(function(f){return WR(f)&&f!==W.ABORTED}(l.code)){const c=s.Ia.shift();ms(s).L_(),await WE(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l)),await yh(s)}}(r,e),JE(r)&&e1(r)}async function kv(r,e){const n=Pe(r);n.asyncQueue.verifyOperationInProgress(),fe(ra,"RemoteStore received new credentials");const s=aa(n);n.da.add(3),await Jl(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await gh(n)}async function y2(r,e){const n=Pe(r);e?(n.da.delete(2),await gh(n)):e||(n.da.add(2),await Jl(n),n.Va.set("Unknown"))}function To(r){return r.fa||(r.fa=function(n,s,l){const c=Pe(n);return c.oa(),new t2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)}(r.datastore,r.asyncQueue,{e_:o2.bind(null,r),n_:l2.bind(null,r),i_:u2.bind(null,r),Y_:c2.bind(null,r)}),r.Aa.push(async e=>{e?(r.fa.L_(),Gm(r)?Hm(r):r.Va.set("Unknown")):(await r.fa.stop(),ZE(r))})),r.fa}function ms(r){return r.ga||(r.ga=function(n,s,l){const c=Pe(n);return c.oa(),new n2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)}(r.datastore,r.asyncQueue,{e_:()=>Promise.resolve(),n_:d2.bind(null,r),i_:g2.bind(null,r),na:m2.bind(null,r),ra:p2.bind(null,r)}),r.Aa.push(async e=>{e?(r.ga.L_(),await yh(r)):(await r.ga.stop(),r.Ia.length>0&&(fe(ra,`Stopping write stream with ${r.Ia.length} pending writes`),r.Ia=[]))})),r.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,n,s,l,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new ls,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,l,c){const f=Date.now()+s,p=new Fm(e,n,f,l,c);return p.start(s),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qm(r,e){if(br("AsyncQueue",`${e}: ${r}`),Eo(r))return new de(W.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{static emptySet(e){return new so(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Ae.comparator(n.key,s.key):(n,s)=>Ae.comparator(n.key,s.key),this.keyedMap=Rl(),this.sortedSet=new It(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof so)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new so;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(){this.pa=new It(Ae.comparator)}track(e){const n=e.doc.key,s=this.pa.get(n);s?e.type!==0&&s.type===3?this.pa=this.pa.insert(n,e):e.type===3&&s.type!==1?this.pa=this.pa.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.pa=this.pa.remove(n):e.type===1&&s.type===2?this.pa=this.pa.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Ce(63341,{Vt:e,ya:s}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,s)=>{e.push(s)}),e}}class fo{constructor(e,n,s,l,c,f,p,g,_){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(e,n,s,l,c){const f=[];return n.forEach(p=>{f.push({type:0,doc:p})}),new fo(e,n,so.emptySet(n),f,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class v2{constructor(){this.queries=zv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=Pe(n),c=l.queries;l.queries=zv(),c.forEach((f,p)=>{for(const g of p.Sa)g.onError(s)})})(this,new de(W.ABORTED,"Firestore shutting down"))}}function zv(){return new sa(r=>TE(r),uh)}async function t1(r,e){const n=Pe(r);let s=3;const l=e.query;let c=n.queries.get(l);c?!c.Da()&&e.va()&&(s=2):(c=new _2,s=e.va()?0:1);try{switch(s){case 0:c.ba=await n.onListen(l,!0);break;case 1:c.ba=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const p=Qm(f,`Initialization of query '${Wa(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,c),c.Sa.push(e),e.Fa(n.onlineState),c.ba&&e.Ma(c.ba)&&Ym(n)}async function n1(r,e){const n=Pe(r),s=e.query;let l=3;const c=n.queries.get(s);if(c){const f=c.Sa.indexOf(e);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?l=e.va()?0:1:!c.Da()&&e.va()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function E2(r,e){const n=Pe(r);let s=!1;for(const l of e){const c=l.query,f=n.queries.get(c);if(f){for(const p of f.Sa)p.Ma(l)&&(s=!0);f.ba=l}}s&&Ym(n)}function T2(r,e,n){const s=Pe(r),l=s.queries.get(e);if(l)for(const c of l.Sa)c.onError(n);s.queries.delete(e)}function Ym(r){r.Ca.forEach(e=>{e.next()})}var lm,Bv;(Bv=lm||(lm={})).xa="default",Bv.Cache="cache";class i1{constructor(e,n,s){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(e){if(!this.options.includeMetadataChanges){const s=[];for(const l of e.docChanges)l.type!==3&&s.push(l);e=new fo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const s=n!=="Offline";return(!this.options.Qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=fo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==lm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e){this.key=e}}class s1{constructor(e){this.key=e}}class b2{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=$e(),this.mutatedKeys=$e(),this.Za=bE(e),this.Xa=new so(this.Za)}get eu(){return this.Ha}tu(e,n){const s=n?n.nu:new Lv,l=n?n.Xa:this.Xa;let c=n?n.mutatedKeys:this.mutatedKeys,f=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,_=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal((T,I)=>{const x=l.get(T),Q=ch(this.query,I)?I:null,ee=!!x&&this.mutatedKeys.has(x.key),te=!!Q&&(Q.hasLocalMutations||this.mutatedKeys.has(Q.key)&&Q.hasCommittedMutations);let ne=!1;x&&Q?x.data.isEqual(Q.data)?ee!==te&&(s.track({type:3,doc:Q}),ne=!0):this.ru(x,Q)||(s.track({type:2,doc:Q}),ne=!0,(g&&this.Za(Q,g)>0||_&&this.Za(Q,_)<0)&&(p=!0)):!x&&Q?(s.track({type:0,doc:Q}),ne=!0):x&&!Q&&(s.track({type:1,doc:x}),ne=!0,(g||_)&&(p=!0)),ne&&(Q?(f=f.add(Q),c=te?c.add(T):c.delete(T)):(f=f.delete(T),c=c.delete(T)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),c=c.delete(T.key),s.track({type:1,doc:T})}return{Xa:f,nu:s,Cs:p,mutatedKeys:c}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,l){const c=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const f=e.nu.wa();f.sort((T,I)=>function(Q,ee){const te=ne=>{switch(ne){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Vt:ne})}};return te(Q)-te(ee)}(T.type,I.type)||this.Za(T.doc,I.doc)),this.iu(s),l=l!=null&&l;const p=n&&!l?this.su():[],g=this.Ya.size===0&&this.current&&!l?1:0,_=g!==this.Ja;return this.Ja=g,f.length!==0||_?{snapshot:new fo(this.query,e.Xa,c,f,e.mutatedKeys,g===0,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:p}:{ou:p}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Lv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=$e(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const n=[];return e.forEach(s=>{this.Ya.has(s)||n.push(new s1(s))}),this.Ya.forEach(s=>{e.has(s)||n.push(new r1(s))}),n}au(e){this.Ha=e.$s,this.Ya=$e();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return fo.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Km="SyncEngine";class A2{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class w2{constructor(e){this.key=e,this.cu=!1}}class S2{constructor(e,n,s,l,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.lu={},this.hu=new sa(p=>TE(p),uh),this.Pu=new Map,this.Tu=new Set,this.Iu=new It(Ae.comparator),this.Eu=new Map,this.du=new km,this.Au={},this.Ru=new Map,this.Vu=ho.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function R2(r,e,n=!0){const s=h1(r);let l;const c=s.hu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.uu()):l=await a1(s,e,n,!0),l}async function I2(r,e){const n=h1(r);await a1(n,e,!0,!1)}async function a1(r,e,n,s){const l=await YI(r.localStore,ji(e)),c=l.targetId,f=r.sharedClientState.addLocalQueryTarget(c,n);let p;return s&&(p=await C2(r,e,c,f==="current",l.resumeToken)),r.isPrimaryClient&&n&&XE(r.remoteStore,l),p}async function C2(r,e,n,s,l){r.fu=(I,x,Q)=>async function(te,ne,xe,we){let ge=ne.view.tu(xe);ge.Cs&&(ge=await Ov(te.localStore,ne.query,!1).then(({documents:M})=>ne.view.tu(M,ge)));const Ge=we&&we.targetChanges.get(ne.targetId),ue=we&&we.targetMismatches.get(ne.targetId)!=null,ke=ne.view.applyChanges(ge,te.isPrimaryClient,Ge,ue);return qv(te,ne.targetId,ke.ou),ke.snapshot}(r,I,x,Q);const c=await Ov(r.localStore,e,!0),f=new b2(e,c.$s),p=f.tu(c.documents),g=Wl.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),_=f.applyChanges(p,r.isPrimaryClient,g);qv(r,n,_.ou);const T=new A2(e,n,f);return r.hu.set(e,T),r.Pu.has(n)?r.Pu.get(n).push(e):r.Pu.set(n,[e]),_.snapshot}async function x2(r,e,n){const s=Pe(r),l=s.hu.get(e),c=s.Pu.get(l.targetId);if(c.length>1)return s.Pu.set(l.targetId,c.filter(f=>!uh(f,e))),void s.hu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await am(s.localStore,l.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(l.targetId),n&&jm(s.remoteStore,l.targetId),um(s,l.targetId)}).catch(vo)):(um(s,l.targetId),await am(s.localStore,l.targetId,!0))}async function D2(r,e){const n=Pe(r),s=n.hu.get(e),l=n.Pu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),jm(n.remoteStore,s.targetId))}async function N2(r,e,n){const s=L2(r);try{const l=await function(f,p){const g=Pe(f),_=Xt.now(),T=p.reduce((Q,ee)=>Q.add(ee.key),$e());let I,x;return g.persistence.runTransaction("Locally write mutations","readwrite",Q=>{let ee=Ar(),te=$e();return g.Bs.getEntries(Q,T).next(ne=>{ee=ne,ee.forEach((xe,we)=>{we.isValidDocument()||(te=te.add(xe))})}).next(()=>g.localDocuments.getOverlayedDocuments(Q,ee)).next(ne=>{I=ne;const xe=[];for(const we of p){const ge=YR(we,I.get(we.key).overlayedDocument);ge!=null&&xe.push(new _s(we.key,ge,dE(ge.value.mapValue),Pn.exists(!0)))}return g.mutationQueue.addMutationBatch(Q,_,xe,p)}).next(ne=>{x=ne;const xe=ne.applyToLocalDocumentSet(I,te);return g.documentOverlayCache.saveOverlays(Q,ne.batchId,xe)})}).then(()=>({batchId:x.batchId,changes:wE(I)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(l.batchId),function(f,p,g){let _=f.Au[f.currentUser.toKey()];_||(_=new It(He)),_=_.insert(p,g),f.Au[f.currentUser.toKey()]=_}(s,l.batchId,n),await eu(s,l.changes),await yh(s.remoteStore)}catch(l){const c=Qm(l,"Failed to persist write");n.reject(c)}}async function o1(r,e){const n=Pe(r);try{const s=await GI(n.localStore,e);e.targetChanges.forEach((l,c)=>{const f=n.Eu.get(c);f&&(ut(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.cu=!0:l.modifiedDocuments.size>0?ut(f.cu,14607):l.removedDocuments.size>0&&(ut(f.cu,42227),f.cu=!1))}),await eu(n,s,e)}catch(s){await vo(s)}}function jv(r,e,n){const s=Pe(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.hu.forEach((c,f)=>{const p=f.view.Fa(e);p.snapshot&&l.push(p.snapshot)}),function(f,p){const g=Pe(f);g.onlineState=p;let _=!1;g.queries.forEach((T,I)=>{for(const x of I.Sa)x.Fa(p)&&(_=!0)}),_&&Ym(g)}(s.eventManager,e),l.length&&s.lu.Y_(l),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function O2(r,e,n){const s=Pe(r);s.sharedClientState.updateQueryState(e,"rejected",n);const l=s.Eu.get(e),c=l&&l.key;if(c){let f=new It(Ae.comparator);f=f.insert(c,Tn.newNoDocument(c,Ve.min()));const p=$e().add(c),g=new mh(Ve.min(),new Map,new It(He),f,p);await o1(s,g),s.Iu=s.Iu.remove(c),s.Eu.delete(e),Xm(s)}else await am(s.localStore,e,!1).then(()=>um(s,e,n)).catch(vo)}async function M2(r,e){const n=Pe(r),s=e.batch.batchId;try{const l=await HI(n.localStore,e);u1(n,s,null),l1(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await eu(n,l)}catch(l){await vo(l)}}async function V2(r,e,n){const s=Pe(r);try{const l=await function(f,p){const g=Pe(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let T;return g.mutationQueue.lookupMutationBatch(_,p).next(I=>(ut(I!==null,37113),T=I.keys(),g.mutationQueue.removeMutationBatch(_,I))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,T,p)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,T)).next(()=>g.localDocuments.getDocuments(_,T))})}(s.localStore,e);u1(s,e,n),l1(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await eu(s,l)}catch(l){await vo(l)}}function l1(r,e){(r.Ru.get(e)||[]).forEach(n=>{n.resolve()}),r.Ru.delete(e)}function u1(r,e,n){const s=Pe(r);let l=s.Au[s.currentUser.toKey()];if(l){const c=l.get(e);c&&(n?c.reject(n):c.resolve(),l=l.remove(e)),s.Au[s.currentUser.toKey()]=l}}function um(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Pu.get(e))r.hu.delete(s),n&&r.lu.gu(s,n);r.Pu.delete(e),r.isPrimaryClient&&r.du.Hr(e).forEach(s=>{r.du.containsKey(s)||c1(r,s)})}function c1(r,e){r.Tu.delete(e.path.canonicalString());const n=r.Iu.get(e);n!==null&&(jm(r.remoteStore,n),r.Iu=r.Iu.remove(e),r.Eu.delete(n),Xm(r))}function qv(r,e,n){for(const s of n)s instanceof r1?(r.du.addReference(s.key,e),U2(r,s)):s instanceof s1?(fe(Km,"Document no longer in limbo: "+s.key),r.du.removeReference(s.key,e),r.du.containsKey(s.key)||c1(r,s.key)):Ce(19791,{pu:s})}function U2(r,e){const n=e.key,s=n.path.canonicalString();r.Iu.get(n)||r.Tu.has(s)||(fe(Km,"New document in limbo: "+n),r.Tu.add(s),Xm(r))}function Xm(r){for(;r.Tu.size>0&&r.Iu.size<r.maxConcurrentLimboResolutions;){const e=r.Tu.values().next().value;r.Tu.delete(e);const n=new Ae(wt.fromString(e)),s=r.Vu.next();r.Eu.set(s,new w2(n)),r.Iu=r.Iu.insert(n,s),XE(r.remoteStore,new is(ji(Om(n.path)),s,"TargetPurposeLimboResolution",ah.le))}}async function eu(r,e,n){const s=Pe(r),l=[],c=[],f=[];s.hu.isEmpty()||(s.hu.forEach((p,g)=>{f.push(s.fu(g,e,n).then(_=>{var T;if((_||n)&&s.isPrimaryClient){const I=_?!_.fromCache:(T=n==null?void 0:n.targetChanges.get(g.targetId))===null||T===void 0?void 0:T.current;s.sharedClientState.updateQueryState(g.targetId,I?"current":"not-current")}if(_){l.push(_);const I=zm.Rs(g.targetId,_);c.push(I)}}))}),await Promise.all(f),s.lu.Y_(l),await async function(g,_){const T=Pe(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>Z.forEach(_,x=>Z.forEach(x.ds,Q=>T.persistence.referenceDelegate.addReference(I,x.targetId,Q)).next(()=>Z.forEach(x.As,Q=>T.persistence.referenceDelegate.removeReference(I,x.targetId,Q)))))}catch(I){if(!Eo(I))throw I;fe(Bm,"Failed to update sequence numbers: "+I)}for(const I of _){const x=I.targetId;if(!I.fromCache){const Q=T.xs.get(x),ee=Q.snapshotVersion,te=Q.withLastLimboFreeSnapshotVersion(ee);T.xs=T.xs.insert(x,te)}}}(s.localStore,c))}async function P2(r,e){const n=Pe(r);if(!n.currentUser.isEqual(e)){fe(Km,"User change. New user:",e.toKey());const s=await FE(n.localStore,e);n.currentUser=e,function(c,f){c.Ru.forEach(p=>{p.forEach(g=>{g.reject(new de(W.CANCELLED,f))})}),c.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await eu(n,s.ks)}}function k2(r,e){const n=Pe(r),s=n.Eu.get(e);if(s&&s.cu)return $e().add(s.key);{let l=$e();const c=n.Pu.get(e);if(!c)return l;for(const f of c){const p=n.hu.get(f);l=l.unionWith(p.view.eu)}return l}}function h1(r){const e=Pe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=o1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=k2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O2.bind(null,e),e.lu.Y_=E2.bind(null,e.eventManager),e.lu.gu=T2.bind(null,e.eventManager),e}function L2(r){const e=Pe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=M2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=V2.bind(null,e),e}class th{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ph(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return qI(this.persistence,new zI,e.initialUser,this.serializer)}Su(e){return new GE(Lm.fi,this.serializer)}bu(e){return new XI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}th.provider={build:()=>new th};class z2 extends th{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){ut(this.persistence.referenceDelegate instanceof Jc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new wI(s,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Vn.withCacheSize(this.cacheSizeBytes):Vn.DEFAULT;return new GE(s=>Jc.fi(s,n),this.serializer)}}class cm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>jv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=P2.bind(null,this.syncEngine),await y2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new v2}()}createDatastore(e){const n=ph(e.databaseInfo.databaseId),s=function(c){return new e2(c)}(e.databaseInfo);return function(c,f,p,g){return new r2(c,f,p,g)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,l,c,f,p){return new a2(s,l,c,f,p)}(this.localStore,this.datastore,e.asyncQueue,n=>jv(this.syncEngine,n,0),function(){return Uv.C()?new Uv:new $I}())}createSyncEngine(e,n){return function(l,c,f,p,g,_,T){const I=new S2(l,c,f,p,g,_);return T&&(I.mu=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(l){const c=Pe(l);fe(ra,"RemoteStore shutting down."),c.da.add(5),await Jl(c),c.Ra.shutdown(),c.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}cm.provider={build:()=>new cm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):br("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="FirestoreClient";class B2{constructor(e,n,s,l,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=En.UNAUTHENTICATED,this.clientId=iE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async f=>{fe(ps,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(fe(ps,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ls;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Qm(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Ld(r,e){r.asyncQueue.verifyOperationInProgress(),fe(ps,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener(async l=>{s.isEqual(l)||(await FE(e.localStore,l),s=l)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function Hv(r,e){r.asyncQueue.verifyOperationInProgress();const n=await j2(r);fe(ps,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener(s=>kv(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,l)=>kv(e.remoteStore,l)),r._onlineComponents=e}async function j2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){fe(ps,"Using user provided OfflineComponentProvider");try{await Ld(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(l){return l.name==="FirebaseError"?l.code===W.FAILED_PRECONDITION||l.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11}(n))throw n;oo("Error using user provided cache. Falling back to memory cache: "+n),await Ld(r,new th)}}else fe(ps,"Using default OfflineComponentProvider"),await Ld(r,new z2(void 0));return r._offlineComponents}async function d1(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(fe(ps,"Using user provided OnlineComponentProvider"),await Hv(r,r._uninitializedComponentsProvider._online)):(fe(ps,"Using default OnlineComponentProvider"),await Hv(r,new cm))),r._onlineComponents}function q2(r){return d1(r).then(e=>e.syncEngine)}async function hm(r){const e=await d1(r),n=e.eventManager;return n.onListen=R2.bind(null,e.syncEngine),n.onUnlisten=x2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=I2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=D2.bind(null,e.syncEngine),n}function H2(r,e,n={}){const s=new ls;return r.asyncQueue.enqueueAndForget(async()=>function(c,f,p,g,_){const T=new f1({next:x=>{T.xu(),f.enqueueAndForget(()=>n1(c,I)),x.fromCache&&g.source==="server"?_.reject(new de(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(x)},error:x=>_.reject(x)}),I=new i1(p,T,{includeMetadataChanges:!0,Qa:!0});return t1(c,I)}(await hm(r),r.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(r,e,n){if(!n)throw new de(W.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function G2(r,e,n,s){if(e===!0&&s===!0)throw new de(W.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function Fv(r){if(!Ae.isDocumentKey(r))throw new de(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Qv(r){if(Ae.isDocumentKey(r))throw new de(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function _h(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ce(12329,{type:typeof r})}function di(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new de(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_h(r);throw new de(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="firestore.googleapis.com",Yv=!0;class Kv{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new de(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=g1,this.ssl=Yv}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Yv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=HE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bI)throw new de(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}G2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=m1((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new de(W.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new de(W.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new de(W.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,l){return s.timeoutSeconds===l.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vh{constructor(e,n,s,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new JS;switch(s.type){case"firstParty":return new iR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new de(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Gv.get(n);s&&(fe("ComponentProvider","Removing Datastore"),Gv.delete(n),s.terminate())}(this),Promise.resolve()}}function F2(r,e,n,s={}){var l;r=di(r,vh);const c=po(e),f=r._getSettings(),p=Object.assign(Object.assign({},f),{emulatorOptions:r._getEmulatorOptions()}),g=`${e}:${n}`;c&&(u0(`https://${g}`),c0("Firestore",!0)),f.host!==g1&&f.host!==g&&oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _=Object.assign(Object.assign({},f),{host:g,ssl:c,emulatorOptions:s});if(!ea(_,p)&&(r._setSettings(_),s.mockUserToken)){let T,I;if(typeof s.mockUserToken=="string")T=s.mockUserToken,I=En.MOCK_USER;else{T=bb(s.mockUserToken,(l=r._app)===null||l===void 0?void 0:l.options.projectId);const x=s.mockUserToken.sub||s.mockUserToken.user_id;if(!x)throw new de(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new En(x)}r._authCredentials=new eR(new tE(T,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new oa(this.firestore,e,this._query)}}class In{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new us(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new In(this.firestore,e,this._key)}}class us extends oa{constructor(e,n,s){super(e,n,Om(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new In(this.firestore,null,new Ae(e))}withConverter(e){return new us(this.firestore,e,this._path)}}function Al(r,e,...n){if(r=Zt(r),p1("collection","path",e),r instanceof vh){const s=wt.fromString(e,...n);return Qv(s),new us(r,null,s)}{if(!(r instanceof In||r instanceof us))throw new de(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(wt.fromString(e,...n));return Qv(s),new us(r.firestore,null,s)}}function Wr(r,e,...n){if(r=Zt(r),arguments.length===1&&(e=iE.newId()),p1("doc","path",e),r instanceof vh){const s=wt.fromString(e,...n);return Fv(s),new In(r,null,new Ae(s))}{if(!(r instanceof In||r instanceof us))throw new de(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(wt.fromString(e,...n));return Fv(s),new In(r.firestore,r instanceof us?r.converter:null,new Ae(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="AsyncQueue";class $v{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new YE(this,"async_queue_retry"),this.rc=()=>{const s=kd();s&&fe(Xv,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=e;const n=kd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=kd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new ls;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Eo(e))throw e;fe(Xv,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(s=>{throw this.Xu=s,this.ec=!1,br("INTERNAL UNHANDLED ERROR: ",Zv(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=n,n}enqueueAfterDelay(e,n,s){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const l=Fm.createAndSchedule(this,e,n,s,c=>this.uc(c));return this.Zu.push(l),l}oc(){this.Xu&&Ce(47125,{cc:Zv(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function Zv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv(r){return function(n,s){if(typeof n!="object"||n===null)return!1;const l=n;for(const c of s)if(c in l&&typeof l[c]=="function")return!0;return!1}(r,["next","error","complete"])}class gs extends vh{constructor(e,n,s,l){super(e,n,s,l),this.type="firestore",this._queue=new $v,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $v(e),this._firestoreClient=void 0,await e}}}function Q2(r,e){const n=typeof r=="object"?r:m0(),s=typeof r=="string"?r:Qc,l=gm(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=Eb("firestore");c&&F2(l,...c)}return l}function Eh(r){if(r._terminated)throw new de(W.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||Y2(r),r._firestoreClient}function Y2(r){var e,n,s;const l=r._freezeSettings(),c=function(p,g,_,T){return new _R(p,g,_,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,m1(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,l);r._componentsProvider||!((n=l.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=l.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:l.localCache._offlineComponentProvider,_online:l.localCache._onlineComponentProvider}),r._firestoreClient=new B2(r._authCredentials,r._appCheckCredentials,r._queue,c,r._componentsProvider&&function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mo(pn.fromBase64String(e))}catch(n){throw new de(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new mo(pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2=/^__.*__$/;class X2{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new _s(e,this.data,this.fieldMask,n,this.fieldTransforms):new Zl(e,this.data,n,this.fieldTransforms)}}class y1{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new _s(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function _1(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ic:r})}}class Jm{constructor(e,n,s,l,c,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Ec(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new Jm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),l=this.dc({path:s,Rc:!1});return l.Vc(e),l}mc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),l=this.dc({path:s,Rc:!1});return l.Ec(),l}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return nh(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(_1(this.Ic)&&K2.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class $2{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||ph(e)}bc(e,n,s,l=!1){return new Jm({Ic:e,methodName:n,wc:s,path:mn.emptyPath(),Rc:!1,yc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Th(r){const e=r._freezeSettings(),n=ph(r._databaseId);return new $2(r._databaseId,!!e.ignoreUndefinedProperties,n)}function v1(r,e,n,s,l,c={}){const f=r.bc(c.merge||c.mergeFields?2:0,e,n,l);ep("Data must be an object, but it was:",f,s);const p=b1(s,f);let g,_;if(c.merge)g=new $n(f.fieldMask),_=f.fieldTransforms;else if(c.mergeFields){const T=[];for(const I of c.mergeFields){const x=fm(e,I,n);if(!f.contains(x))throw new de(W.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);w1(T,x)||T.push(x)}g=new $n(T),_=f.fieldTransforms.filter(I=>g.covers(I.field))}else g=null,_=f.fieldTransforms;return new X2(new Un(p),g,_)}class bh extends $m{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bh}}function E1(r,e,n,s){const l=r.bc(1,e,n);ep("Data must be an object, but it was:",l,s);const c=[],f=Un.empty();ys(s,(g,_)=>{const T=tp(e,g,n);_=Zt(_);const I=l.mc(T);if(_ instanceof bh)c.push(T);else{const x=nu(_,I);x!=null&&(c.push(T),f.set(T,x))}});const p=new $n(c);return new y1(f,p,l.fieldTransforms)}function T1(r,e,n,s,l,c){const f=r.bc(1,e,n),p=[fm(e,s,n)],g=[l];if(c.length%2!=0)throw new de(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<c.length;x+=2)p.push(fm(e,c[x])),g.push(c[x+1]);const _=[],T=Un.empty();for(let x=p.length-1;x>=0;--x)if(!w1(_,p[x])){const Q=p[x];let ee=g[x];ee=Zt(ee);const te=f.mc(Q);if(ee instanceof bh)_.push(Q);else{const ne=nu(ee,te);ne!=null&&(_.push(Q),T.set(Q,ne))}}const I=new $n(_);return new y1(T,I,f.fieldTransforms)}function Z2(r,e,n,s=!1){return nu(n,r.bc(s?4:3,e))}function nu(r,e){if(A1(r=Zt(r)))return ep("Unsupported field value:",e,r),b1(r,e);if(r instanceof $m)return function(s,l){if(!_1(l.Ic))throw l.gc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.gc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(s,l){const c=[];let f=0;for(const p of s){let g=nu(p,l.fc(f));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),f++}return{arrayValue:{values:c}}}(r,e)}return function(s,l){if((s=Zt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return jR(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=Xt.fromDate(s);return{timestampValue:Wc(l.serializer,c)}}if(s instanceof Xt){const c=new Xt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Wc(l.serializer,c)}}if(s instanceof Zm)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof mo)return{bytesValue:PE(l.serializer,s._byteString)};if(s instanceof In){const c=l.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw l.gc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Pm(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof Wm)return function(f,p){return{mapValue:{fields:{[hE]:{stringValue:fE},[Yc]:{arrayValue:{values:f.toArray().map(_=>{if(typeof _!="number")throw p.gc("VectorValues must only contain numeric values.");return Mm(p.serializer,_)})}}}}}}(s,l);throw l.gc(`Unsupported field value: ${_h(s)}`)}(r,e)}function b1(r,e){const n={};return sE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ys(r,(s,l)=>{const c=nu(l,e.Ac(s));c!=null&&(n[s]=c)}),{mapValue:{fields:n}}}function A1(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Xt||r instanceof Zm||r instanceof mo||r instanceof In||r instanceof $m||r instanceof Wm)}function ep(r,e,n){if(!A1(n)||!function(l){return typeof l=="object"&&l!==null&&(Object.getPrototypeOf(l)===Object.prototype||Object.getPrototypeOf(l)===null)}(n)){const s=_h(n);throw s==="an object"?e.gc(r+" a custom object"):e.gc(r+" "+s)}}function fm(r,e,n){if((e=Zt(e))instanceof tu)return e._internalPath;if(typeof e=="string")return tp(r,e);throw nh("Field path arguments must be of type string or ",r,!1,void 0,n)}const W2=new RegExp("[~\\*/\\[\\]]");function tp(r,e,n){if(e.search(W2)>=0)throw nh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new tu(...e.split("."))._internalPath}catch{throw nh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function nh(r,e,n,s,l){const c=s&&!s.isEmpty(),f=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||f)&&(g+=" (found",c&&(g+=` in field ${s}`),f&&(g+=` in document ${l}`),g+=")"),new de(W.INVALID_ARGUMENT,p+r+g)}function w1(r,e){return r.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,n,s,l,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new In(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new J2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(np("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class J2 extends S1{data(){return super.data()}}function np(r,e){return typeof e=="string"?tp(r,e):e instanceof tu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new de(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ip{}class eC extends ip{}function wl(r,e,...n){let s=[];e instanceof ip&&s.push(e),s=s.concat(n),function(c){const f=c.filter(g=>g instanceof rp).length,p=c.filter(g=>g instanceof Ah).length;if(f>1||f>0&&p>0)throw new de(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const l of s)r=l._apply(r);return r}class Ah extends eC{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Ah(e,n,s)}_apply(e){const n=this._parse(e);return I1(e._query,n),new oa(e.firestore,e.converter,em(e._query,n))}_parse(e){const n=Th(e.firestore);return function(c,f,p,g,_,T,I){let x;if(_.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new de(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){e0(I,T);const ee=[];for(const te of I)ee.push(Jv(g,c,te));x={arrayValue:{values:ee}}}else x=Jv(g,c,I)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||e0(I,T),x=Z2(p,f,I,T==="in"||T==="not-in");return Ht.create(_,T,x)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Xa(r,e,n){const s=e,l=np("where",r);return Ah._create(l,s,n)}class rp extends ip{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new rp(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Ti.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(l,c){let f=l;const p=c.getFlattenedFilters();for(const g of p)I1(f,g),f=em(f,g)}(e._query,n),new oa(e.firestore,e.converter,em(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Jv(r,e,n){if(typeof(n=Zt(n))=="string"){if(n==="")throw new de(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!EE(e)&&n.indexOf("/")!==-1)throw new de(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(wt.fromString(n));if(!Ae.isDocumentKey(s))throw new de(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return dv(r,new Ae(s))}if(n instanceof In)return dv(r,n._key);throw new de(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_h(n)}.`)}function e0(r,e){if(!Array.isArray(r)||r.length===0)throw new de(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function I1(r,e){const n=function(l,c){for(const f of l)for(const p of f.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null}(r.filters,function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new de(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class tC{convertValue(e,n="none"){switch(ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ys(e,(l,c)=>{s[l]=this.convertValue(c,n)}),s}convertVectorValue(e){var n,s,l;const c=(l=(s=(n=e.fields)===null||n===void 0?void 0:n[Yc].arrayValue)===null||s===void 0?void 0:s.values)===null||l===void 0?void 0:l.map(f=>Pt(f.doubleValue));return new Wm(c)}convertGeoPoint(e){return new Zm(Pt(e.latitude),Pt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=lh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Ll(e));default:return null}}convertTimestamp(e){const n=hs(e);return new Xt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=wt.fromString(e);ut(qE(s),9688,{name:e});const l=new zl(s.get(1),s.get(3)),c=new Ae(s.popFirst(5));return l.isEqual(n)||br(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class x1 extends S1{constructor(e,n,s,l,c,f){super(e,n,s,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Pc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(np("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Pc extends x1{data(e={}){return super.data(e)}}class D1{constructor(e,n,s,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new Cl(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Pc(this._firestore,this._userDataWriter,s.key,s,new Cl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(l,c){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map(p=>{const g=new Pc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Cl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}})}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(p=>c||p.type!==3).map(p=>{const g=new Pc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Cl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let _=-1,T=-1;return p.type!==0&&(_=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),T=f.indexOf(p.doc.key)),{type:nC(p.type),doc:g,oldIndex:_,newIndex:T}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function nC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:r})}}class sp extends tC{constructor(e){super(),this.firestore=e}convertBytes(e){return new mo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new In(this.firestore,null,n)}}function Rc(r){r=di(r,oa);const e=di(r.firestore,gs),n=Eh(e),s=new sp(e);return R1(r._query),H2(n,r._query).then(l=>new D1(e,s,r,l))}function iC(r,e,n){r=di(r,In);const s=di(r.firestore,gs),l=C1(r.converter,e,n);return wh(s,[v1(Th(s),"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,Pn.none())])}function rC(r,e,n,...s){r=di(r,In);const l=di(r.firestore,gs),c=Th(l);let f;return f=typeof(e=Zt(e))=="string"||e instanceof tu?T1(c,"updateDoc",r._key,e,n,s):E1(c,"updateDoc",r._key,e),wh(l,[f.toMutation(r._key,Pn.exists(!0))])}function sC(r){return wh(di(r.firestore,gs),[new dh(r._key,Pn.none())])}function aC(r,...e){var n,s,l;r=Zt(r);let c={includeMetadataChanges:!1,source:"default"},f=0;typeof e[f]!="object"||Wv(e[f])||(c=e[f],f++);const p={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(Wv(e[f])){const I=e[f];e[f]=(n=I.next)===null||n===void 0?void 0:n.bind(I),e[f+1]=(s=I.error)===null||s===void 0?void 0:s.bind(I),e[f+2]=(l=I.complete)===null||l===void 0?void 0:l.bind(I)}let g,_,T;if(r instanceof In)_=di(r.firestore,gs),T=Om(r._key.path),g={next:I=>{e[f]&&e[f](oC(_,r,I))},error:e[f+1],complete:e[f+2]};else{const I=di(r,oa);_=di(I.firestore,gs),T=I._query;const x=new sp(_);g={next:Q=>{e[f]&&e[f](new D1(_,x,I,Q))},error:e[f+1],complete:e[f+2]},R1(r._query)}return function(x,Q,ee,te){const ne=new f1(te),xe=new i1(Q,ne,ee);return x.asyncQueue.enqueueAndForget(async()=>t1(await hm(x),xe)),()=>{ne.xu(),x.asyncQueue.enqueueAndForget(async()=>n1(await hm(x),xe))}}(Eh(_),T,p,g)}function wh(r,e){return function(s,l){const c=new ls;return s.asyncQueue.enqueueAndForget(async()=>N2(await q2(s),l,c)),c.promise}(Eh(r),e)}function oC(r,e,n){const s=n.docs.get(e._key),l=new sp(r);return new x1(r,l,e._key,s,new Cl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Th(e)}set(e,n,s){this._verifyNotCommitted();const l=zd(e,this._firestore),c=C1(l.converter,n,s),f=v1(this._dataReader,"WriteBatch.set",l._key,c,l.converter!==null,s);return this._mutations.push(f.toMutation(l._key,Pn.none())),this}update(e,n,s,...l){this._verifyNotCommitted();const c=zd(e,this._firestore);let f;return f=typeof(n=Zt(n))=="string"||n instanceof tu?T1(this._dataReader,"WriteBatch.update",c._key,n,s,l):E1(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(f.toMutation(c._key,Pn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=zd(e,this._firestore);return this._mutations=this._mutations.concat(new dh(n._key,Pn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new de(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zd(r,e){if((r=Zt(r)).firestore!==e)throw new de(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(r){return Eh(r=di(r,gs)),new lC(r,e=>wh(r,e))}(function(e,n=!0){(function(l){_o=l})(go),ao(new ta("firestore",(s,{instanceIdentifier:l,options:c})=>{const f=s.getProvider("app").getImmediate(),p=new gs(new tR(s.getProvider("auth-internal")),new rR(f,s.getProvider("app-check-internal")),function(_,T){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new de(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zl(_.options.projectId,T)}(f,l),f);return c=Object.assign({useFetchStreams:n},c),p._setSettings(c),p},"PUBLIC").setMultipleInstances(!0)),as(tv,nv,e),as(tv,nv,"esm2017")})();const $a=n0.forwardRef(({label:r,name:e,value:n,onChange:s,onBlur:l,placeholder:c="",className:f="",type:p="text",list:g,readOnly:_=!1},T)=>{const I=n==null?"":String(n);return U.jsxs("div",{className:"mb-2 w-full",children:[U.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-gray-700",children:r}),U.jsx("input",{type:p,id:e,name:e,value:I,onChange:s,onBlur:l,placeholder:c,className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-gray-50 border ${f}`,ref:T,list:g,readOnly:_})]})}),Mn=n0.forwardRef(({name:r,value:e,onChange:n,onBlur:s,type:l="text",placeholder:c="",readOnly:f=!1,isCanceledProp:p=!1,list:g},_)=>{const T=e==null?"":String(e);return U.jsx("input",{type:l,name:r,value:T,onChange:n,onBlur:s,placeholder:c,className:`w-full h-full p-px border-none bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded-md ${p?"line-through":""}`,ref:_,readOnly:f,list:g})}),uC=()=>{var Bn;const r={apiKey:"AIzaSyDzxX9lnbrX2DDLqkdQWh2YIpiPvWhqSog",authDomain:"pedidosfrutam-160cb.firebaseapp.com",projectId:"pedidosfrutam-160cb",storageBucket:"pedidosfrutam-160cb.firebasestorage.app",messagingSenderId:"395673930325",appId:"1:395673930325:web:5668a07ce036107b08e2dc",measurementId:"G-3C5Y5NVJSL"},e=typeof __firebase_config<"u"?JSON.parse(__firebase_config):r,n=typeof __app_id<"u"?__app_id:e.projectId,[s,l]=rt.useState(null),[c,f]=rt.useState(null),[p,g]=rt.useState(null),[_,T]=rt.useState(!1),[I,x]=rt.useState(!0),[Q,ee]=rt.useState([]),[te,ne]=rt.useState([]),[xe,we]=rt.useState(""),[ge,Ge]=rt.useState(""),[ue,ke]=rt.useState(null);rt.useEffect(()=>{(async()=>{try{const Y=d0(e),j=Q2(Y),re=ZS(Y);l(j),f(re);const me=Bw(re,async ce=>{var le,Ee;if(ce)g(ce.uid),T(!0),console.log("Firebase Auth: Usuario autenticado con UID:",ce.uid);else{console.log("Firebase Auth: No se detectó usuario, intentando iniciar sesión anónimamente.");try{typeof __initial_auth_token<"u"&&__initial_auth_token?(await kw(re,__initial_auth_token),console.log("Firebase Auth: Sesión iniciada con token personalizado."),g((le=re.currentUser)==null?void 0:le.uid)):(await Ow(re),console.log("Firebase Auth: Sesión iniciada anónimamente."),g((Ee=re.currentUser)==null?void 0:Ee.uid))}catch(Ue){console.error("Error al intentar inicio de sesión (fallback o token):",Ue),g(crypto.randomUUID())}finally{T(!0)}}});return()=>me()}catch(Y){console.error("Error al inicializar Firebase:",Y),T(!0)}})()},[]);const M=()=>{const A=new Date;A.setHours(0,0,0,0),A.setDate(A.getDate()+3-(A.getDay()+6)%7);const Y=new Date(A.getFullYear(),0,4);return 1+Math.round(((A.getTime()-Y.getTime())/864e5-3+(Y.getDay()+6)%7)/7)},S={MANZANA:"MANZANA",MANZANAS:"MANZANA",MZ:"MANZANA",APPLE:"MANZANA",APPLES:"MANZANA",PERA:"PERA",PERAS:"PERA",PR:"PERA",PEAR:"PERA",PEARS:"PERA",UVA:"UVA",UVAS:"UVA",GRAPE:"UVA",GRAPES:"UVA",UV:"UVA",KIWI:"KIWI",KIWIS:"KIWI",NARANJA:"NARANJA",NARANJAS:"NARANJA",LIMON:"LIMON",LIMONES:"LIMON",LM:"LIMON",CEREZA:"CEREZA",CEREZAS:"CEREZA",CLEMENTINA:"CLEMENTINA",CLEMENTINAS:"CLEMENTINA",CIRUELA:"CIRUELA",CIRUELAS:"CIRUELA",DURAZNO:"DURAZNO",DURAZNOS:"DURAZNO",NECTARIN:"NECTARIN",NECTARINES:"NECTARIN"},C=A=>{if(typeof A!="string"||A.trim()==="")return"";const Y=A.toUpperCase().trim();return S[Y]||Y},O=(A,Y,j="")=>{const re=M(),me=(ye,Le)=>{const he=Array.isArray(ye)?ye:[],Qe=Array.from(new Set(he.filter(Ne=>typeof Ne=="string"&&Ne.trim()!=="").map(Ne=>C(Ne))));return Qe.length>0?Qe.join("-"):Le},ce=Array.from(new Set(Array.isArray(A)?A:[])).filter(ye=>typeof ye=="string"&&ye.trim()!==""),le=ce.length>0?ce[0].toUpperCase().replace(/[^A-Z0-9]/g,""):"PROVEEDOR",Ee=me(Y,"ESPECIE");return`PED–W${re}–${le}–${Ee}`},V={reDestinatarios:"",deNombrePais:"",nave:"",fechaCarga:"",exporta:"",emailSubject:"",mailId:"",status:"draft",createdAt:null},P={id:crypto.randomUUID(),pallets:"",especie:"",variedad:"",formato:"",calibre:"",categoria:"",preciosFOB:"",estado:"",isCanceled:!1},[w,Tt]=rt.useState(()=>({...V,emailSubject:O([],[])})),[De,F]=rt.useState([P]),[se,_e]=rt.useState(0),[tt,D]=rt.useState(!1),[J,oe]=rt.useState(""),[ie,ve]=rt.useState(!1),[Be,Ie]=rt.useState(!1),[Ct,ot]=rt.useState(!1),[An,Zn]=rt.useState(null),[Cn,Wn]=rt.useState(""),kn=rt.useRef(null),Gt=rt.useRef({}),je=rt.useRef({}),Wt=["reDestinatarios","deNombrePais","nave","fechaCarga","exporta","emailSubject"],kt=["pallets","especie","variedad","formato","calibre","categoria","preciosFOB"],mi=async A=>{if(!s||!p){console.warn("Firestore not initialized or user not authenticated. Cannot save order.");return}try{const Y=Al(s,`artifacts/${n}/users/${p}/pedidos`),{header:j,items:re}=A,me=A.id||Wr(Y).id;console.log("DEBUG-SAVE-TO-FIRESTORE: Saving order with ID:",me,"Data passed:",A);const ce={header:{...j},items:JSON.stringify(re)},le=Wr(Y,me);await iC(le,ce),console.log("DEBUG-SAVE-TO-FIRESTORE: Order saved/updated successfully:",me)}catch(Y){console.error("Error saving/updating order:",Y)}},vs=async A=>{if(!s||!p){console.warn("Firestore not initialized or user not authenticated. Cannot delete order.");return}try{const Y=Wr(s,`artifacts/${n}/users/${p}/pedidos`,A);await sC(Y),console.log("Order deleted successfully:",A)}catch(Y){console.error("Error deleting order:",Y)}};rt.useEffect(()=>{var re;const A=w.reDestinatarios,Y=((re=De[0])==null?void 0:re.especie)||"",j=O([A],[Y],w.mailId);j!==w.emailSubject&&Tt(me=>({...me,emailSubject:j}))},[w.reDestinatarios,(Bn=De[0])==null?void 0:Bn.especie,w.emailSubject,w.mailId]),rt.useEffect(()=>{if(!s||!p||!_){console.log("DEBUG-FLOW: Firestore, userId, or auth not ready for data fetching.");return}x(!0);const A=Al(s,`artifacts/${n}/users/${p}/pedidos`),Y=wl(A),j=aC(Y,async re=>{let me=re.docs.map(le=>({id:le.id,header:le.data().header,items:JSON.parse(le.data().items||"[]")}));me=me.map(le=>({...le,items:Array.isArray(le.items)?le.items:[le.items].filter(Boolean)})),me.sort((le,Ee)=>{var Le,he,Qe,Ne,st,vt;if(((Le=le.header)==null?void 0:Le.status)==="draft"&&((he=Ee.header)==null?void 0:he.status)!=="draft")return-1;if(((Qe=le.header)==null?void 0:Qe.status)!=="draft"&&((Ne=Ee.header)==null?void 0:Ne.status)==="draft")return 1;const Ue=((st=le.header)==null?void 0:st.createdAt)||0,ye=((vt=Ee.header)==null?void 0:vt.createdAt)||0;return Ue-ye}),console.log("DEBUG-FLOW: All orders fetched from Firestore (including sent):",me.map(le=>{var Ee,Ue;return{id:le.id,mailId:(Ee=le.header)==null?void 0:Ee.mailId,status:(Ue=le.header)==null?void 0:Ue.status}})),ee(me),x(!1);const ce=me.filter(le=>{var Ee;return((Ee=le.header)==null?void 0:Ee.status)==="draft"});if(ce.length===0&&!ge&&ue===null){console.log("DEBUG-FLOW: No draft orders found after fetch. Creating new initial order.");const Ee=Wr(A).id,Ue={...V,mailId:crypto.randomUUID().substring(0,8).toUpperCase(),emailSubject:O([],[]),status:"draft",createdAt:Date.now()},ye=[{...P,id:crypto.randomUUID()}];await mi({id:Ee,header:Ue,items:ye}),ke(Ee)}else ce.length>0&&ue===null&&!ge&&(ke(ce[0].id),console.log("DEBUG-FLOW: Draft orders found, setting first draft as active:",ce[0].id))},re=>{console.error("Error fetching orders from Firestore:",re),x(!1)});return()=>j()},[s,p,_,n,ge,ue]),rt.useEffect(()=>{let A=[];console.log("DEBUG-FLOW: Effect filter by committedSearchTerm triggered. committedSearchTerm:",ge,"Current activeOrderId before update:",ue),ge?A=Q.filter(j=>{var me,ce,le;const re=(((me=j.header)==null?void 0:me.mailId)||"").toLowerCase().includes(ge.toLowerCase());return console.log(`DEBUG-FLOW: Checking order ID ${j.id}, Mail ID "${(ce=j.header)==null?void 0:ce.mailId}" (type: ${typeof((le=j.header)==null?void 0:le.mailId)}), matches search: ${re}`),re}):(A=Q.filter(j=>{var re;return((re=j.header)==null?void 0:re.status)==="draft"}),console.log("DEBUG-FLOW: No search term, displaying only draft orders.")),A.sort((j,re)=>{var le,Ee,Ue,ye,Le,he;if(((le=j.header)==null?void 0:le.status)==="draft"&&((Ee=re.header)==null?void 0:Ee.status)!=="draft")return-1;if(((Ue=j.header)==null?void 0:Ue.status)!=="draft"&&((ye=re.header)==null?void 0:ye.status)==="draft")return 1;const me=((Le=j.header)==null?void 0:Le.createdAt)||0,ce=((he=re.header)==null?void 0:he.createdAt)||0;return me-ce}),console.log("DEBUG-FLOW: displayedOrders after filter and sort:",A.length,A.map(j=>j.id)),ne(A);let Y=null;if(A.length>0?A.find(re=>re.id===ue)?Y=ue:(Y=A[0].id,console.log("DEBUG-FLOW: Active order not in filtered results, defaulting to first filtered result:",Y)):(console.log("DEBUG-FLOW: Filtered list is empty. Setting nextActiveOrderId to null."),Y=null),Y!==ue)ke(Y),console.log("DEBUG-FLOW: activeOrderId changed from",ue,"to",Y);else if(Y&&ue&&Y===ue){const j=A.findIndex(re=>re.id===ue);j!==-1&&j!==se&&(_e(j),console.log("DEBUG-FLOW: currentOrderIndex updated due to order sorting (activeOrderId unchanged):",j))}},[Q,ge,ue]),rt.useEffect(()=>{if(console.log("DEBUG-FLOW: Effect 'sync headerInfo/orderItems' triggered. displayedOrders.length:",te.length,"activeOrderId:",ue),ue&&te.length>0){const A=te.find(Y=>Y.id===ue);if(A){console.log("DEBUG-FLOW: Syncing UI with order ID:",A.id,"Status:",A.header.status,"Mail ID:",A.header.mailId),Tt(A.header),F(A.items);const Y=te.findIndex(j=>j.id===ue);Y!==-1&&Y!==se&&_e(Y)}else console.log("DEBUG-FLOW: Active order (",ue,") not found in displayedOrders. Resetting UI to blank form."),Tt({...V,emailSubject:O([],[])}),F([P]),_e(0)}else console.log("DEBUG-FLOW: No active order or no displayed orders. Resetting UI to blank form."),Tt({...V,emailSubject:O([],[])}),F([P]),_e(0)},[ue,te]);const Ln=async()=>{if(!s||!p){console.warn("Firestore not initialized or user not authenticated. Cannot save order.");return}if(!ue){console.log("DEBUG-SAVE: saveCurrentFormDataToDisplayed called without activeOrderId. Skipping save for current form state.");return}const A={id:ue,header:{...w},items:De.map(Y=>({...Y}))};console.log("DEBUG-SAVE: Attempting to save current order data for ID:",A.id,"Mail ID:",A.header.mailId,"Status:",A.header.status),await mi(A)},xn=A=>{const{name:Y,value:j}=A.target;Tt(re=>({...re,[Y]:j}))},bi=A=>{const{name:Y,value:j,type:re}=A.target;re!=="date"&&re!=="number"&&Y!=="emailSubject"&&Y!=="mailId"&&Tt(me=>({...me,[Y]:j.toUpperCase()}))},Ot=(A,Y)=>{const{name:j,value:re}=Y.target;F(me=>me.map(le=>le.id===A?{...le,[j]:re}:le))},Lt=(A,Y)=>{const{name:j,value:re,type:me}=Y.target;F(ce=>ce.map(Ee=>{if(Ee.id===A){let Ue=re;if(j==="preciosFOB"){const ye=re.match(/\d+([.,]\d+)?/g),Le=[];if(ye&&ye.length>0)for(const he of ye){const Qe=parseFloat(he.replace(",","."));isNaN(Qe)||Le.push(`$ ${Qe.toFixed(2).replace(".",",")}`)}Le.length>0?Ue=Le.join(" - "):Ue=""}else if(j==="calibre")Ue=re.split(/[,;\s-]+/).filter(Le=>Le.trim()!=="").map(Le=>Le.trim().toUpperCase()).join(" - ");else if(j==="categoria"){const ye=re.match(/[a-zA-Z0-9]+/g);ye&&ye.length>0?Ue=ye.join(" - "):Ue="",Ue=Ue.toUpperCase()}else me!=="number"&&(Ue=re.toUpperCase());return{...Ee,[j]:Ue}}return Ee}))},Es=(A=null)=>{F(Y=>{let j;if(A){const re=Y.find(me=>me.id===A);if(re){const me={...re,id:crypto.randomUUID(),isCanceled:!1},ce=Y.findIndex(le=>le.id===A);j=[...Y.slice(0,ce+1),me,...Y.slice(ce+1)]}else j=[...Y,{id:crypto.randomUUID(),pallets:"",especie:"",variedad:"",formato:"",calibre:"",categoria:"",preciosFOB:"",estado:"",isCanceled:!1}]}else j=[...Y,{id:crypto.randomUUID(),pallets:"",especie:"",variedad:"",formato:"",calibre:"",categoria:"",preciosFOB:"",estado:"",isCanceled:!1}];return mi({id:ue,header:{...w},items:j}),j})},bt=A=>{F(Y=>{if(Y.length<=1)return console.log("No se puede eliminar la última fila."),Y;const j=Y.filter(re=>re.id!==A);return mi({id:ue,header:{...w},items:j}),j})},nt=A=>{F(Y=>{const j=Y.map(re=>{if(re.id===A){const me=!re.isCanceled;return{...re,isCanceled:me,estado:me?"CANCELADO":""}}return re});return mi({id:ue,header:{...w},items:j}),j})},gn=De.reduce((A,Y)=>{if(Y.isCanceled)return A;const j=parseFloat(Y.pallets)||0;return A+j},0),Jt=A=>{const Y=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],j=["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"];try{const re=new Date(A+"T00:00:00");if(isNaN(re.getTime()))return console.warn("Invalid date string received by formatDateToSpanish:",A),A;const me=j[re.getDay()],ce=re.getDate(),le=Y[re.getMonth()],Ee=re.getFullYear();return`${me} ${ce} de ${le} de ${Ee}`}catch(re){return console.error("Error formatting date:",A,re),A}},Ts=(A,Y)=>{const re=Y.filter(he=>!he.isCanceled).reduce((he,Qe)=>{const Ne=parseFloat(Qe.pallets)||0;return he+Ne},0),me=Y.map(he=>he.estado).filter(he=>he&&he.trim()!==""&&he.toUpperCase()!=="CANCELADO"),ce=me.length>0?me.join("–"):"",le=A.nave,Ee=A.deNombrePais,Ue=A.fechaCarga?Jt(A.fechaCarga):"",ye=A.exporta,Le=`
            <div class="table-wrapper-email" style="overflow-x: auto; -webkit-overflow-scrolling: touch; margin-top: 10px; border-radius: 8px; border: 1px solid #ddd;">
                <table border="1" cellpadding="0" cellspacing="0" style="width: auto; min-width: 650px; border-collapse: collapse; border: none; box-sizing: border-box; text-align: left; table-layout: auto;">
                    <thead>
                        <tr style="background-color: #2563eb; color: #ffffff;">
                            <th style="padding: 3px 5px; border: 1px solid #1e40af; border-top-left-radius: 8px; text-align: center; font-size: 11px; box-sizing: border-box; white-space: nowrap;">Pallets</th>
                            <th style="padding: 3px 5px; border: 1px solid #1e40af; text-align: center; font-size: 11px; box-sizing: border-box; white-space: nowrap;">Especie</th>
                            <th style="padding: 3px 5px; border: 1px solid #1e40af; text-align: center; font-size: 11px; box-sizing: border-box; white-space: nowrap;">Variedad</th>
                            <th style="padding: 3px 5px; border: 1px solid #1e40af; text-align: center; font-size: 11px; box-sizing: border-box; white-space: nowrap;">Formato</th>
                            <th style="padding: 3px 5px; border: 1px solid #1e40af; text-align: center; font-size: 11px; box-sizing: border-box; white-space: nowrap;">Calibre</th>
                            <th style="padding: 3px 5px; border: 1px solid #1e40af; border-top-right-radius: 8px; text-align: center; font-size: 11px; box-sizing: border-box; white-space: nowrap;">Categoría</th>
                            <th style="padding: 3px 5px; border: 1px solid #1e40af; text-align: center; font-size: 11px; box-sizing: border-box; white-space: nowrap;">Precios FOB</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${Y.map((he,Qe)=>{const Ne=he.isCanceled?"color: #ef4444; text-decoration: line-through;":"";return`<tr style="${Qe%2===0?"background-color: #f9f9f9;":"background-color: #ffffff;"}${Ne}"><td style="padding: 3px 5px; border: 1px solid #eee; text-align: center; box-sizing: border-box; font-size: 11px; white-space: nowrap;">${he.pallets}</td><td style="padding: 3px 5px; border: 1px solid #eee; text-align: center; box-sizing: border-box; font-size: 11px; white-space: nowrap;">${he.especie}</td><td style="padding: 3px 5px; border: 1px solid #eee; text-align: center; font-size: 11px; white-space: nowrap;">${he.variedad}</td><td style="padding: 3px 5px; border: 1px solid #eee; text-align: center; font-size: 11px; white-space: nowrap;">${he.formato}</td><td style="padding: 3px 5px; border: 1px solid #eee; text-align: center; font-size: 11px; white-space: nowrap;">${he.calibre}</td><td style="padding: 3px 5px; border: 1px solid #eee; text-align: center; font-size: 11px; white-space: nowrap;">${he.categoria}</td><td style="padding: 3px 5px; border: 1px solid #eee; text-align: center; box-sizing: border-box; font-size: 11px; white-space: nowrap;">${he.preciosFOB}</td></tr>`}).join("")}
                        <tr style="background-color: #e0e0e0;">
                            <td colSpan="6" style="padding: 6px 15px 6px 6px; text-align: right; font-weight: bold; border: 1px solid #ccc; border-bottom-left-radius: 8px; margin-top: 15px; box-sizing: border-box; font-size: 11px; white-space: nowrap;">Total de Pallets:</td>
                            <td colSpan="1" style="padding: 6px; font-weight: bold; border: 1px solid #ccc; border-bottom-right-radius: 8px; text-align: center; box-sizing: border-box; font-size: 11px; white-space: nowrap;">
                                ${re} Pallets
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        `;return`
        <div style="font-family: Arial, sans-serif; font-size: 14px; color: #333; margin-bottom: 20px; border: 1px solid #ddd; padding: 15px; border-radius: 8px; width: 100%; max-width: 900px; text-align: left; box-sizing: border-box;">
            <div style="padding-bottom: 10px; border-bottom: 1px solid #eee; margin-bottom: 10px;">
                <p class="email-header-p" style="margin: 0; margin-bottom: 2px;"><strong>País:</strong> ${Ee}</p>
                <p class="email-header-p" style="margin: 0; margin-bottom: 2px;"><strong>Nave:</strong> ${le}</p>
                <p class="email-header-p" style="margin: 0; margin-bottom: 2px;"><strong>Fecha de carga:</strong> ${Ue}</p>
                <p class="email-header-p" style="margin: 0;"><strong>Exporta:</strong> ${ye}</p>
                <div style="clear: both;"></div> <!-- Clear float -->
            </div>
            ${Le}
            <p style="margin-top: 10px; font-weight: bold; font-size: 13px;">Observaciones: <span style="font-weight: normal; font-style: italic;">${ce}</span></p>
        </div>
    `},bo=A=>{const Y=document.createElement("div");Y.innerHTML=A,Y.style.position="absolute",Y.style.left="-9999px",document.body.appendChild(Y);const j=document.createRange();j.selectNodeContents(Y);const re=window.getSelection();re.removeAllRanges(),re.addRange(j),document.execCommand("copy"),document.body.removeChild(Y)},Gi=async()=>{if(!s||!p){console.warn("Firestore not initialized or user not authenticated. Cannot add new order.");return}ue&&(console.log("DEBUG-ADD-ORDER: Saving current active order before creating a new one."),await Ln());const A=w.mailId;console.log("DEBUG-ADD-ORDER: Mail ID of previously active order (to inherit):",A," (from activeOrderId:",ue,")");const Y=Al(s,`artifacts/${n}/users/${p}/pedidos`),re=Wr(Y).id,me={...V,reDestinatarios:w.reDestinatarios,emailSubject:O([w.reDestinatarios],[],A),mailId:A,status:"draft",createdAt:Date.now()},ce=[{...P,id:crypto.randomUUID()}];console.log("DEBUG-ADD-ORDER: Creating new order with ID:",re,"and inheriting Mail ID:",A),await mi({id:re,header:me,items:ce}),ke(re),console.log("DEBUG-FLOW: New order added, setting activeOrderId to new order:",re)},Fi=()=>{if(se===0){console.log("DEBUG-NAV: Ya estás en el primer pedido.");return}Ln();const A=se-1;te[A]&&(ke(te[A].id),console.log("DEBUG-NAV: Navegando a pedido anterior. Nuevo activeOrderId:",te[A].id))},Qi=()=>{if(se===te.length-1){console.log("DEBUG-NAV: Ya estás en el último pedido.");return}Ln();const A=se+1;te[A]&&(ke(te[A].id),console.log("DEBUG-NAV: Navegando a pedido siguiente. Nuevo activeOrderId:",te[A].id))},zn=async()=>{if(te.length<=1){console.log("DEBUG-DELETE: No se puede eliminar el último pedido.");return}const A=te[se].id;console.log("DEBUG-DELETE: Intentando eliminar pedido con ID:",A),A&&(await vs(A),console.log("DEBUG-DELETE: Eliminación iniciada. Firestore onSnapshot se encargará de la UI."))},Sr=()=>{console.log("ACTION: Search button clicked. New search term:",xe.toUpperCase()),Ge(xe.toUpperCase())},Yi=()=>window.innerWidth<=767,Rr=async()=>{var A,Y,j,re;console.log("ACTION: 'Enviar Email' button clicked.");try{if(!s||!p){console.warn("Firestore not initialized or user not authenticated. Cannot send email.");return}console.log("DEBUG-SEND: Saving current form data before consolidating for email."),await Ln();const me=w.mailId;if(console.log("DEBUG-SEND: Mail ID del pedido activo:",me),!me){console.error("ERROR-SEND: Mail ID is missing when attempting to send email. Cannot consolidate orders."),D(!1);return}const ce=Al(s,`artifacts/${n}/users/${p}/pedidos`),le=w.reDestinatarios;if(le&&me){const Te=wl(ce,Xa("header.status","==","draft"),Xa("header.reDestinatarios","==",le)),Mt=await Rc(Te),xt=t0(s);Mt.docs.forEach(en=>{var wi;const Ai=(wi=en.data().header)==null?void 0:wi.mailId;if(!Ai||Ai!==me){const ei=Wr(s,`artifacts/${n}/users/${p}/pedidos`,en.id);xt.update(ei,{"header.mailId":me}),console.log(`DEBUG-GROUPING: Order ${en.id} updated with Mail ID: ${me}`)}}),xt._mutations.length>0?(await xt.commit(),console.log("DEBUG-GROUPING: Batch update committed for grouping orders.")):console.log("DEBUG-GROUPING: No other draft orders to group or already grouped.")}else console.warn("DEBUG-GROUPING: Skipping grouping, missing currentProveedor or mailGlobalId.");const Ee=wl(ce,Xa("header.mailId","==",me));console.log(`DEBUG-SEND: Querying Firestore for orders with header.mailId == '${me}' AFTER grouping update.`);const ye=(await Rc(Ee)).docs.map(Te=>({id:Te.id,header:Te.data().header,items:JSON.parse(Te.data().items||"[]")}));console.log("DEBUG-SEND: Orders fetched from Firestore for consolidation (after grouping):",ye.map(Te=>{var Mt,xt;return{id:Te.id,mailId:(Mt=Te.header)==null?void 0:Mt.mailId,status:(xt=Te.header)==null?void 0:xt.status}}));const Le={id:ue,header:{...w},items:De.map(Te=>({...Te}))};console.log("DEBUG-SEND: Active order's local state:",{id:Le.id,mailId:(A=Le.header)==null?void 0:A.mailId,status:(Y=Le.header)==null?void 0:Y.status});const he=ye.findIndex(Te=>Te.id===ue);he!==-1?(ye[he]=Le,console.log("DEBUG-SEND: Active order updated in consolidation list with local state.")):Le.id&&((j=Le.header)==null?void 0:j.mailId)===me&&(ye.push(Le),console.log("DEBUG-SEND: Active order added to consolidation list.")),ye.sort((Te,Mt)=>{var xt,en,jn,Ai,wi,ei;return((xt=Te.header)==null?void 0:xt.status)==="draft"&&((en=Mt.header)==null?void 0:en.status)!=="draft"?-1:((jn=Te.header)==null?void 0:jn.status)!=="draft"&&((Ai=Mt.header)==null?void 0:Ai.status)==="draft"?1:(((wi=Te.header)==null?void 0:wi.createdAt)||0)-(((ei=Mt.header)==null?void 0:ei.createdAt)||0)}),console.log("DEBUG-SEND: Orders after local state merge and sort:",ye.map(Te=>{var Mt,xt;return{id:Te.id,mailId:(Mt=Te.header)==null?void 0:Mt.mailId,status:(xt=Te.header)==null?void 0:xt.status}}));for(const Te of ye)if(((re=Te.header)==null?void 0:re.status)==="draft"){const Mt=Wr(s,`artifacts/${n}/users/${p}/pedidos`,Te.id);await rC(Mt,{"header.mailId":me,"header.status":"sent"}),Te.header.status="sent",Te.header.mailId=me,console.log(`DEBUG-SEND: Order ${Te.id} marked as 'sent' with Mail ID: ${me}`)}if(ye.length===0){console.log("DEBUG-SEND: No hay pedidos para enviar después de la consolidación."),D(!1);return}let Qe="";const Ne=new Set,st=new Set;ye.forEach((Te,Mt)=>{Qe+=`
            <h3 style="font-size: 18px; color: #2563eb; margin-top: 40px; margin-bottom: 15px; text-align: left;">Pedido #${Mt+1}</h3>
            ${Ts(Te.header,Te.items)}
        `,Te.header.reDestinatarios&&Ne.add(Te.header.reDestinatarios),Te.items.forEach(xt=>{xt.especie&&st.add(xt.especie)})});const vt=O(Array.from(Ne),Array.from(st),"");console.log("DEBUG-SEND: Consolidated Email Subject (without Mail ID):",vt);const ft=`
        <!DOCTYPE html>
        <html>
        <head>
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Detalle de Pedido</title>
            <style>
              /* Global styles for email */
              body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f8f8f8; }
              .container { padding: 0px; box-sizing: border-box; text-align: left; }
              /* Estilos responsivos para email */
              @media only screen and (max-width: 767px) {
                  .email-header-p {
                      font-size: 12px !important;
                      margin-bottom: 1px !important;
                  }
                  .email-header-p:last-of-type {
                      margin-bottom: 4px !important;
                  }
                  h3 {
                      font-size: 16px !important;
                      margin-top: 20px !important;
                      margin-bottom: 10px !important;
                  }
                  /* Ensure bold for header labels in mobile preview */
                  .email-header-p strong {
                      font-weight: bold !important;
                  }
                  table th, table td {
                      font-size: 8px !important; /* Further reduced font size for mobile */
                      padding: 2px 2px !important; /* Further reduced padding for mobile */
                      white-space: nowrap; /* Force content onto one line */
                  }
                  table {
                      width: auto !important; /* Allow table to auto-size based on content/min-width */
                      min-width: 650px !important; /* Increased minimum width for content, allowing overflow-x to work */
                      table-layout: auto; /* Allow column widths to adjust to content */
                  }
                  /* Ensure the wrapper div for the table handles horizontal scrolling */
                  .table-wrapper-email {
                      overflow-x: auto !important;
                      -webkit-overflow-scrolling: touch !important;
                  }
              }
              /* General table styles */
              table {
                  max-width: 100%;
                  width: auto;
                  border-collapse: collapse;
                  table-layout: auto;
              }
              table th, table td {
                  border: 1px solid #eee;
                  padding: 3px 5px;
                  text-align: center;
                  vertical-align: top; /* Align content to top for multi-line cells */
                  white-space: nowrap; /* Force content onto one line */
              }
              table thead th {
                  background-color: #2563eb;
                  color: #ffffff;
              }
            </style>
        </head>
        <body>
            <div class="container">
                <div style="text-align: right; margin-bottom: 10px; font-weight: bold; font-size: 14px; color: #ef4444;">Mail ID: ${me}</div>
                ${Qe}
            </div>
        </body>
        </html>
      `;bo(ft),console.log("DEBUG-SEND: Email content copied to clipboard.");const yt="",At="El contenido del pedido ha sido copiado a tu portapapeles. Por favor, abre tu aplicación de correo y pega el contenido manualmente en el cuerpo del mensaje.";if(Yi()){const Te=`mailto:${yt}?subject=${encodeURIComponent(vt)}&body=${encodeURIComponent(At)}`;window.location.href=Te,console.log("DEBUG-SEND: Attempting to open mailto link for mobile.")}else window.open(`https://mail.google.com/mail/?view=cm&fs=1&tf=1&to=${yt}&su=${encodeURIComponent(vt)}&body=`,"_blank"),console.log("DEBUG-SEND: Attempting to open Gmail compose window for desktop.");D(!1),we(""),Ge(""),Ie(!1),ve(!1),oe(""),console.log("DEBUG-SEND: UI states reset after email send.")}catch(me){console.error("ERROR-SEND: Fallo al intentar enviar el email:",me)}},bs=async()=>{console.log("ACTION: 'Finalizar Pedido' button clicked.");let A=w.mailId;w.mailId?console.log("DEBUG-FINALIZE: Order already has Mail ID. Not generating new one:",w.mailId):(A=crypto.randomUUID().substring(0,8).toUpperCase(),console.log("DEBUG-FINALIZE: Generating new Mail ID:",A),Tt(Y=>({...Y,mailId:A}))),console.log("DEBUG-FINALIZE: Saving current form data before modal opens (with potentially new Mail ID)."),await Ln(),D(!0),Ie(!1),ve(!1),oe(""),console.log("DEBUG-FINALIZE: Modal opened with Mail ID:",A)},As=async()=>{var Ue,ye,Le;console.log("ACTION: 'Previsualizar Pedido' button clicked."),console.log("DEBUG-PREVIEW: Saving current form data before consolidating for preview."),await Ln();const A=w.mailId;if(console.log("DEBUG-PREVIEW: Mail ID del pedido activo para previsualización:",A),!A){console.warn("DEBUG-PREVIEW: Cannot preview: No Mail ID associated with the current order."),oe('<p style="text-align: center; color: #888;">No hay pedidos para previsualizar sin un ID de Mail asociado.</p>'),ve(!0);return}const Y=Al(s,`artifacts/${n}/users/${p}/pedidos`),j=w.reDestinatarios;if(j&&A){const he=wl(Y,Xa("header.status","==","draft"),Xa("header.reDestinatarios","==",j)),Qe=await Rc(he),Ne=t0(s);Qe.docs.forEach(st=>{var yt;const ft=(yt=st.data().header)==null?void 0:yt.mailId;if(!ft||ft!==A){const At=Wr(s,`artifacts/${n}/users/${p}/pedidos`,st.id);Ne.update(At,{"header.mailId":A}),console.log(`DEBUG-GROUPING: Order ${st.id} updated with Mail ID: ${A}`)}}),Ne._mutations.length>0?(await Ne.commit(),console.log("DEBUG-GROUPING: Batch update committed for grouping orders (preview).")):console.log("DEBUG-GROUPING: No other draft orders to group for preview or already grouped.")}else console.warn("DEBUG-GROUPING: Skipping grouping for preview, missing currentProveedor or previewGlobalId.");const re=wl(Y,Xa("header.mailId","==",A));console.log(`DEBUG-PREVIEW: Querying Firestore for orders with header.mailId == '${A}' AFTER grouping update.`);const ce=(await Rc(re)).docs.map(he=>({id:he.id,header:he.data().header,items:JSON.parse(he.data().items||"[]")}));console.log("DEBUG-PREVIEW: Orders fetched from Firestore for consolidation (after grouping):",ce.map(he=>{var Qe,Ne;return{id:he.id,mailId:(Qe=he.header)==null?void 0:Qe.mailId,status:(Ne=he.header)==null?void 0:Ne.status}}));const le={id:ue,header:{...w},items:De.map(he=>({...he}))};console.log("DEBUG-PREVIEW: Active order's local state:",{id:le.id,mailId:(Ue=le.header)==null?void 0:Ue.mailId,status:(ye=le.header)==null?void 0:ye.status});const Ee=ce.findIndex(he=>he.id===ue);if(Ee!==-1?(ce[Ee]=le,console.log("DEBUG-PREVIEW: Active order updated in consolidation list with local state.")):le.id&&((Le=le.header)==null?void 0:Le.mailId)===A&&(ce.push(le),console.log("DEBUG-PREVIEW: Active order added to consolidation list.")),ce.sort((he,Qe)=>{var Ne,st,vt,ft,yt,At;return((Ne=he.header)==null?void 0:Ne.status)==="draft"&&((st=Qe.header)==null?void 0:st.status)!=="draft"?-1:((vt=he.header)==null?void 0:vt.status)!=="draft"&&((ft=Qe.header)==null?void 0:ft.status)==="draft"?1:(((yt=he.header)==null?void 0:yt.createdAt)||0)-(((At=Qe.header)==null?void 0:At.createdAt)||0)}),console.log("DEBUG-PREVIEW: Orders after local state merge and sort:",ce.map(he=>{var Qe,Ne;return{id:he.id,mailId:(Qe=he.header)==null?void 0:Qe.mailId,status:(Ne=he.header)==null?void 0:Ne.status}})),ce.length===0)oe('<p style="text-align: center; color: #888;">No hay pedidos para previsualizar.</p>'),console.log("DEBUG-PREVIEW: No orders to preview generated.");else{let he="";ce.forEach((Ne,st)=>{he+=`
          <h3 style="font-size: 18px; color: #2563eb; margin-top: 20px; margin-bottom: 10px; text-align: left;">Pedido #${st+1}</h3>
          ${Ts(Ne.header,Ne.items)}
        `});const Qe=`
        <!DOCTYPE html>
        <html>
        <head>
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Previsualización de Pedido</title>
            <style>
              /* Global styles for preview */
              body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f8f8f8; }
              .container { padding: 0px; box-sizing: border-box; text-align: left; }
              /* Estilos responsivos para preview */
              @media only screen and (max-width: 767px) {
                  .email-header-p {
                      font-size: 12px !important;
                      margin-bottom: 1px !important;
                  }
                  .email-header-p:last-of-type {
                      margin-bottom: 4px !important;
                  }
                  h3 {
                      font-size: 16px !important;
                      margin-top: 20px !important;
                      margin-bottom: 10px !important;
                  }
                  /* Ensure bold for header labels in mobile preview */
                  .email-header-p strong {
                      font-weight: bold !important;
                  }
                  table th, table td {
                      font-size: 8px !important; /* Further reduced font size for mobile */
                      padding: 2px 2px !important; /* Further reduced padding for mobile */
                      white-space: nowrap; /* Force content onto one line */
                  }
                  table {
                      width: auto !important; /* Allow table to auto-size based on content/min-width */
                      min-width: 650px !important; /* Increased minimum width for content, allowing overflow-x to work */
                      table-layout: auto; /* Allow column widths to adjust to content */
                  }
                  .table-wrapper-email {
                      overflow-x: auto !important;
                      -webkit-overflow-scrolling: touch !important;
                  }
              }
              /* General table styles */
              table {
                  max-width: 100%;
                  width: auto;
                  border-collapse: collapse;
                  table-layout: auto;
              }
              table th, table td {
                  border: 1px solid #eee;
                  padding: 3px 5px;
                  text-align: center;
                  vertical-align: top;
                  white-space: nowrap; /* Force content onto one line */
              }
              table thead th {
                  background-color: #2563eb;
                  color: #ffffff;
              }
            </style>
        </head>
        <body>
            <div class="container">
                <div style="text-align: right; margin-bottom: 10px; font-weight: bold; font-size: 14px; color: #ef4444;">Mail ID: ${A}</div>
                ${he}
            </div>
        </body>
        </html>
      `;oe(Qe),console.log("DEBUG-PREVIEW: Preview content generated.")}ve(!0)},Jn=A=>{const Y=De.find(j=>j.id===A);Y&&(Zn(Y),Wn(Y.estado),ot(!0),console.log("DEBUG: Observation modal opened for item:",A))};rt.useEffect(()=>{Ct&&kn.current&&(kn.current.focus(),kn.current.value&&kn.current.select(),console.log("DEBUG: Observation textarea focused."))},[Ct]);const pi=()=>{if(An){const A=Cn?Cn.charAt(0).toUpperCase()+Cn.slice(1).toLowerCase():"",Y=De.map(j=>j.id===An.id?{...j,estado:A}:j);F(Y),mi({id:ue,header:{...w},items:Y}),console.log("DEBUG: Observation saved for item:",An.id)}ot(!1),Zn(null),Wn("")},ws=()=>{ot(!1),Zn(null),Wn(""),console.log("DEBUG: Observation modal closed.")};return rt.useEffect(()=>{const A=Y=>{var Ee,Ue;const j=document.activeElement;let re=!1;if(!(ye=>ye.tagName==="INPUT"&&ye.name&&(Wt.includes(ye.name)||kt.includes(ye.name)))(j))return;const ce=Wt.indexOf(j.name);let le=null;if(ce===-1)for(const ye in je.current){for(const Le in je.current[ye])if(je.current[ye][Le]===j){le={rowId:ye,colName:Le};break}if(le)break}if(Y.key==="ArrowRight"||Y.key==="ArrowLeft"||Y.key==="ArrowUp"||Y.key==="ArrowDown"){if(Y.preventDefault(),ce!==-1){let ye=ce;if(Y.key==="ArrowRight")ye=(ce+1)%Wt.length;else if(Y.key==="ArrowLeft")ye=(ce-1+Wt.length)%Wt.length;else if(Y.key==="ArrowDown"){if(De.length>0){const Le=De[0].id,he=kt[0];je.current[Le]&&je.current[Le][he]&&(je.current[Le][he].focus(),re=!0)}}else Y.key==="ArrowUp"&&(ye=(ce-1+Wt.length)%Wt.length,Gt.current[Wt[ye]]&&(Gt.current[Wt[ye]].focus(),re=!0));!re&&Gt.current[Wt[ye]]&&(Gt.current[Wt[ye]].focus(),re=!0)}else if(le){const{rowId:ye,colName:Le}=le,he=De.findIndex(ft=>ft.id===ye),Qe=kt.indexOf(Le);let Ne=he,st=Qe;Y.key==="ArrowRight"?(st++,st>=kt.length&&(st=0,Ne++)):Y.key==="ArrowLeft"?(st--,st<0&&(st=kt.length-1,Ne--)):Y.key==="ArrowDown"?Ne++:Y.key==="ArrowUp"&&Ne--;let vt=null;if(Ne>=0&&Ne<De.length){const ft=(Ee=De[Ne])==null?void 0:Ee.id,yt=kt[st];je.current[ft]&&je.current[ft][yt]&&(vt=je.current[ft][yt])}else if(Ne<0){const ft=Wt[Wt.length-1];vt=Gt.current[ft]}else if(Ne>=De.length){const ft=De.length-1,yt=(Ue=De[ft])==null?void 0:Ue.id,At=kt[Qe];yt&&je.current[yt]&&je.current[yt][At]&&(vt=je.current[yt][At])}vt&&(vt.focus(),re=!0)}}};return document.addEventListener("keydown",A),()=>{document.removeEventListener("keydown",A)}},[De,w]),I?U.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:U.jsx("div",{className:"text-blue-600 text-lg font-semibold",children:"Cargando pedidos..."})}):U.jsxs("div",{className:"min-h-screen bg-gray-100 p-4 sm:p-6 lg:p-8 font-inter",children:[U.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-xl shadow-lg p-4 sm:p-6 space-y-6 relative",children:[U.jsx("img",{src:"https://www.vpcom.com/images/logo-vpc.png",onError:A=>{A.target.onerror=null,A.target.src="https://placehold.co/100x40/FFFFFF/000000?text=LogoVPC"},alt:"Logo VPC",className:"absolute top-4 right-4 w-20 sm:w-24 md:w-32 h-auto object-contain rounded-md z-10"}),p&&U.jsxs("div",{className:"absolute top-4 left-4 text-xs text-gray-500",children:["User ID: ",p]}),U.jsxs("div",{className:"border-b pb-4 mb-4 pt-16 sm:pt-0",children:[U.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-center text-gray-800 mb-4",children:"Pedidos Comercial Frutam"}),U.jsxs("div",{className:"flex items-end gap-2 mb-4",children:[U.jsxs("div",{className:"flex-grow",children:[U.jsx("label",{htmlFor:"searchTerm",className:"block text-sm font-medium text-gray-700",children:"Buscar por Mail ID:"}),U.jsx("input",{type:"text",id:"searchTerm",name:"searchTerm",value:xe,onChange:A=>we(A.target.value),placeholder:"Ingrese el Mail ID (ej. 5B7D7692)",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-gray-50 border"})]}),U.jsx("button",{onClick:Sr,className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-md shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-150 ease-in-out mt-auto",children:"Buscar"})]}),U.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-4",children:[U.jsx("div",{children:U.jsx($a,{label:"Nombre de Proveedor:",name:"reDestinatarios",value:w.reDestinatarios,onChange:xn,onBlur:bi,placeholder:"Ingrese nombre de proveedor",ref:A=>Gt.current.reDestinatarios=A})}),U.jsx("div",{children:U.jsx($a,{label:"País:",name:"deNombrePais",value:w.deNombrePais,onChange:xn,onBlur:bi,placeholder:"País de destino",ref:A=>Gt.current.deDestinatarios=A})}),U.jsx("div",{children:U.jsx($a,{label:"Nave:",name:"nave",value:w.nave,onChange:xn,onBlur:bi,placeholder:"Nombre de Nave",ref:A=>Gt.current.nave=A})}),U.jsx("div",{children:U.jsx($a,{label:"Fecha de carga:",name:"fechaCarga",value:w.fechaCarga,onChange:xn,onBlur:bi,placeholder:"FECHA DE CARGA",type:"date",ref:A=>Gt.current.fechaCarga=A})}),U.jsx("div",{children:U.jsx($a,{label:"Exporta:",name:"exporta",value:w.exporta,onChange:xn,onBlur:bi,placeholder:"Exportadora",ref:A=>Gt.current.exporta=A})}),U.jsx("div",{children:U.jsx($a,{label:"Asunto del Email:",name:"emailSubject",value:w.emailSubject,onChange:xn,onBlur:bi,placeholder:"Asunto del Correo (Se auto-completa)",ref:A=>Gt.current.emailSubject=A})})]})]}),U.jsx("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4 mt-4 mb-6",children:U.jsxs("div",{className:"flex items-center justify-center w-full sm:w-auto",children:[U.jsxs("button",{onClick:Fi,disabled:se===0,className:"flex items-center justify-center px-3 py-2 bg-gray-300 text-gray-800 font-semibold rounded-lg shadow-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2 transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed",title:"Ir al pedido anterior",children:[U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M9.707 4.293a1 1 0 010 1.414L5.414 10l4.293 4.293a1 1 0 01-1.414 1.414l-5-5a1 1 0 010-1.414l5-5a1 1 0 011.414 0z",clipRule:"evenodd"})}),U.jsx("span",{className:"hidden sm:inline ml-1",children:"Anterior"})]}),U.jsx("span",{className:"text-center text-gray-700 font-semibold text-lg mx-2 sm:mx-4 min-w-[150px] sm:min-w-0",children:`Pedido ${se+1} de ${te.length}`}),U.jsxs("button",{onClick:Qi,disabled:se===te.length-1,className:"flex items-center justify-center px-3 py-2 bg-gray-300 text-gray-800 font-semibold rounded-lg shadow-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2 transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed",title:"Ir al siguiente pedido",children:[U.jsx("span",{className:"hidden sm:inline mr-1",children:"Siguiente"}),U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M10.293 15.707a1 1 0 010-1.414L14.586 10l-4.293-4.293a1 1 0 111.414-1.414l5 5a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})}),te.length===0&&ge?U.jsxs("div",{className:"text-center text-gray-600 text-lg my-8",children:["No se encontraron pedidos con el ID:"," ",U.jsx("span",{className:"font-semibold",children:ge}),"."]}):U.jsxs(U.Fragment,{children:[" ",U.jsx("div",{className:"overflow-x-auto rounded-lg shadow-md",children:U.jsxs("table",{className:"min-w-full divide-y divide-gray-200 hidden md:table",children:[U.jsx("thead",{className:"bg-blue-600 text-white",children:U.jsxs("tr",{style:{backgroundColor:"#2563eb",color:"#ffffff"},children:[U.jsx("th",{scope:"col",className:"px-1 py-px text-xs font-medium uppercase tracking-wider rounded-tl-lg whitespace-nowrap",children:"Pallets"}),U.jsx("th",{scope:"col",className:"px-1 py-px text-xs font-medium uppercase tracking-wider whitespace-nowrap",children:"Especie"}),U.jsx("th",{scope:"col",className:"px-1 py-px text-xs font-medium uppercase tracking-wider whitespace-nowrap",children:"Variedad"}),U.jsx("th",{scope:"col",className:"px-1 py-px text-xs font-medium uppercase tracking-wider whitespace-nowrap",children:"Formato"}),U.jsx("th",{scope:"col",className:"px-1 py-px text-xs font-medium uppercase tracking-wider whitespace-nowrap",children:"Calibre"}),U.jsx("th",{scope:"col",className:"px-1 py-px text-xs font-medium uppercase tracking-wider rounded-tr-lg whitespace-nowrap",children:"Categoría"}),U.jsx("th",{scope:"col",className:"px-1 py-px text-xs font-medium uppercase tracking-wider whitespace-nowrap",children:"Precios FOB"}),U.jsx("th",{scope:"col",className:"px-1 py-px text-xs font-medium uppercase tracking-wider whitespace-nowrap",children:"Acciones"})]})}),U.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[De.map((A,Y)=>U.jsxs("tr",{className:`hover:bg-gray-50 ${Y%2===0?"bg-gray-50":"bg-white"} ${A.isCanceled?"text-red-500":""}`,children:[U.jsx("td",{className:"px-1 py-px text-xs border-r whitespace-nowrap",style:{textAlign:"center"},children:U.jsx(Mn,{type:"number",name:"pallets",value:A.pallets,onChange:j=>Ot(A.id,j),onBlur:j=>Lt(A.id,j),placeholder:"21",readOnly:A.isCanceled,isCanceledProp:A.isCanceled,ref:j=>{je.current[A.id]||(je.current[A.id]={}),je.current[A.id].pallets=j}})}),U.jsx("td",{className:"px-1 py-px text-xs border-r whitespace-nowrap",style:{textAlign:"center"},children:U.jsx(Mn,{name:"especie",value:A.especie,onChange:j=>Ot(A.id,j),onBlur:j=>Lt(A.id,j),placeholder:"Manzana",readOnly:A.isCanceled,isCanceledProp:A.isCanceled,...A.especie&&A.especie.toUpperCase()==="MANZANAS"?{list:"apple-varieties"}:{},ref:j=>{je.current[A.id]||(je.current[A.id]={}),je.current[A.id].especie=j}})}),U.jsx("td",{className:"px-1 py-px text-xs border-r whitespace-nowrap",style:{textAlign:"center"},children:U.jsx(Mn,{name:"variedad",value:A.variedad,onChange:j=>Ot(A.id,j),onBlur:j=>Lt(A.id,j),placeholder:"Galas",readOnly:A.isCanceled,isCanceledProp:A.isCanceled,...A.especie&&A.especie.toUpperCase()==="MANZANAS"?{list:"apple-varieties"}:{},ref:j=>{je.current[A.id]||(je.current[A.id]={}),je.current[A.id].variedad=j}})}),U.jsx("td",{className:"px-1 py-px text-xs border-r whitespace-nowrap",style:{textAlign:"center"},children:U.jsx(Mn,{name:"formato",value:A.formato,onChange:j=>Ot(A.id,j),onBlur:j=>Lt(A.id,j),placeholder:"20 Kg",readOnly:A.isCanceled,isCanceledProp:A.isCanceled,ref:j=>{je.current[A.id]||(je.current[A.id]={}),je.current[A.id].formato=j}})}),U.jsx("td",{className:"px-1 py-px text-xs border-r whitespace-nowrap",style:{textAlign:"center"},children:U.jsx(Mn,{name:"calibre",value:A.calibre,onChange:j=>Ot(A.id,j),onBlur:j=>Lt(A.id,j),placeholder:"100;113",readOnly:A.isCanceled,isCanceledProp:A.isCanceled,ref:j=>{je.current[A.id]||(je.current[A.id]={}),je.current[A.id].calibre=j}})}),U.jsx("td",{className:"px-1 py-px text-xs border-r whitespace-nowrap",style:{textAlign:"center"},children:U.jsx(Mn,{name:"categoria",value:A.categoria,onChange:j=>Ot(A.id,j),onBlur:j=>Lt(A.id,j),placeholder:"PRE:XFY",readOnly:A.isCanceled,isCanceledProp:A.isCanceled,ref:j=>{je.current[A.id]||(je.current[A.id]={}),je.current[A.id].categoria=j}})}),U.jsx("td",{className:"px-1 py-px text-xs border-r whitespace-nowrap",style:{textAlign:"center"},children:U.jsx(Mn,{name:"preciosFOB",value:A.preciosFOB,onChange:j=>Ot(A.id,j),onBlur:j=>Lt(A.id,j),placeholder:"$14",readOnly:A.isCanceled,isCanceledProp:A.isCanceled,ref:j=>{je.current[A.id]||(je.current[A.id]={}),je.current[A.id].preciosFOB=j}})}),U.jsxs("td",{className:"px-1 py-px text-right text-xs font-medium flex items-center justify-center h-full",children:[U.jsx("button",{onClick:()=>Jn(A.id),className:"text-blue-600 hover:text-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 p-1 rounded-md",title:"Editar Observación",children:U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:U.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),U.jsx("button",{onClick:()=>Es(A.id),className:"text-green-600 hover:text-green-900 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 p-1 rounded-md",title:"Duplicar fila",children:U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})})}),U.jsx("button",{onClick:()=>nt(A.id),className:`ml-1 ${A.isCanceled?"text-gray-600 hover:text-gray-900":"text-red-600 hover:text-red-900"} focus:outline-none focus:ring-2 focus:ring-offset-2 p-1 rounded-md`,title:A.isCanceled?"Revertir cancelación":"Cancelar fila",children:A.isCanceled?U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414L7.586 9H6a1 1 0 000 2h1.586l1.707 1.707a1 1 0 001.414-1.414L10.414 10H12a1 1 0 000-2h-1.586z",clipRule:"evenodd"})}):U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),U.jsx("button",{onClick:()=>bt(A.id),className:`ml-1 text-red-600 hover:text-red-900 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 p-1 rounded-md ${De.length<=1?"opacity-50 cursor-not-allowed":""}`,title:De.length<=1?"No se puede eliminar la última fila":"Eliminar fila",disabled:De.length<=1,children:U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1zm2 3a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1zm-1 4a1 1 0 002 0v-4a1 1 0 00-2 0v4z"})})})]})]},A.id)),U.jsxs("tr",{style:{backgroundColor:"#e0e0e0"},children:[U.jsx("td",{colSpan:"6",style:{padding:"6px 15px 6px 6px",textAlign:"right",fontWeight:"bold",border:"1px solid #ccc",borderBottomLeftRadius:"8px",marginTop:"15px"},children:"Total de Pallets:"}),U.jsxs("td",{colSpan:"1",style:{padding:"6px",fontWeight:"bold",border:"1px solid #ccc",borderBottomRightRadius:"8px",textAlign:"center"},children:[gn," Pallets"]})]})]})]})}),U.jsxs("div",{className:"md:hidden space-y-4 p-2",children:[De.map((A,Y)=>U.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg p-4 shadow-sm space-y-2 ${A.isCanceled?"line-through text-red-500 opacity-70":""}`,children:[U.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100",children:[U.jsxs("span",{className:"text-xs font-semibold text-blue-600",children:["Artículo #",Y+1]}),U.jsxs("div",{className:"flex space-x-2",children:[U.jsx("button",{onClick:()=>Jn(A.id),className:"text-blue-600 hover:text-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 p-1 rounded-md",title:"Editar Observación",children:U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-5 w-5",children:U.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),U.jsx("button",{onClick:()=>Es(A.id),className:"text-green-600 hover:text-green-900 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 p-1 rounded-md",title:"Duplicar fila",children:U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z"})})}),U.jsx("button",{onClick:()=>nt(A.id),className:`ml-1 ${A.isCanceled?"text-gray-600 hover:text-gray-900":"text-red-600 hover:text-red-900"} focus:outline-none focus:ring-2 focus:ring-offset-2 p-1 rounded-md`,title:A.isCanceled?"Revertir cancelación":"Cancelar fila",children:A.isCanceled?U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414L7.586 9H6a1 1 0 000 2h1.586l1.707 1.707a1 1 0 001.414-1.414L10.414 10H12a1 1 0 000-2h-1.586z"})}):U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"})})}),U.jsx("button",{onClick:()=>bt(A.id),className:`ml-1 text-red-600 hover:text-red-900 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 p-1 rounded-md ${De.length<=1?"opacity-50 cursor-not-allowed":""}`,title:De.length<=1?"No se puede eliminar la última fila":"Eliminar fila",disabled:De.length<=1,children:U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1zm2 3a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1zm-1 4a1 1 0 002 0v-4a1 1 0 00-2 0v4z"})})})]})]}),U.jsxs("div",{className:"flex justify-between items-center text-sm",children:[U.jsx("span",{className:"font-semibold text-gray-500 w-1/2",children:"Pallets:"}),U.jsx(Mn,{name:"pallets",value:A.pallets,onChange:j=>Ot(A.id,j),onBlur:j=>Lt(A.id,j),placeholder:"21",readOnly:A.isCanceled,isCanceledProp:A.isCanceled})]}),U.jsxs("div",{className:"flex justify-between items-center text-sm",children:[U.jsx("span",{className:"font-semibold text-gray-500 w-1/2",children:"Especie:"}),U.jsx(Mn,{name:"especie",value:A.especie,onChange:j=>Ot(A.id,j),onBlur:j=>Lt(A.id,j),placeholder:"Manzana",readOnly:A.isCanceled,isCanceledProp:A.isCanceled,...A.especie&&A.especie.toUpperCase()==="MANZANAS"?{list:"apple-varieties"}:{}})]}),U.jsxs("div",{className:"flex justify-between items-center text-sm",children:[U.jsx("span",{className:"font-semibold text-gray-500 w-1/2",children:"Variedad:"}),U.jsx(Mn,{name:"variedad",value:A.variedad,onChange:j=>Ot(A.id,j),onBlur:j=>Lt(A.id,j),placeholder:"Galas",readOnly:A.isCanceled,isCanceledProp:A.isCanceled,...A.especie&&A.especie.toUpperCase()==="MANZANAS"?{list:"apple-varieties"}:{}})]}),U.jsxs("div",{className:"flex justify-between items-center text-sm",children:[U.jsx("span",{className:"font-semibold text-gray-500 w-1/2",children:"Formato:"}),U.jsx(Mn,{name:"formato",value:A.formato,onChange:j=>Ot(A.id,j),onBlur:j=>Lt(A.id,j),placeholder:"20 Kg",readOnly:A.isCanceled,isCanceledProp:A.isCanceled})]}),U.jsxs("div",{className:"flex justify-between items-center text-sm",children:[U.jsx("span",{className:"font-semibold text-gray-500 w-1/2",children:"Calibre:"}),U.jsx(Mn,{name:"calibre",value:A.calibre,onChange:j=>Ot(A.id,j),onBlur:j=>Lt(A.id,j),placeholder:"100;113",readOnly:A.isCanceled,isCanceledProp:A.isCanceled})]}),U.jsxs("div",{className:"flex justify-between items-center text-sm",children:[U.jsx("span",{className:"font-semibold text-gray-500 w-1/2",children:"Categoría:"}),U.jsx(Mn,{name:"categoria",value:A.categoria,onChange:j=>Ot(j.id,j),onBlur:j=>Lt(j.id,j),placeholder:"PRE:XFY",readOnly:A.isCanceled,isCanceledProp:A.isCanceled})]}),U.jsxs("div",{className:"flex justify-between items-center text-sm",children:[U.jsx("span",{className:"font-semibold text-gray-500 w-1/2",children:"Precios FOB:"}),U.jsx(Mn,{name:"preciosFOB",value:A.preciosFOB,onChange:j=>Ot(j.id,j),onBlur:j=>Lt(j.id,j),placeholder:"$14",readOnly:A.isCanceled,isCanceledProp:A.isCanceled})]})]},A.id)),U.jsxs("div",{className:"bg-blue-100 border border-blue-200 rounded-lg py-2 px-3 shadow-sm text-center font-bold text-base text-blue-800 mt-4",children:["Total de Pallets: ",gn," Pallets"]})]})]}),U.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4 mt-6",children:[U.jsxs("button",{onClick:Gi,className:"flex items-center justify-center px-6 py-3 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:scale-105 w-full sm:w-auto",title:"Crear un nuevo pedido en blanco",children:[U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z"})}),"Agregar Pedido"]}),U.jsxs("button",{onClick:zn,disabled:te.length<=1,className:`flex items-center justify-center px-6 py-3 bg-red-600 text-white font-semibold rounded-lg shadow-md hover:bg-red-700 focus:outline-none focus:ring-2 focus->ring-red-500 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:scale-105 w-full sm:w-auto ${te.length<=1?"opacity-50 cursor-not-allowed":""}`,title:"Eliminar el pedido actual",children:[U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1zm2 3a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1zm-1 4a1 1 0 002 0v-4a1 1 0 00-2 0v4z"})}),"Eliminar Pedido"]}),U.jsxs("button",{onClick:bs,className:"flex items-center justify-center px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:scale-105 w-full sm:w-auto",title:"Finalizar el pedido y ver opciones de envío",children:[U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"})}),"Finalizar Pedido"]})]}),tt&&U.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50",children:U.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-screen-lg mx-auto my-8 relative flex flex-col max-h-[90vh]",children:[U.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800 text-center",children:"Opciones de Pedido Finalizado"}),!ie&&U.jsxs("h3",{className:"text-sm text-gray-600 text-center mb-4 leading-relaxed",children:[U.jsx("strong",{children:"Instrucción importante:"})," Después de enviar el email, abre tu aplicación de correo y pega (Ctrl+V o Cmd+V) el contenido manualmente en el cuerpo del mensaje."]}),ie?U.jsxs(U.Fragment,{children:[U.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-800 text-center",children:"Previsualización del Pedido"}),U.jsx("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200 text-left flex-grow overflow-y-auto",children:U.jsx("div",{dangerouslySetInnerHTML:{__html:J}})}),U.jsxs("div",{className:"flex justify-center mt-3 gap-2 flex-wrap sm:flex-nowrap",children:[U.jsx("button",{onClick:()=>ve(!1),className:"flex items-center justify-center px-4 py-2 text-sm bg-gray-600 text-white font-semibold rounded-lg shadow-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:scale-105 w-full sm:w-auto",children:"Volver a Opciones"}),U.jsxs("button",{onClick:Rr,className:"flex items-center justify-center px-4 py-2 text-sm bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:scale-105 w-full sm:w-auto",title:"Copiar contenido y abrir cliente de correo",children:[U.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:[U.jsx("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),U.jsx("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]}),"Enviar Email"]})]})]}):U.jsxs("div",{className:"flex justify-center gap-4 mb-4 flex-wrap sm:flex-nowrap",children:[U.jsxs("button",{onClick:As,className:"flex items-center justify-center px-4 py-2 text-sm bg-gray-600 text-white font-semibold rounded-lg shadow-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:scale-105 w-full sm:w-auto",title:"Previsualizar el pedido completo",children:[U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8c1.65 0 3-1.35 3-3V7a1 1 0 112 0v1a5 5 0 01-5 5H4a5 5 0 01-5-5v-1c0-1.65 1.35-3 3-3h1V4a1 1 0 11-2 0V3h-1a1 1 0 110-2h1a1 1 0 011 1v1h1a1 1 0 011 1V4zm0 2a2 2 0 100 4 2 2 0 000-4z"})}),"Previsualizar"]}),U.jsxs("button",{onClick:Rr,className:"flex items-center justify-center px-4 py-2 text-sm bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:scale-105 w-full sm:w-auto",title:"Copiar contenido y abrir cliente de correo",children:[U.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:[U.jsx("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),U.jsx("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]}),"Enviar Email"]})]}),U.jsx("div",{className:"flex justify-center mt-4",children:U.jsx("button",{onClick:()=>D(!1),className:"px-6 py-3 bg-red-500 text-white font-semibold rounded-lg shadow-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition duration-150 ease-in-out",children:"Cerrar"})})]})}),Ct&&An&&U.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50",children:U.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-auto relative",children:[U.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800 text-center",children:"Editar Observación para Línea"}),U.jsxs("div",{className:"mb-4",children:[U.jsx("label",{htmlFor:"modalObservation",className:"block text-sm font-medium text-gray-700 mb-1",children:"Observación:"}),U.jsx("textarea",{id:"modalObservation",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-gray-50 border",rows:"4",value:Cn,onChange:A=>Wn(A.target.value),placeholder:"Ingrese la observación aquí...",ref:kn})]}),U.jsxs("div",{className:"flex justify-end gap-3",children:[U.jsx("button",{onClick:ws,className:"px-4 py-2 bg-gray-300 text-gray-800 font-semibold rounded-lg shadow-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2 transition duration-150 ease-in-out",children:"Cancelar"}),U.jsx("button",{onClick:pi,className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-150 ease-in-out",children:"Guardar"})]})]})}),U.jsxs("datalist",{id:"apple-varieties",children:[U.jsx("option",{value:"GALA"}),U.jsx("option",{value:"GRANNY"}),U.jsx("option",{value:"FUJI"}),U.jsx("option",{value:"PINK LADY"}),U.jsx("option",{value:"ROJA"}),U.jsx("option",{value:"CRIPPS PINK"})]})]})," "]})};hb.createRoot(document.getElementById("root")).render(U.jsx(rt.StrictMode,{children:U.jsx(uC,{})}));

(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();function sb(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var wd={exports:{}},bl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _v;function ab(){if(_v)return bl;_v=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,l,c){var f=null;if(c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:f,ref:l!==void 0?l:null,props:c}}return bl.Fragment=e,bl.jsx=n,bl.jsxs=n,bl}var Ev;function ob(){return Ev||(Ev=1,wd.exports=ab()),wd.exports}var U=ob(),Sd={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tv;function lb(){if(Tv)return qe;Tv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),R=Symbol.iterator;function D(N){return N===null||typeof N!="object"?null:(N=R&&N[R]||N["@@iterator"],typeof N=="function"?N:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ne=Object.assign,$={};function te(N,ee,oe){this.props=N,this.context=ee,this.refs=$,this.updater=oe||F}te.prototype.isReactComponent={},te.prototype.setState=function(N,ee){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,ee,"setState")},te.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function Me(){}Me.prototype=te.prototype;function Ae(N,ee,oe){this.props=N,this.context=ee,this.refs=$,this.updater=oe||F}var Te=Ae.prototype=new Me;Te.constructor=Ae,ne(Te,te.prototype),Te.isPureReactComponent=!0;var Ue=Array.isArray,we={H:null,A:null,T:null,S:null,V:null},Be=Object.prototype.hasOwnProperty;function x(N,ee,oe,ie,_e,Le){return oe=Le.ref,{$$typeof:r,type:N,key:ee,ref:oe!==void 0?oe:null,props:Le}}function w(N,ee){return x(N.type,ee,void 0,void 0,void 0,N.props)}function S(N){return typeof N=="object"&&N!==null&&N.$$typeof===r}function O(N){var ee={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(oe){return ee[oe]})}var V=/\/+/g;function P(N,ee){return typeof N=="object"&&N!==null&&N.key!=null?O(""+N.key):ee.toString(36)}function C(){}function It(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(C,C):(N.status="pending",N.then(function(ee){N.status==="pending"&&(N.status="fulfilled",N.value=ee)},function(ee){N.status==="pending"&&(N.status="rejected",N.reason=ee)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function bt(N,ee,oe,ie,_e){var Le=typeof N;(Le==="undefined"||Le==="boolean")&&(N=null);var Se=!1;if(N===null)Se=!0;else switch(Le){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(N.$$typeof){case r:case e:Se=!0;break;case T:return Se=N._init,bt(Se(N._payload),ee,oe,ie,_e)}}if(Se)return _e=_e(N),Se=ie===""?"."+P(N,0):ie,Ue(_e)?(oe="",Se!=null&&(oe=Se.replace(V,"$&/")+"/"),bt(_e,ee,oe,"",function(Pe){return Pe})):_e!=null&&(S(_e)&&(_e=w(_e,oe+(_e.key==null||N&&N.key===_e.key?"":(""+_e.key).replace(V,"$&/")+"/")+Se)),ee.push(_e)),1;Se=0;var At=ie===""?".":ie+":";if(Ue(N))for(var Fe=0;Fe<N.length;Fe++)ie=N[Fe],Le=At+P(ie,Fe),Se+=bt(ie,ee,oe,Le,_e);else if(Fe=D(N),typeof Fe=="function")for(N=Fe.call(N),Fe=0;!(ie=N.next()).done;)ie=ie.value,Le=At+P(ie,Fe++),Se+=bt(ie,ee,oe,Le,_e);else if(Le==="object"){if(typeof N.then=="function")return bt(It(N),ee,oe,ie,_e);throw ee=String(N),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Se}function Y(N,ee,oe){if(N==null)return N;var ie=[],_e=0;return bt(N,ie,"","",function(Le){return ee.call(oe,Le,_e++)}),ie}function ae(N){if(N._status===-1){var ee=N._result;ee=ee(),ee.then(function(oe){(N._status===0||N._status===-1)&&(N._status=1,N._result=oe)},function(oe){(N._status===0||N._status===-1)&&(N._status=2,N._result=oe)}),N._status===-1&&(N._status=0,N._result=ee)}if(N._status===1)return N._result.default;throw N._result}var pe=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function tt(){}return qe.Children={map:Y,forEach:function(N,ee,oe){Y(N,function(){ee.apply(this,arguments)},oe)},count:function(N){var ee=0;return Y(N,function(){ee++}),ee},toArray:function(N){return Y(N,function(ee){return ee})||[]},only:function(N){if(!S(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},qe.Component=te,qe.Fragment=n,qe.Profiler=l,qe.PureComponent=Ae,qe.StrictMode=s,qe.Suspense=g,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=we,qe.__COMPILER_RUNTIME={__proto__:null,c:function(N){return we.H.useMemoCache(N)}},qe.cache=function(N){return function(){return N.apply(null,arguments)}},qe.cloneElement=function(N,ee,oe){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var ie=ne({},N.props),_e=N.key,Le=void 0;if(ee!=null)for(Se in ee.ref!==void 0&&(Le=void 0),ee.key!==void 0&&(_e=""+ee.key),ee)!Be.call(ee,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&ee.ref===void 0||(ie[Se]=ee[Se]);var Se=arguments.length-2;if(Se===1)ie.children=oe;else if(1<Se){for(var At=Array(Se),Fe=0;Fe<Se;Fe++)At[Fe]=arguments[Fe+2];ie.children=At}return x(N.type,_e,void 0,void 0,Le,ie)},qe.createContext=function(N){return N={$$typeof:f,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:c,_context:N},N},qe.createElement=function(N,ee,oe){var ie,_e={},Le=null;if(ee!=null)for(ie in ee.key!==void 0&&(Le=""+ee.key),ee)Be.call(ee,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(_e[ie]=ee[ie]);var Se=arguments.length-2;if(Se===1)_e.children=oe;else if(1<Se){for(var At=Array(Se),Fe=0;Fe<Se;Fe++)At[Fe]=arguments[Fe+2];_e.children=At}if(N&&N.defaultProps)for(ie in Se=N.defaultProps,Se)_e[ie]===void 0&&(_e[ie]=Se[ie]);return x(N,Le,void 0,void 0,null,_e)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(N){return{$$typeof:p,render:N}},qe.isValidElement=S,qe.lazy=function(N){return{$$typeof:T,_payload:{_status:-1,_result:N},_init:ae}},qe.memo=function(N,ee){return{$$typeof:y,type:N,compare:ee===void 0?null:ee}},qe.startTransition=function(N){var ee=we.T,oe={};we.T=oe;try{var ie=N(),_e=we.S;_e!==null&&_e(oe,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(tt,pe)}catch(Le){pe(Le)}finally{we.T=ee}},qe.unstable_useCacheRefresh=function(){return we.H.useCacheRefresh()},qe.use=function(N){return we.H.use(N)},qe.useActionState=function(N,ee,oe){return we.H.useActionState(N,ee,oe)},qe.useCallback=function(N,ee){return we.H.useCallback(N,ee)},qe.useContext=function(N){return we.H.useContext(N)},qe.useDebugValue=function(){},qe.useDeferredValue=function(N,ee){return we.H.useDeferredValue(N,ee)},qe.useEffect=function(N,ee,oe){var ie=we.H;if(typeof oe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ie.useEffect(N,ee)},qe.useId=function(){return we.H.useId()},qe.useImperativeHandle=function(N,ee,oe){return we.H.useImperativeHandle(N,ee,oe)},qe.useInsertionEffect=function(N,ee){return we.H.useInsertionEffect(N,ee)},qe.useLayoutEffect=function(N,ee){return we.H.useLayoutEffect(N,ee)},qe.useMemo=function(N,ee){return we.H.useMemo(N,ee)},qe.useOptimistic=function(N,ee){return we.H.useOptimistic(N,ee)},qe.useReducer=function(N,ee,oe){return we.H.useReducer(N,ee,oe)},qe.useRef=function(N){return we.H.useRef(N)},qe.useState=function(N){return we.H.useState(N)},qe.useSyncExternalStore=function(N,ee,oe){return we.H.useSyncExternalStore(N,ee,oe)},qe.useTransition=function(){return we.H.useTransition()},qe.version="19.1.0",qe}var bv;function gm(){return bv||(bv=1,Sd.exports=lb()),Sd.exports}var at=gm();const r0=sb(at);var Rd={exports:{}},Al={},Id={exports:{}},Cd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Av;function ub(){return Av||(Av=1,function(r){function e(Y,ae){var pe=Y.length;Y.push(ae);e:for(;0<pe;){var tt=pe-1>>>1,N=Y[tt];if(0<l(N,ae))Y[tt]=ae,Y[pe]=N,pe=tt;else break e}}function n(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var ae=Y[0],pe=Y.pop();if(pe!==ae){Y[0]=pe;e:for(var tt=0,N=Y.length,ee=N>>>1;tt<ee;){var oe=2*(tt+1)-1,ie=Y[oe],_e=oe+1,Le=Y[_e];if(0>l(ie,pe))_e<N&&0>l(Le,ie)?(Y[tt]=Le,Y[_e]=pe,tt=_e):(Y[tt]=ie,Y[oe]=pe,tt=oe);else if(_e<N&&0>l(Le,pe))Y[tt]=Le,Y[_e]=pe,tt=_e;else break e}}return ae}function l(Y,ae){var pe=Y.sortIndex-ae.sortIndex;return pe!==0?pe:Y.id-ae.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var f=Date,p=f.now();r.unstable_now=function(){return f.now()-p}}var g=[],y=[],T=1,R=null,D=3,F=!1,ne=!1,$=!1,te=!1,Me=typeof setTimeout=="function"?setTimeout:null,Ae=typeof clearTimeout=="function"?clearTimeout:null,Te=typeof setImmediate<"u"?setImmediate:null;function Ue(Y){for(var ae=n(y);ae!==null;){if(ae.callback===null)s(y);else if(ae.startTime<=Y)s(y),ae.sortIndex=ae.expirationTime,e(g,ae);else break;ae=n(y)}}function we(Y){if($=!1,Ue(Y),!ne)if(n(g)!==null)ne=!0,Be||(Be=!0,P());else{var ae=n(y);ae!==null&&bt(we,ae.startTime-Y)}}var Be=!1,x=-1,w=5,S=-1;function O(){return te?!0:!(r.unstable_now()-S<w)}function V(){if(te=!1,Be){var Y=r.unstable_now();S=Y;var ae=!0;try{e:{ne=!1,$&&($=!1,Ae(x),x=-1),F=!0;var pe=D;try{t:{for(Ue(Y),R=n(g);R!==null&&!(R.expirationTime>Y&&O());){var tt=R.callback;if(typeof tt=="function"){R.callback=null,D=R.priorityLevel;var N=tt(R.expirationTime<=Y);if(Y=r.unstable_now(),typeof N=="function"){R.callback=N,Ue(Y),ae=!0;break t}R===n(g)&&s(g),Ue(Y)}else s(g);R=n(g)}if(R!==null)ae=!0;else{var ee=n(y);ee!==null&&bt(we,ee.startTime-Y),ae=!1}}break e}finally{R=null,D=pe,F=!1}ae=void 0}}finally{ae?P():Be=!1}}}var P;if(typeof Te=="function")P=function(){Te(V)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,It=C.port2;C.port1.onmessage=V,P=function(){It.postMessage(null)}}else P=function(){Me(V,0)};function bt(Y,ae){x=Me(function(){Y(r.unstable_now())},ae)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Y){Y.callback=null},r.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<Y?Math.floor(1e3/Y):5},r.unstable_getCurrentPriorityLevel=function(){return D},r.unstable_next=function(Y){switch(D){case 1:case 2:case 3:var ae=3;break;default:ae=D}var pe=D;D=ae;try{return Y()}finally{D=pe}},r.unstable_requestPaint=function(){te=!0},r.unstable_runWithPriority=function(Y,ae){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var pe=D;D=Y;try{return ae()}finally{D=pe}},r.unstable_scheduleCallback=function(Y,ae,pe){var tt=r.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?tt+pe:tt):pe=tt,Y){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=pe+N,Y={id:T++,callback:ae,priorityLevel:Y,startTime:pe,expirationTime:N,sortIndex:-1},pe>tt?(Y.sortIndex=pe,e(y,Y),n(g)===null&&Y===n(y)&&($?(Ae(x),x=-1):$=!0,bt(we,pe-tt))):(Y.sortIndex=N,e(g,Y),ne||F||(ne=!0,Be||(Be=!0,P()))),Y},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(Y){var ae=D;return function(){var pe=D;D=ae;try{return Y.apply(this,arguments)}finally{D=pe}}}}(Cd)),Cd}var wv;function cb(){return wv||(wv=1,Id.exports=ub()),Id.exports}var xd={exports:{}},_n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sv;function hb(){if(Sv)return _n;Sv=1;var r=gm();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(g,y,T){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:R==null?null:""+R,children:g,containerInfo:y,implementation:T}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return _n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,_n.createPortal=function(g,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,T)},_n.flushSync=function(g){var y=f.T,T=s.p;try{if(f.T=null,s.p=2,g)return g()}finally{f.T=y,s.p=T,s.d.f()}},_n.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},_n.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},_n.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var T=y.as,R=p(T,y.crossOrigin),D=typeof y.integrity=="string"?y.integrity:void 0,F=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:R,integrity:D,fetchPriority:F}):T==="script"&&s.d.X(g,{crossOrigin:R,integrity:D,fetchPriority:F,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},_n.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=p(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},_n.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,R=p(T,y.crossOrigin);s.d.L(g,T,{crossOrigin:R,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},_n.preloadModule=function(g,y){if(typeof g=="string")if(y){var T=p(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},_n.requestFormReset=function(g){s.d.r(g)},_n.unstable_batchedUpdates=function(g,y){return g(y)},_n.useFormState=function(g,y,T){return f.H.useFormState(g,y,T)},_n.useFormStatus=function(){return f.H.useHostTransitionStatus()},_n.version="19.1.0",_n}var Rv;function fb(){if(Rv)return xd.exports;Rv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),xd.exports=hb(),xd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iv;function db(){if(Iv)return Al;Iv=1;var r=cb(),e=gm(),n=fb();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(c(t)!==t)throw Error(s(188))}function g(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,o=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return p(h),t;if(d===o)return p(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=d;else{for(var _=!1,E=h.child;E;){if(E===a){_=!0,a=h,o=d;break}if(E===o){_=!0,o=h,a=d;break}E=E.sibling}if(!_){for(E=d.child;E;){if(E===a){_=!0,a=d,o=h;break}if(E===o){_=!0,o=d,a=h;break}E=E.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function y(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=y(t),i!==null)return i;t=t.sibling}return null}var T=Object.assign,R=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),ne=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),Me=Symbol.for("react.provider"),Ae=Symbol.for("react.consumer"),Te=Symbol.for("react.context"),Ue=Symbol.for("react.forward_ref"),we=Symbol.for("react.suspense"),Be=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function P(t){return t===null||typeof t!="object"?null:(t=V&&t[V]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function It(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ne:return"Fragment";case te:return"Profiler";case $:return"StrictMode";case we:return"Suspense";case Be:return"SuspenseList";case S:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case F:return"Portal";case Te:return(t.displayName||"Context")+".Provider";case Ae:return(t._context.displayName||"Context")+".Consumer";case Ue:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case x:return i=t.displayName||null,i!==null?i:It(t.type)||"Memo";case w:i=t._payload,t=t._init;try{return It(t(i))}catch{}}return null}var bt=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},tt=[],N=-1;function ee(t){return{current:t}}function oe(t){0>N||(t.current=tt[N],tt[N]=null,N--)}function ie(t,i){N++,tt[N]=t.current,t.current=i}var _e=ee(null),Le=ee(null),Se=ee(null),At=ee(null);function Fe(t,i){switch(ie(Se,i),ie(Le,t),ie(_e,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?Yy(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=Yy(i),t=Ky(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}oe(_e),ie(_e,t)}function Pe(){oe(_e),oe(Le),oe(Se)}function Dt(t){t.memoizedState!==null&&ie(At,t);var i=_e.current,a=Ky(i,t.type);i!==a&&(ie(Le,t),ie(_e,a))}function an(t){Le.current===t&&(oe(_e),oe(Le)),At.current===t&&(oe(At),yl._currentValue=pe)}var gn=Object.prototype.hasOwnProperty,Li=r.unstable_scheduleCallback,wn=r.unstable_cancelCallback,Kn=r.unstable_shouldYield,li=r.unstable_requestPaint,pt=r.unstable_now,$t=r.unstable_getCurrentPriorityLevel,br=r.unstable_ImmediatePriority,Bi=r.unstable_UserBlockingPriority,gi=r.unstable_NormalPriority,sa=r.unstable_LowPriority,Ar=r.unstable_IdlePriority,wr=r.log,aa=r.unstable_setDisableYieldValue,wt=null,it=null;function Sn(t){if(typeof wr=="function"&&aa(t),it&&typeof it.setStrictMode=="function")try{it.setStrictMode(wt,t)}catch{}}var Zt=Math.clz32?Math.clz32:zi,oa=Math.log,Ao=Math.LN2;function zi(t){return t>>>=0,t===0?32:31-(oa(t)/Ao|0)|0}var yi=256,ji=4194304;function Ln(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function qi(t,i,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,d=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var E=o&134217727;return E!==0?(o=E&~d,o!==0?h=Ln(o):(_&=E,_!==0?h=Ln(_):a||(a=E&~t,a!==0&&(h=Ln(a))))):(E=o&~d,E!==0?h=Ln(E):_!==0?h=Ln(_):a||(a=o&~t,a!==0&&(h=Ln(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function Hi(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function _s(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sr(){var t=yi;return yi<<=1,(yi&4194048)===0&&(yi=256),t}function A(){var t=ji;return ji<<=1,(ji&62914560)===0&&(ji=4194304),t}function H(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function L(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function re(t,i,a,o,h,d){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,I=t.expirationTimes,j=t.hiddenUpdates;for(a=_&~a;0<a;){var K=31-Zt(a),Z=1<<K;E[K]=0,I[K]=-1;var q=j[K];if(q!==null)for(j[K]=null,K=0;K<q.length;K++){var G=q[K];G!==null&&(G.lane&=-536870913)}a&=~Z}o!==0&&le(t,o,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(_&~i))}function le(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var o=31-Zt(i);t.entangledLanes|=i,t.entanglements[o]=t.entanglements[o]|1073741824|a&4194090}function ve(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var o=31-Zt(a),h=1<<o;h&i|t[o]&i&&(t[o]|=i),a&=~h}}function he(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ce(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ze(){var t=ae.p;return t!==0?t:(t=window.event,t===void 0?32:dv(t.type))}function fe(t,i){var a=ae.p;try{return ae.p=t,i()}finally{ae.p=a}}var ge=Math.random().toString(36).slice(2),ye="__reactFiber$"+ge,me="__reactProps$"+ge,xe="__reactContainer$"+ge,ct="__reactEvents$"+ge,on="__reactListeners$"+ge,vt="__reactHandles$"+ge,Wt="__reactResources$"+ge,Dn="__reactMarker$"+ge;function je(t){delete t[ye],delete t[me],delete t[ct],delete t[on],delete t[vt]}function St(t){var i=t[ye];if(i)return i;for(var a=t.parentNode;a;){if(i=a[xe]||a[ye]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=Wy(t);t!==null;){if(a=t[ye])return a;t=Wy(t)}return i}t=a,a=t.parentNode}return null}function Et(t){if(t=t[ye]||t[xe]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function yn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function qt(t){var i=t[Wt];return i||(i=t[Wt]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function gt(t){t[Dn]=!0}var Rr=new Set,Ir={};function ui(t,i){Gi(t,i),Gi(t+"Capture",i)}function Gi(t,i){for(Ir[t]=i,t=0;t<i.length;t++)Rr.add(i[t])}var ru=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),su={},Es={};function au(t){return gn.call(Es,t)?!0:gn.call(su,t)?!1:ru.test(t)?Es[t]=!0:(su[t]=!0,!1)}function Cr(t,i,a){if(au(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function vi(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function ln(t,i,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+o)}}var Ts,ou;function Fi(t){if(Ts===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Ts=i&&i[1]||"",ou=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ts+t+ou}var la=!1;function ua(t,i){if(!t||la)return"";la=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(G){var q=G}Reflect.construct(t,[],Z)}else{try{Z.call()}catch(G){q=G}t.call(Z.prototype)}}else{try{throw Error()}catch(G){q=G}(Z=t())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(G){if(G&&q&&typeof G.stack=="string")return[G.stack,q.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),_=d[0],E=d[1];if(_&&E){var I=_.split(`
`),j=E.split(`
`);for(h=o=0;o<I.length&&!I[o].includes("DetermineComponentFrameRoot");)o++;for(;h<j.length&&!j[h].includes("DetermineComponentFrameRoot");)h++;if(o===I.length||h===j.length)for(o=I.length-1,h=j.length-1;1<=o&&0<=h&&I[o]!==j[h];)h--;for(;1<=o&&0<=h;o--,h--)if(I[o]!==j[h]){if(o!==1||h!==1)do if(o--,h--,0>h||I[o]!==j[h]){var K=`
`+I[o].replace(" at new "," at ");return t.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",t.displayName)),K}while(1<=o&&0<=h);break}}}finally{la=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Fi(a):""}function wo(t){switch(t.tag){case 26:case 27:case 5:return Fi(t.type);case 16:return Fi("Lazy");case 13:return Fi("Suspense");case 19:return Fi("SuspenseList");case 0:case 15:return ua(t.type,!1);case 11:return ua(t.type.render,!1);case 1:return ua(t.type,!0);case 31:return Fi("Activity");default:return""}}function ca(t){try{var i="";do i+=wo(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Rn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function So(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ih(t){var i=So(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),o=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(_){o=""+_,d.call(this,_)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function ha(t){t._valueTracker||(t._valueTracker=Ih(t))}function Ro(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return t&&(o=So(t)?t.checked?"true":"false":t.value),t=o,t!==a?(i.setValue(t),!0):!1}function bs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ch=/[\n"\\]/g;function kt(t){return t.replace(Ch,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Bn(t,i,a,o,h,d,_,E){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),i!=null?_==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Rn(i)):t.value!==""+Rn(i)&&(t.value=""+Rn(i)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),i!=null?xr(t,_,Rn(i)):a!=null?xr(t,_,Rn(a)):o!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+Rn(E):t.removeAttribute("name")}function As(t,i,a,o,h,d,_,E){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+Rn(a):"",i=i!=null?""+Rn(i):a,E||i===t.value||(t.value=i),t.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=E?t.checked:!!o,t.defaultChecked=!!o,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_)}function xr(t,i,a){i==="number"&&bs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Qi(t,i,a,o){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+Rn(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function ht(t,i,a){if(i!=null&&(i=""+Rn(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Rn(a):""}function ws(t,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(bt(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=Rn(i),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o)}function Xn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Ss=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lu(t,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":o?t.setProperty(i,a):typeof a!="number"||a===0||Ss.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Io(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&lu(t,h,o)}else for(var d in i)i.hasOwnProperty(d)&&lu(t,d,i[d])}function Co(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fa(t){return Dh.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Yi=null;function $n(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ki=null,Xi=null;function xo(t){var i=Et(t);if(i&&(t=i.stateNode)){var a=t[me]||null;e:switch(t=i.stateNode,i.type){case"input":if(Bn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+kt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==t&&o.form===t.form){var h=o[me]||null;if(!h)throw Error(s(90));Bn(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===t.form&&Ro(o)}break e;case"textarea":ht(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Qi(t,!!a.multiple,i,!1)}}}var _i=!1;function uu(t,i,a){if(_i)return t(i,a);_i=!0;try{var o=t(i);return o}finally{if(_i=!1,(Ki!==null||Xi!==null)&&(nc(),Ki&&(i=Ki,t=Xi,Xi=Ki=null,xo(i),t)))for(i=0;i<t.length;i++)xo(t[i])}}function Rs(t,i){var a=t.stateNode;if(a===null)return null;var o=a[me]||null;if(o===null)return null;a=o[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zn=!1;if(ci)try{var Is={};Object.defineProperty(Is,"passive",{get:function(){Zn=!0}}),window.addEventListener("test",Is,Is),window.removeEventListener("test",Is,Is)}catch{Zn=!1}var Ei=null,Dr=null,$i=null;function Do(){if($i)return $i;var t,i=Dr,a=i.length,o,h="value"in Ei?Ei.value:Ei.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var _=a-t;for(o=1;o<=_&&i[a-o]===h[d-o];o++);return $i=h.slice(t,1<o?1-o:void 0)}function Ti(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function bi(){return!0}function No(){return!1}function Jt(t){function i(a,o,h,d,_){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(d):d[E]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?bi:No,this.isPropagationStopped=No,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=bi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=bi)},persist:function(){},isPersistent:bi}),i}var st={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},da=Jt(st),Cs=T({},st,{view:0,detail:0}),cu=Jt(Cs),ma,pa,Ai,xs=T({},Cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Os,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ai&&(Ai&&t.type==="mousemove"?(ma=t.screenX-Ai.screenX,pa=t.screenY-Ai.screenY):pa=ma=0,Ai=t),ma)},movementY:function(t){return"movementY"in t?t.movementY:pa}}),Wn=Jt(xs),hu=T({},xs,{dataTransfer:0}),Nh=Jt(hu),Ds=T({},Cs,{relatedTarget:0}),ga=Jt(Ds),Oo=T({},st,{animationName:0,elapsedTime:0,pseudoElement:0}),ya=Jt(Oo),fu=T({},st,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),va=Jt(fu),Oh=T({},st,{data:0}),Mo=Jt(Oh),Ns={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},du={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vo(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=mu[t])?!!i[t]:!1}function Os(){return Vo}var pu=T({},Cs,{key:function(t){if(t.key){var i=Ns[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Ti(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?du[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Os,charCode:function(t){return t.type==="keypress"?Ti(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ti(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_a=Jt(pu),gu=T({},xs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uo=Jt(gu),Zi=T({},Cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Os}),yu=Jt(Zi),vu=T({},st,{propertyName:0,elapsedTime:0,pseudoElement:0}),_u=Jt(vu),Eu=T({},xs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ea=Jt(Eu),In=T({},st,{newState:0,oldState:0}),Tu=Jt(In),bu=[9,13,27,32],wi=ci&&"CompositionEvent"in window,u=null;ci&&"documentMode"in document&&(u=document.documentMode);var m=ci&&"TextEvent"in window&&!u,v=ci&&(!wi||u&&8<u&&11>=u),b=" ",B=!1;function Q(t,i){switch(t){case"keyup":return bu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function se(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ze=!1;function Ht(t,i){switch(t){case"compositionend":return se(i);case"keypress":return i.which!==32?null:(B=!0,b);case"textInput":return t=i.data,t===b&&B?null:t;default:return null}}function We(t,i){if(Ze)return t==="compositionend"||!wi&&Q(t,i)?(t=Do(),$i=Dr=Ei=null,Ze=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return v&&i.locale!=="ko"?null:i.data;default:return null}}var en={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gt(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!en[t.type]:i==="textarea"}function Wi(t,i,a,o){Ki?Xi?Xi.push(o):Xi=[o]:Ki=o,i=lc(i,"onChange"),0<i.length&&(a=new da("onChange","change",null,a,o),t.push({event:a,listeners:i}))}var un=null,Si=null;function Po(t){qy(t,0)}function Au(t){var i=yn(t);if(Ro(i))return t}function up(t,i){if(t==="change")return i}var cp=!1;if(ci){var Mh;if(ci){var Vh="oninput"in document;if(!Vh){var hp=document.createElement("div");hp.setAttribute("oninput","return;"),Vh=typeof hp.oninput=="function"}Mh=Vh}else Mh=!1;cp=Mh&&(!document.documentMode||9<document.documentMode)}function fp(){un&&(un.detachEvent("onpropertychange",dp),Si=un=null)}function dp(t){if(t.propertyName==="value"&&Au(Si)){var i=[];Wi(i,Si,t,$n(t)),uu(Po,i)}}function U1(t,i,a){t==="focusin"?(fp(),un=i,Si=a,un.attachEvent("onpropertychange",dp)):t==="focusout"&&fp()}function P1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Au(Si)}function k1(t,i){if(t==="click")return Au(i)}function L1(t,i){if(t==="input"||t==="change")return Au(i)}function B1(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var zn=typeof Object.is=="function"?Object.is:B1;function ko(t,i){if(zn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!gn.call(i,h)||!zn(t[h],i[h]))return!1}return!0}function mp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pp(t,i){var a=mp(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=i&&o>=i)return{node:a,offset:i-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=mp(a)}}function gp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?gp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function yp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=bs(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=bs(t.document)}return i}function Uh(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var z1=ci&&"documentMode"in document&&11>=document.documentMode,Ta=null,Ph=null,Lo=null,kh=!1;function vp(t,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;kh||Ta==null||Ta!==bs(o)||(o=Ta,"selectionStart"in o&&Uh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Lo&&ko(Lo,o)||(Lo=o,o=lc(Ph,"onSelect"),0<o.length&&(i=new da("onSelect","select",null,i,a),t.push({event:i,listeners:o}),i.target=Ta)))}function Ms(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var ba={animationend:Ms("Animation","AnimationEnd"),animationiteration:Ms("Animation","AnimationIteration"),animationstart:Ms("Animation","AnimationStart"),transitionrun:Ms("Transition","TransitionRun"),transitionstart:Ms("Transition","TransitionStart"),transitioncancel:Ms("Transition","TransitionCancel"),transitionend:Ms("Transition","TransitionEnd")},Lh={},_p={};ci&&(_p=document.createElement("div").style,"AnimationEvent"in window||(delete ba.animationend.animation,delete ba.animationiteration.animation,delete ba.animationstart.animation),"TransitionEvent"in window||delete ba.transitionend.transition);function Vs(t){if(Lh[t])return Lh[t];if(!ba[t])return t;var i=ba[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in _p)return Lh[t]=i[a];return t}var Ep=Vs("animationend"),Tp=Vs("animationiteration"),bp=Vs("animationstart"),j1=Vs("transitionrun"),q1=Vs("transitionstart"),H1=Vs("transitioncancel"),Ap=Vs("transitionend"),wp=new Map,Bh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bh.push("scrollEnd");function hi(t,i){wp.set(t,i),ui(i,[t])}var Sp=new WeakMap;function Jn(t,i){if(typeof t=="object"&&t!==null){var a=Sp.get(t);return a!==void 0?a:(i={value:t,source:i,stack:ca(i)},Sp.set(t,i),i)}return{value:t,source:i,stack:ca(i)}}var ei=[],Aa=0,zh=0;function wu(){for(var t=Aa,i=zh=Aa=0;i<t;){var a=ei[i];ei[i++]=null;var o=ei[i];ei[i++]=null;var h=ei[i];ei[i++]=null;var d=ei[i];if(ei[i++]=null,o!==null&&h!==null){var _=o.pending;_===null?h.next=h:(h.next=_.next,_.next=h),o.pending=h}d!==0&&Rp(a,h,d)}}function Su(t,i,a,o){ei[Aa++]=t,ei[Aa++]=i,ei[Aa++]=a,ei[Aa++]=o,zh|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function jh(t,i,a,o){return Su(t,i,a,o),Ru(t)}function wa(t,i){return Su(t,null,null,i),Ru(t)}function Rp(t,i,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,o=d.alternate,o!==null&&(o.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-Zt(a),t=d.hiddenUpdates,o=t[h],o===null?t[h]=[i]:o.push(i),i.lane=a|536870912),d):null}function Ru(t){if(50<ul)throw ul=0,Kf=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Sa={};function G1(t,i,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(t,i,a,o){return new G1(t,i,a,o)}function qh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ji(t,i){var a=t.alternate;return a===null?(a=jn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Ip(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Iu(t,i,a,o,h,d){var _=0;if(o=t,typeof t=="function")qh(t)&&(_=1);else if(typeof t=="string")_=QT(t,a,_e.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case S:return t=jn(31,a,i,h),t.elementType=S,t.lanes=d,t;case ne:return Us(a.children,h,d,i);case $:_=8,h|=24;break;case te:return t=jn(12,a,i,h|2),t.elementType=te,t.lanes=d,t;case we:return t=jn(13,a,i,h),t.elementType=we,t.lanes=d,t;case Be:return t=jn(19,a,i,h),t.elementType=Be,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Me:case Te:_=10;break e;case Ae:_=9;break e;case Ue:_=11;break e;case x:_=14;break e;case w:_=16,o=null;break e}_=29,a=Error(s(130,t===null?"null":typeof t,"")),o=null}return i=jn(_,a,i,h),i.elementType=t,i.type=o,i.lanes=d,i}function Us(t,i,a,o){return t=jn(7,t,o,i),t.lanes=a,t}function Hh(t,i,a){return t=jn(6,t,null,i),t.lanes=a,t}function Gh(t,i,a){return i=jn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Ra=[],Ia=0,Cu=null,xu=0,ti=[],ni=0,Ps=null,er=1,tr="";function ks(t,i){Ra[Ia++]=xu,Ra[Ia++]=Cu,Cu=t,xu=i}function Cp(t,i,a){ti[ni++]=er,ti[ni++]=tr,ti[ni++]=Ps,Ps=t;var o=er;t=tr;var h=32-Zt(o)-1;o&=~(1<<h),a+=1;var d=32-Zt(i)+h;if(30<d){var _=h-h%5;d=(o&(1<<_)-1).toString(32),o>>=_,h-=_,er=1<<32-Zt(i)+h|a<<h|o,tr=d+t}else er=1<<d|a<<h|o,tr=t}function Fh(t){t.return!==null&&(ks(t,1),Cp(t,1,0))}function Qh(t){for(;t===Cu;)Cu=Ra[--Ia],Ra[Ia]=null,xu=Ra[--Ia],Ra[Ia]=null;for(;t===Ps;)Ps=ti[--ni],ti[ni]=null,tr=ti[--ni],ti[ni]=null,er=ti[--ni],ti[ni]=null}var Cn=null,Nt=null,rt=!1,Ls=null,Ri=!1,Yh=Error(s(519));function Bs(t){var i=Error(s(418,""));throw jo(Jn(i,t)),Yh}function xp(t){var i=t.stateNode,a=t.type,o=t.memoizedProps;switch(i[ye]=t,i[me]=o,a){case"dialog":Ke("cancel",i),Ke("close",i);break;case"iframe":case"object":case"embed":Ke("load",i);break;case"video":case"audio":for(a=0;a<hl.length;a++)Ke(hl[a],i);break;case"source":Ke("error",i);break;case"img":case"image":case"link":Ke("error",i),Ke("load",i);break;case"details":Ke("toggle",i);break;case"input":Ke("invalid",i),As(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),ha(i);break;case"select":Ke("invalid",i);break;case"textarea":Ke("invalid",i),ws(i,o.value,o.defaultValue,o.children),ha(i)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||Qy(i.textContent,a)?(o.popover!=null&&(Ke("beforetoggle",i),Ke("toggle",i)),o.onScroll!=null&&Ke("scroll",i),o.onScrollEnd!=null&&Ke("scrollend",i),o.onClick!=null&&(i.onclick=uc),i=!0):i=!1,i||Bs(t)}function Dp(t){for(Cn=t.return;Cn;)switch(Cn.tag){case 5:case 13:Ri=!1;return;case 27:case 3:Ri=!0;return;default:Cn=Cn.return}}function Bo(t){if(t!==Cn)return!1;if(!rt)return Dp(t),rt=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||cd(t.type,t.memoizedProps)),a=!a),a&&Nt&&Bs(t),Dp(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){Nt=di(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}Nt=null}}else i===27?(i=Nt,Qr(t.type)?(t=md,md=null,Nt=t):Nt=i):Nt=Cn?di(t.stateNode.nextSibling):null;return!0}function zo(){Nt=Cn=null,rt=!1}function Np(){var t=Ls;return t!==null&&(Mn===null?Mn=t:Mn.push.apply(Mn,t),Ls=null),t}function jo(t){Ls===null?Ls=[t]:Ls.push(t)}var Kh=ee(null),zs=null,nr=null;function Nr(t,i,a){ie(Kh,i._currentValue),i._currentValue=a}function ir(t){t._currentValue=Kh.current,oe(Kh)}function Xh(t,i,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),t===a)break;t=t.return}}function $h(t,i,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var _=h.child;d=d.firstContext;e:for(;d!==null;){var E=d;d=h;for(var I=0;I<i.length;I++)if(E.context===i[I]){d.lanes|=a,E=d.alternate,E!==null&&(E.lanes|=a),Xh(d.return,a,t),o||(_=null);break e}d=E.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(s(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),Xh(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function qo(t,i,a,o){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var E=h.type;zn(h.pendingProps.value,_.value)||(t!==null?t.push(E):t=[E])}}else if(h===At.current){if(_=h.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(yl):t=[yl])}h=h.return}t!==null&&$h(i,t,a,o),i.flags|=262144}function Du(t){for(t=t.firstContext;t!==null;){if(!zn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function js(t){zs=t,nr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function vn(t){return Op(zs,t)}function Nu(t,i){return zs===null&&js(t),Op(t,i)}function Op(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},nr===null){if(t===null)throw Error(s(308));nr=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else nr=nr.next=i;return a}var F1=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},Q1=r.unstable_scheduleCallback,Y1=r.unstable_NormalPriority,Ft={$$typeof:Te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zh(){return{controller:new F1,data:new Map,refCount:0}}function Ho(t){t.refCount--,t.refCount===0&&Q1(Y1,function(){t.controller.abort()})}var Go=null,Wh=0,Ca=0,xa=null;function K1(t,i){if(Go===null){var a=Go=[];Wh=0,Ca=td(),xa={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Wh++,i.then(Mp,Mp),i}function Mp(){if(--Wh===0&&Go!==null){xa!==null&&(xa.status="fulfilled");var t=Go;Go=null,Ca=0,xa=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function X1(t,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Vp=Y.S;Y.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&K1(t,i),Vp!==null&&Vp(t,i)};var qs=ee(null);function Jh(){var t=qs.current;return t!==null?t:_t.pooledCache}function Ou(t,i){i===null?ie(qs,qs.current):ie(qs,i.pool)}function Up(){var t=Jh();return t===null?null:{parent:Ft._currentValue,pool:t}}var Fo=Error(s(460)),Pp=Error(s(474)),Mu=Error(s(542)),ef={then:function(){}};function kp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Vu(){}function Lp(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Vu,Vu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,zp(t),t;default:if(typeof i.status=="string")i.then(Vu,Vu);else{if(t=_t,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,zp(t),t}throw Qo=i,Fo}}var Qo=null;function Bp(){if(Qo===null)throw Error(s(459));var t=Qo;return Qo=null,t}function zp(t){if(t===Fo||t===Mu)throw Error(s(483))}var Or=!1;function tf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Mr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Vr(t,i,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(lt&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=Ru(t),Rp(t,null,a),i}return Su(t,o,i,a),Ru(t)}function Yo(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,ve(t,a)}}function rf(t,i){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var sf=!1;function Ko(){if(sf){var t=xa;if(t!==null)throw t}}function Xo(t,i,a,o){sf=!1;var h=t.updateQueue;Or=!1;var d=h.firstBaseUpdate,_=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var I=E,j=I.next;I.next=null,_===null?d=j:_.next=j,_=I;var K=t.alternate;K!==null&&(K=K.updateQueue,E=K.lastBaseUpdate,E!==_&&(E===null?K.firstBaseUpdate=j:E.next=j,K.lastBaseUpdate=I))}if(d!==null){var Z=h.baseState;_=0,K=j=I=null,E=d;do{var q=E.lane&-536870913,G=q!==E.lane;if(G?(Je&q)===q:(o&q)===q){q!==0&&q===Ca&&(sf=!0),K!==null&&(K=K.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Ne=t,Re=E;q=i;var mt=a;switch(Re.tag){case 1:if(Ne=Re.payload,typeof Ne=="function"){Z=Ne.call(mt,Z,q);break e}Z=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Re.payload,q=typeof Ne=="function"?Ne.call(mt,Z,q):Ne,q==null)break e;Z=T({},Z,q);break e;case 2:Or=!0}}q=E.callback,q!==null&&(t.flags|=64,G&&(t.flags|=8192),G=h.callbacks,G===null?h.callbacks=[q]:G.push(q))}else G={lane:q,tag:E.tag,payload:E.payload,callback:E.callback,next:null},K===null?(j=K=G,I=Z):K=K.next=G,_|=q;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;G=E,E=G.next,G.next=null,h.lastBaseUpdate=G,h.shared.pending=null}}while(!0);K===null&&(I=Z),h.baseState=I,h.firstBaseUpdate=j,h.lastBaseUpdate=K,d===null&&(h.shared.lanes=0),qr|=_,t.lanes=_,t.memoizedState=Z}}function jp(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function qp(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)jp(a[t],i)}var Da=ee(null),Uu=ee(0);function Hp(t,i){t=cr,ie(Uu,t),ie(Da,i),cr=t|i.baseLanes}function af(){ie(Uu,cr),ie(Da,Da.current)}function of(){cr=Uu.current,oe(Da),oe(Uu)}var Ur=0,He=null,ft=null,Lt=null,Pu=!1,Na=!1,Hs=!1,ku=0,$o=0,Oa=null,$1=0;function Mt(){throw Error(s(321))}function lf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!zn(t[a],i[a]))return!1;return!0}function uf(t,i,a,o,h,d){return Ur=d,He=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Y.H=t===null||t.memoizedState===null?Rg:Ig,Hs=!1,d=a(o,h),Hs=!1,Na&&(d=Fp(i,a,o,h)),Gp(t),d}function Gp(t){Y.H=Hu;var i=ft!==null&&ft.next!==null;if(Ur=0,Lt=ft=He=null,Pu=!1,$o=0,Oa=null,i)throw Error(s(300));t===null||tn||(t=t.dependencies,t!==null&&Du(t)&&(tn=!0))}function Fp(t,i,a,o){He=t;var h=0;do{if(Na&&(Oa=null),$o=0,Na=!1,25<=h)throw Error(s(301));if(h+=1,Lt=ft=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}Y.H=iT,d=i(a,o)}while(Na);return d}function Z1(){var t=Y.H,i=t.useState()[0];return i=typeof i.then=="function"?Zo(i):i,t=t.useState()[0],(ft!==null?ft.memoizedState:null)!==t&&(He.flags|=1024),i}function cf(){var t=ku!==0;return ku=0,t}function hf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function ff(t){if(Pu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Pu=!1}Ur=0,Lt=ft=He=null,Na=!1,$o=ku=0,Oa=null}function Nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?He.memoizedState=Lt=t:Lt=Lt.next=t,Lt}function Bt(){if(ft===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=ft.next;var i=Lt===null?He.memoizedState:Lt.next;if(i!==null)Lt=i,ft=t;else{if(t===null)throw He.alternate===null?Error(s(467)):Error(s(310));ft=t,t={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},Lt===null?He.memoizedState=Lt=t:Lt=Lt.next=t}return Lt}function df(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zo(t){var i=$o;return $o+=1,Oa===null&&(Oa=[]),t=Lp(Oa,t,i),i=He,(Lt===null?i.memoizedState:Lt.next)===null&&(i=i.alternate,Y.H=i===null||i.memoizedState===null?Rg:Ig),t}function Lu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Zo(t);if(t.$$typeof===Te)return vn(t)}throw Error(s(438,String(t)))}function mf(t){var i=null,a=He.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=He.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=df(),He.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),o=0;o<t;o++)a[o]=O;return i.index++,a}function rr(t,i){return typeof i=="function"?i(t):i}function Bu(t){var i=Bt();return pf(i,ft,t)}function pf(t,i,a){var o=t.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=t.baseQueue,d=o.pending;if(d!==null){if(h!==null){var _=h.next;h.next=d.next,d.next=_}i.baseQueue=h=d,o.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var E=_=null,I=null,j=i,K=!1;do{var Z=j.lane&-536870913;if(Z!==j.lane?(Je&Z)===Z:(Ur&Z)===Z){var q=j.revertLane;if(q===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),Z===Ca&&(K=!0);else if((Ur&q)===q){j=j.next,q===Ca&&(K=!0);continue}else Z={lane:0,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},I===null?(E=I=Z,_=d):I=I.next=Z,He.lanes|=q,qr|=q;Z=j.action,Hs&&a(d,Z),d=j.hasEagerState?j.eagerState:a(d,Z)}else q={lane:Z,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},I===null?(E=I=q,_=d):I=I.next=q,He.lanes|=Z,qr|=Z;j=j.next}while(j!==null&&j!==i);if(I===null?_=d:I.next=E,!zn(d,t.memoizedState)&&(tn=!0,K&&(a=xa,a!==null)))throw a;t.memoizedState=d,t.baseState=_,t.baseQueue=I,o.lastRenderedState=d}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function gf(t){var i=Bt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do d=t(d,_.action),_=_.next;while(_!==h);zn(d,i.memoizedState)||(tn=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,o]}function Qp(t,i,a){var o=He,h=Bt(),d=rt;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var _=!zn((ft||h).memoizedState,a);_&&(h.memoizedState=a,tn=!0),h=h.queue;var E=Xp.bind(null,o,h,t);if(Wo(2048,8,E,[t]),h.getSnapshot!==i||_||Lt!==null&&Lt.memoizedState.tag&1){if(o.flags|=2048,Ma(9,zu(),Kp.bind(null,o,h,a,i),null),_t===null)throw Error(s(349));d||(Ur&124)!==0||Yp(o,i,a)}return a}function Yp(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=He.updateQueue,i===null?(i=df(),He.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Kp(t,i,a,o){i.value=a,i.getSnapshot=o,$p(i)&&Zp(t)}function Xp(t,i,a){return a(function(){$p(i)&&Zp(t)})}function $p(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!zn(t,a)}catch{return!0}}function Zp(t){var i=wa(t,2);i!==null&&Qn(i,t,2)}function yf(t){var i=Nn();if(typeof t=="function"){var a=t;if(t=a(),Hs){Sn(!0);try{a()}finally{Sn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rr,lastRenderedState:t},i}function Wp(t,i,a,o){return t.baseState=a,pf(t,ft,typeof o=="function"?o:rr)}function W1(t,i,a,o,h){if(qu(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};Y.T!==null?a(!0):d.isTransition=!1,o(d),a=i.pending,a===null?(d.next=i.pending=d,Jp(i,d)):(d.next=a.next,i.pending=a.next=d)}}function Jp(t,i){var a=i.action,o=i.payload,h=t.state;if(i.isTransition){var d=Y.T,_={};Y.T=_;try{var E=a(h,o),I=Y.S;I!==null&&I(_,E),eg(t,i,E)}catch(j){vf(t,i,j)}finally{Y.T=d}}else try{d=a(h,o),eg(t,i,d)}catch(j){vf(t,i,j)}}function eg(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){tg(t,i,o)},function(o){return vf(t,i,o)}):tg(t,i,a)}function tg(t,i,a){i.status="fulfilled",i.value=a,ng(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Jp(t,a)))}function vf(t,i,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,ng(i),i=i.next;while(i!==o)}t.action=null}function ng(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function ig(t,i){return i}function rg(t,i){if(rt){var a=_t.formState;if(a!==null){e:{var o=He;if(rt){if(Nt){t:{for(var h=Nt,d=Ri;h.nodeType!==8;){if(!d){h=null;break t}if(h=di(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){Nt=di(h.nextSibling),o=h.data==="F!";break e}}Bs(o)}o=!1}o&&(i=a[0])}}return a=Nn(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ig,lastRenderedState:i},a.queue=o,a=Ag.bind(null,He,o),o.dispatch=a,o=yf(!1),d=Af.bind(null,He,!1,o.queue),o=Nn(),h={state:i,dispatch:null,action:t,pending:null},o.queue=h,a=W1.bind(null,He,h,d,a),h.dispatch=a,o.memoizedState=t,[i,a,!1]}function sg(t){var i=Bt();return ag(i,ft,t)}function ag(t,i,a){if(i=pf(t,i,ig)[0],t=Bu(rr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=Zo(i)}catch(_){throw _===Fo?Mu:_}else o=i;i=Bt();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(He.flags|=2048,Ma(9,zu(),J1.bind(null,h,a),null)),[o,d,t]}function J1(t,i){t.action=i}function og(t){var i=Bt(),a=ft;if(a!==null)return ag(i,a,t);Bt(),i=i.memoizedState,a=Bt();var o=a.queue.dispatch;return a.memoizedState=t,[i,o,!1]}function Ma(t,i,a,o){return t={tag:t,create:a,deps:o,inst:i,next:null},i=He.updateQueue,i===null&&(i=df(),He.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,i.lastEffect=t),t}function zu(){return{destroy:void 0,resource:void 0}}function lg(){return Bt().memoizedState}function ju(t,i,a,o){var h=Nn();o=o===void 0?null:o,He.flags|=t,h.memoizedState=Ma(1|i,zu(),a,o)}function Wo(t,i,a,o){var h=Bt();o=o===void 0?null:o;var d=h.memoizedState.inst;ft!==null&&o!==null&&lf(o,ft.memoizedState.deps)?h.memoizedState=Ma(i,d,a,o):(He.flags|=t,h.memoizedState=Ma(1|i,d,a,o))}function ug(t,i){ju(8390656,8,t,i)}function cg(t,i){Wo(2048,8,t,i)}function hg(t,i){return Wo(4,2,t,i)}function fg(t,i){return Wo(4,4,t,i)}function dg(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function mg(t,i,a){a=a!=null?a.concat([t]):null,Wo(4,4,dg.bind(null,i,t),a)}function _f(){}function pg(t,i){var a=Bt();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&lf(i,o[1])?o[0]:(a.memoizedState=[t,i],t)}function gg(t,i){var a=Bt();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&lf(i,o[1]))return o[0];if(o=t(),Hs){Sn(!0);try{t()}finally{Sn(!1)}}return a.memoizedState=[o,i],o}function Ef(t,i,a){return a===void 0||(Ur&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=_y(),He.lanes|=t,qr|=t,a)}function yg(t,i,a,o){return zn(a,i)?a:Da.current!==null?(t=Ef(t,a,o),zn(t,i)||(tn=!0),t):(Ur&42)===0?(tn=!0,t.memoizedState=a):(t=_y(),He.lanes|=t,qr|=t,i)}function vg(t,i,a,o,h){var d=ae.p;ae.p=d!==0&&8>d?d:8;var _=Y.T,E={};Y.T=E,Af(t,!1,i,a);try{var I=h(),j=Y.S;if(j!==null&&j(E,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var K=X1(I,o);Jo(t,i,K,Fn(t))}else Jo(t,i,o,Fn(t))}catch(Z){Jo(t,i,{then:function(){},status:"rejected",reason:Z},Fn())}finally{ae.p=d,Y.T=_}}function eT(){}function Tf(t,i,a,o){if(t.tag!==5)throw Error(s(476));var h=_g(t).queue;vg(t,h,i,pe,a===null?eT:function(){return Eg(t),a(o)})}function _g(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rr,lastRenderedState:pe},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rr,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Eg(t){var i=_g(t).next.queue;Jo(t,i,{},Fn())}function bf(){return vn(yl)}function Tg(){return Bt().memoizedState}function bg(){return Bt().memoizedState}function tT(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Fn();t=Mr(a);var o=Vr(i,t,a);o!==null&&(Qn(o,i,a),Yo(o,i,a)),i={cache:Zh()},t.payload=i;return}i=i.return}}function nT(t,i,a){var o=Fn();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},qu(t)?wg(i,a):(a=jh(t,i,a,o),a!==null&&(Qn(a,t,o),Sg(a,i,o)))}function Ag(t,i,a){var o=Fn();Jo(t,i,a,o)}function Jo(t,i,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(qu(t))wg(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,E=d(_,a);if(h.hasEagerState=!0,h.eagerState=E,zn(E,_))return Su(t,i,h,0),_t===null&&wu(),!1}catch{}finally{}if(a=jh(t,i,h,o),a!==null)return Qn(a,t,o),Sg(a,i,o),!0}return!1}function Af(t,i,a,o){if(o={lane:2,revertLane:td(),action:o,hasEagerState:!1,eagerState:null,next:null},qu(t)){if(i)throw Error(s(479))}else i=jh(t,a,o,2),i!==null&&Qn(i,t,2)}function qu(t){var i=t.alternate;return t===He||i!==null&&i===He}function wg(t,i){Na=Pu=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Sg(t,i,a){if((a&4194048)!==0){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,ve(t,a)}}var Hu={readContext:vn,use:Lu,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt},Rg={readContext:vn,use:Lu,useCallback:function(t,i){return Nn().memoizedState=[t,i===void 0?null:i],t},useContext:vn,useEffect:ug,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,ju(4194308,4,dg.bind(null,i,t),a)},useLayoutEffect:function(t,i){return ju(4194308,4,t,i)},useInsertionEffect:function(t,i){ju(4,2,t,i)},useMemo:function(t,i){var a=Nn();i=i===void 0?null:i;var o=t();if(Hs){Sn(!0);try{t()}finally{Sn(!1)}}return a.memoizedState=[o,i],o},useReducer:function(t,i,a){var o=Nn();if(a!==void 0){var h=a(i);if(Hs){Sn(!0);try{a(i)}finally{Sn(!1)}}}else h=i;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=nT.bind(null,He,t),[o.memoizedState,t]},useRef:function(t){var i=Nn();return t={current:t},i.memoizedState=t},useState:function(t){t=yf(t);var i=t.queue,a=Ag.bind(null,He,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:_f,useDeferredValue:function(t,i){var a=Nn();return Ef(a,t,i)},useTransition:function(){var t=yf(!1);return t=vg.bind(null,He,t.queue,!0,!1),Nn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var o=He,h=Nn();if(rt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),_t===null)throw Error(s(349));(Je&124)!==0||Yp(o,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,ug(Xp.bind(null,o,d,t),[t]),o.flags|=2048,Ma(9,zu(),Kp.bind(null,o,d,a,i),null),a},useId:function(){var t=Nn(),i=_t.identifierPrefix;if(rt){var a=tr,o=er;a=(o&~(1<<32-Zt(o)-1)).toString(32)+a,i=""+i+"R"+a,a=ku++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=$1++,i=""+i+"r"+a.toString(32)+"";return t.memoizedState=i},useHostTransitionStatus:bf,useFormState:rg,useActionState:rg,useOptimistic:function(t){var i=Nn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Af.bind(null,He,!0,a),a.dispatch=i,[t,i]},useMemoCache:mf,useCacheRefresh:function(){return Nn().memoizedState=tT.bind(null,He)}},Ig={readContext:vn,use:Lu,useCallback:pg,useContext:vn,useEffect:cg,useImperativeHandle:mg,useInsertionEffect:hg,useLayoutEffect:fg,useMemo:gg,useReducer:Bu,useRef:lg,useState:function(){return Bu(rr)},useDebugValue:_f,useDeferredValue:function(t,i){var a=Bt();return yg(a,ft.memoizedState,t,i)},useTransition:function(){var t=Bu(rr)[0],i=Bt().memoizedState;return[typeof t=="boolean"?t:Zo(t),i]},useSyncExternalStore:Qp,useId:Tg,useHostTransitionStatus:bf,useFormState:sg,useActionState:sg,useOptimistic:function(t,i){var a=Bt();return Wp(a,ft,t,i)},useMemoCache:mf,useCacheRefresh:bg},iT={readContext:vn,use:Lu,useCallback:pg,useContext:vn,useEffect:cg,useImperativeHandle:mg,useInsertionEffect:hg,useLayoutEffect:fg,useMemo:gg,useReducer:gf,useRef:lg,useState:function(){return gf(rr)},useDebugValue:_f,useDeferredValue:function(t,i){var a=Bt();return ft===null?Ef(a,t,i):yg(a,ft.memoizedState,t,i)},useTransition:function(){var t=gf(rr)[0],i=Bt().memoizedState;return[typeof t=="boolean"?t:Zo(t),i]},useSyncExternalStore:Qp,useId:Tg,useHostTransitionStatus:bf,useFormState:og,useActionState:og,useOptimistic:function(t,i){var a=Bt();return ft!==null?Wp(a,ft,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:mf,useCacheRefresh:bg},Va=null,el=0;function Gu(t){var i=el;return el+=1,Va===null&&(Va=[]),Lp(Va,t,i)}function tl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Fu(t,i){throw i.$$typeof===R?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Cg(t){var i=t._init;return i(t._payload)}function xg(t){function i(k,M){if(t){var z=k.deletions;z===null?(k.deletions=[M],k.flags|=16):z.push(M)}}function a(k,M){if(!t)return null;for(;M!==null;)i(k,M),M=M.sibling;return null}function o(k){for(var M=new Map;k!==null;)k.key!==null?M.set(k.key,k):M.set(k.index,k),k=k.sibling;return M}function h(k,M){return k=Ji(k,M),k.index=0,k.sibling=null,k}function d(k,M,z){return k.index=z,t?(z=k.alternate,z!==null?(z=z.index,z<M?(k.flags|=67108866,M):z):(k.flags|=67108866,M)):(k.flags|=1048576,M)}function _(k){return t&&k.alternate===null&&(k.flags|=67108866),k}function E(k,M,z,X){return M===null||M.tag!==6?(M=Hh(z,k.mode,X),M.return=k,M):(M=h(M,z),M.return=k,M)}function I(k,M,z,X){var de=z.type;return de===ne?K(k,M,z.props.children,X,z.key):M!==null&&(M.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===w&&Cg(de)===M.type)?(M=h(M,z.props),tl(M,z),M.return=k,M):(M=Iu(z.type,z.key,z.props,null,k.mode,X),tl(M,z),M.return=k,M)}function j(k,M,z,X){return M===null||M.tag!==4||M.stateNode.containerInfo!==z.containerInfo||M.stateNode.implementation!==z.implementation?(M=Gh(z,k.mode,X),M.return=k,M):(M=h(M,z.children||[]),M.return=k,M)}function K(k,M,z,X,de){return M===null||M.tag!==7?(M=Us(z,k.mode,X,de),M.return=k,M):(M=h(M,z),M.return=k,M)}function Z(k,M,z){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Hh(""+M,k.mode,z),M.return=k,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case D:return z=Iu(M.type,M.key,M.props,null,k.mode,z),tl(z,M),z.return=k,z;case F:return M=Gh(M,k.mode,z),M.return=k,M;case w:var X=M._init;return M=X(M._payload),Z(k,M,z)}if(bt(M)||P(M))return M=Us(M,k.mode,z,null),M.return=k,M;if(typeof M.then=="function")return Z(k,Gu(M),z);if(M.$$typeof===Te)return Z(k,Nu(k,M),z);Fu(k,M)}return null}function q(k,M,z,X){var de=M!==null?M.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return de!==null?null:E(k,M,""+z,X);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case D:return z.key===de?I(k,M,z,X):null;case F:return z.key===de?j(k,M,z,X):null;case w:return de=z._init,z=de(z._payload),q(k,M,z,X)}if(bt(z)||P(z))return de!==null?null:K(k,M,z,X,null);if(typeof z.then=="function")return q(k,M,Gu(z),X);if(z.$$typeof===Te)return q(k,M,Nu(k,z),X);Fu(k,z)}return null}function G(k,M,z,X,de){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return k=k.get(z)||null,E(M,k,""+X,de);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case D:return k=k.get(X.key===null?z:X.key)||null,I(M,k,X,de);case F:return k=k.get(X.key===null?z:X.key)||null,j(M,k,X,de);case w:var Qe=X._init;return X=Qe(X._payload),G(k,M,z,X,de)}if(bt(X)||P(X))return k=k.get(z)||null,K(M,k,X,de,null);if(typeof X.then=="function")return G(k,M,z,Gu(X),de);if(X.$$typeof===Te)return G(k,M,z,Nu(M,X),de);Fu(M,X)}return null}function Ne(k,M,z,X){for(var de=null,Qe=null,Ee=M,Ie=M=0,rn=null;Ee!==null&&Ie<z.length;Ie++){Ee.index>Ie?(rn=Ee,Ee=null):rn=Ee.sibling;var nt=q(k,Ee,z[Ie],X);if(nt===null){Ee===null&&(Ee=rn);break}t&&Ee&&nt.alternate===null&&i(k,Ee),M=d(nt,M,Ie),Qe===null?de=nt:Qe.sibling=nt,Qe=nt,Ee=rn}if(Ie===z.length)return a(k,Ee),rt&&ks(k,Ie),de;if(Ee===null){for(;Ie<z.length;Ie++)Ee=Z(k,z[Ie],X),Ee!==null&&(M=d(Ee,M,Ie),Qe===null?de=Ee:Qe.sibling=Ee,Qe=Ee);return rt&&ks(k,Ie),de}for(Ee=o(Ee);Ie<z.length;Ie++)rn=G(Ee,k,Ie,z[Ie],X),rn!==null&&(t&&rn.alternate!==null&&Ee.delete(rn.key===null?Ie:rn.key),M=d(rn,M,Ie),Qe===null?de=rn:Qe.sibling=rn,Qe=rn);return t&&Ee.forEach(function(Zr){return i(k,Zr)}),rt&&ks(k,Ie),de}function Re(k,M,z,X){if(z==null)throw Error(s(151));for(var de=null,Qe=null,Ee=M,Ie=M=0,rn=null,nt=z.next();Ee!==null&&!nt.done;Ie++,nt=z.next()){Ee.index>Ie?(rn=Ee,Ee=null):rn=Ee.sibling;var Zr=q(k,Ee,nt.value,X);if(Zr===null){Ee===null&&(Ee=rn);break}t&&Ee&&Zr.alternate===null&&i(k,Ee),M=d(Zr,M,Ie),Qe===null?de=Zr:Qe.sibling=Zr,Qe=Zr,Ee=rn}if(nt.done)return a(k,Ee),rt&&ks(k,Ie),de;if(Ee===null){for(;!nt.done;Ie++,nt=z.next())nt=Z(k,nt.value,X),nt!==null&&(M=d(nt,M,Ie),Qe===null?de=nt:Qe.sibling=nt,Qe=nt);return rt&&ks(k,Ie),de}for(Ee=o(Ee);!nt.done;Ie++,nt=z.next())nt=G(Ee,k,Ie,nt.value,X),nt!==null&&(t&&nt.alternate!==null&&Ee.delete(nt.key===null?Ie:nt.key),M=d(nt,M,Ie),Qe===null?de=nt:Qe.sibling=nt,Qe=nt);return t&&Ee.forEach(function(rb){return i(k,rb)}),rt&&ks(k,Ie),de}function mt(k,M,z,X){if(typeof z=="object"&&z!==null&&z.type===ne&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case D:e:{for(var de=z.key;M!==null;){if(M.key===de){if(de=z.type,de===ne){if(M.tag===7){a(k,M.sibling),X=h(M,z.props.children),X.return=k,k=X;break e}}else if(M.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===w&&Cg(de)===M.type){a(k,M.sibling),X=h(M,z.props),tl(X,z),X.return=k,k=X;break e}a(k,M);break}else i(k,M);M=M.sibling}z.type===ne?(X=Us(z.props.children,k.mode,X,z.key),X.return=k,k=X):(X=Iu(z.type,z.key,z.props,null,k.mode,X),tl(X,z),X.return=k,k=X)}return _(k);case F:e:{for(de=z.key;M!==null;){if(M.key===de)if(M.tag===4&&M.stateNode.containerInfo===z.containerInfo&&M.stateNode.implementation===z.implementation){a(k,M.sibling),X=h(M,z.children||[]),X.return=k,k=X;break e}else{a(k,M);break}else i(k,M);M=M.sibling}X=Gh(z,k.mode,X),X.return=k,k=X}return _(k);case w:return de=z._init,z=de(z._payload),mt(k,M,z,X)}if(bt(z))return Ne(k,M,z,X);if(P(z)){if(de=P(z),typeof de!="function")throw Error(s(150));return z=de.call(z),Re(k,M,z,X)}if(typeof z.then=="function")return mt(k,M,Gu(z),X);if(z.$$typeof===Te)return mt(k,M,Nu(k,z),X);Fu(k,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,M!==null&&M.tag===6?(a(k,M.sibling),X=h(M,z),X.return=k,k=X):(a(k,M),X=Hh(z,k.mode,X),X.return=k,k=X),_(k)):a(k,M)}return function(k,M,z,X){try{el=0;var de=mt(k,M,z,X);return Va=null,de}catch(Ee){if(Ee===Fo||Ee===Mu)throw Ee;var Qe=jn(29,Ee,null,k.mode);return Qe.lanes=X,Qe.return=k,Qe}finally{}}}var Ua=xg(!0),Dg=xg(!1),ii=ee(null),Ii=null;function Pr(t){var i=t.alternate;ie(Qt,Qt.current&1),ie(ii,t),Ii===null&&(i===null||Da.current!==null||i.memoizedState!==null)&&(Ii=t)}function Ng(t){if(t.tag===22){if(ie(Qt,Qt.current),ie(ii,t),Ii===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(Ii=t)}}else kr()}function kr(){ie(Qt,Qt.current),ie(ii,ii.current)}function sr(t){oe(ii),Ii===t&&(Ii=null),oe(Qt)}var Qt=ee(0);function Qu(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||dd(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function wf(t,i,a,o){i=t.memoizedState,a=a(o,i),a=a==null?i:T({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Sf={enqueueSetState:function(t,i,a){t=t._reactInternals;var o=Fn(),h=Mr(o);h.payload=i,a!=null&&(h.callback=a),i=Vr(t,h,o),i!==null&&(Qn(i,t,o),Yo(i,t,o))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var o=Fn(),h=Mr(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Vr(t,h,o),i!==null&&(Qn(i,t,o),Yo(i,t,o))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Fn(),o=Mr(a);o.tag=2,i!=null&&(o.callback=i),i=Vr(t,o,a),i!==null&&(Qn(i,t,a),Yo(i,t,a))}};function Og(t,i,a,o,h,d,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,d,_):i.prototype&&i.prototype.isPureReactComponent?!ko(a,o)||!ko(h,d):!0}function Mg(t,i,a,o){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==t&&Sf.enqueueReplaceState(i,i.state,null)}function Gs(t,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(t=t.defaultProps){a===i&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var Yu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Vg(t){Yu(t)}function Ug(t){console.error(t)}function Pg(t){Yu(t)}function Ku(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function kg(t,i,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Rf(t,i,a){return a=Mr(a),a.tag=3,a.payload={element:null},a.callback=function(){Ku(t,i)},a}function Lg(t){return t=Mr(t),t.tag=3,t}function Bg(t,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;t.payload=function(){return h(d)},t.callback=function(){kg(i,a,o)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){kg(i,a,o),typeof h!="function"&&(Hr===null?Hr=new Set([this]):Hr.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function rT(t,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&qo(i,a,h,!0),a=ii.current,a!==null){switch(a.tag){case 13:return Ii===null?$f():a.alternate===null&&Ot===0&&(Ot=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===ef?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),Wf(t,o,h)),!1;case 22:return a.flags|=65536,o===ef?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),Wf(t,o,h)),!1}throw Error(s(435,a.tag))}return Wf(t,o,h),$f(),!1}if(rt)return i=ii.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==Yh&&(t=Error(s(422),{cause:o}),jo(Jn(t,a)))):(o!==Yh&&(i=Error(s(423),{cause:o}),jo(Jn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=Jn(o,a),h=Rf(t.stateNode,o,h),rf(t,h),Ot!==4&&(Ot=2)),!1;var d=Error(s(520),{cause:o});if(d=Jn(d,a),ll===null?ll=[d]:ll.push(d),Ot!==4&&(Ot=2),i===null)return!0;o=Jn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Rf(a.stateNode,o,t),rf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Hr===null||!Hr.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Lg(h),Bg(h,t,a,o),rf(a,h),!1}a=a.return}while(a!==null);return!1}var zg=Error(s(461)),tn=!1;function cn(t,i,a,o){i.child=t===null?Dg(i,null,a,o):Ua(i,t.child,a,o)}function jg(t,i,a,o,h){a=a.render;var d=i.ref;if("ref"in o){var _={};for(var E in o)E!=="ref"&&(_[E]=o[E])}else _=o;return js(i),o=uf(t,i,a,_,d,h),E=cf(),t!==null&&!tn?(hf(t,i,h),ar(t,i,h)):(rt&&E&&Fh(i),i.flags|=1,cn(t,i,o,h),i.child)}function qg(t,i,a,o,h){if(t===null){var d=a.type;return typeof d=="function"&&!qh(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Hg(t,i,d,o,h)):(t=Iu(a.type,null,o,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!Vf(t,h)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:ko,a(_,o)&&t.ref===i.ref)return ar(t,i,h)}return i.flags|=1,t=Ji(d,o),t.ref=i.ref,t.return=i,i.child=t}function Hg(t,i,a,o,h){if(t!==null){var d=t.memoizedProps;if(ko(d,o)&&t.ref===i.ref)if(tn=!1,i.pendingProps=o=d,Vf(t,h))(t.flags&131072)!==0&&(tn=!0);else return i.lanes=t.lanes,ar(t,i,h)}return If(t,i,a,o,h)}function Gg(t,i,a){var o=i.pendingProps,h=o.children,d=t!==null?t.memoizedState:null;if(o.mode==="hidden"){if((i.flags&128)!==0){if(o=d!==null?d.baseLanes|a:a,t!==null){for(h=i.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~o}else i.childLanes=0,i.child=null;return Fg(t,i,o,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ou(i,d!==null?d.cachePool:null),d!==null?Hp(i,d):af(),Ng(i);else return i.lanes=i.childLanes=536870912,Fg(t,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(Ou(i,d.cachePool),Hp(i,d),kr(),i.memoizedState=null):(t!==null&&Ou(i,null),af(),kr());return cn(t,i,h,a),i.child}function Fg(t,i,a,o){var h=Jh();return h=h===null?null:{parent:Ft._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&Ou(i,null),af(),Ng(i),t!==null&&qo(t,i,o,!0),null}function Xu(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function If(t,i,a,o,h){return js(i),a=uf(t,i,a,o,void 0,h),o=cf(),t!==null&&!tn?(hf(t,i,h),ar(t,i,h)):(rt&&o&&Fh(i),i.flags|=1,cn(t,i,a,h),i.child)}function Qg(t,i,a,o,h,d){return js(i),i.updateQueue=null,a=Fp(i,o,a,h),Gp(t),o=cf(),t!==null&&!tn?(hf(t,i,d),ar(t,i,d)):(rt&&o&&Fh(i),i.flags|=1,cn(t,i,a,d),i.child)}function Yg(t,i,a,o,h){if(js(i),i.stateNode===null){var d=Sa,_=a.contextType;typeof _=="object"&&_!==null&&(d=vn(_)),d=new a(o,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Sf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=o,d.state=i.memoizedState,d.refs={},tf(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?vn(_):Sa,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(wf(i,a,_,o),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Sf.enqueueReplaceState(d,d.state,null),Xo(i,o,d,h),Ko(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(t===null){d=i.stateNode;var E=i.memoizedProps,I=Gs(a,E);d.props=I;var j=d.context,K=a.contextType;_=Sa,typeof K=="object"&&K!==null&&(_=vn(K));var Z=a.getDerivedStateFromProps;K=typeof Z=="function"||typeof d.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,K||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E||j!==_)&&Mg(i,d,o,_),Or=!1;var q=i.memoizedState;d.state=q,Xo(i,o,d,h),Ko(),j=i.memoizedState,E||q!==j||Or?(typeof Z=="function"&&(wf(i,a,Z,o),j=i.memoizedState),(I=Or||Og(i,a,I,o,q,j,_))?(K||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=j),d.props=o,d.state=j,d.context=_,o=I):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{d=i.stateNode,nf(t,i),_=i.memoizedProps,K=Gs(a,_),d.props=K,Z=i.pendingProps,q=d.context,j=a.contextType,I=Sa,typeof j=="object"&&j!==null&&(I=vn(j)),E=a.getDerivedStateFromProps,(j=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==Z||q!==I)&&Mg(i,d,o,I),Or=!1,q=i.memoizedState,d.state=q,Xo(i,o,d,h),Ko();var G=i.memoizedState;_!==Z||q!==G||Or||t!==null&&t.dependencies!==null&&Du(t.dependencies)?(typeof E=="function"&&(wf(i,a,E,o),G=i.memoizedState),(K=Or||Og(i,a,K,o,q,G,I)||t!==null&&t.dependencies!==null&&Du(t.dependencies))?(j||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,G,I),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,G,I)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=G),d.props=o,d.state=G,d.context=I,o=K):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),o=!1)}return d=o,Xu(t,i),o=(i.flags&128)!==0,d||o?(d=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&o?(i.child=Ua(i,t.child,null,h),i.child=Ua(i,null,a,h)):cn(t,i,a,h),i.memoizedState=d.state,t=i.child):t=ar(t,i,h),t}function Kg(t,i,a,o){return zo(),i.flags|=256,cn(t,i,a,o),i.child}var Cf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xf(t){return{baseLanes:t,cachePool:Up()}}function Df(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=ri),t}function Xg(t,i,a){var o=i.pendingProps,h=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=t!==null&&t.memoizedState===null?!1:(Qt.current&2)!==0),_&&(h=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,t===null){if(rt){if(h?Pr(i):kr(),rt){var E=Nt,I;if(I=E){e:{for(I=E,E=Ri;I.nodeType!==8;){if(!E){E=null;break e}if(I=di(I.nextSibling),I===null){E=null;break e}}E=I}E!==null?(i.memoizedState={dehydrated:E,treeContext:Ps!==null?{id:er,overflow:tr}:null,retryLane:536870912,hydrationErrors:null},I=jn(18,null,null,0),I.stateNode=E,I.return=i,i.child=I,Cn=i,Nt=null,I=!0):I=!1}I||Bs(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return dd(E)?i.lanes=32:i.lanes=536870912,null;sr(i)}return E=o.children,o=o.fallback,h?(kr(),h=i.mode,E=$u({mode:"hidden",children:E},h),o=Us(o,h,a,null),E.return=i,o.return=i,E.sibling=o,i.child=E,h=i.child,h.memoizedState=xf(a),h.childLanes=Df(t,_,a),i.memoizedState=Cf,o):(Pr(i),Nf(i,E))}if(I=t.memoizedState,I!==null&&(E=I.dehydrated,E!==null)){if(d)i.flags&256?(Pr(i),i.flags&=-257,i=Of(t,i,a)):i.memoizedState!==null?(kr(),i.child=t.child,i.flags|=128,i=null):(kr(),h=o.fallback,E=i.mode,o=$u({mode:"visible",children:o.children},E),h=Us(h,E,a,null),h.flags|=2,o.return=i,h.return=i,o.sibling=h,i.child=o,Ua(i,t.child,null,a),o=i.child,o.memoizedState=xf(a),o.childLanes=Df(t,_,a),i.memoizedState=Cf,i=h);else if(Pr(i),dd(E)){if(_=E.nextSibling&&E.nextSibling.dataset,_)var j=_.dgst;_=j,o=Error(s(419)),o.stack="",o.digest=_,jo({value:o,source:null,stack:null}),i=Of(t,i,a)}else if(tn||qo(t,i,a,!1),_=(a&t.childLanes)!==0,tn||_){if(_=_t,_!==null&&(o=a&-a,o=(o&42)!==0?1:he(o),o=(o&(_.suspendedLanes|a))!==0?0:o,o!==0&&o!==I.retryLane))throw I.retryLane=o,wa(t,o),Qn(_,t,o),zg;E.data==="$?"||$f(),i=Of(t,i,a)}else E.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=I.treeContext,Nt=di(E.nextSibling),Cn=i,rt=!0,Ls=null,Ri=!1,t!==null&&(ti[ni++]=er,ti[ni++]=tr,ti[ni++]=Ps,er=t.id,tr=t.overflow,Ps=i),i=Nf(i,o.children),i.flags|=4096);return i}return h?(kr(),h=o.fallback,E=i.mode,I=t.child,j=I.sibling,o=Ji(I,{mode:"hidden",children:o.children}),o.subtreeFlags=I.subtreeFlags&65011712,j!==null?h=Ji(j,h):(h=Us(h,E,a,null),h.flags|=2),h.return=i,o.return=i,o.sibling=h,i.child=o,o=h,h=i.child,E=t.child.memoizedState,E===null?E=xf(a):(I=E.cachePool,I!==null?(j=Ft._currentValue,I=I.parent!==j?{parent:j,pool:j}:I):I=Up(),E={baseLanes:E.baseLanes|a,cachePool:I}),h.memoizedState=E,h.childLanes=Df(t,_,a),i.memoizedState=Cf,o):(Pr(i),a=t.child,t=a.sibling,a=Ji(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,t!==null&&(_=i.deletions,_===null?(i.deletions=[t],i.flags|=16):_.push(t)),i.child=a,i.memoizedState=null,a)}function Nf(t,i){return i=$u({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function $u(t,i){return t=jn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Of(t,i,a){return Ua(i,t.child,null,a),t=Nf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function $g(t,i,a){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i),Xh(t.return,i,a)}function Mf(t,i,a,o,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=a,d.tailMode=h)}function Zg(t,i,a){var o=i.pendingProps,h=o.revealOrder,d=o.tail;if(cn(t,i,o.children,a),o=Qt.current,(o&2)!==0)o=o&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$g(t,a,i);else if(t.tag===19)$g(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}switch(ie(Qt,o),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&Qu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Mf(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&Qu(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Mf(i,!0,a,null,d);break;case"together":Mf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ar(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),qr|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(qo(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=Ji(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Ji(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Vf(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Du(t)))}function sT(t,i,a){switch(i.tag){case 3:Fe(i,i.stateNode.containerInfo),Nr(i,Ft,t.memoizedState.cache),zo();break;case 27:case 5:Dt(i);break;case 4:Fe(i,i.stateNode.containerInfo);break;case 10:Nr(i,i.type,i.memoizedProps.value);break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(Pr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Xg(t,i,a):(Pr(i),t=ar(t,i,a),t!==null?t.sibling:null);Pr(i);break;case 19:var h=(t.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(qo(t,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return Zg(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ie(Qt,Qt.current),o)break;return null;case 22:case 23:return i.lanes=0,Gg(t,i,a);case 24:Nr(i,Ft,t.memoizedState.cache)}return ar(t,i,a)}function Wg(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)tn=!0;else{if(!Vf(t,a)&&(i.flags&128)===0)return tn=!1,sT(t,i,a);tn=(t.flags&131072)!==0}else tn=!1,rt&&(i.flags&1048576)!==0&&Cp(i,xu,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var o=i.elementType,h=o._init;if(o=h(o._payload),i.type=o,typeof o=="function")qh(o)?(t=Gs(o,t),i.tag=1,i=Yg(null,i,o,t,a)):(i.tag=0,i=If(null,i,o,t,a));else{if(o!=null){if(h=o.$$typeof,h===Ue){i.tag=11,i=jg(null,i,o,t,a);break e}else if(h===x){i.tag=14,i=qg(null,i,o,t,a);break e}}throw i=It(o)||o,Error(s(306,i,""))}}return i;case 0:return If(t,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=Gs(o,i.pendingProps),Yg(t,i,o,h,a);case 3:e:{if(Fe(i,i.stateNode.containerInfo),t===null)throw Error(s(387));o=i.pendingProps;var d=i.memoizedState;h=d.element,nf(t,i),Xo(i,o,null,a);var _=i.memoizedState;if(o=_.cache,Nr(i,Ft,o),o!==d.cache&&$h(i,[Ft],a,!0),Ko(),o=_.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Kg(t,i,o,a);break e}else if(o!==h){h=Jn(Error(s(424)),i),jo(h),i=Kg(t,i,o,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Nt=di(t.firstChild),Cn=i,rt=!0,Ls=null,Ri=!0,a=Dg(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(zo(),o===h){i=ar(t,i,a);break e}cn(t,i,o,a)}i=i.child}return i;case 26:return Xu(t,i),t===null?(a=nv(i.type,null,i.pendingProps,null))?i.memoizedState=a:rt||(a=i.type,t=i.pendingProps,o=cc(Se.current).createElement(a),o[ye]=i,o[me]=t,fn(o,a,t),gt(o),i.stateNode=o):i.memoizedState=nv(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Dt(i),t===null&&rt&&(o=i.stateNode=Jy(i.type,i.pendingProps,Se.current),Cn=i,Ri=!0,h=Nt,Qr(i.type)?(md=h,Nt=di(o.firstChild)):Nt=h),cn(t,i,i.pendingProps.children,a),Xu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&rt&&((h=o=Nt)&&(o=MT(o,i.type,i.pendingProps,Ri),o!==null?(i.stateNode=o,Cn=i,Nt=di(o.firstChild),Ri=!1,h=!0):h=!1),h||Bs(i)),Dt(i),h=i.type,d=i.pendingProps,_=t!==null?t.memoizedProps:null,o=d.children,cd(h,d)?o=null:_!==null&&cd(h,_)&&(i.flags|=32),i.memoizedState!==null&&(h=uf(t,i,Z1,null,null,a),yl._currentValue=h),Xu(t,i),cn(t,i,o,a),i.child;case 6:return t===null&&rt&&((t=a=Nt)&&(a=VT(a,i.pendingProps,Ri),a!==null?(i.stateNode=a,Cn=i,Nt=null,t=!0):t=!1),t||Bs(i)),null;case 13:return Xg(t,i,a);case 4:return Fe(i,i.stateNode.containerInfo),o=i.pendingProps,t===null?i.child=Ua(i,null,o,a):cn(t,i,o,a),i.child;case 11:return jg(t,i,i.type,i.pendingProps,a);case 7:return cn(t,i,i.pendingProps,a),i.child;case 8:return cn(t,i,i.pendingProps.children,a),i.child;case 12:return cn(t,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,Nr(i,i.type,o.value),cn(t,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,js(i),h=vn(h),o=o(h),i.flags|=1,cn(t,i,o,a),i.child;case 14:return qg(t,i,i.type,i.pendingProps,a);case 15:return Hg(t,i,i.type,i.pendingProps,a);case 19:return Zg(t,i,a);case 31:return o=i.pendingProps,a=i.mode,o={mode:o.mode,children:o.children},t===null?(a=$u(o,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Ji(t.child,o),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Gg(t,i,a);case 24:return js(i),o=vn(Ft),t===null?(h=Jh(),h===null&&(h=_t,d=Zh(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:o,cache:h},tf(i),Nr(i,Ft,h)):((t.lanes&a)!==0&&(nf(t,i),Xo(i,null,null,a),Ko()),h=t.memoizedState,d=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Nr(i,Ft,o)):(o=d.cache,Nr(i,Ft,o),o!==h.cache&&$h(i,[Ft],a,!0))),cn(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function or(t){t.flags|=4}function Jg(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!ov(i)){if(i=ii.current,i!==null&&((Je&4194048)===Je?Ii!==null:(Je&62914560)!==Je&&(Je&536870912)===0||i!==Ii))throw Qo=ef,Pp;t.flags|=8192}}function Zu(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?A():536870912,t.lanes|=i,Ba|=i)}function nl(t,i){if(!rt)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Ct(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,i}function aT(t,i,a){var o=i.pendingProps;switch(Qh(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(i),null;case 1:return Ct(i),null;case 3:return a=i.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ir(Ft),Pe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Bo(i)?or(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Np())),Ct(i),null;case 26:return a=i.memoizedState,t===null?(or(i),a!==null?(Ct(i),Jg(i,a)):(Ct(i),i.flags&=-16777217)):a?a!==t.memoizedState?(or(i),Ct(i),Jg(i,a)):(Ct(i),i.flags&=-16777217):(t.memoizedProps!==o&&or(i),Ct(i),i.flags&=-16777217),null;case 27:an(i),a=Se.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==o&&or(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return Ct(i),null}t=_e.current,Bo(i)?xp(i):(t=Jy(h,o,a),i.stateNode=t,or(i))}return Ct(i),null;case 5:if(an(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&or(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return Ct(i),null}if(t=_e.current,Bo(i))xp(i);else{switch(h=cc(Se.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?t.multiple=!0:o.size&&(t.size=o.size);break;default:t=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}t[ye]=i,t[me]=o;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(fn(t,a,o),a){case"button":case"input":case"select":case"textarea":t=!!o.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&or(i)}}return Ct(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==o&&or(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(t=Se.current,Bo(i)){if(t=i.stateNode,a=i.memoizedProps,o=null,h=Cn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[ye]=i,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||Qy(t.nodeValue,a)),t||Bs(i)}else t=cc(t).createTextNode(o),t[ye]=i,i.stateNode=t}return Ct(i),null;case 13:if(o=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Bo(i),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[ye]=i}else zo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ct(i),h=!1}else h=Np(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(sr(i),i):(sr(i),null)}if(sr(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=o!==null,t=t!==null&&t.memoizedState!==null,a){o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var d=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),Zu(i,i.updateQueue),Ct(i),null;case 4:return Pe(),t===null&&sd(i.stateNode.containerInfo),Ct(i),null;case 10:return ir(i.type),Ct(i),null;case 19:if(oe(Qt),h=i.memoizedState,h===null)return Ct(i),null;if(o=(i.flags&128)!==0,d=h.rendering,d===null)if(o)nl(h,!1);else{if(Ot!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=Qu(t),d!==null){for(i.flags|=128,nl(h,!1),t=d.updateQueue,i.updateQueue=t,Zu(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Ip(a,t),a=a.sibling;return ie(Qt,Qt.current&1|2),i.child}t=t.sibling}h.tail!==null&&pt()>ec&&(i.flags|=128,o=!0,nl(h,!1),i.lanes=4194304)}else{if(!o)if(t=Qu(d),t!==null){if(i.flags|=128,o=!0,t=t.updateQueue,i.updateQueue=t,Zu(i,t),nl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!rt)return Ct(i),null}else 2*pt()-h.renderingStartTime>ec&&a!==536870912&&(i.flags|=128,o=!0,nl(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(t=h.last,t!==null?t.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=pt(),i.sibling=null,t=Qt.current,ie(Qt,o?t&1|2:t&1),i):(Ct(i),null);case 22:case 23:return sr(i),of(),o=i.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(Ct(i),i.subtreeFlags&6&&(i.flags|=8192)):Ct(i),a=i.updateQueue,a!==null&&Zu(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),t!==null&&oe(qs),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ir(Ft),Ct(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function oT(t,i){switch(Qh(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return ir(Ft),Pe(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return an(i),null;case 13:if(sr(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));zo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return oe(Qt),null;case 4:return Pe(),null;case 10:return ir(i.type),null;case 22:case 23:return sr(i),of(),t!==null&&oe(qs),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return ir(Ft),null;case 25:return null;default:return null}}function ey(t,i){switch(Qh(i),i.tag){case 3:ir(Ft),Pe();break;case 26:case 27:case 5:an(i);break;case 4:Pe();break;case 13:sr(i);break;case 19:oe(Qt);break;case 10:ir(i.type);break;case 22:case 23:sr(i),of(),t!==null&&oe(qs);break;case 24:ir(Ft)}}function il(t,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var d=a.create,_=a.inst;o=d(),_.destroy=o}a=a.next}while(a!==h)}}catch(E){yt(i,i.return,E)}}function Lr(t,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&t)===t){var _=o.inst,E=_.destroy;if(E!==void 0){_.destroy=void 0,h=i;var I=a,j=E;try{j()}catch(K){yt(h,I,K)}}}o=o.next}while(o!==d)}}catch(K){yt(i,i.return,K)}}function ty(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{qp(i,a)}catch(o){yt(t,t.return,o)}}}function ny(t,i,a){a.props=Gs(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){yt(t,i,o)}}function rl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){yt(t,i,h)}}function Ci(t,i){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){yt(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){yt(t,i,h)}else a.current=null}function iy(t){var i=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){yt(t,t.return,h)}}function Uf(t,i,a){try{var o=t.stateNode;CT(o,t.type,a,i),o[me]=i}catch(h){yt(t,t.return,h)}}function ry(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Qr(t.type)||t.tag===4}function Pf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ry(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Qr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kf(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=uc));else if(o!==4&&(o===27&&Qr(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(kf(t,i,a),t=t.sibling;t!==null;)kf(t,i,a),t=t.sibling}function Wu(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(o!==4&&(o===27&&Qr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Wu(t,i,a),t=t.sibling;t!==null;)Wu(t,i,a),t=t.sibling}function sy(t){var i=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);fn(i,o,a),i[ye]=t,i[me]=a}catch(d){yt(t,t.return,d)}}var lr=!1,Vt=!1,Lf=!1,ay=typeof WeakSet=="function"?WeakSet:Set,nn=null;function lT(t,i){if(t=t.containerInfo,ld=gc,t=yp(t),Uh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,E=-1,I=-1,j=0,K=0,Z=t,q=null;t:for(;;){for(var G;Z!==a||h!==0&&Z.nodeType!==3||(E=_+h),Z!==d||o!==0&&Z.nodeType!==3||(I=_+o),Z.nodeType===3&&(_+=Z.nodeValue.length),(G=Z.firstChild)!==null;)q=Z,Z=G;for(;;){if(Z===t)break t;if(q===a&&++j===h&&(E=_),q===d&&++K===o&&(I=_),(G=Z.nextSibling)!==null)break;Z=q,q=Z.parentNode}Z=G}a=E===-1||I===-1?null:{start:E,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(ud={focusedElem:t,selectionRange:a},gc=!1,nn=i;nn!==null;)if(i=nn,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,nn=t;else for(;nn!==null;){switch(i=nn,d=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,o=a.stateNode;try{var Ne=Gs(a.type,h,a.elementType===a.type);t=o.getSnapshotBeforeUpdate(Ne,d),o.__reactInternalSnapshotBeforeUpdate=t}catch(Re){yt(a,a.return,Re)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)fd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":fd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,nn=t;break}nn=i.return}}function oy(t,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Br(t,a),o&4&&il(5,a);break;case 1:if(Br(t,a),o&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(_){yt(a,a.return,_)}else{var h=Gs(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(_){yt(a,a.return,_)}}o&64&&ty(a),o&512&&rl(a,a.return);break;case 3:if(Br(t,a),o&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{qp(t,i)}catch(_){yt(a,a.return,_)}}break;case 27:i===null&&o&4&&sy(a);case 26:case 5:Br(t,a),i===null&&o&4&&iy(a),o&512&&rl(a,a.return);break;case 12:Br(t,a);break;case 13:Br(t,a),o&4&&cy(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=yT.bind(null,a),UT(t,a))));break;case 22:if(o=a.memoizedState!==null||lr,!o){i=i!==null&&i.memoizedState!==null||Vt,h=lr;var d=Vt;lr=o,(Vt=i)&&!d?zr(t,a,(a.subtreeFlags&8772)!==0):Br(t,a),lr=h,Vt=d}break;case 30:break;default:Br(t,a)}}function ly(t){var i=t.alternate;i!==null&&(t.alternate=null,ly(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&je(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Rt=null,On=!1;function ur(t,i,a){for(a=a.child;a!==null;)uy(t,i,a),a=a.sibling}function uy(t,i,a){if(it&&typeof it.onCommitFiberUnmount=="function")try{it.onCommitFiberUnmount(wt,a)}catch{}switch(a.tag){case 26:Vt||Ci(a,i),ur(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Vt||Ci(a,i);var o=Rt,h=On;Qr(a.type)&&(Rt=a.stateNode,On=!1),ur(t,i,a),dl(a.stateNode),Rt=o,On=h;break;case 5:Vt||Ci(a,i);case 6:if(o=Rt,h=On,Rt=null,ur(t,i,a),Rt=o,On=h,Rt!==null)if(On)try{(Rt.nodeType===9?Rt.body:Rt.nodeName==="HTML"?Rt.ownerDocument.body:Rt).removeChild(a.stateNode)}catch(d){yt(a,i,d)}else try{Rt.removeChild(a.stateNode)}catch(d){yt(a,i,d)}break;case 18:Rt!==null&&(On?(t=Rt,Zy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Tl(t)):Zy(Rt,a.stateNode));break;case 4:o=Rt,h=On,Rt=a.stateNode.containerInfo,On=!0,ur(t,i,a),Rt=o,On=h;break;case 0:case 11:case 14:case 15:Vt||Lr(2,a,i),Vt||Lr(4,a,i),ur(t,i,a);break;case 1:Vt||(Ci(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&ny(a,i,o)),ur(t,i,a);break;case 21:ur(t,i,a);break;case 22:Vt=(o=Vt)||a.memoizedState!==null,ur(t,i,a),Vt=o;break;default:ur(t,i,a)}}function cy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Tl(t)}catch(a){yt(i,i.return,a)}}function uT(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new ay),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new ay),i;default:throw Error(s(435,t.tag))}}function Bf(t,i){var a=uT(t);i.forEach(function(o){var h=vT.bind(null,t,o);a.has(o)||(a.add(o),o.then(h,h))})}function qn(t,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],d=t,_=i,E=_;e:for(;E!==null;){switch(E.tag){case 27:if(Qr(E.type)){Rt=E.stateNode,On=!1;break e}break;case 5:Rt=E.stateNode,On=!1;break e;case 3:case 4:Rt=E.stateNode.containerInfo,On=!0;break e}E=E.return}if(Rt===null)throw Error(s(160));uy(d,_,h),Rt=null,On=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)hy(i,t),i=i.sibling}var fi=null;function hy(t,i){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:qn(i,t),Hn(t),o&4&&(Lr(3,t,t.return),il(3,t),Lr(5,t,t.return));break;case 1:qn(i,t),Hn(t),o&512&&(Vt||a===null||Ci(a,a.return)),o&64&&lr&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=fi;if(qn(i,t),Hn(t),o&512&&(Vt||a===null||Ci(a,a.return)),o&4){var d=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[Dn]||d[ye]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),fn(d,o,a),d[ye]=t,gt(d),o=d;break e;case"link":var _=sv("link","href",h).get(o+(a.href||""));if(_){for(var E=0;E<_.length;E++)if(d=_[E],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(E,1);break t}}d=h.createElement(o),fn(d,o,a),h.head.appendChild(d);break;case"meta":if(_=sv("meta","content",h).get(o+(a.content||""))){for(E=0;E<_.length;E++)if(d=_[E],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(E,1);break t}}d=h.createElement(o),fn(d,o,a),h.head.appendChild(d);break;default:throw Error(s(468,o))}d[ye]=t,gt(d),o=d}t.stateNode=o}else av(h,t.type,t.stateNode);else t.stateNode=rv(h,o,t.memoizedProps);else d!==o?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,o===null?av(h,t.type,t.stateNode):rv(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Uf(t,t.memoizedProps,a.memoizedProps)}break;case 27:qn(i,t),Hn(t),o&512&&(Vt||a===null||Ci(a,a.return)),a!==null&&o&4&&Uf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(qn(i,t),Hn(t),o&512&&(Vt||a===null||Ci(a,a.return)),t.flags&32){h=t.stateNode;try{Xn(h,"")}catch(G){yt(t,t.return,G)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,Uf(t,h,a!==null?a.memoizedProps:h)),o&1024&&(Lf=!0);break;case 6:if(qn(i,t),Hn(t),o&4){if(t.stateNode===null)throw Error(s(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(G){yt(t,t.return,G)}}break;case 3:if(dc=null,h=fi,fi=hc(i.containerInfo),qn(i,t),fi=h,Hn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Tl(i.containerInfo)}catch(G){yt(t,t.return,G)}Lf&&(Lf=!1,fy(t));break;case 4:o=fi,fi=hc(t.stateNode.containerInfo),qn(i,t),Hn(t),fi=o;break;case 12:qn(i,t),Hn(t);break;case 13:qn(i,t),Hn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ff=pt()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Bf(t,o)));break;case 22:h=t.memoizedState!==null;var I=a!==null&&a.memoizedState!==null,j=lr,K=Vt;if(lr=j||h,Vt=K||I,qn(i,t),Vt=K,lr=j,Hn(t),o&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||I||lr||Vt||Fs(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){I=a=i;try{if(d=I.stateNode,h)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{E=I.stateNode;var Z=I.memoizedProps.style,q=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;E.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(G){yt(I,I.return,G)}}}else if(i.tag===6){if(a===null){I=i;try{I.stateNode.nodeValue=h?"":I.memoizedProps}catch(G){yt(I,I.return,G)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Bf(t,a))));break;case 19:qn(i,t),Hn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Bf(t,o)));break;case 30:break;case 21:break;default:qn(i,t),Hn(t)}}function Hn(t){var i=t.flags;if(i&2){try{for(var a,o=t.return;o!==null;){if(ry(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=Pf(t);Wu(t,d,h);break;case 5:var _=a.stateNode;a.flags&32&&(Xn(_,""),a.flags&=-33);var E=Pf(t);Wu(t,E,_);break;case 3:case 4:var I=a.stateNode.containerInfo,j=Pf(t);kf(t,j,I);break;default:throw Error(s(161))}}catch(K){yt(t,t.return,K)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function fy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;fy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Br(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)oy(t,i.alternate,i),i=i.sibling}function Fs(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Lr(4,i,i.return),Fs(i);break;case 1:Ci(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&ny(i,i.return,a),Fs(i);break;case 27:dl(i.stateNode);case 26:case 5:Ci(i,i.return),Fs(i);break;case 22:i.memoizedState===null&&Fs(i);break;case 30:Fs(i);break;default:Fs(i)}t=t.sibling}}function zr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=t,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:zr(h,d,a),il(4,d);break;case 1:if(zr(h,d,a),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(j){yt(o,o.return,j)}if(o=d,h=o.updateQueue,h!==null){var E=o.stateNode;try{var I=h.shared.hiddenCallbacks;if(I!==null)for(h.shared.hiddenCallbacks=null,h=0;h<I.length;h++)jp(I[h],E)}catch(j){yt(o,o.return,j)}}a&&_&64&&ty(d),rl(d,d.return);break;case 27:sy(d);case 26:case 5:zr(h,d,a),a&&o===null&&_&4&&iy(d),rl(d,d.return);break;case 12:zr(h,d,a);break;case 13:zr(h,d,a),a&&_&4&&cy(h,d);break;case 22:d.memoizedState===null&&zr(h,d,a),rl(d,d.return);break;case 30:break;default:zr(h,d,a)}i=i.sibling}}function zf(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Ho(a))}function jf(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Ho(t))}function xi(t,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)dy(t,i,a,o),i=i.sibling}function dy(t,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:xi(t,i,a,o),h&2048&&il(9,i);break;case 1:xi(t,i,a,o);break;case 3:xi(t,i,a,o),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Ho(t)));break;case 12:if(h&2048){xi(t,i,a,o),t=i.stateNode;try{var d=i.memoizedProps,_=d.id,E=d.onPostCommit;typeof E=="function"&&E(_,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(I){yt(i,i.return,I)}}else xi(t,i,a,o);break;case 13:xi(t,i,a,o);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?xi(t,i,a,o):sl(t,i):d._visibility&2?xi(t,i,a,o):(d._visibility|=2,Pa(t,i,a,o,(i.subtreeFlags&10256)!==0)),h&2048&&zf(_,i);break;case 24:xi(t,i,a,o),h&2048&&jf(i.alternate,i);break;default:xi(t,i,a,o)}}function Pa(t,i,a,o,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=t,_=i,E=a,I=o,j=_.flags;switch(_.tag){case 0:case 11:case 15:Pa(d,_,E,I,h),il(8,_);break;case 23:break;case 22:var K=_.stateNode;_.memoizedState!==null?K._visibility&2?Pa(d,_,E,I,h):sl(d,_):(K._visibility|=2,Pa(d,_,E,I,h)),h&&j&2048&&zf(_.alternate,_);break;case 24:Pa(d,_,E,I,h),h&&j&2048&&jf(_.alternate,_);break;default:Pa(d,_,E,I,h)}i=i.sibling}}function sl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,o=i,h=o.flags;switch(o.tag){case 22:sl(a,o),h&2048&&zf(o.alternate,o);break;case 24:sl(a,o),h&2048&&jf(o.alternate,o);break;default:sl(a,o)}i=i.sibling}}var al=8192;function ka(t){if(t.subtreeFlags&al)for(t=t.child;t!==null;)my(t),t=t.sibling}function my(t){switch(t.tag){case 26:ka(t),t.flags&al&&t.memoizedState!==null&&KT(fi,t.memoizedState,t.memoizedProps);break;case 5:ka(t);break;case 3:case 4:var i=fi;fi=hc(t.stateNode.containerInfo),ka(t),fi=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=al,al=16777216,ka(t),al=i):ka(t));break;default:ka(t)}}function py(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function ol(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];nn=o,yy(o,t)}py(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)gy(t),t=t.sibling}function gy(t){switch(t.tag){case 0:case 11:case 15:ol(t),t.flags&2048&&Lr(9,t,t.return);break;case 3:ol(t);break;case 12:ol(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Ju(t)):ol(t);break;default:ol(t)}}function Ju(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];nn=o,yy(o,t)}py(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Lr(8,i,i.return),Ju(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Ju(i));break;default:Ju(i)}t=t.sibling}}function yy(t,i){for(;nn!==null;){var a=nn;switch(a.tag){case 0:case 11:case 15:Lr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Ho(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,nn=o;else e:for(a=t;nn!==null;){o=nn;var h=o.sibling,d=o.return;if(ly(o),o===a){nn=null;break e}if(h!==null){h.return=d,nn=h;break e}nn=d}}}var cT={getCacheForType:function(t){var i=vn(Ft),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},hT=typeof WeakMap=="function"?WeakMap:Map,lt=0,_t=null,Ye=null,Je=0,ut=0,Gn=null,jr=!1,La=!1,qf=!1,cr=0,Ot=0,qr=0,Qs=0,Hf=0,ri=0,Ba=0,ll=null,Mn=null,Gf=!1,Ff=0,ec=1/0,tc=null,Hr=null,hn=0,Gr=null,za=null,ja=0,Qf=0,Yf=null,vy=null,ul=0,Kf=null;function Fn(){if((lt&2)!==0&&Je!==0)return Je&-Je;if(Y.T!==null){var t=Ca;return t!==0?t:td()}return ze()}function _y(){ri===0&&(ri=(Je&536870912)===0||rt?Sr():536870912);var t=ii.current;return t!==null&&(t.flags|=32),ri}function Qn(t,i,a){(t===_t&&(ut===2||ut===9)||t.cancelPendingCommit!==null)&&(qa(t,0),Fr(t,Je,ri,!1)),L(t,a),((lt&2)===0||t!==_t)&&(t===_t&&((lt&2)===0&&(Qs|=a),Ot===4&&Fr(t,Je,ri,!1)),Di(t))}function Ey(t,i,a){if((lt&6)!==0)throw Error(s(327));var o=!a&&(i&124)===0&&(i&t.expiredLanes)===0||Hi(t,i),h=o?mT(t,i):Zf(t,i,!0),d=o;do{if(h===0){La&&!o&&Fr(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!fT(a)){h=Zf(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var E=t;h=ll;var I=E.current.memoizedState.isDehydrated;if(I&&(qa(E,_).flags|=256),_=Zf(E,_,!1),_!==2){if(qf&&!I){E.errorRecoveryDisabledLanes|=d,Qs|=d,h=4;break e}d=Mn,Mn=h,d!==null&&(Mn===null?Mn=d:Mn.push.apply(Mn,d))}h=_}if(d=!1,h!==2)continue}}if(h===1){qa(t,0),Fr(t,i,0,!0);break}e:{switch(o=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Fr(o,i,ri,!jr);break e;case 2:Mn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Ff+300-pt(),10<h)){if(Fr(o,i,ri,!jr),qi(o,0,!0)!==0)break e;o.timeoutHandle=Xy(Ty.bind(null,o,a,Mn,tc,Gf,i,ri,Qs,Ba,jr,d,2,-0,0),h);break e}Ty(o,a,Mn,tc,Gf,i,ri,Qs,Ba,jr,d,0,-0,0)}}break}while(!0);Di(t)}function Ty(t,i,a,o,h,d,_,E,I,j,K,Z,q,G){if(t.timeoutHandle=-1,Z=i.subtreeFlags,(Z&8192||(Z&16785408)===16785408)&&(gl={stylesheets:null,count:0,unsuspend:YT},my(i),Z=XT(),Z!==null)){t.cancelPendingCommit=Z(Cy.bind(null,t,i,d,a,o,h,_,E,I,K,1,q,G)),Fr(t,d,_,!j);return}Cy(t,i,d,a,o,h,_,E,I)}function fT(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],d=h.getSnapshot;h=h.value;try{if(!zn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Fr(t,i,a,o){i&=~Hf,i&=~Qs,t.suspendedLanes|=i,t.pingedLanes&=~i,o&&(t.warmLanes|=i),o=t.expirationTimes;for(var h=i;0<h;){var d=31-Zt(h),_=1<<d;o[d]=-1,h&=~_}a!==0&&le(t,a,i)}function nc(){return(lt&6)===0?(cl(0),!1):!0}function Xf(){if(Ye!==null){if(ut===0)var t=Ye.return;else t=Ye,nr=zs=null,ff(t),Va=null,el=0,t=Ye;for(;t!==null;)ey(t.alternate,t),t=t.return;Ye=null}}function qa(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,DT(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Xf(),_t=t,Ye=a=Ji(t.current,null),Je=i,ut=0,Gn=null,jr=!1,La=Hi(t,i),qf=!1,Ba=ri=Hf=Qs=qr=Ot=0,Mn=ll=null,Gf=!1,(i&8)!==0&&(i|=i&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=i;0<o;){var h=31-Zt(o),d=1<<h;i|=t[h],o&=~d}return cr=i,wu(),a}function by(t,i){He=null,Y.H=Hu,i===Fo||i===Mu?(i=Bp(),ut=3):i===Pp?(i=Bp(),ut=4):ut=i===zg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Gn=i,Ye===null&&(Ot=1,Ku(t,Jn(i,t.current)))}function Ay(){var t=Y.H;return Y.H=Hu,t===null?Hu:t}function wy(){var t=Y.A;return Y.A=cT,t}function $f(){Ot=4,jr||(Je&4194048)!==Je&&ii.current!==null||(La=!0),(qr&134217727)===0&&(Qs&134217727)===0||_t===null||Fr(_t,Je,ri,!1)}function Zf(t,i,a){var o=lt;lt|=2;var h=Ay(),d=wy();(_t!==t||Je!==i)&&(tc=null,qa(t,i)),i=!1;var _=Ot;e:do try{if(ut!==0&&Ye!==null){var E=Ye,I=Gn;switch(ut){case 8:Xf(),_=6;break e;case 3:case 2:case 9:case 6:ii.current===null&&(i=!0);var j=ut;if(ut=0,Gn=null,Ha(t,E,I,j),a&&La){_=0;break e}break;default:j=ut,ut=0,Gn=null,Ha(t,E,I,j)}}dT(),_=Ot;break}catch(K){by(t,K)}while(!0);return i&&t.shellSuspendCounter++,nr=zs=null,lt=o,Y.H=h,Y.A=d,Ye===null&&(_t=null,Je=0,wu()),_}function dT(){for(;Ye!==null;)Sy(Ye)}function mT(t,i){var a=lt;lt|=2;var o=Ay(),h=wy();_t!==t||Je!==i?(tc=null,ec=pt()+500,qa(t,i)):La=Hi(t,i);e:do try{if(ut!==0&&Ye!==null){i=Ye;var d=Gn;t:switch(ut){case 1:ut=0,Gn=null,Ha(t,i,d,1);break;case 2:case 9:if(kp(d)){ut=0,Gn=null,Ry(i);break}i=function(){ut!==2&&ut!==9||_t!==t||(ut=7),Di(t)},d.then(i,i);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:kp(d)?(ut=0,Gn=null,Ry(i)):(ut=0,Gn=null,Ha(t,i,d,7));break;case 5:var _=null;switch(Ye.tag){case 26:_=Ye.memoizedState;case 5:case 27:var E=Ye;if(!_||ov(_)){ut=0,Gn=null;var I=E.sibling;if(I!==null)Ye=I;else{var j=E.return;j!==null?(Ye=j,ic(j)):Ye=null}break t}}ut=0,Gn=null,Ha(t,i,d,5);break;case 6:ut=0,Gn=null,Ha(t,i,d,6);break;case 8:Xf(),Ot=6;break e;default:throw Error(s(462))}}pT();break}catch(K){by(t,K)}while(!0);return nr=zs=null,Y.H=o,Y.A=h,lt=a,Ye!==null?0:(_t=null,Je=0,wu(),Ot)}function pT(){for(;Ye!==null&&!Kn();)Sy(Ye)}function Sy(t){var i=Wg(t.alternate,t,cr);t.memoizedProps=t.pendingProps,i===null?ic(t):Ye=i}function Ry(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Qg(a,i,i.pendingProps,i.type,void 0,Je);break;case 11:i=Qg(a,i,i.pendingProps,i.type.render,i.ref,Je);break;case 5:ff(i);default:ey(a,i),i=Ye=Ip(i,cr),i=Wg(a,i,cr)}t.memoizedProps=t.pendingProps,i===null?ic(t):Ye=i}function Ha(t,i,a,o){nr=zs=null,ff(i),Va=null,el=0;var h=i.return;try{if(rT(t,h,i,a,Je)){Ot=1,Ku(t,Jn(a,t.current)),Ye=null;return}}catch(d){if(h!==null)throw Ye=h,d;Ot=1,Ku(t,Jn(a,t.current)),Ye=null;return}i.flags&32768?(rt||o===1?t=!0:La||(Je&536870912)!==0?t=!1:(jr=t=!0,(o===2||o===9||o===3||o===6)&&(o=ii.current,o!==null&&o.tag===13&&(o.flags|=16384))),Iy(i,t)):ic(i)}function ic(t){var i=t;do{if((i.flags&32768)!==0){Iy(i,jr);return}t=i.return;var a=aT(i.alternate,i,cr);if(a!==null){Ye=a;return}if(i=i.sibling,i!==null){Ye=i;return}Ye=i=t}while(i!==null);Ot===0&&(Ot=5)}function Iy(t,i){do{var a=oT(t.alternate,t);if(a!==null){a.flags&=32767,Ye=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ye=t;return}Ye=t=a}while(t!==null);Ot=6,Ye=null}function Cy(t,i,a,o,h,d,_,E,I){t.cancelPendingCommit=null;do rc();while(hn!==0);if((lt&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=zh,re(t,a,d,_,E,I),t===_t&&(Ye=_t=null,Je=0),za=i,Gr=t,ja=a,Qf=d,Yf=h,vy=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,_T(gi,function(){return My(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null,h=ae.p,ae.p=2,_=lt,lt|=4;try{lT(t,i,a)}finally{lt=_,ae.p=h,Y.T=o}}hn=1,xy(),Dy(),Ny()}}function xy(){if(hn===1){hn=0;var t=Gr,i=za,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=Y.T,Y.T=null;var o=ae.p;ae.p=2;var h=lt;lt|=4;try{hy(i,t);var d=ud,_=yp(t.containerInfo),E=d.focusedElem,I=d.selectionRange;if(_!==E&&E&&E.ownerDocument&&gp(E.ownerDocument.documentElement,E)){if(I!==null&&Uh(E)){var j=I.start,K=I.end;if(K===void 0&&(K=j),"selectionStart"in E)E.selectionStart=j,E.selectionEnd=Math.min(K,E.value.length);else{var Z=E.ownerDocument||document,q=Z&&Z.defaultView||window;if(q.getSelection){var G=q.getSelection(),Ne=E.textContent.length,Re=Math.min(I.start,Ne),mt=I.end===void 0?Re:Math.min(I.end,Ne);!G.extend&&Re>mt&&(_=mt,mt=Re,Re=_);var k=pp(E,Re),M=pp(E,mt);if(k&&M&&(G.rangeCount!==1||G.anchorNode!==k.node||G.anchorOffset!==k.offset||G.focusNode!==M.node||G.focusOffset!==M.offset)){var z=Z.createRange();z.setStart(k.node,k.offset),G.removeAllRanges(),Re>mt?(G.addRange(z),G.extend(M.node,M.offset)):(z.setEnd(M.node,M.offset),G.addRange(z))}}}}for(Z=[],G=E;G=G.parentNode;)G.nodeType===1&&Z.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<Z.length;E++){var X=Z[E];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}gc=!!ld,ud=ld=null}finally{lt=h,ae.p=o,Y.T=a}}t.current=i,hn=2}}function Dy(){if(hn===2){hn=0;var t=Gr,i=za,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=Y.T,Y.T=null;var o=ae.p;ae.p=2;var h=lt;lt|=4;try{oy(t,i.alternate,i)}finally{lt=h,ae.p=o,Y.T=a}}hn=3}}function Ny(){if(hn===4||hn===3){hn=0,li();var t=Gr,i=za,a=ja,o=vy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?hn=5:(hn=0,za=Gr=null,Oy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Hr=null),Ce(a),i=i.stateNode,it&&typeof it.onCommitFiberRoot=="function")try{it.onCommitFiberRoot(wt,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=Y.T,h=ae.p,ae.p=2,Y.T=null;try{for(var d=t.onRecoverableError,_=0;_<o.length;_++){var E=o[_];d(E.value,{componentStack:E.stack})}}finally{Y.T=i,ae.p=h}}(ja&3)!==0&&rc(),Di(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Kf?ul++:(ul=0,Kf=t):ul=0,cl(0)}}function Oy(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Ho(i)))}function rc(t){return xy(),Dy(),Ny(),My()}function My(){if(hn!==5)return!1;var t=Gr,i=Qf;Qf=0;var a=Ce(ja),o=Y.T,h=ae.p;try{ae.p=32>a?32:a,Y.T=null,a=Yf,Yf=null;var d=Gr,_=ja;if(hn=0,za=Gr=null,ja=0,(lt&6)!==0)throw Error(s(331));var E=lt;if(lt|=4,gy(d.current),dy(d,d.current,_,a),lt=E,cl(0,!1),it&&typeof it.onPostCommitFiberRoot=="function")try{it.onPostCommitFiberRoot(wt,d)}catch{}return!0}finally{ae.p=h,Y.T=o,Oy(t,i)}}function Vy(t,i,a){i=Jn(a,i),i=Rf(t.stateNode,i,2),t=Vr(t,i,2),t!==null&&(L(t,2),Di(t))}function yt(t,i,a){if(t.tag===3)Vy(t,t,a);else for(;i!==null;){if(i.tag===3){Vy(i,t,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Hr===null||!Hr.has(o))){t=Jn(a,t),a=Lg(2),o=Vr(i,a,2),o!==null&&(Bg(a,o,i,t),L(o,2),Di(o));break}}i=i.return}}function Wf(t,i,a){var o=t.pingCache;if(o===null){o=t.pingCache=new hT;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(qf=!0,h.add(a),t=gT.bind(null,t,i,a),i.then(t,t))}function gT(t,i,a){var o=t.pingCache;o!==null&&o.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,_t===t&&(Je&a)===a&&(Ot===4||Ot===3&&(Je&62914560)===Je&&300>pt()-Ff?(lt&2)===0&&qa(t,0):Hf|=a,Ba===Je&&(Ba=0)),Di(t)}function Uy(t,i){i===0&&(i=A()),t=wa(t,i),t!==null&&(L(t,i),Di(t))}function yT(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),Uy(t,a)}function vT(t,i){var a=0;switch(t.tag){case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),Uy(t,a)}function _T(t,i){return Li(t,i)}var sc=null,Ga=null,Jf=!1,ac=!1,ed=!1,Ys=0;function Di(t){t!==Ga&&t.next===null&&(Ga===null?sc=Ga=t:Ga=Ga.next=t),ac=!0,Jf||(Jf=!0,TT())}function cl(t,i){if(!ed&&ac){ed=!0;do for(var a=!1,o=sc;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var _=o.suspendedLanes,E=o.pingedLanes;d=(1<<31-Zt(42|t)+1)-1,d&=h&~(_&~E),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,By(o,d))}else d=Je,d=qi(o,o===_t?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||Hi(o,d)||(a=!0,By(o,d));o=o.next}while(a);ed=!1}}function ET(){Py()}function Py(){ac=Jf=!1;var t=0;Ys!==0&&(xT()&&(t=Ys),Ys=0);for(var i=pt(),a=null,o=sc;o!==null;){var h=o.next,d=ky(o,i);d===0?(o.next=null,a===null?sc=h:a.next=h,h===null&&(Ga=a)):(a=o,(t!==0||(d&3)!==0)&&(ac=!0)),o=h}cl(t)}function ky(t,i){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var _=31-Zt(d),E=1<<_,I=h[_];I===-1?((E&a)===0||(E&o)!==0)&&(h[_]=_s(E,i)):I<=i&&(t.expiredLanes|=E),d&=~E}if(i=_t,a=Je,a=qi(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===i&&(ut===2||ut===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&wn(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Hi(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(o!==null&&wn(o),Ce(a)){case 2:case 8:a=Bi;break;case 32:a=gi;break;case 268435456:a=Ar;break;default:a=gi}return o=Ly.bind(null,t),a=Li(a,o),t.callbackPriority=i,t.callbackNode=a,i}return o!==null&&o!==null&&wn(o),t.callbackPriority=2,t.callbackNode=null,2}function Ly(t,i){if(hn!==0&&hn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(rc()&&t.callbackNode!==a)return null;var o=Je;return o=qi(t,t===_t?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Ey(t,o,i),ky(t,pt()),t.callbackNode!=null&&t.callbackNode===a?Ly.bind(null,t):null)}function By(t,i){if(rc())return null;Ey(t,i,!0)}function TT(){NT(function(){(lt&6)!==0?Li(br,ET):Py()})}function td(){return Ys===0&&(Ys=Sr()),Ys}function zy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:fa(""+t)}function jy(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function bT(t,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var d=zy((h[me]||null).action),_=o.submitter;_&&(i=(i=_[me]||null)?zy(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var E=new da("action","action",null,o,h);t.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Ys!==0){var I=_?jy(h,_):new FormData(h);Tf(a,{pending:!0,data:I,method:h.method,action:d},null,I)}}else typeof d=="function"&&(E.preventDefault(),I=_?jy(h,_):new FormData(h),Tf(a,{pending:!0,data:I,method:h.method,action:d},d,I))},currentTarget:h}]})}}for(var nd=0;nd<Bh.length;nd++){var id=Bh[nd],AT=id.toLowerCase(),wT=id[0].toUpperCase()+id.slice(1);hi(AT,"on"+wT)}hi(Ep,"onAnimationEnd"),hi(Tp,"onAnimationIteration"),hi(bp,"onAnimationStart"),hi("dblclick","onDoubleClick"),hi("focusin","onFocus"),hi("focusout","onBlur"),hi(j1,"onTransitionRun"),hi(q1,"onTransitionStart"),hi(H1,"onTransitionCancel"),hi(Ap,"onTransitionEnd"),Gi("onMouseEnter",["mouseout","mouseover"]),Gi("onMouseLeave",["mouseout","mouseover"]),Gi("onPointerEnter",["pointerout","pointerover"]),Gi("onPointerLeave",["pointerout","pointerover"]),ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ui("onBeforeInput",["compositionend","keypress","textInput","paste"]),ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ST=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hl));function qy(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var d=void 0;if(i)for(var _=o.length-1;0<=_;_--){var E=o[_],I=E.instance,j=E.currentTarget;if(E=E.listener,I!==d&&h.isPropagationStopped())break e;d=E,h.currentTarget=j;try{d(h)}catch(K){Yu(K)}h.currentTarget=null,d=I}else for(_=0;_<o.length;_++){if(E=o[_],I=E.instance,j=E.currentTarget,E=E.listener,I!==d&&h.isPropagationStopped())break e;d=E,h.currentTarget=j;try{d(h)}catch(K){Yu(K)}h.currentTarget=null,d=I}}}}function Ke(t,i){var a=i[ct];a===void 0&&(a=i[ct]=new Set);var o=t+"__bubble";a.has(o)||(Hy(i,t,2,!1),a.add(o))}function rd(t,i,a){var o=0;i&&(o|=4),Hy(a,t,o,i)}var oc="_reactListening"+Math.random().toString(36).slice(2);function sd(t){if(!t[oc]){t[oc]=!0,Rr.forEach(function(a){a!=="selectionchange"&&(ST.has(a)||rd(a,!1,t),rd(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[oc]||(i[oc]=!0,rd("selectionchange",!1,i))}}function Hy(t,i,a,o){switch(dv(i)){case 2:var h=WT;break;case 8:h=JT;break;default:h=_d}a=h.bind(null,i,a,t),h=void 0,!Zn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function ad(t,i,a,o,h){var d=o;if((i&1)===0&&(i&2)===0&&o!==null)e:for(;;){if(o===null)return;var _=o.tag;if(_===3||_===4){var E=o.stateNode.containerInfo;if(E===h)break;if(_===4)for(_=o.return;_!==null;){var I=_.tag;if((I===3||I===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;E!==null;){if(_=St(E),_===null)return;if(I=_.tag,I===5||I===6||I===26||I===27){o=d=_;continue e}E=E.parentNode}}o=o.return}uu(function(){var j=d,K=$n(a),Z=[];e:{var q=wp.get(t);if(q!==void 0){var G=da,Ne=t;switch(t){case"keypress":if(Ti(a)===0)break e;case"keydown":case"keyup":G=_a;break;case"focusin":Ne="focus",G=ga;break;case"focusout":Ne="blur",G=ga;break;case"beforeblur":case"afterblur":G=ga;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Wn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Nh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=yu;break;case Ep:case Tp:case bp:G=ya;break;case Ap:G=_u;break;case"scroll":case"scrollend":G=cu;break;case"wheel":G=Ea;break;case"copy":case"cut":case"paste":G=va;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Uo;break;case"toggle":case"beforetoggle":G=Tu}var Re=(i&4)!==0,mt=!Re&&(t==="scroll"||t==="scrollend"),k=Re?q!==null?q+"Capture":null:q;Re=[];for(var M=j,z;M!==null;){var X=M;if(z=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||z===null||k===null||(X=Rs(M,k),X!=null&&Re.push(fl(M,X,z))),mt)break;M=M.return}0<Re.length&&(q=new G(q,Ne,null,a,K),Z.push({event:q,listeners:Re}))}}if((i&7)===0){e:{if(q=t==="mouseover"||t==="pointerover",G=t==="mouseout"||t==="pointerout",q&&a!==Yi&&(Ne=a.relatedTarget||a.fromElement)&&(St(Ne)||Ne[xe]))break e;if((G||q)&&(q=K.window===K?K:(q=K.ownerDocument)?q.defaultView||q.parentWindow:window,G?(Ne=a.relatedTarget||a.toElement,G=j,Ne=Ne?St(Ne):null,Ne!==null&&(mt=c(Ne),Re=Ne.tag,Ne!==mt||Re!==5&&Re!==27&&Re!==6)&&(Ne=null)):(G=null,Ne=j),G!==Ne)){if(Re=Wn,X="onMouseLeave",k="onMouseEnter",M="mouse",(t==="pointerout"||t==="pointerover")&&(Re=Uo,X="onPointerLeave",k="onPointerEnter",M="pointer"),mt=G==null?q:yn(G),z=Ne==null?q:yn(Ne),q=new Re(X,M+"leave",G,a,K),q.target=mt,q.relatedTarget=z,X=null,St(K)===j&&(Re=new Re(k,M+"enter",Ne,a,K),Re.target=z,Re.relatedTarget=mt,X=Re),mt=X,G&&Ne)t:{for(Re=G,k=Ne,M=0,z=Re;z;z=Fa(z))M++;for(z=0,X=k;X;X=Fa(X))z++;for(;0<M-z;)Re=Fa(Re),M--;for(;0<z-M;)k=Fa(k),z--;for(;M--;){if(Re===k||k!==null&&Re===k.alternate)break t;Re=Fa(Re),k=Fa(k)}Re=null}else Re=null;G!==null&&Gy(Z,q,G,Re,!1),Ne!==null&&mt!==null&&Gy(Z,mt,Ne,Re,!0)}}e:{if(q=j?yn(j):window,G=q.nodeName&&q.nodeName.toLowerCase(),G==="select"||G==="input"&&q.type==="file")var de=up;else if(Gt(q))if(cp)de=L1;else{de=P1;var Qe=U1}else G=q.nodeName,!G||G.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?j&&Co(j.elementType)&&(de=up):de=k1;if(de&&(de=de(t,j))){Wi(Z,de,a,K);break e}Qe&&Qe(t,q,j),t==="focusout"&&j&&q.type==="number"&&j.memoizedProps.value!=null&&xr(q,"number",q.value)}switch(Qe=j?yn(j):window,t){case"focusin":(Gt(Qe)||Qe.contentEditable==="true")&&(Ta=Qe,Ph=j,Lo=null);break;case"focusout":Lo=Ph=Ta=null;break;case"mousedown":kh=!0;break;case"contextmenu":case"mouseup":case"dragend":kh=!1,vp(Z,a,K);break;case"selectionchange":if(z1)break;case"keydown":case"keyup":vp(Z,a,K)}var Ee;if(wi)e:{switch(t){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Ze?Q(t,a)&&(Ie="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ie="onCompositionStart");Ie&&(v&&a.locale!=="ko"&&(Ze||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Ze&&(Ee=Do()):(Ei=K,Dr="value"in Ei?Ei.value:Ei.textContent,Ze=!0)),Qe=lc(j,Ie),0<Qe.length&&(Ie=new Mo(Ie,t,null,a,K),Z.push({event:Ie,listeners:Qe}),Ee?Ie.data=Ee:(Ee=se(a),Ee!==null&&(Ie.data=Ee)))),(Ee=m?Ht(t,a):We(t,a))&&(Ie=lc(j,"onBeforeInput"),0<Ie.length&&(Qe=new Mo("onBeforeInput","beforeinput",null,a,K),Z.push({event:Qe,listeners:Ie}),Qe.data=Ee)),bT(Z,t,j,a,K)}qy(Z,i)})}function fl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function lc(t,i){for(var a=i+"Capture",o=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Rs(t,a),h!=null&&o.unshift(fl(t,h,d)),h=Rs(t,i),h!=null&&o.push(fl(t,h,d))),t.tag===3)return o;t=t.return}return[]}function Fa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Gy(t,i,a,o,h){for(var d=i._reactName,_=[];a!==null&&a!==o;){var E=a,I=E.alternate,j=E.stateNode;if(E=E.tag,I!==null&&I===o)break;E!==5&&E!==26&&E!==27||j===null||(I=j,h?(j=Rs(a,d),j!=null&&_.unshift(fl(a,j,I))):h||(j=Rs(a,d),j!=null&&_.push(fl(a,j,I)))),a=a.return}_.length!==0&&t.push({event:i,listeners:_})}var RT=/\r\n?/g,IT=/\u0000|\uFFFD/g;function Fy(t){return(typeof t=="string"?t:""+t).replace(RT,`
`).replace(IT,"")}function Qy(t,i){return i=Fy(i),Fy(t)===i}function uc(){}function dt(t,i,a,o,h,d){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||Xn(t,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&Xn(t,""+o);break;case"className":vi(t,"class",o);break;case"tabIndex":vi(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":vi(t,a,o);break;case"style":Io(t,o,d);break;case"data":if(i!=="object"){vi(t,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=fa(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&dt(t,i,"name",h.name,h,null),dt(t,i,"formEncType",h.formEncType,h,null),dt(t,i,"formMethod",h.formMethod,h,null),dt(t,i,"formTarget",h.formTarget,h,null)):(dt(t,i,"encType",h.encType,h,null),dt(t,i,"method",h.method,h,null),dt(t,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=fa(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=uc);break;case"onScroll":o!=null&&Ke("scroll",t);break;case"onScrollEnd":o!=null&&Ke("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=fa(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":Ke("beforetoggle",t),Ke("toggle",t),Cr(t,"popover",o);break;case"xlinkActuate":ln(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":ln(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":ln(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":ln(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":ln(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":ln(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":ln(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":ln(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":ln(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Cr(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=xh.get(a)||a,Cr(t,a,o))}}function od(t,i,a,o,h,d){switch(a){case"style":Io(t,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof o=="string"?Xn(t,o):(typeof o=="number"||typeof o=="bigint")&&Xn(t,""+o);break;case"onScroll":o!=null&&Ke("scroll",t);break;case"onScrollEnd":o!=null&&Ke("scrollend",t);break;case"onClick":o!=null&&(t.onclick=uc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ir.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[me]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):Cr(t,a,o)}}}function fn(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",t),Ke("load",t);var o=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:dt(t,i,d,_,a,null)}}h&&dt(t,i,"srcSet",a.srcSet,a,null),o&&dt(t,i,"src",a.src,a,null);return;case"input":Ke("invalid",t);var E=d=_=h=null,I=null,j=null;for(o in a)if(a.hasOwnProperty(o)){var K=a[o];if(K!=null)switch(o){case"name":h=K;break;case"type":_=K;break;case"checked":I=K;break;case"defaultChecked":j=K;break;case"value":d=K;break;case"defaultValue":E=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,i));break;default:dt(t,i,o,K,a,null)}}As(t,d,E,I,j,_,h,!1),ha(t);return;case"select":Ke("invalid",t),o=_=d=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":d=E;break;case"defaultValue":_=E;break;case"multiple":o=E;default:dt(t,i,h,E,a,null)}i=d,a=_,t.multiple=!!o,i!=null?Qi(t,!!o,i,!1):a!=null&&Qi(t,!!o,a,!0);return;case"textarea":Ke("invalid",t),d=h=o=null;for(_ in a)if(a.hasOwnProperty(_)&&(E=a[_],E!=null))switch(_){case"value":o=E;break;case"defaultValue":h=E;break;case"children":d=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:dt(t,i,_,E,a,null)}ws(t,o,h,d),ha(t);return;case"option":for(I in a)if(a.hasOwnProperty(I)&&(o=a[I],o!=null))switch(I){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:dt(t,i,I,o,a,null)}return;case"dialog":Ke("beforetoggle",t),Ke("toggle",t),Ke("cancel",t),Ke("close",t);break;case"iframe":case"object":Ke("load",t);break;case"video":case"audio":for(o=0;o<hl.length;o++)Ke(hl[o],t);break;case"image":Ke("error",t),Ke("load",t);break;case"details":Ke("toggle",t);break;case"embed":case"source":case"link":Ke("error",t),Ke("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(o=a[j],o!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:dt(t,i,j,o,a,null)}return;default:if(Co(i)){for(K in a)a.hasOwnProperty(K)&&(o=a[K],o!==void 0&&od(t,i,K,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&dt(t,i,E,o,a,null))}function CT(t,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,_=null,E=null,I=null,j=null,K=null;for(G in a){var Z=a[G];if(a.hasOwnProperty(G)&&Z!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":I=Z;default:o.hasOwnProperty(G)||dt(t,i,G,null,o,Z)}}for(var q in o){var G=o[q];if(Z=a[q],o.hasOwnProperty(q)&&(G!=null||Z!=null))switch(q){case"type":d=G;break;case"name":h=G;break;case"checked":j=G;break;case"defaultChecked":K=G;break;case"value":_=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:G!==Z&&dt(t,i,q,G,o,Z)}}Bn(t,_,E,I,j,K,d,h);return;case"select":G=_=E=q=null;for(d in a)if(I=a[d],a.hasOwnProperty(d)&&I!=null)switch(d){case"value":break;case"multiple":G=I;default:o.hasOwnProperty(d)||dt(t,i,d,null,o,I)}for(h in o)if(d=o[h],I=a[h],o.hasOwnProperty(h)&&(d!=null||I!=null))switch(h){case"value":q=d;break;case"defaultValue":E=d;break;case"multiple":_=d;default:d!==I&&dt(t,i,h,d,o,I)}i=E,a=_,o=G,q!=null?Qi(t,!!a,q,!1):!!o!=!!a&&(i!=null?Qi(t,!!a,i,!0):Qi(t,!!a,a?[]:"",!1));return;case"textarea":G=q=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:dt(t,i,E,null,o,h)}for(_ in o)if(h=o[_],d=a[_],o.hasOwnProperty(_)&&(h!=null||d!=null))switch(_){case"value":q=h;break;case"defaultValue":G=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&dt(t,i,_,h,o,d)}ht(t,q,G);return;case"option":for(var Ne in a)if(q=a[Ne],a.hasOwnProperty(Ne)&&q!=null&&!o.hasOwnProperty(Ne))switch(Ne){case"selected":t.selected=!1;break;default:dt(t,i,Ne,null,o,q)}for(I in o)if(q=o[I],G=a[I],o.hasOwnProperty(I)&&q!==G&&(q!=null||G!=null))switch(I){case"selected":t.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:dt(t,i,I,q,o,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in a)q=a[Re],a.hasOwnProperty(Re)&&q!=null&&!o.hasOwnProperty(Re)&&dt(t,i,Re,null,o,q);for(j in o)if(q=o[j],G=a[j],o.hasOwnProperty(j)&&q!==G&&(q!=null||G!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,i));break;default:dt(t,i,j,q,o,G)}return;default:if(Co(i)){for(var mt in a)q=a[mt],a.hasOwnProperty(mt)&&q!==void 0&&!o.hasOwnProperty(mt)&&od(t,i,mt,void 0,o,q);for(K in o)q=o[K],G=a[K],!o.hasOwnProperty(K)||q===G||q===void 0&&G===void 0||od(t,i,K,q,o,G);return}}for(var k in a)q=a[k],a.hasOwnProperty(k)&&q!=null&&!o.hasOwnProperty(k)&&dt(t,i,k,null,o,q);for(Z in o)q=o[Z],G=a[Z],!o.hasOwnProperty(Z)||q===G||q==null&&G==null||dt(t,i,Z,q,o,G)}var ld=null,ud=null;function cc(t){return t.nodeType===9?t:t.ownerDocument}function Yy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ky(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function cd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var hd=null;function xT(){var t=window.event;return t&&t.type==="popstate"?t===hd?!1:(hd=t,!0):(hd=null,!1)}var Xy=typeof setTimeout=="function"?setTimeout:void 0,DT=typeof clearTimeout=="function"?clearTimeout:void 0,$y=typeof Promise=="function"?Promise:void 0,NT=typeof queueMicrotask=="function"?queueMicrotask:typeof $y<"u"?function(t){return $y.resolve(null).then(t).catch(OT)}:Xy;function OT(t){setTimeout(function(){throw t})}function Qr(t){return t==="head"}function Zy(t,i){var a=i,o=0,h=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<o&&8>o){a=o;var _=t.ownerDocument;if(a&1&&dl(_.documentElement),a&2&&dl(_.body),a&4)for(a=_.head,dl(a),_=a.firstChild;_;){var E=_.nextSibling,I=_.nodeName;_[Dn]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=E}}if(h===0){t.removeChild(d),Tl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:o=a.charCodeAt(0)-48;else o=0;a=d}while(a);Tl(i)}function fd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":fd(a),je(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function MT(t,i,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Dn])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=di(t.nextSibling),t===null)break}return null}function VT(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=di(t.nextSibling),t===null))return null;return t}function dd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function UT(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function di(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var md=null;function Wy(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function Jy(t,i,a){switch(i=cc(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function dl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);je(t)}var si=new Map,ev=new Set;function hc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var hr=ae.d;ae.d={f:PT,r:kT,D:LT,C:BT,L:zT,m:jT,X:HT,S:qT,M:GT};function PT(){var t=hr.f(),i=nc();return t||i}function kT(t){var i=Et(t);i!==null&&i.tag===5&&i.type==="form"?Eg(i):hr.r(t)}var Qa=typeof document>"u"?null:document;function tv(t,i,a){var o=Qa;if(o&&typeof i=="string"&&i){var h=kt(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),ev.has(h)||(ev.add(h),t={rel:t,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),fn(i,"link",t),gt(i),o.head.appendChild(i)))}}function LT(t){hr.D(t),tv("dns-prefetch",t,null)}function BT(t,i){hr.C(t,i),tv("preconnect",t,i)}function zT(t,i,a){hr.L(t,i,a);var o=Qa;if(o&&t&&i){var h='link[rel="preload"][as="'+kt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+kt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+kt(a.imageSizes)+'"]')):h+='[href="'+kt(t)+'"]';var d=h;switch(i){case"style":d=Ya(t);break;case"script":d=Ka(t)}si.has(d)||(t=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),si.set(d,t),o.querySelector(h)!==null||i==="style"&&o.querySelector(ml(d))||i==="script"&&o.querySelector(pl(d))||(i=o.createElement("link"),fn(i,"link",t),gt(i),o.head.appendChild(i)))}}function jT(t,i){hr.m(t,i);var a=Qa;if(a&&t){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+kt(o)+'"][href="'+kt(t)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ka(t)}if(!si.has(d)&&(t=T({rel:"modulepreload",href:t},i),si.set(d,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(pl(d)))return}o=a.createElement("link"),fn(o,"link",t),gt(o),a.head.appendChild(o)}}}function qT(t,i,a){hr.S(t,i,a);var o=Qa;if(o&&t){var h=qt(o).hoistableStyles,d=Ya(t);i=i||"default";var _=h.get(d);if(!_){var E={loading:0,preload:null};if(_=o.querySelector(ml(d)))E.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":i},a),(a=si.get(d))&&pd(t,a);var I=_=o.createElement("link");gt(I),fn(I,"link",t),I._p=new Promise(function(j,K){I.onload=j,I.onerror=K}),I.addEventListener("load",function(){E.loading|=1}),I.addEventListener("error",function(){E.loading|=2}),E.loading|=4,fc(_,i,o)}_={type:"stylesheet",instance:_,count:1,state:E},h.set(d,_)}}}function HT(t,i){hr.X(t,i);var a=Qa;if(a&&t){var o=qt(a).hoistableScripts,h=Ka(t),d=o.get(h);d||(d=a.querySelector(pl(h)),d||(t=T({src:t,async:!0},i),(i=si.get(h))&&gd(t,i),d=a.createElement("script"),gt(d),fn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function GT(t,i){hr.M(t,i);var a=Qa;if(a&&t){var o=qt(a).hoistableScripts,h=Ka(t),d=o.get(h);d||(d=a.querySelector(pl(h)),d||(t=T({src:t,async:!0,type:"module"},i),(i=si.get(h))&&gd(t,i),d=a.createElement("script"),gt(d),fn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function nv(t,i,a,o){var h=(h=Se.current)?hc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ya(a.href),a=qt(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Ya(a.href);var d=qt(h).hoistableStyles,_=d.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,_),(d=h.querySelector(ml(t)))&&!d._p&&(_.instance=d,_.state.loading=5),si.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},si.set(t,a),d||FT(h,t,a,_.state))),i&&o===null)throw Error(s(528,""));return _}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ka(a),a=qt(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Ya(t){return'href="'+kt(t)+'"'}function ml(t){return'link[rel="stylesheet"]['+t+"]"}function iv(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function FT(t,i,a,o){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=t.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),fn(i,"link",a),gt(i),t.head.appendChild(i))}function Ka(t){return'[src="'+kt(t)+'"]'}function pl(t){return"script[async]"+t}function rv(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=t.querySelector('style[data-href~="'+kt(a.href)+'"]');if(o)return i.instance=o,gt(o),o;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),gt(o),fn(o,"style",h),fc(o,a.precedence,t),i.instance=o;case"stylesheet":h=Ya(a.href);var d=t.querySelector(ml(h));if(d)return i.state.loading|=4,i.instance=d,gt(d),d;o=iv(a),(h=si.get(h))&&pd(o,h),d=(t.ownerDocument||t).createElement("link"),gt(d);var _=d;return _._p=new Promise(function(E,I){_.onload=E,_.onerror=I}),fn(d,"link",o),i.state.loading|=4,fc(d,a.precedence,t),i.instance=d;case"script":return d=Ka(a.src),(h=t.querySelector(pl(d)))?(i.instance=h,gt(h),h):(o=a,(h=si.get(d))&&(o=T({},a),gd(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),gt(h),fn(h,"link",o),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,fc(o,a.precedence,t));return i.instance}function fc(t,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,_=0;_<o.length;_++){var E=o[_];if(E.dataset.precedence===i)d=E;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function pd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function gd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var dc=null;function sv(t,i,a){if(dc===null){var o=new Map,h=dc=new Map;h.set(a,o)}else h=dc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[Dn]||d[ye]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=t+_;var E=o.get(_);E?E.push(d):o.set(_,[d])}}return o}function av(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function QT(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function ov(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var gl=null;function YT(){}function KT(t,i,a){if(gl===null)throw Error(s(475));var o=gl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Ya(a.href),d=t.querySelector(ml(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(o.count++,o=mc.bind(o),t.then(o,o)),i.state.loading|=4,i.instance=d,gt(d);return}d=t.ownerDocument||t,a=iv(a),(h=si.get(h))&&pd(a,h),d=d.createElement("link"),gt(d);var _=d;_._p=new Promise(function(E,I){_.onload=E,_.onerror=I}),fn(d,"link",a),i.instance=d}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(o.count++,i=mc.bind(o),t.addEventListener("load",i),t.addEventListener("error",i))}}function XT(){if(gl===null)throw Error(s(475));var t=gl;return t.stylesheets&&t.count===0&&yd(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&yd(t,t.stylesheets),t.unsuspend){var o=t.unsuspend;t.unsuspend=null,o()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function mc(){if(this.count--,this.count===0){if(this.stylesheets)yd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var pc=null;function yd(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,pc=new Map,i.forEach($T,t),pc=null,mc.call(t))}function $T(t,i){if(!(i.state.loading&4)){var a=pc.get(t);if(a)var o=a.get(null);else{a=new Map,pc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var _=h[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),o=_)}o&&a.set(null,o)}h=i.instance,_=h.getAttribute("data-precedence"),d=a.get(_)||o,d===o&&a.set(null,h),a.set(_,h),this.count++,o=mc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var yl={$$typeof:Te,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function ZT(t,i,a,o,h,d,_,E){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=H(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=H(0),this.hiddenUpdates=H(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function lv(t,i,a,o,h,d,_,E,I,j,K,Z){return t=new ZT(t,i,a,_,E,I,j,Z),i=1,d===!0&&(i|=24),d=jn(3,null,null,i),t.current=d,d.stateNode=t,i=Zh(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:o,isDehydrated:a,cache:i},tf(d),t}function uv(t){return t?(t=Sa,t):Sa}function cv(t,i,a,o,h,d){h=uv(h),o.context===null?o.context=h:o.pendingContext=h,o=Mr(i),o.payload={element:a},d=d===void 0?null:d,d!==null&&(o.callback=d),a=Vr(t,o,i),a!==null&&(Qn(a,t,i),Yo(a,t,i))}function hv(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function vd(t,i){hv(t,i),(t=t.alternate)&&hv(t,i)}function fv(t){if(t.tag===13){var i=wa(t,67108864);i!==null&&Qn(i,t,67108864),vd(t,67108864)}}var gc=!0;function WT(t,i,a,o){var h=Y.T;Y.T=null;var d=ae.p;try{ae.p=2,_d(t,i,a,o)}finally{ae.p=d,Y.T=h}}function JT(t,i,a,o){var h=Y.T;Y.T=null;var d=ae.p;try{ae.p=8,_d(t,i,a,o)}finally{ae.p=d,Y.T=h}}function _d(t,i,a,o){if(gc){var h=Ed(o);if(h===null)ad(t,i,o,yc,a),mv(t,o);else if(tb(h,t,i,a,o))o.stopPropagation();else if(mv(t,o),i&4&&-1<eb.indexOf(t)){for(;h!==null;){var d=Et(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=Ln(d.pendingLanes);if(_!==0){var E=d;for(E.pendingLanes|=2,E.entangledLanes|=2;_;){var I=1<<31-Zt(_);E.entanglements[1]|=I,_&=~I}Di(d),(lt&6)===0&&(ec=pt()+500,cl(0))}}break;case 13:E=wa(d,2),E!==null&&Qn(E,d,2),nc(),vd(d,2)}if(d=Ed(o),d===null&&ad(t,i,o,yc,a),d===h)break;h=d}h!==null&&o.stopPropagation()}else ad(t,i,o,null,a)}}function Ed(t){return t=$n(t),Td(t)}var yc=null;function Td(t){if(yc=null,t=St(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return yc=t,null}function dv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($t()){case br:return 2;case Bi:return 8;case gi:case sa:return 32;case Ar:return 268435456;default:return 32}default:return 32}}var bd=!1,Yr=null,Kr=null,Xr=null,vl=new Map,_l=new Map,$r=[],eb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mv(t,i){switch(t){case"focusin":case"focusout":Yr=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Xr=null;break;case"pointerover":case"pointerout":vl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":_l.delete(i.pointerId)}}function El(t,i,a,o,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Et(i),i!==null&&fv(i)),t):(t.eventSystemFlags|=o,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function tb(t,i,a,o,h){switch(i){case"focusin":return Yr=El(Yr,t,i,a,o,h),!0;case"dragenter":return Kr=El(Kr,t,i,a,o,h),!0;case"mouseover":return Xr=El(Xr,t,i,a,o,h),!0;case"pointerover":var d=h.pointerId;return vl.set(d,El(vl.get(d)||null,t,i,a,o,h)),!0;case"gotpointercapture":return d=h.pointerId,_l.set(d,El(_l.get(d)||null,t,i,a,o,h)),!0}return!1}function pv(t){var i=St(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,fe(t.priority,function(){if(a.tag===13){var o=Fn();o=he(o);var h=wa(a,o);h!==null&&Qn(h,a,o),vd(a,o)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Ed(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);Yi=o,a.target.dispatchEvent(o),Yi=null}else return i=Et(a),i!==null&&fv(i),t.blockedOn=a,!1;i.shift()}return!0}function gv(t,i,a){vc(t)&&a.delete(i)}function nb(){bd=!1,Yr!==null&&vc(Yr)&&(Yr=null),Kr!==null&&vc(Kr)&&(Kr=null),Xr!==null&&vc(Xr)&&(Xr=null),vl.forEach(gv),_l.forEach(gv)}function _c(t,i){t.blockedOn===i&&(t.blockedOn=null,bd||(bd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,nb)))}var Ec=null;function yv(t){Ec!==t&&(Ec=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ec===t&&(Ec=null);for(var i=0;i<t.length;i+=3){var a=t[i],o=t[i+1],h=t[i+2];if(typeof o!="function"){if(Td(o||a)===null)continue;break}var d=Et(a);d!==null&&(t.splice(i,3),i-=3,Tf(d,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function Tl(t){function i(I){return _c(I,t)}Yr!==null&&_c(Yr,t),Kr!==null&&_c(Kr,t),Xr!==null&&_c(Xr,t),vl.forEach(i),_l.forEach(i);for(var a=0;a<$r.length;a++){var o=$r[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<$r.length&&(a=$r[0],a.blockedOn===null);)pv(a),a.blockedOn===null&&$r.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],d=a[o+1],_=h[me]||null;if(typeof d=="function")_||yv(a);else if(_){var E=null;if(d&&d.hasAttribute("formAction")){if(h=d,_=d[me]||null)E=_.formAction;else if(Td(h)!==null)continue}else E=_.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),yv(a)}}}function Ad(t){this._internalRoot=t}Tc.prototype.render=Ad.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=Fn();cv(a,o,t,i,null,null)},Tc.prototype.unmount=Ad.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;cv(t.current,2,null,t,null,null),nc(),i[xe]=null}};function Tc(t){this._internalRoot=t}Tc.prototype.unstable_scheduleHydration=function(t){if(t){var i=ze();t={blockedOn:null,target:t,priority:i};for(var a=0;a<$r.length&&i!==0&&i<$r[a].priority;a++);$r.splice(a,0,t),a===0&&pv(t)}};var vv=e.version;if(vv!=="19.1.0")throw Error(s(527,vv,"19.1.0"));ae.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=g(i),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var ib={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bc.isDisabled&&bc.supportsFiber)try{wt=bc.inject(ib),it=bc}catch{}}return Al.createRoot=function(t,i){if(!l(t))throw Error(s(299));var a=!1,o="",h=Vg,d=Ug,_=Pg,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=lv(t,1,!1,null,null,a,o,h,d,_,E,null),t[xe]=i.current,sd(t),new Ad(i)},Al.hydrateRoot=function(t,i,a){if(!l(t))throw Error(s(299));var o=!1,h="",d=Vg,_=Ug,E=Pg,I=null,j=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(I=a.unstable_transitionCallbacks),a.formState!==void 0&&(j=a.formState)),i=lv(t,1,!0,i,a??null,o,h,d,_,E,I,j),i.context=uv(null),a=i.current,o=Fn(),o=he(o),h=Mr(o),h.callback=null,Vr(a,h,o),a=o,i.current.lanes=a,L(i,a),Di(i),t[xe]=i.current,sd(t),new Tc(i)},Al.version="19.1.0",Al}var Cv;function mb(){if(Cv)return Rd.exports;Cv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Rd.exports=db(),Rd.exports}var pb=mb();const gb=()=>{};var xv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},yb=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[n++];e[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[n++],f=r[n++],p=r[n++],g=((l&7)<<18|(c&63)<<12|(f&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const c=r[n++],f=r[n++];e[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|f&63)}}return e.join("")},a0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],f=l+1<r.length,p=f?r[l+1]:0,g=l+2<r.length,y=g?r[l+2]:0,T=c>>2,R=(c&3)<<4|p>>4;let D=(p&15)<<2|y>>6,F=y&63;g||(F=64,f||(D=64)),s.push(n[T],n[R],n[D],n[F])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(s0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):yb(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=n[r.charAt(l++)],p=l<r.length?n[r.charAt(l)]:0;++l;const y=l<r.length?n[r.charAt(l)]:64;++l;const R=l<r.length?n[r.charAt(l)]:64;if(++l,c==null||p==null||y==null||R==null)throw new vb;const D=c<<2|p>>4;if(s.push(D),y!==64){const F=p<<4&240|y>>2;if(s.push(F),R!==64){const ne=y<<6&192|R;s.push(ne)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class vb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _b=function(r){const e=s0(r);return a0.encodeByteArray(e,!0)},Bc=function(r){return _b(r).replace(/\./g,"")},o0=function(r){try{return a0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=()=>Eb().__FIREBASE_DEFAULTS__,bb=()=>{if(typeof process>"u"||typeof xv>"u")return;const r=xv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Ab=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&o0(r[1]);return e&&JSON.parse(e)},sh=()=>{try{return gb()||Tb()||bb()||Ab()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},l0=r=>{var e,n;return(n=(e=sh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[r]},wb=r=>{const e=l0(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},u0=()=>{var r;return(r=sh())===null||r===void 0?void 0:r.config},c0=r=>{var e;return(e=sh())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(r){return r.endsWith(".cloudworkstations.dev")}async function h0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Bc(JSON.stringify(n)),Bc(JSON.stringify(f)),""].join(".")}const Dl={};function Ib(){const r={prod:[],emulator:[]};for(const e of Object.keys(Dl))Dl[e]?r.emulator.push(e):r.prod.push(e);return r}function Cb(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let Dv=!1;function f0(r,e){if(typeof window>"u"||typeof document>"u"||!go(window.location.host)||Dl[r]===e||Dl[r]||Dv)return;Dl[r]=e;function n(D){return`__firebase__banner__${D}`}const s="__firebase__banner",c=Ib().prod.length>0;function f(){const D=document.getElementById(s);D&&D.remove()}function p(D){D.style.display="flex",D.style.background="#7faaf0",D.style.position="fixed",D.style.bottom="5px",D.style.left="5px",D.style.padding=".5em",D.style.borderRadius="5px",D.style.alignItems="center"}function g(D,F){D.setAttribute("width","24"),D.setAttribute("id",F),D.setAttribute("height","24"),D.setAttribute("viewBox","0 0 24 24"),D.setAttribute("fill","none"),D.style.marginLeft="-6px"}function y(){const D=document.createElement("span");return D.style.cursor="pointer",D.style.marginLeft="16px",D.style.fontSize="24px",D.innerHTML=" &times;",D.onclick=()=>{Dv=!0,f()},D}function T(D,F){D.setAttribute("id",F),D.innerText="Learn more",D.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",D.setAttribute("target","__blank"),D.style.paddingLeft="5px",D.style.textDecoration="underline"}function R(){const D=Cb(s),F=n("text"),ne=document.getElementById(F)||document.createElement("span"),$=n("learnmore"),te=document.getElementById($)||document.createElement("a"),Me=n("preprendIcon"),Ae=document.getElementById(Me)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(D.created){const Te=D.element;p(Te),T(te,$);const Ue=y();g(Ae,Me),Te.append(Ae,ne,te,Ue),document.body.appendChild(Te)}c?(ne.innerText="Preview backend disconnected.",Ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,ne.innerText="Preview backend running in this workspace."),ne.setAttribute("id",F)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",R):R()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(An())}function Db(){var r;const e=(r=sh())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Nb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ob(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Mb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Vb(){const r=An();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Ub(){return!Db()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pb(){try{return typeof indexedDB=="object"}catch{return!1}}function kb(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var c;e(((c=l.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb="FirebaseError";class Tr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Lb,Object.setPrototypeOf(this,Tr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gl.prototype.create)}}class Gl{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},l=`${this.service}/${e}`,c=this.errors[e],f=c?Bb(c,s):"Error",p=`${this.serviceName}: ${f} (${l}).`;return new Tr(l,p,s)}}function Bb(r,e){return r.replace(zb,(n,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const zb=/\{\$([^}]+)}/g;function jb(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Zs(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const l of n){if(!s.includes(l))return!1;const c=r[l],f=e[l];if(Nv(c)&&Nv(f)){if(!Zs(c,f))return!1}else if(c!==f)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function Nv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function qb(r,e){const n=new Hb(r,e);return n.subscribe.bind(n)}class Hb{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let l;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Gb(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:s},l.next===void 0&&(l.next=Dd),l.error===void 0&&(l.error=Dd),l.complete===void 0&&(l.complete=Dd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Gb(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Dd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(r){return r&&r._delegate?r._delegate:r}class Ws{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Sb;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),l=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(l)return null;throw c}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Yb(e))try{this.getOrInitializeService({instanceIdentifier:Xs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(e=Xs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xs){return this.instances.has(e)}getOptions(e=Xs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);s===p&&f.resolve(l)}return l}onInit(e,n){var s;const l=this.normalizeInstanceIdentifier(n),c=(s=this.onInitCallbacks.get(l))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(l,c);const f=this.instances.get(l);return f&&e(f,l),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Qb(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Xs){return this.component?this.component.multipleInstances?e:Xs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Qb(r){return r===Xs?void 0:r}function Yb(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Fb(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Xe||(Xe={}));const Xb={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},$b=Xe.INFO,Zb={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},Wb=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),l=Zb[e];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ym{constructor(e){this.name=e,this._logLevel=$b,this._logHandler=Wb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Xb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const Jb=(r,e)=>e.some(n=>r instanceof n);let Ov,Mv;function eA(){return Ov||(Ov=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tA(){return Mv||(Mv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const d0=new WeakMap,Hd=new WeakMap,m0=new WeakMap,Nd=new WeakMap,vm=new WeakMap;function nA(r){const e=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",f)},c=()=>{n(rs(r.result)),l()},f=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&d0.set(n,r)}).catch(()=>{}),vm.set(e,r),e}function iA(r){if(Hd.has(r))return;const e=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",f),r.removeEventListener("abort",f)},c=()=>{n(),l()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",f),r.addEventListener("abort",f)});Hd.set(r,e)}let Gd={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Hd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||m0.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return rs(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function rA(r){Gd=r(Gd)}function sA(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(Od(this),e,...n);return m0.set(s,e.sort?e.sort():[e]),rs(s)}:tA().includes(r)?function(...e){return r.apply(Od(this),e),rs(d0.get(this))}:function(...e){return rs(r.apply(Od(this),e))}}function aA(r){return typeof r=="function"?sA(r):(r instanceof IDBTransaction&&iA(r),Jb(r,eA())?new Proxy(r,Gd):r)}function rs(r){if(r instanceof IDBRequest)return nA(r);if(Nd.has(r))return Nd.get(r);const e=aA(r);return e!==r&&(Nd.set(r,e),vm.set(e,r)),e}const Od=r=>vm.get(r);function oA(r,e,{blocked:n,upgrade:s,blocking:l,terminated:c}={}){const f=indexedDB.open(r,e),p=rs(f);return s&&f.addEventListener("upgradeneeded",g=>{s(rs(f.result),g.oldVersion,g.newVersion,rs(f.transaction),g)}),n&&f.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const lA=["get","getKey","getAll","getAllKeys","count"],uA=["put","add","delete","clear"],Md=new Map;function Vv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Md.get(e))return Md.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,l=uA.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||lA.includes(n)))return;const c=async function(f,...p){const g=this.transaction(f,l?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),l&&g.done]))[0]};return Md.set(e,c),c}rA(r=>({...r,get:(e,n,s)=>Vv(e,n)||r.get(e,n,s),has:(e,n)=>!!Vv(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(hA(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function hA(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fd="@firebase/app",Uv="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr=new ym("@firebase/app"),fA="@firebase/app-compat",dA="@firebase/analytics-compat",mA="@firebase/analytics",pA="@firebase/app-check-compat",gA="@firebase/app-check",yA="@firebase/auth",vA="@firebase/auth-compat",_A="@firebase/database",EA="@firebase/data-connect",TA="@firebase/database-compat",bA="@firebase/functions",AA="@firebase/functions-compat",wA="@firebase/installations",SA="@firebase/installations-compat",RA="@firebase/messaging",IA="@firebase/messaging-compat",CA="@firebase/performance",xA="@firebase/performance-compat",DA="@firebase/remote-config",NA="@firebase/remote-config-compat",OA="@firebase/storage",MA="@firebase/storage-compat",VA="@firebase/firestore",UA="@firebase/ai",PA="@firebase/firestore-compat",kA="firebase",LA="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd="[DEFAULT]",BA={[Fd]:"fire-core",[fA]:"fire-core-compat",[mA]:"fire-analytics",[dA]:"fire-analytics-compat",[gA]:"fire-app-check",[pA]:"fire-app-check-compat",[yA]:"fire-auth",[vA]:"fire-auth-compat",[_A]:"fire-rtdb",[EA]:"fire-data-connect",[TA]:"fire-rtdb-compat",[bA]:"fire-fn",[AA]:"fire-fn-compat",[wA]:"fire-iid",[SA]:"fire-iid-compat",[RA]:"fire-fcm",[IA]:"fire-fcm-compat",[CA]:"fire-perf",[xA]:"fire-perf-compat",[DA]:"fire-rc",[NA]:"fire-rc-compat",[OA]:"fire-gcs",[MA]:"fire-gcs-compat",[VA]:"fire-fst",[PA]:"fire-fst-compat",[UA]:"fire-vertex","fire-js":"fire-js",[kA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc=new Map,zA=new Map,Yd=new Map;function Pv(r,e){try{r.container.addComponent(e)}catch(n){pr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function oo(r){const e=r.name;if(Yd.has(e))return pr.debug(`There were multiple attempts to register component ${e}.`),!1;Yd.set(e,r);for(const n of zc.values())Pv(n,r);for(const n of zA.values())Pv(n,r);return!0}function _m(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function ai(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ss=new Gl("app","Firebase",jA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ws("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ss.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=LA;function p0(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Qd,automaticDataCollectionEnabled:!0},e),l=s.name;if(typeof l!="string"||!l)throw ss.create("bad-app-name",{appName:String(l)});if(n||(n=u0()),!n)throw ss.create("no-options");const c=zc.get(l);if(c){if(Zs(n,c.options)&&Zs(s,c.config))return c;throw ss.create("duplicate-app",{appName:l})}const f=new Kb(l);for(const g of Yd.values())f.addComponent(g);const p=new qA(n,s,f);return zc.set(l,p),p}function g0(r=Qd){const e=zc.get(r);if(!e&&r===Qd&&u0())return p0();if(!e)throw ss.create("no-app",{appName:r});return e}function as(r,e,n){var s;let l=(s=BA[r])!==null&&s!==void 0?s:r;n&&(l+=`-${n}`);const c=l.match(/\s|\//),f=e.match(/\s|\//);if(c||f){const p=[`Unable to register library "${l}" with version "${e}":`];c&&p.push(`library name "${l}" contains illegal characters (whitespace or "/")`),c&&f&&p.push("and"),f&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pr.warn(p.join(" "));return}oo(new Ws(`${l}-version`,()=>({library:l,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="firebase-heartbeat-database",GA=1,Pl="firebase-heartbeat-store";let Vd=null;function y0(){return Vd||(Vd=oA(HA,GA,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Pl)}catch(n){console.warn(n)}}}}).catch(r=>{throw ss.create("idb-open",{originalErrorMessage:r.message})})),Vd}async function FA(r){try{const n=(await y0()).transaction(Pl),s=await n.objectStore(Pl).get(v0(r));return await n.done,s}catch(e){if(e instanceof Tr)pr.warn(e.message);else{const n=ss.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pr.warn(n.message)}}}async function kv(r,e){try{const s=(await y0()).transaction(Pl,"readwrite");await s.objectStore(Pl).put(e,v0(r)),await s.done}catch(n){if(n instanceof Tr)pr.warn(n.message);else{const s=ss.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});pr.warn(s.message)}}}function v0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=1024,YA=30;class KA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $A(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Lv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>YA){const f=ZA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){pr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Lv(),{heartbeatsToSend:s,unsentEntries:l}=XA(this._heartbeatsCache.heartbeats),c=Bc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return pr.warn(n),""}}}function Lv(){return new Date().toISOString().substring(0,10)}function XA(r,e=QA){const n=[];let s=r.slice();for(const l of r){const c=n.find(f=>f.agent===l.agent);if(c){if(c.dates.push(l.date),Bv(n)>e){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),Bv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class $A{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Pb()?kb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await FA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return kv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return kv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...e.heartbeats]})}else return}}function Bv(r){return Bc(JSON.stringify({version:2,heartbeats:r})).length}function ZA(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(r){oo(new Ws("platform-logger",e=>new cA(e),"PRIVATE")),oo(new Ws("heartbeat",e=>new KA(e),"PRIVATE")),as(Fd,Uv,r),as(Fd,Uv,"esm2017"),as("fire-js","")}WA("");var JA="firebase",ew="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */as(JA,ew,"app");function Em(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(r);l<s.length;l++)e.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(r,s[l])&&(n[s[l]]=r[s[l]]);return n}function _0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tw=_0,E0=new Gl("auth","Firebase",_0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=new ym("@firebase/auth");function nw(r,...e){jc.logLevel<=Xe.WARN&&jc.warn(`Auth (${yo}): ${r}`,...e)}function xc(r,...e){jc.logLevel<=Xe.ERROR&&jc.error(`Auth (${yo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(r,...e){throw Tm(r,...e)}function Mi(r,...e){return Tm(r,...e)}function T0(r,e,n){const s=Object.assign(Object.assign({},tw()),{[e]:n});return new Gl("auth","Firebase",s).create(e,{appName:r.name})}function mr(r){return T0(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tm(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return E0.create(r,...e)}function Oe(r,e,...n){if(!r)throw Tm(e,...n)}function fr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw xc(e),new Error(e)}function yr(r,e){r||fr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function iw(){return zv()==="http:"||zv()==="https:"}function zv(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iw()||Ob()||"connection"in navigator)?navigator.onLine:!0}function sw(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n){this.shortDelay=e,this.longDelay=n,yr(n>e,"Short delay should be less than long delay!"),this.isMobile=xb()||Mb()}get(){return rw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(r,e){yr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],lw=new Ql(3e4,6e4);function Yl(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function vo(r,e,n,s,l={}){return A0(r,l,async()=>{let c={},f={};s&&(e==="GET"?f=s:c={body:JSON.stringify(s)});const p=Fl(Object.assign({key:r.config.apiKey},f)).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y=Object.assign({method:e,headers:g},c);return Nb()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&go(r.emulatorConfig.host)&&(y.credentials="include"),b0.fetch()(await w0(r,r.config.apiHost,n,p),y)})}async function A0(r,e,n){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},aw),e);try{const l=new uw(r),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw Ac(r,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const p=c.ok?f.errorMessage:f.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ac(r,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw Ac(r,"email-already-in-use",f);if(g==="USER_DISABLED")throw Ac(r,"user-disabled",f);const T=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw T0(r,T,y);gr(r,T)}}catch(l){if(l instanceof Tr)throw l;gr(r,"network-request-failed",{message:String(l)})}}async function Am(r,e,n,s,l={}){const c=await vo(r,e,n,s,l);return"mfaPendingCredential"in c&&gr(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function w0(r,e,n,s){const l=`${e}${n}?${s}`,c=r,f=c.config.emulator?bm(r.config,l):`${r.config.apiScheme}://${l}`;return ow.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}class uw{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Mi(this.auth,"network-request-failed")),lw.get())})}}function Ac(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=Mi(r,e,s);return l.customData._tokenResponse=n,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cw(r,e){return vo(r,"POST","/v1/accounts:delete",e)}async function qc(r,e){return vo(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hw(r,e=!1){const n=Xt(r),s=await n.getIdToken(e),l=wm(s);Oe(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,f=c==null?void 0:c.sign_in_provider;return{claims:l,token:s,authTime:Nl(Ud(l.auth_time)),issuedAtTime:Nl(Ud(l.iat)),expirationTime:Nl(Ud(l.exp)),signInProvider:f||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Ud(r){return Number(r)*1e3}function wm(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return xc("JWT malformed, contained fewer than 3 sections"),null;try{const l=o0(n);return l?JSON.parse(l):(xc("Failed to decode base64 JWT payload"),null)}catch(l){return xc("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function jv(r){const e=wm(r);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kl(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Tr&&fw(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function fw({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const l=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,l)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nl(this.lastLoginAt),this.creationTime=Nl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hc(r){var e;const n=r.auth,s=await r.getIdToken(),l=await kl(r,qc(n,{idToken:s}));Oe(l==null?void 0:l.users.length,n,"internal-error");const c=l.users[0];r._notifyReloadListener(c);const f=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?S0(c.providerUserInfo):[],p=pw(r.providerData,f),g=r.isAnonymous,y=!(r.email&&c.passwordHash)&&!(p!=null&&p.length),T=g?y:!1,R={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:p,metadata:new Xd(c.createdAt,c.lastLoginAt),isAnonymous:T};Object.assign(r,R)}async function mw(r){const e=Xt(r);await Hc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pw(r,e){return[...r.filter(s=>!e.some(l=>l.providerId===s.providerId)),...e]}function S0(r){return r.map(e=>{var{providerId:n}=e,s=Em(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gw(r,e){const n=await A0(r,{},async()=>{const s=Fl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,f=await w0(r,l,"/v1/token",`key=${c}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:s};return r.emulatorConfig&&go(r.emulatorConfig.host)&&(g.credentials="include"),b0.fetch()(f,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yw(r,e){return vo(r,"POST","/v2/accounts:revokeToken",Yl(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const n=jv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:l,expiresIn:c}=await gw(e,n);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:l,expirationTime:c}=n,f=new io;return s&&(Oe(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),l&&(Oe(typeof l=="string","internal-error",{appName:e}),f.accessToken=l),c&&(Oe(typeof c=="number","internal-error",{appName:e}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new io,this.toJSON())}_performRefresh(){return fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(r,e){Oe(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class mi{constructor(e){var{uid:n,auth:s,stsTokenManager:l}=e,c=Em(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=l,this.accessToken=l.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Xd(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const n=await kl(this,this.stsTokenManager.getToken(this.auth,e));return Oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return hw(this,e)}reload(){return mw(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new mi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Hc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ai(this.auth.app))return Promise.reject(mr(this.auth));const e=await this.getIdToken();return await kl(this,cw(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,l,c,f,p,g,y,T;const R=(s=n.displayName)!==null&&s!==void 0?s:void 0,D=(l=n.email)!==null&&l!==void 0?l:void 0,F=(c=n.phoneNumber)!==null&&c!==void 0?c:void 0,ne=(f=n.photoURL)!==null&&f!==void 0?f:void 0,$=(p=n.tenantId)!==null&&p!==void 0?p:void 0,te=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,Me=(y=n.createdAt)!==null&&y!==void 0?y:void 0,Ae=(T=n.lastLoginAt)!==null&&T!==void 0?T:void 0,{uid:Te,emailVerified:Ue,isAnonymous:we,providerData:Be,stsTokenManager:x}=n;Oe(Te&&x,e,"internal-error");const w=io.fromJSON(this.name,x);Oe(typeof Te=="string",e,"internal-error"),Wr(R,e.name),Wr(D,e.name),Oe(typeof Ue=="boolean",e,"internal-error"),Oe(typeof we=="boolean",e,"internal-error"),Wr(F,e.name),Wr(ne,e.name),Wr($,e.name),Wr(te,e.name),Wr(Me,e.name),Wr(Ae,e.name);const S=new mi({uid:Te,auth:e,email:D,emailVerified:Ue,displayName:R,isAnonymous:we,photoURL:ne,phoneNumber:F,tenantId:$,stsTokenManager:w,createdAt:Me,lastLoginAt:Ae});return Be&&Array.isArray(Be)&&(S.providerData=Be.map(O=>Object.assign({},O))),te&&(S._redirectEventId=te),S}static async _fromIdTokenResponse(e,n,s=!1){const l=new io;l.updateFromServerResponse(n);const c=new mi({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:s});return await Hc(c),c}static async _fromGetAccountInfoResponse(e,n,s){const l=n.users[0];Oe(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?S0(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!(c!=null&&c.length),p=new io;p.updateFromIdToken(s);const g=new mi({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:f}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new Xd(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=new Map;function dr(r){yr(r instanceof Function,"Expected a class definition");let e=qv.get(r);return e?(yr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,qv.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}R0.type="NONE";const Hv=R0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(r,e,n){return`firebase:${r}:${e}:${n}`}class ro{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=Dc(this.userKey,l.apiKey,c),this.fullPersistenceKey=Dc("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await qc(this.auth,{idToken:e}).catch(()=>{});return n?mi._fromGetAccountInfoResponse(this.auth,n,e):null}return mi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new ro(dr(Hv),e,s);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=l[0]||dr(Hv);const f=Dc(s,e.config.apiKey,e.name);let p=null;for(const y of n)try{const T=await y._get(f);if(T){let R;if(typeof T=="string"){const D=await qc(e,{idToken:T}).catch(()=>{});if(!D)break;R=await mi._fromGetAccountInfoResponse(e,D,T)}else R=mi._fromJSON(e,T);y!==c&&(p=R),c=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new ro(c,e,s):(c=g[0],p&&await c._set(f,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(f)}catch{}})),new ro(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(D0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(I0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(O0(e))return"Blackberry";if(M0(e))return"Webos";if(C0(e))return"Safari";if((e.includes("chrome/")||x0(e))&&!e.includes("edge/"))return"Chrome";if(N0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function I0(r=An()){return/firefox\//i.test(r)}function C0(r=An()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function x0(r=An()){return/crios\//i.test(r)}function D0(r=An()){return/iemobile/i.test(r)}function N0(r=An()){return/android/i.test(r)}function O0(r=An()){return/blackberry/i.test(r)}function M0(r=An()){return/webos/i.test(r)}function Sm(r=An()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function vw(r=An()){var e;return Sm(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _w(){return Vb()&&document.documentMode===10}function V0(r=An()){return Sm(r)||N0(r)||M0(r)||O0(r)||/windows phone/i.test(r)||D0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(r,e=[]){let n;switch(r){case"Browser":n=Gv(An());break;case"Worker":n=`${Gv(An())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${yo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((f,p)=>{try{const g=e(c);f(g)}catch(g){p(g)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tw(r,e={}){return vo(r,"GET","/v2/passwordPolicy",Yl(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=6;class Aw{constructor(e){var n,s,l,c;const f=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=f.minPasswordLength)!==null&&n!==void 0?n:bw,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(l=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&l!==void 0?l:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,l,c,f,p;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(s=g.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),g.isValid&&(g.isValid=(l=g.containsLowercaseLetter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(c=g.containsUppercaseLetter)!==null&&c!==void 0?c:!0),g.isValid&&(g.isValid=(f=g.containsNumericCharacter)!==null&&f!==void 0?f:!0),g.isValid&&(g.isValid=(p=g.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),g}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<e.length;l++)s=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,n,s,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fv(this),this.idTokenSubscription=new Fv(this),this.beforeStateQueue=new Ew(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=E0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=dr(n)),this._initializationPromise=this.queue(async()=>{var s,l,c;if(!this._deleted&&(this.persistenceManager=await ro.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((l=this._popupRedirectResolver)===null||l===void 0)&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await qc(this,{idToken:e}),s=await mi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ai(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(p,p))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let l=s,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,p=l==null?void 0:l._redirectEventId,g=await this.tryRedirectSignIn(e);(!f||f===p)&&(g!=null&&g.user)&&(l=g.user,c=!0)}if(!l)return this.directlySetCurrentUser(null);if(!l._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(l)}catch(f){l=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return l?this.reloadAndSetCurrentUserOrClear(l):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===l._redirectEventId?this.directlySetCurrentUser(l):this.reloadAndSetCurrentUserOrClear(l)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sw()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ai(this.app))return Promise.reject(mr(this));const n=e?Xt(e):null;return n&&Oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ai(this.app)?Promise.reject(mr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ai(this.app)?Promise.reject(mr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(dr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Tw(this),n=new Aw(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gl("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await yw(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&dr(e)||this._popupRedirectResolver;Oe(n,this,"argument-error"),this.redirectPersistenceManager=await ro.create(this,[dr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(p,this,"internal-error"),p.then(()=>{f||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,s,l);return()=>{f=!0,g()}}else{const g=e.addObserver(n);return()=>{f=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=U0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const l=await this._getAppCheckToken();return l&&(n["X-Firebase-AppCheck"]=l),n}async _getAppCheckToken(){var e;if(ai(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&nw(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Kl(r){return Xt(r)}class Fv{constructor(e){this.auth=e,this.observer=null,this.addObserver=qb(n=>this.observer=n)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Sw(r){Rm=r}function Rw(r){return Rm.loadJS(r)}function Iw(){return Rm.gapiScript}function Cw(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(r,e){const n=_m(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(Zs(c,e??{}))return l;gr(l,"already-initialized")}return n.initialize({options:e})}function Dw(r,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(dr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function Nw(r,e,n){const s=Kl(r);Oe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const l=!1,c=P0(e),{host:f,port:p}=Ow(e),g=p===null?"":`:${p}`,y={url:`${c}//${f}${g}/`},T=Object.freeze({host:f,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){Oe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Oe(Zs(y,s.config.emulator)&&Zs(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,go(f)?(h0(`${c}//${f}${g}`),f0("Auth",!0)):Mw()}function P0(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function Ow(r){const e=P0(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:Qv(s.substr(c.length+1))}}else{const[c,f]=s.split(":");return{host:c,port:Qv(f)}}}function Qv(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function Mw(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return fr("not implemented")}_getIdTokenResponse(e){return fr("not implemented")}_linkToIdToken(e,n){return fr("not implemented")}_getReauthenticationResolver(e){return fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function so(r,e){return Am(r,"POST","/v1/accounts:signInWithIdp",Yl(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw="http://localhost";class Js extends k0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Js(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):gr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:l}=n,c=Em(n,["providerId","signInMethod"]);if(!s||!l)return null;const f=new Js(s,l);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return so(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,so(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,so(e,n)}buildRequest(){const e={requestUri:Vw,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Fl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl extends L0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends Xl{constructor(){super("facebook.com")}static credential(e){return Js._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jr.credential(e.oauthAccessToken)}catch{return null}}}Jr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Jr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends Xl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Js._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return es.credential(n,s)}catch{return null}}}es.GOOGLE_SIGN_IN_METHOD="google.com";es.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Xl{constructor(){super("github.com")}static credential(e){return Js._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.GITHUB_SIGN_IN_METHOD="github.com";ts.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends Xl{constructor(){super("twitter.com")}static credential(e,n){return Js._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ns.credential(n,s)}catch{return null}}}ns.TWITTER_SIGN_IN_METHOD="twitter.com";ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uw(r,e){return Am(r,"POST","/v1/accounts:signUp",Yl(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,l=!1){const c=await mi._fromIdTokenResponse(e,s,l),f=Yv(s);return new vr({user:c,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const l=Yv(s);return new vr({user:e,providerId:l,_tokenResponse:s,operationType:n})}}function Yv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pw(r){var e;if(ai(r.app))return Promise.reject(mr(r));const n=Kl(r);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new vr({user:n.currentUser,providerId:null,operationType:"signIn"});const s=await Uw(n,{returnSecureToken:!0}),l=await vr._fromIdTokenResponse(n,"signIn",s,!0);return await n._updateCurrentUser(l.user),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc extends Tr{constructor(e,n,s,l){var c;super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,Gc.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,l){return new Gc(e,n,s,l)}}function B0(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Gc._fromErrorAndOperation(r,c,e,s):c})}async function kw(r,e,n=!1){const s=await kl(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return vr._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lw(r,e,n=!1){const{auth:s}=r;if(ai(s.app))return Promise.reject(mr(s));const l="reauthenticate";try{const c=await kl(r,B0(s,l,e,r),n);Oe(c.idToken,s,"internal-error");const f=wm(c.idToken);Oe(f,s,"internal-error");const{sub:p}=f;return Oe(r.uid===p,s,"user-mismatch"),vr._forOperation(r,l,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&gr(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bw(r,e,n=!1){if(ai(r.app))return Promise.reject(mr(r));const s="signIn",l=await B0(r,s,e),c=await vr._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(c.user),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zw(r,e){return Am(r,"POST","/v1/accounts:signInWithCustomToken",Yl(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jw(r,e){if(ai(r.app))return Promise.reject(mr(r));const n=Kl(r),s=await zw(n,{token:e,returnSecureToken:!0}),l=await vr._fromIdTokenResponse(n,"signIn",s);return await n._updateCurrentUser(l.user),l}function qw(r,e,n,s){return Xt(r).onIdTokenChanged(e,n,s)}function Hw(r,e,n){return Xt(r).beforeAuthStateChanged(e,n)}function Gw(r,e,n,s){return Xt(r).onAuthStateChanged(e,n,s)}const Fc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Fc,"1"),this.storage.removeItem(Fc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=1e3,Qw=10;class j0 extends z0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=V0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&e(n,l,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,p,g)=>{this.notifyListeners(f,g)});return}const s=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},c=this.storage.getItem(s);_w()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,Qw):l()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Fw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}j0.type="LOCAL";const Yw=j0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0 extends z0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}q0.type="SESSION";const H0=q0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const s=new ah(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:l,data:c}=n.data,f=this.handlersMap[l];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const p=Array.from(f).map(async y=>y(n.origin,c)),g=await Kw(p);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ah.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,f;return new Promise((p,g)=>{const y=Im("",20);l.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},s);f={messageChannel:l,onMessage(R){const D=R;if(D.data.eventId===y)switch(D.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(D.data.response);break;default:clearTimeout(T),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(){return window}function $w(r){Vi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(){return typeof Vi().WorkerGlobalScope<"u"&&typeof Vi().importScripts=="function"}async function Zw(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ww(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function Jw(){return G0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="firebaseLocalStorageDb",eS=1,Qc="firebaseLocalStorage",Q0="fbase_key";class $l{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function oh(r,e){return r.transaction([Qc],e?"readwrite":"readonly").objectStore(Qc)}function tS(){const r=indexedDB.deleteDatabase(F0);return new $l(r).toPromise()}function $d(){const r=indexedDB.open(F0,eS);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Qc,{keyPath:Q0})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Qc)?e(s):(s.close(),await tS(),e(await $d()))})})}async function Kv(r,e,n){const s=oh(r,!0).put({[Q0]:e,value:n});return new $l(s).toPromise()}async function nS(r,e){const n=oh(r,!1).get(e),s=await new $l(n).toPromise();return s===void 0?null:s.value}function Xv(r,e){const n=oh(r,!0).delete(e);return new $l(n).toPromise()}const iS=800,rS=3;class Y0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $d(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>rS)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return G0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ah._getInstance(Jw()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Zw(),!this.activeServiceWorker)return;this.sender=new Xw(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ww()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $d();return await Kv(e,Fc,"1"),await Xv(e,Fc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Kv(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>nS(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Xv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=oh(l,!1).getAll();return new $l(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Y0.type="LOCAL";const sS=Y0;new Ql(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(r,e){return e?dr(e):(Oe(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm extends k0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return so(e,this._buildIdpRequest())}_linkToIdToken(e,n){return so(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return so(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function oS(r){return Bw(r.auth,new Cm(r),r.bypassAuthState)}function lS(r){const{auth:e,user:n}=r;return Oe(n,e,"internal-error"),Lw(n,new Cm(r),r.bypassAuthState)}async function uS(r){const{auth:e,user:n}=r;return Oe(n,e,"internal-error"),kw(n,new Cm(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(e,n,s,l,c=!1){this.auth=e,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:l,tenantId:c,error:f,type:p}=e;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oS;case"linkViaPopup":case"linkViaRedirect":return uS;case"reauthViaPopup":case"reauthViaRedirect":return lS;default:gr(this.auth,"internal-error")}}resolve(e){yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS=new Ql(2e3,1e4);class no extends K0{constructor(e,n,s,l,c){super(e,n,l,c),this.provider=s,this.authWindow=null,this.pollId=null,no.currentPopupAction&&no.currentPopupAction.cancel(),no.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){yr(this.filter.length===1,"Popup operations only handle one event");const e=Im();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Mi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Mi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,no.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,cS.get())};e()}}no.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="pendingRedirect",Nc=new Map;class fS extends K0{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Nc.get(this.auth._key());if(!e){try{const s=await dS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Nc.set(this.auth._key(),e)}return this.bypassAuthState||Nc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dS(r,e){const n=gS(e),s=pS(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function mS(r,e){Nc.set(r._key(),e)}function pS(r){return dr(r._redirectPersistence)}function gS(r){return Dc(hS,r.config.apiKey,r.name)}async function yS(r,e,n=!1){if(ai(r.app))return Promise.reject(mr(r));const s=Kl(r),l=aS(s,e),f=await new fS(s,l,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS=10*60*1e3;class _S{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ES(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!X0(e)){const l=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Mi(this.auth,l))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vS&&this.cachedEventUids.clear(),this.cachedEventUids.has($v(e))}saveEventToCache(e){this.cachedEventUids.add($v(e)),this.lastProcessedEventTime=Date.now()}}function $v(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function X0({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ES(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return X0(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TS(r,e={}){return vo(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AS=/^https?/;async function wS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await TS(r);for(const n of e)try{if(SS(n))return}catch{}gr(r,"unauthorized-domain")}function SS(r){const e=Kd(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!AS.test(n))return!1;if(bS.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=new Ql(3e4,6e4);function Zv(){const r=Vi().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function IS(r){return new Promise((e,n)=>{var s,l,c;function f(){Zv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Zv(),n(Mi(r,"network-request-failed"))},timeout:RS.get()})}if(!((l=(s=Vi().gapi)===null||s===void 0?void 0:s.iframes)===null||l===void 0)&&l.Iframe)e(gapi.iframes.getContext());else if(!((c=Vi().gapi)===null||c===void 0)&&c.load)f();else{const p=Cw("iframefcb");return Vi()[p]=()=>{gapi.load?f():n(Mi(r,"network-request-failed"))},Rw(`${Iw()}?onload=${p}`).catch(g=>n(g))}}).catch(e=>{throw Oc=null,e})}let Oc=null;function CS(r){return Oc=Oc||IS(r),Oc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=new Ql(5e3,15e3),DS="__/auth/iframe",NS="emulator/auth/iframe",OS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},MS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VS(r){const e=r.config;Oe(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?bm(e,NS):`https://${r.config.authDomain}/${DS}`,s={apiKey:e.apiKey,appName:r.name,v:yo},l=MS.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${Fl(s).slice(1)}`}async function US(r){const e=await CS(r),n=Vi().gapi;return Oe(n,r,"internal-error"),e.open({where:document.body,url:VS(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OS,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const f=Mi(r,"network-request-failed"),p=Vi().setTimeout(()=>{c(f)},xS.get());function g(){Vi().clearTimeout(p),l(s)}s.ping(g).then(g,()=>{c(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kS=500,LS=600,BS="_blank",zS="http://localhost";class Wv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jS(r,e,n,s=kS,l=LS){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const g=Object.assign(Object.assign({},PS),{width:s.toString(),height:l.toString(),top:c,left:f}),y=An().toLowerCase();n&&(p=x0(y)?BS:n),I0(y)&&(e=e||zS,g.scrollbars="yes");const T=Object.entries(g).reduce((D,[F,ne])=>`${D}${F}=${ne},`,"");if(vw(y)&&p!=="_self")return qS(e||"",p),new Wv(null);const R=window.open(e||"",p,T);Oe(R,r,"popup-blocked");try{R.focus()}catch{}return new Wv(R)}function qS(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="__/auth/handler",GS="emulator/auth/handler",FS=encodeURIComponent("fac");async function Jv(r,e,n,s,l,c){Oe(r.config.authDomain,r,"auth-domain-config-required"),Oe(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:yo,eventId:l};if(e instanceof L0){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",jb(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,R]of Object.entries({}))f[T]=R}if(e instanceof Xl){const T=e.getScopes().filter(R=>R!=="");T.length>0&&(f.scopes=T.join(","))}r.tenantId&&(f.tid=r.tenantId);const p=f;for(const T of Object.keys(p))p[T]===void 0&&delete p[T];const g=await r._getAppCheckToken(),y=g?`#${FS}=${encodeURIComponent(g)}`:"";return`${QS(r)}?${Fl(p).slice(1)}${y}`}function QS({config:r}){return r.emulator?bm(r,GS):`https://${r.authDomain}/${HS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="webStorageSupport";class YS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=H0,this._completeRedirectFn=yS,this._overrideRedirectResult=mS}async _openPopup(e,n,s,l){var c;yr((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const f=await Jv(e,n,s,Kd(),l);return jS(e,f,Im())}async _openRedirect(e,n,s,l){await this._originValidation(e);const c=await Jv(e,n,s,Kd(),l);return $w(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(yr(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await US(e),s=new _S(e);return n.register("authEvent",l=>(Oe(l==null?void 0:l.authEvent,e,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Pd,{type:Pd},l=>{var c;const f=(c=l==null?void 0:l[0])===null||c===void 0?void 0:c[Pd];f!==void 0&&n(!!f),gr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=wS(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return V0()||C0()||Sm()}}const KS=YS;var e_="@firebase/auth",t_="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZS(r){oo(new Ws("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=s.options;Oe(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:f,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:U0(r)},y=new ww(s,l,c,g);return Dw(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),oo(new Ws("auth-internal",e=>{const n=Kl(e.getProvider("auth").getImmediate());return(s=>new XS(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),as(e_,t_,$S(r)),as(e_,t_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=5*60,JS=c0("authIdTokenMaxAge")||WS;let n_=null;const eR=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>JS)return;const l=n==null?void 0:n.token;n_!==l&&(n_=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function tR(r=g0()){const e=_m(r,"auth");if(e.isInitialized())return e.getImmediate();const n=xw(r,{popupRedirectResolver:KS,persistence:[sS,Yw,H0]}),s=c0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const f=eR(c.toString());Hw(n,f,()=>f(n.currentUser)),qw(n,p=>f(p))}}const l=l0("auth");return l&&Nw(n,`http://${l}`),n}function nR(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}Sw({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=l=>{const c=Mi("internal-error");c.customData=l,n(c)},s.type="text/javascript",s.charset="UTF-8",nR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZS("Browser");var i_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var os,$0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,w){function S(){}S.prototype=w.prototype,x.D=w.prototype,x.prototype=new S,x.prototype.constructor=x,x.C=function(O,V,P){for(var C=Array(arguments.length-2),It=2;It<arguments.length;It++)C[It-2]=arguments[It];return w.prototype[V].apply(O,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(x,w,S){S||(S=0);var O=Array(16);if(typeof w=="string")for(var V=0;16>V;++V)O[V]=w.charCodeAt(S++)|w.charCodeAt(S++)<<8|w.charCodeAt(S++)<<16|w.charCodeAt(S++)<<24;else for(V=0;16>V;++V)O[V]=w[S++]|w[S++]<<8|w[S++]<<16|w[S++]<<24;w=x.g[0],S=x.g[1],V=x.g[2];var P=x.g[3],C=w+(P^S&(V^P))+O[0]+3614090360&4294967295;w=S+(C<<7&4294967295|C>>>25),C=P+(V^w&(S^V))+O[1]+3905402710&4294967295,P=w+(C<<12&4294967295|C>>>20),C=V+(S^P&(w^S))+O[2]+606105819&4294967295,V=P+(C<<17&4294967295|C>>>15),C=S+(w^V&(P^w))+O[3]+3250441966&4294967295,S=V+(C<<22&4294967295|C>>>10),C=w+(P^S&(V^P))+O[4]+4118548399&4294967295,w=S+(C<<7&4294967295|C>>>25),C=P+(V^w&(S^V))+O[5]+1200080426&4294967295,P=w+(C<<12&4294967295|C>>>20),C=V+(S^P&(w^S))+O[6]+2821735955&4294967295,V=P+(C<<17&4294967295|C>>>15),C=S+(w^V&(P^w))+O[7]+4249261313&4294967295,S=V+(C<<22&4294967295|C>>>10),C=w+(P^S&(V^P))+O[8]+1770035416&4294967295,w=S+(C<<7&4294967295|C>>>25),C=P+(V^w&(S^V))+O[9]+2336552879&4294967295,P=w+(C<<12&4294967295|C>>>20),C=V+(S^P&(w^S))+O[10]+4294925233&4294967295,V=P+(C<<17&4294967295|C>>>15),C=S+(w^V&(P^w))+O[11]+2304563134&4294967295,S=V+(C<<22&4294967295|C>>>10),C=w+(P^S&(V^P))+O[12]+1804603682&4294967295,w=S+(C<<7&4294967295|C>>>25),C=P+(V^w&(S^V))+O[13]+4254626195&4294967295,P=w+(C<<12&4294967295|C>>>20),C=V+(S^P&(w^S))+O[14]+2792965006&4294967295,V=P+(C<<17&4294967295|C>>>15),C=S+(w^V&(P^w))+O[15]+1236535329&4294967295,S=V+(C<<22&4294967295|C>>>10),C=w+(V^P&(S^V))+O[1]+4129170786&4294967295,w=S+(C<<5&4294967295|C>>>27),C=P+(S^V&(w^S))+O[6]+3225465664&4294967295,P=w+(C<<9&4294967295|C>>>23),C=V+(w^S&(P^w))+O[11]+643717713&4294967295,V=P+(C<<14&4294967295|C>>>18),C=S+(P^w&(V^P))+O[0]+3921069994&4294967295,S=V+(C<<20&4294967295|C>>>12),C=w+(V^P&(S^V))+O[5]+3593408605&4294967295,w=S+(C<<5&4294967295|C>>>27),C=P+(S^V&(w^S))+O[10]+38016083&4294967295,P=w+(C<<9&4294967295|C>>>23),C=V+(w^S&(P^w))+O[15]+3634488961&4294967295,V=P+(C<<14&4294967295|C>>>18),C=S+(P^w&(V^P))+O[4]+3889429448&4294967295,S=V+(C<<20&4294967295|C>>>12),C=w+(V^P&(S^V))+O[9]+568446438&4294967295,w=S+(C<<5&4294967295|C>>>27),C=P+(S^V&(w^S))+O[14]+3275163606&4294967295,P=w+(C<<9&4294967295|C>>>23),C=V+(w^S&(P^w))+O[3]+4107603335&4294967295,V=P+(C<<14&4294967295|C>>>18),C=S+(P^w&(V^P))+O[8]+1163531501&4294967295,S=V+(C<<20&4294967295|C>>>12),C=w+(V^P&(S^V))+O[13]+2850285829&4294967295,w=S+(C<<5&4294967295|C>>>27),C=P+(S^V&(w^S))+O[2]+4243563512&4294967295,P=w+(C<<9&4294967295|C>>>23),C=V+(w^S&(P^w))+O[7]+1735328473&4294967295,V=P+(C<<14&4294967295|C>>>18),C=S+(P^w&(V^P))+O[12]+2368359562&4294967295,S=V+(C<<20&4294967295|C>>>12),C=w+(S^V^P)+O[5]+4294588738&4294967295,w=S+(C<<4&4294967295|C>>>28),C=P+(w^S^V)+O[8]+2272392833&4294967295,P=w+(C<<11&4294967295|C>>>21),C=V+(P^w^S)+O[11]+1839030562&4294967295,V=P+(C<<16&4294967295|C>>>16),C=S+(V^P^w)+O[14]+4259657740&4294967295,S=V+(C<<23&4294967295|C>>>9),C=w+(S^V^P)+O[1]+2763975236&4294967295,w=S+(C<<4&4294967295|C>>>28),C=P+(w^S^V)+O[4]+1272893353&4294967295,P=w+(C<<11&4294967295|C>>>21),C=V+(P^w^S)+O[7]+4139469664&4294967295,V=P+(C<<16&4294967295|C>>>16),C=S+(V^P^w)+O[10]+3200236656&4294967295,S=V+(C<<23&4294967295|C>>>9),C=w+(S^V^P)+O[13]+681279174&4294967295,w=S+(C<<4&4294967295|C>>>28),C=P+(w^S^V)+O[0]+3936430074&4294967295,P=w+(C<<11&4294967295|C>>>21),C=V+(P^w^S)+O[3]+3572445317&4294967295,V=P+(C<<16&4294967295|C>>>16),C=S+(V^P^w)+O[6]+76029189&4294967295,S=V+(C<<23&4294967295|C>>>9),C=w+(S^V^P)+O[9]+3654602809&4294967295,w=S+(C<<4&4294967295|C>>>28),C=P+(w^S^V)+O[12]+3873151461&4294967295,P=w+(C<<11&4294967295|C>>>21),C=V+(P^w^S)+O[15]+530742520&4294967295,V=P+(C<<16&4294967295|C>>>16),C=S+(V^P^w)+O[2]+3299628645&4294967295,S=V+(C<<23&4294967295|C>>>9),C=w+(V^(S|~P))+O[0]+4096336452&4294967295,w=S+(C<<6&4294967295|C>>>26),C=P+(S^(w|~V))+O[7]+1126891415&4294967295,P=w+(C<<10&4294967295|C>>>22),C=V+(w^(P|~S))+O[14]+2878612391&4294967295,V=P+(C<<15&4294967295|C>>>17),C=S+(P^(V|~w))+O[5]+4237533241&4294967295,S=V+(C<<21&4294967295|C>>>11),C=w+(V^(S|~P))+O[12]+1700485571&4294967295,w=S+(C<<6&4294967295|C>>>26),C=P+(S^(w|~V))+O[3]+2399980690&4294967295,P=w+(C<<10&4294967295|C>>>22),C=V+(w^(P|~S))+O[10]+4293915773&4294967295,V=P+(C<<15&4294967295|C>>>17),C=S+(P^(V|~w))+O[1]+2240044497&4294967295,S=V+(C<<21&4294967295|C>>>11),C=w+(V^(S|~P))+O[8]+1873313359&4294967295,w=S+(C<<6&4294967295|C>>>26),C=P+(S^(w|~V))+O[15]+4264355552&4294967295,P=w+(C<<10&4294967295|C>>>22),C=V+(w^(P|~S))+O[6]+2734768916&4294967295,V=P+(C<<15&4294967295|C>>>17),C=S+(P^(V|~w))+O[13]+1309151649&4294967295,S=V+(C<<21&4294967295|C>>>11),C=w+(V^(S|~P))+O[4]+4149444226&4294967295,w=S+(C<<6&4294967295|C>>>26),C=P+(S^(w|~V))+O[11]+3174756917&4294967295,P=w+(C<<10&4294967295|C>>>22),C=V+(w^(P|~S))+O[2]+718787259&4294967295,V=P+(C<<15&4294967295|C>>>17),C=S+(P^(V|~w))+O[9]+3951481745&4294967295,x.g[0]=x.g[0]+w&4294967295,x.g[1]=x.g[1]+(V+(C<<21&4294967295|C>>>11))&4294967295,x.g[2]=x.g[2]+V&4294967295,x.g[3]=x.g[3]+P&4294967295}s.prototype.u=function(x,w){w===void 0&&(w=x.length);for(var S=w-this.blockSize,O=this.B,V=this.h,P=0;P<w;){if(V==0)for(;P<=S;)l(this,x,P),P+=this.blockSize;if(typeof x=="string"){for(;P<w;)if(O[V++]=x.charCodeAt(P++),V==this.blockSize){l(this,O),V=0;break}}else for(;P<w;)if(O[V++]=x[P++],V==this.blockSize){l(this,O),V=0;break}}this.h=V,this.o+=w},s.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var w=1;w<x.length-8;++w)x[w]=0;var S=8*this.o;for(w=x.length-8;w<x.length;++w)x[w]=S&255,S/=256;for(this.u(x),x=Array(16),w=S=0;4>w;++w)for(var O=0;32>O;O+=8)x[S++]=this.g[w]>>>O&255;return x};function c(x,w){var S=p;return Object.prototype.hasOwnProperty.call(S,x)?S[x]:S[x]=w(x)}function f(x,w){this.h=w;for(var S=[],O=!0,V=x.length-1;0<=V;V--){var P=x[V]|0;O&&P==w||(S[V]=P,O=!1)}this.g=S}var p={};function g(x){return-128<=x&&128>x?c(x,function(w){return new f([w|0],0>w?-1:0)}):new f([x|0],0>x?-1:0)}function y(x){if(isNaN(x)||!isFinite(x))return R;if(0>x)return te(y(-x));for(var w=[],S=1,O=0;x>=S;O++)w[O]=x/S|0,S*=4294967296;return new f(w,0)}function T(x,w){if(x.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(x.charAt(0)=="-")return te(T(x.substring(1),w));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=y(Math.pow(w,8)),O=R,V=0;V<x.length;V+=8){var P=Math.min(8,x.length-V),C=parseInt(x.substring(V,V+P),w);8>P?(P=y(Math.pow(w,P)),O=O.j(P).add(y(C))):(O=O.j(S),O=O.add(y(C)))}return O}var R=g(0),D=g(1),F=g(16777216);r=f.prototype,r.m=function(){if($(this))return-te(this).m();for(var x=0,w=1,S=0;S<this.g.length;S++){var O=this.i(S);x+=(0<=O?O:4294967296+O)*w,w*=4294967296}return x},r.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(ne(this))return"0";if($(this))return"-"+te(this).toString(x);for(var w=y(Math.pow(x,6)),S=this,O="";;){var V=Ue(S,w).g;S=Me(S,V.j(w));var P=((0<S.g.length?S.g[0]:S.h)>>>0).toString(x);if(S=V,ne(S))return P+O;for(;6>P.length;)P="0"+P;O=P+O}},r.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function ne(x){if(x.h!=0)return!1;for(var w=0;w<x.g.length;w++)if(x.g[w]!=0)return!1;return!0}function $(x){return x.h==-1}r.l=function(x){return x=Me(this,x),$(x)?-1:ne(x)?0:1};function te(x){for(var w=x.g.length,S=[],O=0;O<w;O++)S[O]=~x.g[O];return new f(S,~x.h).add(D)}r.abs=function(){return $(this)?te(this):this},r.add=function(x){for(var w=Math.max(this.g.length,x.g.length),S=[],O=0,V=0;V<=w;V++){var P=O+(this.i(V)&65535)+(x.i(V)&65535),C=(P>>>16)+(this.i(V)>>>16)+(x.i(V)>>>16);O=C>>>16,P&=65535,C&=65535,S[V]=C<<16|P}return new f(S,S[S.length-1]&-2147483648?-1:0)};function Me(x,w){return x.add(te(w))}r.j=function(x){if(ne(this)||ne(x))return R;if($(this))return $(x)?te(this).j(te(x)):te(te(this).j(x));if($(x))return te(this.j(te(x)));if(0>this.l(F)&&0>x.l(F))return y(this.m()*x.m());for(var w=this.g.length+x.g.length,S=[],O=0;O<2*w;O++)S[O]=0;for(O=0;O<this.g.length;O++)for(var V=0;V<x.g.length;V++){var P=this.i(O)>>>16,C=this.i(O)&65535,It=x.i(V)>>>16,bt=x.i(V)&65535;S[2*O+2*V]+=C*bt,Ae(S,2*O+2*V),S[2*O+2*V+1]+=P*bt,Ae(S,2*O+2*V+1),S[2*O+2*V+1]+=C*It,Ae(S,2*O+2*V+1),S[2*O+2*V+2]+=P*It,Ae(S,2*O+2*V+2)}for(O=0;O<w;O++)S[O]=S[2*O+1]<<16|S[2*O];for(O=w;O<2*w;O++)S[O]=0;return new f(S,0)};function Ae(x,w){for(;(x[w]&65535)!=x[w];)x[w+1]+=x[w]>>>16,x[w]&=65535,w++}function Te(x,w){this.g=x,this.h=w}function Ue(x,w){if(ne(w))throw Error("division by zero");if(ne(x))return new Te(R,R);if($(x))return w=Ue(te(x),w),new Te(te(w.g),te(w.h));if($(w))return w=Ue(x,te(w)),new Te(te(w.g),w.h);if(30<x.g.length){if($(x)||$(w))throw Error("slowDivide_ only works with positive integers.");for(var S=D,O=w;0>=O.l(x);)S=we(S),O=we(O);var V=Be(S,1),P=Be(O,1);for(O=Be(O,2),S=Be(S,2);!ne(O);){var C=P.add(O);0>=C.l(x)&&(V=V.add(S),P=C),O=Be(O,1),S=Be(S,1)}return w=Me(x,V.j(w)),new Te(V,w)}for(V=R;0<=x.l(w);){for(S=Math.max(1,Math.floor(x.m()/w.m())),O=Math.ceil(Math.log(S)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),P=y(S),C=P.j(w);$(C)||0<C.l(x);)S-=O,P=y(S),C=P.j(w);ne(P)&&(P=D),V=V.add(P),x=Me(x,C)}return new Te(V,x)}r.A=function(x){return Ue(this,x).h},r.and=function(x){for(var w=Math.max(this.g.length,x.g.length),S=[],O=0;O<w;O++)S[O]=this.i(O)&x.i(O);return new f(S,this.h&x.h)},r.or=function(x){for(var w=Math.max(this.g.length,x.g.length),S=[],O=0;O<w;O++)S[O]=this.i(O)|x.i(O);return new f(S,this.h|x.h)},r.xor=function(x){for(var w=Math.max(this.g.length,x.g.length),S=[],O=0;O<w;O++)S[O]=this.i(O)^x.i(O);return new f(S,this.h^x.h)};function we(x){for(var w=x.g.length+1,S=[],O=0;O<w;O++)S[O]=x.i(O)<<1|x.i(O-1)>>>31;return new f(S,x.h)}function Be(x,w){var S=w>>5;w%=32;for(var O=x.g.length-S,V=[],P=0;P<O;P++)V[P]=0<w?x.i(P+S)>>>w|x.i(P+S+1)<<32-w:x.i(P+S);return new f(V,x.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,$0=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=T,os=f}).apply(typeof i_<"u"?i_:typeof self<"u"?self:typeof window<"u"?window:{});var wc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Z0,Rl,W0,Mc,Zd,J0,eE,tE;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,v){return u==Array.prototype||u==Object.prototype||(u[m]=v.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof wc=="object"&&wc];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function l(u,m){if(m)e:{var v=s;u=u.split(".");for(var b=0;b<u.length-1;b++){var B=u[b];if(!(B in v))break e;v=v[B]}u=u[u.length-1],b=v[u],m=m(b),m!=b&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}function c(u,m){u instanceof String&&(u+="");var v=0,b=!1,B={next:function(){if(!b&&v<u.length){var Q=v++;return{value:m(Q,u[Q]),done:!1}}return b=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}l("Array.prototype.values",function(u){return u||function(){return c(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},p=this||self;function g(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function T(u,m,v){return u.call.apply(u.bind,arguments)}function R(u,m,v){if(!u)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,b),u.apply(m,B)}}return function(){return u.apply(m,arguments)}}function D(u,m,v){return D=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:R,D.apply(null,arguments)}function F(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var b=v.slice();return b.push.apply(b,arguments),u.apply(this,b)}}function ne(u,m){function v(){}v.prototype=m.prototype,u.aa=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(b,B,Q){for(var se=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)se[Ze-2]=arguments[Ze];return m.prototype[B].apply(b,se)}}function $(u){const m=u.length;if(0<m){const v=Array(m);for(let b=0;b<m;b++)v[b]=u[b];return v}return[]}function te(u,m){for(let v=1;v<arguments.length;v++){const b=arguments[v];if(g(b)){const B=u.length||0,Q=b.length||0;u.length=B+Q;for(let se=0;se<Q;se++)u[B+se]=b[se]}else u.push(b)}}class Me{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function Ae(u){return/^[\s\xa0]*$/.test(u)}function Te(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function Ue(u){return Ue[" "](u),u}Ue[" "]=function(){};var we=Te().indexOf("Gecko")!=-1&&!(Te().toLowerCase().indexOf("webkit")!=-1&&Te().indexOf("Edge")==-1)&&!(Te().indexOf("Trident")!=-1||Te().indexOf("MSIE")!=-1)&&Te().indexOf("Edge")==-1;function Be(u,m,v){for(const b in u)m.call(v,u[b],b,u)}function x(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function w(u){const m={};for(const v in u)m[v]=u[v];return m}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(u,m){let v,b;for(let B=1;B<arguments.length;B++){b=arguments[B];for(v in b)u[v]=b[v];for(let Q=0;Q<S.length;Q++)v=S[Q],Object.prototype.hasOwnProperty.call(b,v)&&(u[v]=b[v])}}function V(u){var m=1;u=u.split(":");const v=[];for(;0<m&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function P(u){p.setTimeout(()=>{throw u},0)}function C(){var u=tt;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class It{constructor(){this.h=this.g=null}add(m,v){const b=bt.get();b.set(m,v),this.h?this.h.next=b:this.g=b,this.h=b}}var bt=new Me(()=>new Y,u=>u.reset());class Y{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,pe=!1,tt=new It,N=()=>{const u=p.Promise.resolve(void 0);ae=()=>{u.then(ee)}};var ee=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(v){P(v)}var m=bt;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}pe=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var _e=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};p.addEventListener("test",v,m),p.removeEventListener("test",v,m)}catch{}return u}();function Le(u,m){if(ie.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,b=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(we){e:{try{Ue(m.nodeName);var B=!0;break e}catch{}B=!1}B||(m=null)}}else v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement);this.relatedTarget=m,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Se[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Le.aa.h.call(this)}}ne(Le,ie);var Se={2:"touch",3:"pen",4:"mouse"};Le.prototype.h=function(){Le.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var At="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function Pe(u,m,v,b,B){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!b,this.ha=B,this.key=++Fe,this.da=this.fa=!1}function Dt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function an(u){this.src=u,this.g={},this.h=0}an.prototype.add=function(u,m,v,b,B){var Q=u.toString();u=this.g[Q],u||(u=this.g[Q]=[],this.h++);var se=Li(u,m,b,B);return-1<se?(m=u[se],v||(m.fa=!1)):(m=new Pe(m,this.src,Q,!!b,B),m.fa=v,u.push(m)),m};function gn(u,m){var v=m.type;if(v in u.g){var b=u.g[v],B=Array.prototype.indexOf.call(b,m,void 0),Q;(Q=0<=B)&&Array.prototype.splice.call(b,B,1),Q&&(Dt(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Li(u,m,v,b){for(var B=0;B<u.length;++B){var Q=u[B];if(!Q.da&&Q.listener==m&&Q.capture==!!v&&Q.ha==b)return B}return-1}var wn="closure_lm_"+(1e6*Math.random()|0),Kn={};function li(u,m,v,b,B){if(Array.isArray(m)){for(var Q=0;Q<m.length;Q++)li(u,m[Q],v,b,B);return null}return v=aa(v),u&&u[At]?u.K(m,v,y(b)?!!b.capture:!1,B):pt(u,m,v,!1,b,B)}function pt(u,m,v,b,B,Q){if(!m)throw Error("Invalid event type");var se=y(B)?!!B.capture:!!B,Ze=Ar(u);if(Ze||(u[wn]=Ze=new an(u)),v=Ze.add(m,v,b,se,Q),v.proxy)return v;if(b=$t(),v.proxy=b,b.src=u,b.listener=v,u.addEventListener)_e||(B=se),B===void 0&&(B=!1),u.addEventListener(m.toString(),b,B);else if(u.attachEvent)u.attachEvent(gi(m.toString()),b);else if(u.addListener&&u.removeListener)u.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return v}function $t(){function u(v){return m.call(u.src,u.listener,v)}const m=sa;return u}function br(u,m,v,b,B){if(Array.isArray(m))for(var Q=0;Q<m.length;Q++)br(u,m[Q],v,b,B);else b=y(b)?!!b.capture:!!b,v=aa(v),u&&u[At]?(u=u.i,m=String(m).toString(),m in u.g&&(Q=u.g[m],v=Li(Q,v,b,B),-1<v&&(Dt(Q[v]),Array.prototype.splice.call(Q,v,1),Q.length==0&&(delete u.g[m],u.h--)))):u&&(u=Ar(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Li(m,v,b,B)),(v=-1<u?m[u]:null)&&Bi(v))}function Bi(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[At])gn(m.i,u);else{var v=u.type,b=u.proxy;m.removeEventListener?m.removeEventListener(v,b,u.capture):m.detachEvent?m.detachEvent(gi(v),b):m.addListener&&m.removeListener&&m.removeListener(b),(v=Ar(m))?(gn(v,u),v.h==0&&(v.src=null,m[wn]=null)):Dt(u)}}}function gi(u){return u in Kn?Kn[u]:Kn[u]="on"+u}function sa(u,m){if(u.da)u=!0;else{m=new Le(m,this);var v=u.listener,b=u.ha||u.src;u.fa&&Bi(u),u=v.call(b,m)}return u}function Ar(u){return u=u[wn],u instanceof an?u:null}var wr="__closure_events_fn_"+(1e9*Math.random()>>>0);function aa(u){return typeof u=="function"?u:(u[wr]||(u[wr]=function(m){return u.handleEvent(m)}),u[wr])}function wt(){oe.call(this),this.i=new an(this),this.M=this,this.F=null}ne(wt,oe),wt.prototype[At]=!0,wt.prototype.removeEventListener=function(u,m,v,b){br(this,u,m,v,b)};function it(u,m){var v,b=u.F;if(b)for(v=[];b;b=b.F)v.push(b);if(u=u.M,b=m.type||m,typeof m=="string")m=new ie(m,u);else if(m instanceof ie)m.target=m.target||u;else{var B=m;m=new ie(b,u),O(m,B)}if(B=!0,v)for(var Q=v.length-1;0<=Q;Q--){var se=m.g=v[Q];B=Sn(se,b,!0,m)&&B}if(se=m.g=u,B=Sn(se,b,!0,m)&&B,B=Sn(se,b,!1,m)&&B,v)for(Q=0;Q<v.length;Q++)se=m.g=v[Q],B=Sn(se,b,!1,m)&&B}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var v=u.g[m],b=0;b<v.length;b++)Dt(v[b]);delete u.g[m],u.h--}}this.F=null},wt.prototype.K=function(u,m,v,b){return this.i.add(String(u),m,!1,v,b)},wt.prototype.L=function(u,m,v,b){return this.i.add(String(u),m,!0,v,b)};function Sn(u,m,v,b){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var B=!0,Q=0;Q<m.length;++Q){var se=m[Q];if(se&&!se.da&&se.capture==v){var Ze=se.listener,Ht=se.ha||se.src;se.fa&&gn(u.i,se),B=Ze.call(Ht,b)!==!1&&B}}return B&&!b.defaultPrevented}function Zt(u,m,v){if(typeof u=="function")v&&(u=D(u,v));else if(u&&typeof u.handleEvent=="function")u=D(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:p.setTimeout(u,m||0)}function oa(u){u.g=Zt(()=>{u.g=null,u.i&&(u.i=!1,oa(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Ao extends oe{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:oa(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zi(u){oe.call(this),this.h=u,this.g={}}ne(zi,oe);var yi=[];function ji(u){Be(u.g,function(m,v){this.g.hasOwnProperty(v)&&Bi(m)},u),u.g={}}zi.prototype.N=function(){zi.aa.N.call(this),ji(this)},zi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ln=p.JSON.stringify,qi=p.JSON.parse,Hi=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function _s(){}_s.prototype.h=null;function Sr(u){return u.h||(u.h=u.i())}function A(){}var H={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function L(){ie.call(this,"d")}ne(L,ie);function re(){ie.call(this,"c")}ne(re,ie);var le={},ve=null;function he(){return ve=ve||new wt}le.La="serverreachability";function Ce(u){ie.call(this,le.La,u)}ne(Ce,ie);function ze(u){const m=he();it(m,new Ce(m))}le.STAT_EVENT="statevent";function fe(u,m){ie.call(this,le.STAT_EVENT,u),this.stat=m}ne(fe,ie);function ge(u){const m=he();it(m,new fe(m,u))}le.Ma="timingevent";function ye(u,m){ie.call(this,le.Ma,u),this.size=m}ne(ye,ie);function me(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},m)}function xe(){this.g=!0}xe.prototype.xa=function(){this.g=!1};function ct(u,m,v,b,B,Q){u.info(function(){if(u.g)if(Q)for(var se="",Ze=Q.split("&"),Ht=0;Ht<Ze.length;Ht++){var We=Ze[Ht].split("=");if(1<We.length){var en=We[0];We=We[1];var Gt=en.split("_");se=2<=Gt.length&&Gt[1]=="type"?se+(en+"="+We+"&"):se+(en+"=redacted&")}}else se=null;else se=Q;return"XMLHTTP REQ ("+b+") [attempt "+B+"]: "+m+`
`+v+`
`+se})}function on(u,m,v,b,B,Q,se){u.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+B+"]: "+m+`
`+v+`
`+Q+" "+se})}function vt(u,m,v,b){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Dn(u,v)+(b?" "+b:"")})}function Wt(u,m){u.info(function(){return"TIMEOUT: "+m})}xe.prototype.info=function(){};function Dn(u,m){if(!u.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var b=v[u];if(!(2>b.length)){var B=b[1];if(Array.isArray(B)&&!(1>B.length)){var Q=B[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var se=1;se<B.length;se++)B[se]=""}}}}return Ln(v)}catch{return m}}var je={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},St={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Et;function yn(){}ne(yn,_s),yn.prototype.g=function(){return new XMLHttpRequest},yn.prototype.i=function(){return{}},Et=new yn;function qt(u,m,v,b){this.j=u,this.i=m,this.l=v,this.R=b||1,this.U=new zi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gt}function gt(){this.i=null,this.g="",this.h=!1}var Rr={},Ir={};function ui(u,m,v){u.L=1,u.v=ws(Bn(m)),u.m=v,u.P=!0,Gi(u,null)}function Gi(u,m){u.F=Date.now(),Es(u),u.A=Bn(u.v);var v=u.A,b=u.R;Array.isArray(b)||(b=[String(b)]),xo(v.i,"t",b),u.C=0,v=u.j.J,u.h=new gt,u.g=_u(u.j,v?m:null,!u.m),0<u.O&&(u.M=new Ao(D(u.Y,u,u.g),u.O)),m=u.U,v=u.g,b=u.ca;var B="readystatechange";Array.isArray(B)||(B&&(yi[0]=B.toString()),B=yi);for(var Q=0;Q<B.length;Q++){var se=li(v,B[Q],b||m.handleEvent,!1,m.h||m);if(!se)break;m.g[se.key]=se}m=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),ze(),ct(u.i,u.u,u.A,u.l,u.R,u.m)}qt.prototype.ca=function(u){u=u.target;const m=this.M;m&&Wn(u)==3?m.j():this.Y(u)},qt.prototype.Y=function(u){try{if(u==this.g)e:{const Gt=Wn(this.g);var m=this.g.Ba();const Wi=this.g.Z();if(!(3>Gt)&&(Gt!=3||this.g&&(this.h.h||this.g.oa()||hu(this.g)))){this.J||Gt!=4||m==7||(m==8||0>=Wi?ze(3):ze(2)),Cr(this);var v=this.g.Z();this.X=v;t:if(ru(this)){var b=hu(this.g);u="";var B=b.length,Q=Wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ln(this),vi(this);var se="";break t}this.h.i=new p.TextDecoder}for(m=0;m<B;m++)this.h.h=!0,u+=this.h.i.decode(b[m],{stream:!(Q&&m==B-1)});b.length=0,this.h.g+=u,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=v==200,on(this.i,this.u,this.A,this.l,this.R,Gt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,Ht=this.g;if((Ze=Ht.g?Ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ae(Ze)){var We=Ze;break t}}We=null}if(v=We)vt(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ts(this,v);else{this.o=!1,this.s=3,ge(12),ln(this),vi(this);break e}}if(this.P){v=!0;let un;for(;!this.J&&this.C<se.length;)if(un=su(this,se),un==Ir){Gt==4&&(this.s=4,ge(14),v=!1),vt(this.i,this.l,null,"[Incomplete Response]");break}else if(un==Rr){this.s=4,ge(15),vt(this.i,this.l,se,"[Invalid Chunk]"),v=!1;break}else vt(this.i,this.l,un,null),Ts(this,un);if(ru(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gt!=4||se.length!=0||this.h.h||(this.s=1,ge(16),v=!1),this.o=this.o&&v,!v)vt(this.i,this.l,se,"[Invalid Chunked Response]"),ln(this),vi(this);else if(0<se.length&&!this.W){this.W=!0;var en=this.j;en.g==this&&en.ba&&!en.M&&(en.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),Os(en),en.M=!0,ge(11))}}else vt(this.i,this.l,se,null),Ts(this,se);Gt==4&&ln(this),this.o&&!this.J&&(Gt==4?gu(this.j,this):(this.o=!1,Es(this)))}else Nh(this.g),v==400&&0<se.indexOf("Unknown SID")?(this.s=3,ge(12)):(this.s=0,ge(13)),ln(this),vi(this)}}}catch{}finally{}};function ru(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function su(u,m){var v=u.C,b=m.indexOf(`
`,v);return b==-1?Ir:(v=Number(m.substring(v,b)),isNaN(v)?Rr:(b+=1,b+v>m.length?Ir:(m=m.slice(b,b+v),u.C=b+v,m)))}qt.prototype.cancel=function(){this.J=!0,ln(this)};function Es(u){u.S=Date.now()+u.I,au(u,u.I)}function au(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=me(D(u.ba,u),m)}function Cr(u){u.B&&(p.clearTimeout(u.B),u.B=null)}qt.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Wt(this.i,this.A),this.L!=2&&(ze(),ge(17)),ln(this),this.s=2,vi(this)):au(this,this.S-u)};function vi(u){u.j.G==0||u.J||gu(u.j,u)}function ln(u){Cr(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,ji(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Ts(u,m){try{var v=u.j;if(v.G!=0&&(v.g==u||wo(v.h,u))){if(!u.K&&wo(v.h,u)&&v.G==3){try{var b=v.Da.g.parse(m)}catch{b=null}if(Array.isArray(b)&&b.length==3){var B=b;if(B[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)_a(v),ya(v);else break e;Vo(v),ge(18)}}else v.za=B[1],0<v.za-v.T&&37500>B[2]&&v.F&&v.v==0&&!v.C&&(v.C=me(D(v.Za,v),6e3));if(1>=ua(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Zi(v,11)}else if((u.K||v.g==u)&&_a(v),!Ae(m))for(B=v.Da.g.parse(m),m=0;m<B.length;m++){let We=B[m];if(v.T=We[0],We=We[1],v.G==2)if(We[0]=="c"){v.K=We[1],v.ia=We[2];const en=We[3];en!=null&&(v.la=en,v.j.info("VER="+v.la));const Gt=We[4];Gt!=null&&(v.Aa=Gt,v.j.info("SVER="+v.Aa));const Wi=We[5];Wi!=null&&typeof Wi=="number"&&0<Wi&&(b=1.5*Wi,v.L=b,v.j.info("backChannelRequestTimeoutMs_="+b)),b=v;const un=u.g;if(un){const Si=un.g?un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Si){var Q=b.h;Q.g||Si.indexOf("spdy")==-1&&Si.indexOf("quic")==-1&&Si.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(ca(Q,Q.h),Q.h=null))}if(b.D){const Po=un.g?un.g.getResponseHeader("X-HTTP-Session-Id"):null;Po&&(b.ya=Po,ht(b.I,b.D,Po))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),b=v;var se=u;if(b.qa=vu(b,b.J?b.ia:null,b.W),se.K){Rn(b.h,se);var Ze=se,Ht=b.L;Ht&&(Ze.I=Ht),Ze.B&&(Cr(Ze),Es(Ze)),b.g=se}else mu(b);0<v.i.length&&va(v)}else We[0]!="stop"&&We[0]!="close"||Zi(v,7);else v.G==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?Zi(v,7):Oo(v):We[0]!="noop"&&v.l&&v.l.ta(We),v.v=0)}}ze(4)}catch{}}var ou=class{constructor(u,m){this.g=u,this.map=m}};function Fi(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function la(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ua(u){return u.h?1:u.g?u.g.size:0}function wo(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ca(u,m){u.g?u.g.add(m):u.h=m}function Rn(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Fi.prototype.cancel=function(){if(this.i=So(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function So(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.D);return m}return $(u.i)}function Ih(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var m=[],v=u.length,b=0;b<v;b++)m.push(u[b]);return m}m=[],v=0;for(b in u)m[v++]=u[b];return m}function ha(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var m=[];u=u.length;for(var v=0;v<u;v++)m.push(v);return m}m=[],v=0;for(const b in u)m[v++]=b;return m}}}function Ro(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var v=ha(u),b=Ih(u),B=b.length,Q=0;Q<B;Q++)m.call(void 0,b[Q],v&&v[Q],u)}var bs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ch(u,m){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var b=u[v].indexOf("="),B=null;if(0<=b){var Q=u[v].substring(0,b);B=u[v].substring(b+1)}else Q=u[v];m(Q,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function kt(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof kt){this.h=u.h,As(this,u.j),this.o=u.o,this.g=u.g,xr(this,u.s),this.l=u.l;var m=u.i,v=new Yi;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),Qi(this,v),this.m=u.m}else u&&(m=String(u).match(bs))?(this.h=!1,As(this,m[1]||"",!0),this.o=Xn(m[2]||""),this.g=Xn(m[3]||"",!0),xr(this,m[4]),this.l=Xn(m[5]||"",!0),Qi(this,m[6]||"",!0),this.m=Xn(m[7]||"")):(this.h=!1,this.i=new Yi(null,this.h))}kt.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Ss(m,Io,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Ss(m,Io,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Ss(v,v.charAt(0)=="/"?xh:Co,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Ss(v,fa)),u.join("")};function Bn(u){return new kt(u)}function As(u,m,v){u.j=v?Xn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function xr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Qi(u,m,v){m instanceof Yi?(u.i=m,uu(u.i,u.h)):(v||(m=Ss(m,Dh)),u.i=new Yi(m,u.h))}function ht(u,m,v){u.i.set(m,v)}function ws(u){return ht(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Xn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ss(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,lu),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function lu(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Io=/[#\/\?@]/g,Co=/[#\?:]/g,xh=/[#\?]/g,Dh=/[#\?@]/g,fa=/#/g;function Yi(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function $n(u){u.g||(u.g=new Map,u.h=0,u.i&&Ch(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}r=Yi.prototype,r.add=function(u,m){$n(this),this.i=null,u=_i(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function Ki(u,m){$n(u),m=_i(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Xi(u,m){return $n(u),m=_i(u,m),u.g.has(m)}r.forEach=function(u,m){$n(this),this.g.forEach(function(v,b){v.forEach(function(B){u.call(m,B,b,this)},this)},this)},r.na=function(){$n(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let b=0;b<m.length;b++){const B=u[b];for(let Q=0;Q<B.length;Q++)v.push(m[b])}return v},r.V=function(u){$n(this);let m=[];if(typeof u=="string")Xi(this,u)&&(m=m.concat(this.g.get(_i(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)m=m.concat(u[v])}return m},r.set=function(u,m){return $n(this),this.i=null,u=_i(this,u),Xi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function xo(u,m,v){Ki(u,m),0<v.length&&(u.i=null,u.g.set(_i(u,m),$(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var b=m[v];const Q=encodeURIComponent(String(b)),se=this.V(b);for(b=0;b<se.length;b++){var B=Q;se[b]!==""&&(B+="="+encodeURIComponent(String(se[b]))),u.push(B)}}return this.i=u.join("&")};function _i(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function uu(u,m){m&&!u.j&&($n(u),u.i=null,u.g.forEach(function(v,b){var B=b.toLowerCase();b!=B&&(Ki(this,b),xo(this,B,v))},u)),u.j=m}function Rs(u,m){const v=new xe;if(p.Image){const b=new Image;b.onload=F(Zn,v,"TestLoadImage: loaded",!0,m,b),b.onerror=F(Zn,v,"TestLoadImage: error",!1,m,b),b.onabort=F(Zn,v,"TestLoadImage: abort",!1,m,b),b.ontimeout=F(Zn,v,"TestLoadImage: timeout",!1,m,b),p.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=u}else m(!1)}function ci(u,m){const v=new xe,b=new AbortController,B=setTimeout(()=>{b.abort(),Zn(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:b.signal}).then(Q=>{clearTimeout(B),Q.ok?Zn(v,"TestPingServer: ok",!0,m):Zn(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(B),Zn(v,"TestPingServer: error",!1,m)})}function Zn(u,m,v,b,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),b(v)}catch{}}function Is(){this.g=new Hi}function Ei(u,m,v){const b=v||"";try{Ro(u,function(B,Q){let se=B;y(B)&&(se=Ln(B)),m.push(b+Q+"="+encodeURIComponent(se))})}catch(B){throw m.push(b+"type="+encodeURIComponent("_badmap")),B}}function Dr(u){this.l=u.Ub||null,this.j=u.eb||!1}ne(Dr,_s),Dr.prototype.g=function(){return new $i(this.l,this.j)},Dr.prototype.i=function(u){return function(){return u}}({});function $i(u,m){wt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}ne($i,wt),r=$i.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,bi(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||p).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ti(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,bi(this)),this.g&&(this.readyState=3,bi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Do(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Do(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Ti(this):bi(this),this.readyState==3&&Do(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Ti(this))},r.Qa=function(u){this.g&&(this.response=u,Ti(this))},r.ga=function(){this.g&&Ti(this)};function Ti(u){u.readyState=4,u.l=null,u.j=null,u.v=null,bi(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function bi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty($i.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function No(u){let m="";return Be(u,function(v,b){m+=b,m+=":",m+=v,m+=`\r
`}),m}function Jt(u,m,v){e:{for(b in v){var b=!1;break e}b=!0}b||(v=No(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):ht(u,m,v))}function st(u){wt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}ne(st,wt);var da=/^https?$/i,Cs=["POST","PUT"];r=st.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,v,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Et.g(),this.v=this.o?Sr(this.o):Sr(Et),this.g.onreadystatechange=D(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(Q){cu(this,Q);return}if(u=v||"",v=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var B in b)v.set(B,b[B]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const Q of b.keys())v.set(Q,b.get(Q));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(v.keys()).find(Q=>Q.toLowerCase()=="content-type"),B=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(Cs,m,void 0))||b||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,se]of v)this.g.setRequestHeader(Q,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xs(this),this.u=!0,this.g.send(u),this.u=!1}catch(Q){cu(this,Q)}};function cu(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,ma(u),Ai(u)}function ma(u){u.A||(u.A=!0,it(u,"complete"),it(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,it(this,"complete"),it(this,"abort"),Ai(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ai(this,!0)),st.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?pa(this):this.bb())},r.bb=function(){pa(this)};function pa(u){if(u.h&&typeof f<"u"&&(!u.v[1]||Wn(u)!=4||u.Z()!=2)){if(u.u&&Wn(u)==4)Zt(u.Ea,0,u);else if(it(u,"readystatechange"),Wn(u)==4){u.h=!1;try{const se=u.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var b;if(b=se===0){var B=String(u.D).match(bs)[1]||null;!B&&p.self&&p.self.location&&(B=p.self.location.protocol.slice(0,-1)),b=!da.test(B?B.toLowerCase():"")}v=b}if(v)it(u,"complete"),it(u,"success");else{u.m=6;try{var Q=2<Wn(u)?u.g.statusText:""}catch{Q=""}u.l=Q+" ["+u.Z()+"]",ma(u)}}finally{Ai(u)}}}}function Ai(u,m){if(u.g){xs(u);const v=u.g,b=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||it(u,"ready");try{v.onreadystatechange=b}catch{}}}function xs(u){u.I&&(p.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Wn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Wn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),qi(m)}};function hu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Nh(u){const m={};u=(u.g&&2<=Wn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<u.length;b++){if(Ae(u[b]))continue;var v=V(u[b]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Q=m[B]||[];m[B]=Q,Q.push(v)}x(m,function(b){return b.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ds(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function ga(u){this.Aa=0,this.i=[],this.j=new xe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ds("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ds("baseRetryDelayMs",5e3,u),this.cb=Ds("retryDelaySeedMs",1e4,u),this.Wa=Ds("forwardChannelMaxRetries",2,u),this.wa=Ds("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Fi(u&&u.concurrentRequestLimit),this.Da=new Is,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ga.prototype,r.la=8,r.G=1,r.connect=function(u,m,v,b){ge(0),this.W=u,this.H=m||{},v&&b!==void 0&&(this.H.OSID=v,this.H.OAID=b),this.F=this.X,this.I=vu(this,null,this.W),va(this)};function Oo(u){if(fu(u),u.G==3){var m=u.U++,v=Bn(u.I);if(ht(v,"SID",u.K),ht(v,"RID",m),ht(v,"TYPE","terminate"),Ns(u,v),m=new qt(u,u.j,m),m.L=2,m.v=ws(Bn(v)),v=!1,p.navigator&&p.navigator.sendBeacon)try{v=p.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&p.Image&&(new Image().src=m.v,v=!0),v||(m.g=_u(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Es(m)}yu(u)}function ya(u){u.g&&(Os(u),u.g.cancel(),u.g=null)}function fu(u){ya(u),u.u&&(p.clearTimeout(u.u),u.u=null),_a(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function va(u){if(!la(u.h)&&!u.s){u.s=!0;var m=u.Ga;ae||N(),pe||(ae(),pe=!0),tt.add(m,u),u.B=0}}function Oh(u,m){return ua(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=me(D(u.Ga,u,m),Uo(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const B=new qt(this,this.j,u);let Q=this.o;if(this.S&&(Q?(Q=w(Q),O(Q,this.S)):Q=this.S),this.m!==null||this.O||(B.H=Q,Q=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var b=this.i[v];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(m+=b,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=du(this,B,m),v=Bn(this.I),ht(v,"RID",u),ht(v,"CVER",22),this.D&&ht(v,"X-HTTP-Session-Id",this.D),Ns(this,v),Q&&(this.O?m="headers="+encodeURIComponent(String(No(Q)))+"&"+m:this.m&&Jt(v,this.m,Q)),ca(this.h,B),this.Ua&&ht(v,"TYPE","init"),this.P?(ht(v,"$req",m),ht(v,"SID","null"),B.T=!0,ui(B,v,null)):ui(B,v,m),this.G=2}}else this.G==3&&(u?Mo(this,u):this.i.length==0||la(this.h)||Mo(this))};function Mo(u,m){var v;m?v=m.l:v=u.U++;const b=Bn(u.I);ht(b,"SID",u.K),ht(b,"RID",v),ht(b,"AID",u.T),Ns(u,b),u.m&&u.o&&Jt(b,u.m,u.o),v=new qt(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),m&&(u.i=m.D.concat(u.i)),m=du(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ca(u.h,v),ui(v,b,m)}function Ns(u,m){u.H&&Be(u.H,function(v,b){ht(m,b,v)}),u.l&&Ro({},function(v,b){ht(m,b,v)})}function du(u,m,v){v=Math.min(u.i.length,v);var b=u.l?D(u.l.Na,u.l,u):null;e:{var B=u.i;let Q=-1;for(;;){const se=["count="+v];Q==-1?0<v?(Q=B[0].g,se.push("ofs="+Q)):Q=0:se.push("ofs="+Q);let Ze=!0;for(let Ht=0;Ht<v;Ht++){let We=B[Ht].g;const en=B[Ht].map;if(We-=Q,0>We)Q=Math.max(0,B[Ht].g-100),Ze=!1;else try{Ei(en,se,"req"+We+"_")}catch{b&&b(en)}}if(Ze){b=se.join("&");break e}}}return u=u.i.splice(0,v),m.D=u,b}function mu(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;ae||N(),pe||(ae(),pe=!0),tt.add(m,u),u.v=0}}function Vo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=me(D(u.Fa,u),Uo(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,pu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=me(D(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ge(10),ya(this),pu(this))};function Os(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function pu(u){u.g=new qt(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=Bn(u.qa);ht(m,"RID","rpc"),ht(m,"SID",u.K),ht(m,"AID",u.T),ht(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&ht(m,"TO",u.ja),ht(m,"TYPE","xmlhttp"),Ns(u,m),u.m&&u.o&&Jt(m,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=ws(Bn(m)),v.m=null,v.P=!0,Gi(v,u)}r.Za=function(){this.C!=null&&(this.C=null,ya(this),Vo(this),ge(19))};function _a(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function gu(u,m){var v=null;if(u.g==m){_a(u),Os(u),u.g=null;var b=2}else if(wo(u.h,m))v=m.D,Rn(u.h,m),b=1;else return;if(u.G!=0){if(m.o)if(b==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var B=u.B;b=he(),it(b,new ye(b,v)),va(u)}else mu(u);else if(B=m.s,B==3||B==0&&0<m.X||!(b==1&&Oh(u,m)||b==2&&Vo(u)))switch(v&&0<v.length&&(m=u.h,m.i=m.i.concat(v)),B){case 1:Zi(u,5);break;case 4:Zi(u,10);break;case 3:Zi(u,6);break;default:Zi(u,2)}}}function Uo(u,m){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*m}function Zi(u,m){if(u.j.info("Error code "+m),m==2){var v=D(u.fb,u),b=u.Xa;const B=!b;b=new kt(b||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||As(b,"https"),ws(b),B?Rs(b.toString(),v):ci(b.toString(),v)}else ge(2);u.G=0,u.l&&u.l.sa(m),yu(u),fu(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ge(2)):(this.j.info("Failed to ping google.com"),ge(1))};function yu(u){if(u.G=0,u.ka=[],u.l){const m=So(u.h);(m.length!=0||u.i.length!=0)&&(te(u.ka,m),te(u.ka,u.i),u.h.i.length=0,$(u.i),u.i.length=0),u.l.ra()}}function vu(u,m,v){var b=v instanceof kt?Bn(v):new kt(v);if(b.g!="")m&&(b.g=m+"."+b.g),xr(b,b.s);else{var B=p.location;b=B.protocol,m=m?m+"."+B.hostname:B.hostname,B=+B.port;var Q=new kt(null);b&&As(Q,b),m&&(Q.g=m),B&&xr(Q,B),v&&(Q.l=v),b=Q}return v=u.D,m=u.ya,v&&m&&ht(b,v,m),ht(b,"VER",u.la),Ns(u,b),b}function _u(u,m,v){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new st(new Dr({eb:v})):new st(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Eu(){}r=Eu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ea(){}Ea.prototype.g=function(u,m){return new In(u,m)};function In(u,m){wt.call(this),this.g=new ga(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!Ae(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!Ae(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new wi(this)}ne(In,wt),In.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){Oo(this.g)},In.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=Ln(u),u=v);m.i.push(new ou(m.Ya++,u)),m.G==3&&va(m)},In.prototype.N=function(){this.g.l=null,delete this.j,Oo(this.g),delete this.g,In.aa.N.call(this)};function Tu(u){L.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}ne(Tu,L);function bu(){re.call(this),this.status=1}ne(bu,re);function wi(u){this.g=u}ne(wi,Eu),wi.prototype.ua=function(){it(this.g,"a")},wi.prototype.ta=function(u){it(this.g,new Tu(u))},wi.prototype.sa=function(u){it(this.g,new bu)},wi.prototype.ra=function(){it(this.g,"b")},Ea.prototype.createWebChannel=Ea.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,tE=function(){return new Ea},eE=function(){return he()},J0=le,Zd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},je.NO_ERROR=0,je.TIMEOUT=8,je.HTTP_ERROR=6,Mc=je,St.COMPLETE="complete",W0=St,A.EventType=H,H.OPEN="a",H.CLOSE="b",H.ERROR="c",H.MESSAGE="d",wt.prototype.listen=wt.prototype.K,Rl=A,st.prototype.listenOnce=st.prototype.L,st.prototype.getLastError=st.prototype.Ka,st.prototype.getLastErrorCode=st.prototype.Ba,st.prototype.getStatus=st.prototype.Z,st.prototype.getResponseJson=st.prototype.Oa,st.prototype.getResponseText=st.prototype.oa,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Ha,Z0=st}).apply(typeof wc<"u"?wc:typeof self<"u"?self:typeof window<"u"?window:{});const r_="@firebase/firestore",s_="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tn.UNAUTHENTICATED=new Tn(null),Tn.GOOGLE_CREDENTIALS=new Tn("google-credentials-uid"),Tn.FIRST_PARTY=new Tn("first-party-uid"),Tn.MOCK_USER=new Tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _o="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=new ym("@firebase/firestore");function Wa(){return ea.logLevel}function ue(r,...e){if(ea.logLevel<=Xe.DEBUG){const n=e.map(xm);ea.debug(`Firestore (${_o}): ${r}`,...n)}}function _r(r,...e){if(ea.logLevel<=Xe.ERROR){const n=e.map(xm);ea.error(`Firestore (${_o}): ${r}`,...n)}}function lo(r,...e){if(ea.logLevel<=Xe.WARN){const n=e.map(xm);ea.warn(`Firestore (${_o}): ${r}`,...n)}}function xm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,nE(r,s,n)}function nE(r,e,n){let s=`FIRESTORE (${_o}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw _r(s),new Error(s)}function ot(r,e,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||nE(e,l,s)}function ke(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends Tr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Tn.UNAUTHENTICATED))}shutdown(){}}class rR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class sR{constructor(e){this.t=e,this.currentUser=Tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ot(this.o===void 0,42304);let s=this.i;const l=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let c=new ls;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ls,e.enqueueRetryable(()=>l(this.currentUser))};const f=()=>{const g=c;e.enqueueRetryable(async()=>{await g.promise,await l(this.currentUser)})},p=g=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(g=>p(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ls)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ot(typeof s.accessToken=="string",31837,{l:s}),new iE(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ot(e===null||typeof e=="string",2055,{h:e}),new Tn(e)}}class aR{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class oR{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new aR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Tn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class a_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ai(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ot(this.o===void 0,3512);const s=c=>{c.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,ue("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const l=c=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>l(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new a_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ot(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new a_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=uR(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<n&&(s+=e.charAt(l[c]%62))}return s}}function Ge(r,e){return r<e?-1:r>e?1:0}function Wd(r,e){let n=0;for(;n<r.length&&n<e.length;){const s=r.codePointAt(n),l=e.codePointAt(n);if(s!==l){if(s<128&&l<128)return Ge(s,l);{const c=rE(),f=cR(c.encode(o_(r,n)),c.encode(o_(e,n)));return f!==0?f:Ge(s,l)}}n+=s>65535?2:1}return Ge(r.length,e.length)}function o_(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function cR(r,e){for(let n=0;n<r.length&&n<e.length;++n)if(r[n]!==e[n])return Ge(r[n],e[n]);return Ge(r.length,e.length)}function uo(r,e,n){return r.length===e.length&&r.every((s,l)=>n(s,e[l]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_=-62135596800,u_=1e6;class Yt{static now(){return Yt.fromMillis(Date.now())}static fromDate(e){return Yt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*u_);return new Yt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<l_)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/u_}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-l_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new Yt(0,0))}static max(){return new Ve(new Yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="__name__";class Oi{constructor(e,n,s){n===void 0?n=0:n>e.length&&De(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&De(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Oi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Oi?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let l=0;l<s;l++){const c=Oi.compareSegments(e.get(l),n.get(l));if(c!==0)return c}return Ge(e.length,n.length)}static compareSegments(e,n){const s=Oi.isNumericId(e),l=Oi.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?Oi.extractNumericId(e).compare(Oi.extractNumericId(n)):Wd(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return os.fromString(e.substring(4,e.length-2))}}class Tt extends Oi{construct(e,n,s){return new Tt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ce(J.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(l=>l.length>0))}return new Tt(n)}static emptyPath(){return new Tt([])}}const hR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mn extends Oi{construct(e,n,s){return new mn(e,n,s)}static isValidIdentifier(e){return hR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===c_}static keyField(){return new mn([c_])}static fromServerFormat(e){const n=[];let s="",l=0;const c=()=>{if(s.length===0)throw new ce(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new ce(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ce(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,l+=2}else p==="`"?(f=!f,l++):p!=="."||f?(s+=p,l++):(c(),l++)}if(c(),f)throw new ce(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mn(n)}static emptyPath(){return new mn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(Tt.fromString(e))}static fromName(e){return new be(Tt.fromString(e).popFirst(5))}static empty(){return new be(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Tt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new Tt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=-1;function fR(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=Ve.fromTimestamp(s===1e9?new Yt(n+1,0):new Yt(n,s));return new cs(l,be.empty(),e)}function dR(r){return new cs(r.readTime,r.key,Ll)}class cs{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new cs(Ve.min(),be.empty(),Ll)}static max(){return new cs(Ve.max(),be.empty(),Ll)}}function mR(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(r.documentKey,e.documentKey),n!==0?n:Ge(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eo(r){if(r.code!==J.FAILED_PRECONDITION||r.message!==pR)throw r;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&De(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,l)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):W.reject(n)}static resolve(e){return new W((n,s)=>{n(e)})}static reject(e){return new W((n,s)=>{s(e)})}static waitFor(e){return new W((n,s)=>{let l=0,c=0,f=!1;e.forEach(p=>{++l,p.next(()=>{++c,f&&c===l&&n()},g=>s(g))}),f=!0,c===l&&n()})}static or(e){let n=W.resolve(!1);for(const s of e)n=n.next(l=>l?W.resolve(l):s());return n}static forEach(e,n){const s=[];return e.forEach((l,c)=>{s.push(n.call(this,l,c))}),this.waitFor(s)}static mapArray(e,n){return new W((s,l)=>{const c=e.length,f=new Array(c);let p=0;for(let g=0;g<c;g++){const y=g;n(e[y]).next(T=>{f[y]=T,++p,p===c&&s(f)},T=>l(T))}})}static doWhile(e,n){return new W((s,l)=>{const c=()=>{e()===!0?n().next(()=>{c()},l):s()};c()})}}function yR(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function To(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}lh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm=-1;function uh(r){return r==null}function Yc(r){return r===0&&1/r==-1/0}function vR(r){return typeof r=="number"&&Number.isInteger(r)&&!Yc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="";function _R(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=h_(e)),e=ER(r.get(n),e);return h_(e)}function ER(r,e){let n=e;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":n+="";break;case aE:n+="";break;default:n+=c}}return n}function h_(r){return r+aE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function ys(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function oE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n){this.comparator=e,this.root=n||dn.EMPTY}insert(e,n){return new xt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dn.BLACK,null,null))}remove(e){return new xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(e,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sc(this.root,e,this.comparator,!0)}}class Sc{constructor(e,n,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dn{constructor(e,n,s,l,c){this.key=e,this.value=n,this.color=s??dn.RED,this.left=l??dn.EMPTY,this.right=c??dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,l,c){return new dn(e??this.key,n??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let l=this;const c=s(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,n,s),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return dn.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw De(43730,{key:this.key,value:this.value});if(this.right.isRed())throw De(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw De(27949);return e+(this.isRed()?0:1)}}dn.EMPTY=null,dn.RED=!0,dn.BLACK=!1;dn.EMPTY=new class{constructor(){this.size=0}get key(){throw De(57766)}get value(){throw De(16141)}get color(){throw De(16727)}get left(){throw De(29726)}get right(){throw De(36894)}copy(e,n,s,l,c){return this}insert(e,n,s){return new dn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.comparator=e,this.data=new xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new d_(this.data.getIterator())}getIteratorFrom(e){return new d_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Kt(this.comparator);return n.data=e,n}}class d_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(mn.comparator)}static empty(){return new Yn([])}unionWith(e){let n=new Kt(mn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Yn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return uo(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new lE("Invalid base64 string: "+c):c}}(e);return new pn(n)}static fromUint8Array(e){const n=function(l){let c="";for(let f=0;f<l.length;++f)c+=String.fromCharCode(l[f]);return c}(e);return new pn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pn.EMPTY_BYTE_STRING=new pn("");const TR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hs(r){if(ot(!!r,39018),typeof r=="string"){let e=0;const n=TR.exec(r);if(ot(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Pt(r.seconds),nanos:Pt(r.nanos)}}function Pt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function fs(r){return typeof r=="string"?pn.fromBase64String(r):pn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="server_timestamp",cE="__type__",hE="__previous_value__",fE="__local_write_time__";function Nm(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[cE])===null||n===void 0?void 0:n.stringValue)===uE}function ch(r){const e=r.mapValue.fields[hE];return Nm(e)?ch(e):e}function Bl(r){const e=hs(r.mapValue.fields[fE].timestampValue);return new Yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,n,s,l,c,f,p,g,y,T){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=T}}const Kc="(default)";class zl{constructor(e,n){this.projectId=e,this.database=n||Kc}static empty(){return new zl("","")}get isDefaultDatabase(){return this.database===Kc}isEqual(e){return e instanceof zl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="__type__",AR="__max__",Rc={mapValue:{}},mE="__vector__",Xc="value";function ds(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Nm(r)?4:SR(r)?9007199254740991:wR(r)?10:11:De(28295,{value:r})}function ki(r,e){if(r===e)return!0;const n=ds(r);if(n!==ds(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Bl(r).isEqual(Bl(e));case 3:return function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const f=hs(l.timestampValue),p=hs(c.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(l,c){return fs(l.bytesValue).isEqual(fs(c.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(l,c){return Pt(l.geoPointValue.latitude)===Pt(c.geoPointValue.latitude)&&Pt(l.geoPointValue.longitude)===Pt(c.geoPointValue.longitude)}(r,e);case 2:return function(l,c){if("integerValue"in l&&"integerValue"in c)return Pt(l.integerValue)===Pt(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const f=Pt(l.doubleValue),p=Pt(c.doubleValue);return f===p?Yc(f)===Yc(p):isNaN(f)&&isNaN(p)}return!1}(r,e);case 9:return uo(r.arrayValue.values||[],e.arrayValue.values||[],ki);case 10:case 11:return function(l,c){const f=l.mapValue.fields||{},p=c.mapValue.fields||{};if(f_(f)!==f_(p))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(p[g]===void 0||!ki(f[g],p[g])))return!1;return!0}(r,e);default:return De(52216,{left:r})}}function jl(r,e){return(r.values||[]).find(n=>ki(n,e))!==void 0}function co(r,e){if(r===e)return 0;const n=ds(r),s=ds(e);if(n!==s)return Ge(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ge(r.booleanValue,e.booleanValue);case 2:return function(c,f){const p=Pt(c.integerValue||c.doubleValue),g=Pt(f.integerValue||f.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1}(r,e);case 3:return m_(r.timestampValue,e.timestampValue);case 4:return m_(Bl(r),Bl(e));case 5:return Wd(r.stringValue,e.stringValue);case 6:return function(c,f){const p=fs(c),g=fs(f);return p.compareTo(g)}(r.bytesValue,e.bytesValue);case 7:return function(c,f){const p=c.split("/"),g=f.split("/");for(let y=0;y<p.length&&y<g.length;y++){const T=Ge(p[y],g[y]);if(T!==0)return T}return Ge(p.length,g.length)}(r.referenceValue,e.referenceValue);case 8:return function(c,f){const p=Ge(Pt(c.latitude),Pt(f.latitude));return p!==0?p:Ge(Pt(c.longitude),Pt(f.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return p_(r.arrayValue,e.arrayValue);case 10:return function(c,f){var p,g,y,T;const R=c.fields||{},D=f.fields||{},F=(p=R[Xc])===null||p===void 0?void 0:p.arrayValue,ne=(g=D[Xc])===null||g===void 0?void 0:g.arrayValue,$=Ge(((y=F==null?void 0:F.values)===null||y===void 0?void 0:y.length)||0,((T=ne==null?void 0:ne.values)===null||T===void 0?void 0:T.length)||0);return $!==0?$:p_(F,ne)}(r.mapValue,e.mapValue);case 11:return function(c,f){if(c===Rc.mapValue&&f===Rc.mapValue)return 0;if(c===Rc.mapValue)return 1;if(f===Rc.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),y=f.fields||{},T=Object.keys(y);g.sort(),T.sort();for(let R=0;R<g.length&&R<T.length;++R){const D=Wd(g[R],T[R]);if(D!==0)return D;const F=co(p[g[R]],y[T[R]]);if(F!==0)return F}return Ge(g.length,T.length)}(r.mapValue,e.mapValue);default:throw De(23264,{Pe:n})}}function m_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ge(r,e);const n=hs(r),s=hs(e),l=Ge(n.seconds,s.seconds);return l!==0?l:Ge(n.nanos,s.nanos)}function p_(r,e){const n=r.values||[],s=e.values||[];for(let l=0;l<n.length&&l<s.length;++l){const c=co(n[l],s[l]);if(c)return c}return Ge(n.length,s.length)}function ho(r){return Jd(r)}function Jd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const s=hs(n);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return fs(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return be.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let s="[",l=!0;for(const c of n.values||[])l?l=!1:s+=",",s+=Jd(c);return s+"]"}(r.arrayValue):"mapValue"in r?function(n){const s=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const f of s)c?c=!1:l+=",",l+=`${f}:${Jd(n.fields[f])}`;return l+"}"}(r.mapValue):De(61005,{value:r})}function Vc(r){switch(ds(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ch(r);return e?16+Vc(e):16;case 5:return 2*r.stringValue.length;case 6:return fs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((l,c)=>l+Vc(c),0)}(r.arrayValue);case 10:case 11:return function(s){let l=0;return ys(s.fields,(c,f)=>{l+=c.length+Vc(f)}),l}(r.mapValue);default:throw De(13486,{value:r})}}function g_(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function em(r){return!!r&&"integerValue"in r}function Om(r){return!!r&&"arrayValue"in r}function y_(r){return!!r&&"nullValue"in r}function v_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Uc(r){return!!r&&"mapValue"in r}function wR(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[dE])===null||n===void 0?void 0:n.stringValue)===mE}function Ol(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return ys(r.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Ol(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ol(r.arrayValue.values[n]);return e}return Object.assign({},r)}function SR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===AR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.value=e}static empty(){return new Pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Uc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ol(n)}setAll(e){let n=mn.emptyPath(),s={},l=[];e.forEach((f,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,s,l),s={},l=[],n=p.popLast()}f?s[p.lastSegment()]=Ol(f):l.push(p.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,s,l)}delete(e){const n=this.field(e.popLast());Uc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ki(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let l=n.mapValue.fields[e.get(s)];Uc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,s){ys(n,(l,c)=>e[l]=c);for(const l of s)delete e[l]}clone(){return new Pn(Ol(this.value))}}function pE(r){const e=[];return ys(r.fields,(n,s)=>{const l=new mn([n]);if(Uc(s)){const c=pE(s.mapValue).fields;if(c.length===0)e.push(l);else for(const f of c)e.push(l.child(f))}else e.push(l)}),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,n,s,l,c,f,p){this.key=e,this.documentType=n,this.version=s,this.readTime=l,this.createTime=c,this.data=f,this.documentState=p}static newInvalidDocument(e){return new bn(e,0,Ve.min(),Ve.min(),Ve.min(),Pn.empty(),0)}static newFoundDocument(e,n,s,l){return new bn(e,1,n,Ve.min(),s,l,0)}static newNoDocument(e,n){return new bn(e,2,n,Ve.min(),Ve.min(),Pn.empty(),0)}static newUnknownDocument(e,n){return new bn(e,3,n,Ve.min(),Ve.min(),Pn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,n){this.position=e,this.inclusive=n}}function __(r,e,n){let s=0;for(let l=0;l<r.position.length;l++){const c=e[l],f=r.position[l];if(c.field.isKeyField()?s=be.comparator(be.fromName(f.referenceValue),n.key):s=co(f,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function E_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!ki(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n="asc"){this.field=e,this.dir=n}}function RR(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{}class jt extends gE{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new CR(e,n,s):n==="array-contains"?new NR(e,s):n==="in"?new OR(e,s):n==="not-in"?new MR(e,s):n==="array-contains-any"?new VR(e,s):new jt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new xR(e,s):new DR(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(co(n,this.value)):n!==null&&ds(this.value)===ds(n)&&this.matchesComparison(co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pi extends gE{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new pi(e,n)}matches(e){return yE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function yE(r){return r.op==="and"}function vE(r){return IR(r)&&yE(r)}function IR(r){for(const e of r.filters)if(e instanceof pi)return!1;return!0}function tm(r){if(r instanceof jt)return r.field.canonicalString()+r.op.toString()+ho(r.value);if(vE(r))return r.filters.map(e=>tm(e)).join(",");{const e=r.filters.map(n=>tm(n)).join(",");return`${r.op}(${e})`}}function _E(r,e){return r instanceof jt?function(s,l){return l instanceof jt&&s.op===l.op&&s.field.isEqual(l.field)&&ki(s.value,l.value)}(r,e):r instanceof pi?function(s,l){return l instanceof pi&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce((c,f,p)=>c&&_E(f,l.filters[p]),!0):!1}(r,e):void De(19439)}function EE(r){return r instanceof jt?function(n){return`${n.field.canonicalString()} ${n.op} ${ho(n.value)}`}(r):r instanceof pi?function(n){return n.op.toString()+" {"+n.getFilters().map(EE).join(" ,")+"}"}(r):"Filter"}class CR extends jt{constructor(e,n,s){super(e,n,s),this.key=be.fromName(s.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class xR extends jt{constructor(e,n){super(e,"in",n),this.keys=TE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class DR extends jt{constructor(e,n){super(e,"not-in",n),this.keys=TE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function TE(r,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>be.fromName(s.referenceValue))}class NR extends jt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Om(n)&&jl(n.arrayValue,this.value)}}class OR extends jt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&jl(this.value.arrayValue,n)}}class MR extends jt{constructor(e,n){super(e,"not-in",n)}matches(e){if(jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!jl(this.value.arrayValue,n)}}class VR extends jt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Om(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>jl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n=null,s=[],l=[],c=null,f=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=f,this.endAt=p,this.Ie=null}}function T_(r,e=null,n=[],s=[],l=null,c=null,f=null){return new UR(r,e,n,s,l,c,f)}function Mm(r){const e=ke(r);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>tm(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(c){return c.field.canonicalString()+c.dir}(s)).join(","),uh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>ho(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>ho(s)).join(",")),e.Ie=n}return e.Ie}function Vm(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!RR(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!_E(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!E_(r.startAt,e.startAt)&&E_(r.endAt,e.endAt)}function nm(r){return be.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n=null,s=[],l=[],c=null,f="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=f,this.startAt=p,this.endAt=g,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function PR(r,e,n,s,l,c,f,p){return new Zl(r,e,n,s,l,c,f,p)}function Um(r){return new Zl(r)}function b_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function bE(r){return r.collectionGroup!==null}function Ml(r){const e=ke(r);if(e.Ee===null){e.Ee=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ee.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new Kt(mn.comparator);return f.filters.forEach(g=>{g.getFlattenedFilters().forEach(y=>{y.isInequality()&&(p=p.add(y.field))})}),p})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ee.push(new Zc(c,s))}),n.has(mn.keyField().canonicalString())||e.Ee.push(new Zc(mn.keyField(),s))}return e.Ee}function Ui(r){const e=ke(r);return e.de||(e.de=kR(e,Ml(r))),e.de}function kR(r,e){if(r.limitType==="F")return T_(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(l=>{const c=l.dir==="desc"?"asc":"desc";return new Zc(l.field,c)});const n=r.endAt?new $c(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new $c(r.startAt.position,r.startAt.inclusive):null;return T_(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function im(r,e){const n=r.filters.concat([e]);return new Zl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function rm(r,e,n){return new Zl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function hh(r,e){return Vm(Ui(r),Ui(e))&&r.limitType===e.limitType}function AE(r){return`${Mm(Ui(r))}|lt:${r.limitType}`}function Ja(r){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(l=>EE(l)).join(", ")}]`),uh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(l=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(l)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(l=>ho(l)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(l=>ho(l)).join(",")),`Target(${s})`}(Ui(r))}; limitType=${r.limitType})`}function fh(r,e){return e.isFoundDocument()&&function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):be.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(r,e)&&function(s,l){for(const c of Ml(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0}(r,e)&&function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0}(r,e)&&function(s,l){return!(s.startAt&&!function(f,p,g){const y=__(f,p,g);return f.inclusive?y<=0:y<0}(s.startAt,Ml(s),l)||s.endAt&&!function(f,p,g){const y=__(f,p,g);return f.inclusive?y>=0:y>0}(s.endAt,Ml(s),l))}(r,e)}function LR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function wE(r){return(e,n)=>{let s=!1;for(const l of Ml(r)){const c=BR(l,e,n);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function BR(r,e,n){const s=r.field.isKeyField()?be.comparator(e.key,n.key):function(c,f,p){const g=f.data.field(c),y=p.data.field(c);return g!==null&&y!==null?co(g,y):De(42886)}(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return De(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),l=this.inner[s];if(l===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(e){ys(this.inner,(n,s)=>{for(const[l,c]of s)e(l,c)})}isEmpty(){return oE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=new xt(be.comparator);function Er(){return zR}const SE=new xt(be.comparator);function Il(...r){let e=SE;for(const n of r)e=e.insert(n.key,n);return e}function RE(r){let e=SE;return r.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function $s(){return Vl()}function IE(){return Vl()}function Vl(){return new na(r=>r.toString(),(r,e)=>r.isEqual(e))}const jR=new xt(be.comparator),qR=new Kt(be.comparator);function $e(...r){let e=qR;for(const n of r)e=e.add(n);return e}const HR=new Kt(Ge);function GR(){return HR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yc(e)?"-0":e}}function CE(r){return{integerValue:""+r}}function FR(r,e){return vR(e)?CE(e):Pm(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(){this._=void 0}}function QR(r,e,n){return r instanceof Wc?function(l,c){const f={fields:{[cE]:{stringValue:uE},[fE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Nm(c)&&(c=ch(c)),c&&(f.fields[hE]=c),{mapValue:f}}(n,e):r instanceof ql?DE(r,e):r instanceof Hl?NE(r,e):function(l,c){const f=xE(l,c),p=A_(f)+A_(l.Re);return em(f)&&em(l.Re)?CE(p):Pm(l.serializer,p)}(r,e)}function YR(r,e,n){return r instanceof ql?DE(r,e):r instanceof Hl?NE(r,e):n}function xE(r,e){return r instanceof Jc?function(s){return em(s)||function(c){return!!c&&"doubleValue"in c}(s)}(e)?e:{integerValue:0}:null}class Wc extends dh{}class ql extends dh{constructor(e){super(),this.elements=e}}function DE(r,e){const n=OE(e);for(const s of r.elements)n.some(l=>ki(l,s))||n.push(s);return{arrayValue:{values:n}}}class Hl extends dh{constructor(e){super(),this.elements=e}}function NE(r,e){let n=OE(e);for(const s of r.elements)n=n.filter(l=>!ki(l,s));return{arrayValue:{values:n}}}class Jc extends dh{constructor(e,n){super(),this.serializer=e,this.Re=n}}function A_(r){return Pt(r.integerValue||r.doubleValue)}function OE(r){return Om(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function KR(r,e){return r.field.isEqual(e.field)&&function(s,l){return s instanceof ql&&l instanceof ql||s instanceof Hl&&l instanceof Hl?uo(s.elements,l.elements,ki):s instanceof Jc&&l instanceof Jc?ki(s.Re,l.Re):s instanceof Wc&&l instanceof Wc}(r.transform,e.transform)}class XR{constructor(e,n){this.version=e,this.transformResults=n}}class kn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new kn}static exists(e){return new kn(void 0,e)}static updateTime(e){return new kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class mh{}function ME(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new ph(r.key,kn.none()):new Wl(r.key,r.data,kn.none());{const n=r.data,s=Pn.empty();let l=new Kt(mn.comparator);for(let c of e.fields)if(!l.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?s.delete(c):s.set(c,f),l=l.add(c)}return new vs(r.key,s,new Yn(l.toArray()),kn.none())}}function $R(r,e,n){r instanceof Wl?function(l,c,f){const p=l.value.clone(),g=S_(l.fieldTransforms,c,f.transformResults);p.setAll(g),c.convertToFoundDocument(f.version,p).setHasCommittedMutations()}(r,e,n):r instanceof vs?function(l,c,f){if(!Pc(l.precondition,c))return void c.convertToUnknownDocument(f.version);const p=S_(l.fieldTransforms,c,f.transformResults),g=c.data;g.setAll(VE(l)),g.setAll(p),c.convertToFoundDocument(f.version,g).setHasCommittedMutations()}(r,e,n):function(l,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function Ul(r,e,n,s){return r instanceof Wl?function(c,f,p,g){if(!Pc(c.precondition,f))return p;const y=c.value.clone(),T=R_(c.fieldTransforms,g,f);return y.setAll(T),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null}(r,e,n,s):r instanceof vs?function(c,f,p,g){if(!Pc(c.precondition,f))return p;const y=R_(c.fieldTransforms,g,f),T=f.data;return T.setAll(VE(c)),T.setAll(y),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(R=>R.field))}(r,e,n,s):function(c,f,p){return Pc(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p}(r,e,n)}function ZR(r,e){let n=null;for(const s of r.fieldTransforms){const l=e.data.field(s.field),c=xE(s.transform,l||null);c!=null&&(n===null&&(n=Pn.empty()),n.set(s.field,c))}return n||null}function w_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&uo(s,l,(c,f)=>KR(c,f))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Wl extends mh{constructor(e,n,s,l=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class vs extends mh{constructor(e,n,s,l,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function VE(r){const e=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}}),e}function S_(r,e,n){const s=new Map;ot(r.length===n.length,32656,{Ve:n.length,me:r.length});for(let l=0;l<n.length;l++){const c=r[l],f=c.transform,p=e.data.field(c.field);s.set(c.field,YR(f,p,n[l]))}return s}function R_(r,e,n){const s=new Map;for(const l of r){const c=l.transform,f=n.data.field(l.field);s.set(l.field,QR(c,f,e))}return s}class ph extends mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WR extends mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,n,s,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&$R(c,e,s[l])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Ul(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Ul(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=IE();return this.mutations.forEach(l=>{const c=e.get(l.key),f=c.overlayedDocument;let p=this.applyToLocalView(f,c.mutatedFields);p=n.has(l.key)?null:p;const g=ME(f,p);g!==null&&s.set(l.key,g),f.isValidDocument()||f.convertToNoDocument(Ve.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),$e())}isEqual(e){return this.batchId===e.batchId&&uo(this.mutations,e.mutations,(n,s)=>w_(n,s))&&uo(this.baseMutations,e.baseMutations,(n,s)=>w_(n,s))}}class km{constructor(e,n,s,l){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(e,n,s){ot(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let l=function(){return jR}();const c=e.mutations;for(let f=0;f<c.length;f++)l=l.insert(c[f].key,s[f].version);return new km(e,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt,et;function nI(r){switch(r){case J.OK:return De(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return De(15467,{code:r})}}function UE(r){if(r===void 0)return _r("GRPC error has no .code"),J.UNKNOWN;switch(r){case zt.OK:return J.OK;case zt.CANCELLED:return J.CANCELLED;case zt.UNKNOWN:return J.UNKNOWN;case zt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case zt.INTERNAL:return J.INTERNAL;case zt.UNAVAILABLE:return J.UNAVAILABLE;case zt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case zt.NOT_FOUND:return J.NOT_FOUND;case zt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case zt.ABORTED:return J.ABORTED;case zt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case zt.DATA_LOSS:return J.DATA_LOSS;default:return De(39323,{code:r})}}(et=zt||(zt={}))[et.OK=0]="OK",et[et.CANCELLED=1]="CANCELLED",et[et.UNKNOWN=2]="UNKNOWN",et[et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",et[et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",et[et.NOT_FOUND=5]="NOT_FOUND",et[et.ALREADY_EXISTS=6]="ALREADY_EXISTS",et[et.PERMISSION_DENIED=7]="PERMISSION_DENIED",et[et.UNAUTHENTICATED=16]="UNAUTHENTICATED",et[et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",et[et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",et[et.ABORTED=10]="ABORTED",et[et.OUT_OF_RANGE=11]="OUT_OF_RANGE",et[et.UNIMPLEMENTED=12]="UNIMPLEMENTED",et[et.INTERNAL=13]="INTERNAL",et[et.UNAVAILABLE=14]="UNAVAILABLE",et[et.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=new os([4294967295,4294967295],0);function I_(r){const e=rE().encode(r),n=new $0;return n.update(e),new Uint8Array(n.digest())}function C_(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new os([n,s],0),new os([l,c],0)]}class Lm{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Cl(`Invalid padding: ${n}`);if(s<0)throw new Cl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Cl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Cl(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=os.fromNumber(this.pe)}we(e,n,s){let l=e.add(n.multiply(os.fromNumber(s)));return l.compare(iI)===1&&(l=new os([l.getBits(0),l.getBits(1)],0)),l.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=I_(e),[s,l]=C_(n);for(let c=0;c<this.hashCount;c++){const f=this.we(s,l,c);if(!this.be(f))return!1}return!0}static create(e,n,s){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new Lm(c,l,n);return s.forEach(p=>f.insert(p)),f}insert(e){if(this.pe===0)return;const n=I_(e),[s,l]=C_(n);for(let c=0;c<this.hashCount;c++){const f=this.we(s,l,c);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Cl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n,s,l,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const l=new Map;return l.set(e,Jl.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new gh(Ve.min(),l,new xt(Ge),Er(),$e())}}class Jl{constructor(e,n,s,l,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Jl(s,n,$e(),$e(),$e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,n,s,l){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=l}}class PE{constructor(e,n){this.targetId=e,this.Ce=n}}class kE{constructor(e,n,s=pn.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=l}}class x_{constructor(){this.Fe=0,this.Me=D_(),this.xe=pn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=$e(),n=$e(),s=$e();return this.Me.forEach((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:De(38017,{changeType:c})}}),new Jl(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=D_()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ot(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class rI{constructor(e){this.ze=e,this.je=new Map,this.He=Er(),this.Je=Ic(),this.Ye=Ic(),this.Ze=new xt(Ge)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:De(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,l)=>{this.it(l)&&n(l)})}ot(e){const n=e.targetId,s=e.Ce.count,l=this._t(n);if(l){const c=l.target;if(nm(c))if(s===0){const f=new be(c.path);this.tt(n,f,bn.newNoDocument(f,Ve.min()))}else ot(s===1,20013,{expectedCount:s});else{const f=this.ut(n);if(f!==s){const p=this.ct(e),g=p?this.lt(p,e,f):1;if(g!==0){this.st(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=n;let f,p;try{f=fs(s).toUint8Array()}catch(g){if(g instanceof lE)return lo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Lm(f,l,c)}catch(g){return lo(g instanceof Cl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.pe===0?null:p}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let l=0;return s.forEach(c=>{const f=this.ze.Pt(),p=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.tt(n,c,null),l++)}),l}It(e){const n=new Map;this.je.forEach((c,f)=>{const p=this._t(f);if(p){if(c.current&&nm(p.target)){const g=new be(p.target.path);this.Et(g).has(f)||this.dt(f,g)||this.tt(f,g,bn.newNoDocument(g,e))}c.Le&&(n.set(f,c.qe()),c.Qe())}});let s=$e();this.Ye.forEach((c,f)=>{let p=!0;f.forEachWhile(g=>{const y=this._t(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)}),p&&(s=s.add(c))}),this.He.forEach((c,f)=>f.setReadTime(e));const l=new gh(e,n,this.Ze,this.He,s);return this.He=Er(),this.Je=Ic(),this.Ye=Ic(),this.Ze=new xt(Ge),l}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const l=this.rt(e);this.dt(e,n)?l.$e(n,1):l.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new x_,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Kt(Ge),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Kt(Ge),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||ue("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new x_),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Ic(){return new xt(be.comparator)}function D_(){return new xt(be.comparator)}const sI={asc:"ASCENDING",desc:"DESCENDING"},aI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oI={and:"AND",or:"OR"};class lI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function sm(r,e){return r.useProto3Json||uh(e)?e:{value:e}}function eh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function LE(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function uI(r,e){return eh(r,e.toTimestamp())}function Pi(r){return ot(!!r,49232),Ve.fromTimestamp(function(n){const s=hs(n);return new Yt(s.seconds,s.nanos)}(r))}function Bm(r,e){return am(r,e).canonicalString()}function am(r,e){const n=function(l){return new Tt(["projects",l.projectId,"databases",l.database])}(r).child("documents");return e===void 0?n:n.child(e)}function BE(r){const e=Tt.fromString(r);return ot(GE(e),10190,{key:e.toString()}),e}function om(r,e){return Bm(r.databaseId,e.path)}function kd(r,e){const n=BE(e);if(n.get(1)!==r.databaseId.projectId)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new be(jE(n))}function zE(r,e){return Bm(r.databaseId,e)}function cI(r){const e=BE(r);return e.length===4?Tt.emptyPath():jE(e)}function lm(r){return new Tt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function jE(r){return ot(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function N_(r,e,n){return{name:om(r,e),fields:n.value.mapValue.fields}}function hI(r,e){let n;if("targetChange"in e){e.targetChange;const s=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:De(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=function(y,T){return y.useProto3Json?(ot(T===void 0||typeof T=="string",58123),pn.fromBase64String(T||"")):(ot(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),pn.fromUint8Array(T||new Uint8Array))}(r,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&function(y){const T=y.code===void 0?J.UNKNOWN:UE(y.code);return new ce(T,y.message||"")}(f);n=new kE(s,l,c,p||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const l=kd(r,s.document.name),c=Pi(s.document.updateTime),f=s.document.createTime?Pi(s.document.createTime):Ve.min(),p=new Pn({mapValue:{fields:s.document.fields}}),g=bn.newFoundDocument(l,c,f,p),y=s.targetIds||[],T=s.removedTargetIds||[];n=new kc(y,T,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const l=kd(r,s.document),c=s.readTime?Pi(s.readTime):Ve.min(),f=bn.newNoDocument(l,c),p=s.removedTargetIds||[];n=new kc([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const l=kd(r,s.document),c=s.removedTargetIds||[];n=new kc([],c,l,null)}else{if(!("filter"in e))return De(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,f=new tI(l,c),p=s.targetId;n=new PE(p,f)}}return n}function fI(r,e){let n;if(e instanceof Wl)n={update:N_(r,e.key,e.value)};else if(e instanceof ph)n={delete:om(r,e.key)};else if(e instanceof vs)n={update:N_(r,e.key,e.data),updateMask:TI(e.fieldMask)};else{if(!(e instanceof WR))return De(16599,{ft:e.type});n={verify:om(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(c,f){const p=f.transform;if(p instanceof Wc)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof ql)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Hl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Jc)return{fieldPath:f.field.canonicalString(),increment:p.Re};throw De(20930,{transform:f.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(l,c){return c.updateTime!==void 0?{updateTime:uI(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:De(27497)}(r,e.precondition)),n}function dI(r,e){return r&&r.length>0?(ot(e!==void 0,14353),r.map(n=>function(l,c){let f=l.updateTime?Pi(l.updateTime):Pi(c);return f.isEqual(Ve.min())&&(f=Pi(c)),new XR(f,l.transformResults||[])}(n,e))):[]}function mI(r,e){return{documents:[zE(r,e.path)]}}function pI(r,e){const n={structuredQuery:{}},s=e.path;let l;e.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=zE(r,l);const c=function(y){if(y.length!==0)return HE(pi.create(y,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const f=function(y){if(y.length!==0)return y.map(T=>function(D){return{field:eo(D.field),direction:vI(D.dir)}}(T))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const p=sm(r,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{gt:n,parent:l}}function gI(r){let e=cI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){ot(s===1,65062);const T=n.from[0];T.allDescendants?l=T.collectionId:e=e.child(T.collectionId)}let c=[];n.where&&(c=function(R){const D=qE(R);return D instanceof pi&&vE(D)?D.getFilters():[D]}(n.where));let f=[];n.orderBy&&(f=function(R){return R.map(D=>function(ne){return new Zc(to(ne.field),function(te){switch(te){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ne.direction))}(D))}(n.orderBy));let p=null;n.limit&&(p=function(R){let D;return D=typeof R=="object"?R.value:R,uh(D)?null:D}(n.limit));let g=null;n.startAt&&(g=function(R){const D=!!R.before,F=R.values||[];return new $c(F,D)}(n.startAt));let y=null;return n.endAt&&(y=function(R){const D=!R.before,F=R.values||[];return new $c(F,D)}(n.endAt)),PR(e,l,f,c,p,"F",g,y)}function yI(r,e){const n=function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De(28987,{purpose:l})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function qE(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=to(n.unaryFilter.field);return jt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=to(n.unaryFilter.field);return jt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=to(n.unaryFilter.field);return jt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=to(n.unaryFilter.field);return jt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return De(61313);default:return De(60726)}}(r):r.fieldFilter!==void 0?function(n){return jt.create(to(n.fieldFilter.field),function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return De(58110);default:return De(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return pi.create(n.compositeFilter.filters.map(s=>qE(s)),function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return De(1026)}}(n.compositeFilter.op))}(r):De(30097,{filter:r})}function vI(r){return sI[r]}function _I(r){return aI[r]}function EI(r){return oI[r]}function eo(r){return{fieldPath:r.canonicalString()}}function to(r){return mn.fromServerFormat(r.fieldPath)}function HE(r){return r instanceof jt?function(n){if(n.op==="=="){if(v_(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NAN"}};if(y_(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(v_(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NOT_NAN"}};if(y_(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eo(n.field),op:_I(n.op),value:n.value}}}(r):r instanceof pi?function(n){const s=n.getFilters().map(l=>HE(l));return s.length===1?s[0]:{compositeFilter:{op:EI(n.op),filters:s}}}(r):De(54877,{filter:r})}function TI(r){const e=[];return r.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function GE(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n,s,l,c=Ve.min(),f=Ve.min(),p=pn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new is(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e){this.wt=e}}function AI(r){const e=gI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?rm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(){this.Cn=new SI}addToCollectionParentIndex(e,n){return this.Cn.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(cs.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(cs.min())}updateCollectionGroup(e,n,s){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class SI{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n]||new Kt(Tt.comparator),c=!l.has(s);return this.index[n]=l.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(e){return(this.index[e]||new Kt(Tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},FE=41943040;class Un{static withCacheSize(e){return new Un(e,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Un.DEFAULT_COLLECTION_PERCENTILE=10,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Un.DEFAULT=new Un(FE,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Un.DISABLED=new Un(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new fo(0)}static lr(){return new fo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="LruGarbageCollector",RI=1048576;function V_([r,e],[n,s]){const l=Ge(r,n);return l===0?Ge(e,s):l}class II{constructor(e){this.Er=e,this.buffer=new Kt(V_),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();V_(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class CI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){ue(M_,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){To(n)?ue(M_,"Ignoring IndexedDB error during garbage collection: ",n):await Eo(n)}await this.mr(3e5)})}}class xI{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return W.resolve(lh.le);const s=new II(n);return this.gr.forEachTarget(e,l=>s.Rr(l.sequenceNumber)).next(()=>this.gr.yr(e,l=>s.Rr(l))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(O_)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),O_):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,l,c,f,p,g,y;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),l=this.params.maximumSequenceNumbersToCollect):l=R,f=Date.now(),this.nthSequenceNumber(e,l))).next(R=>(s=R,p=Date.now(),this.removeTargets(e,s,n))).next(R=>(c=R,g=Date.now(),this.removeOrphanedDocuments(e,s))).next(R=>(y=Date.now(),Wa()<=Xe.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${l} in `+(p-f)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${R} documents in `+(y-g)+`ms
Total Duration: ${y-T}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:R})))}}function DI(r,e){return new xI(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(){this.changes=new na(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?W.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n,s,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(l=>(s=l,this.remoteDocumentCache.getEntry(e,n))).next(l=>(s!==null&&Ul(s.mutation,l,Yn.empty(),Yt.now()),l))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,$e()).next(()=>s))}getLocalViewOfDocuments(e,n,s=$e()){const l=$s();return this.populateOverlays(e,l,n).next(()=>this.computeViews(e,n,l,s).next(c=>{let f=Il();return c.forEach((p,g)=>{f=f.insert(p,g.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const s=$s();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,$e()))}populateOverlays(e,n,s){const l=[];return s.forEach(c=>{n.has(c)||l.push(c)}),this.documentOverlayCache.getOverlays(e,l).next(c=>{c.forEach((f,p)=>{n.set(f,p)})})}computeViews(e,n,s,l){let c=Er();const f=Vl(),p=function(){return Vl()}();return n.forEach((g,y)=>{const T=s.get(y.key);l.has(y.key)&&(T===void 0||T.mutation instanceof vs)?c=c.insert(y.key,y):T!==void 0?(f.set(y.key,T.mutation.getFieldMask()),Ul(T.mutation,y,T.mutation.getFieldMask(),Yt.now())):f.set(y.key,Yn.empty())}),this.recalculateAndSaveOverlays(e,c).next(g=>(g.forEach((y,T)=>f.set(y,T)),n.forEach((y,T)=>{var R;return p.set(y,new OI(T,(R=f.get(y))!==null&&R!==void 0?R:null))}),p))}recalculateAndSaveOverlays(e,n){const s=Vl();let l=new xt((f,p)=>f-p),c=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const p of f)p.keys().forEach(g=>{const y=n.get(g);if(y===null)return;let T=s.get(g)||Yn.empty();T=p.applyToLocalView(y,T),s.set(g,T);const R=(l.get(p.batchId)||$e()).add(g);l=l.insert(p.batchId,R)})}).next(()=>{const f=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,T=g.value,R=IE();T.forEach(D=>{if(!c.has(D)){const F=ME(n.get(D),s.get(D));F!==null&&R.set(D,F),c=c.add(D)}}),f.push(this.documentOverlayCache.saveOverlays(e,y,R))}return W.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,l){return function(f){return be.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):bE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,l):this.getDocumentsMatchingCollectionQuery(e,n,s,l)}getNextDocuments(e,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,l).next(c=>{const f=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,l-c.size):W.resolve($s());let p=Ll,g=c;return f.next(y=>W.forEach(y,(T,R)=>(p<R.largestBatchId&&(p=R.largestBatchId),c.get(T)?W.resolve():this.remoteDocumentCache.getEntry(e,T).next(D=>{g=g.insert(T,D)}))).next(()=>this.populateOverlays(e,y,c)).next(()=>this.computeViews(e,g,y,$e())).next(T=>({batchId:p,changes:RE(T)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next(s=>{let l=Il();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l})}getDocumentsMatchingCollectionGroupQuery(e,n,s,l){const c=n.collectionGroup;let f=Il();return this.indexManager.getCollectionParents(e,c).next(p=>W.forEach(p,g=>{const y=function(R,D){return new Zl(D,null,R.explicitOrderBy.slice(),R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt)}(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,s,l).next(T=>{T.forEach((R,D)=>{f=f.insert(R,D)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,l))).next(f=>{c.forEach((g,y)=>{const T=y.getKey();f.get(T)===null&&(f=f.insert(T,bn.newInvalidDocument(T)))});let p=Il();return f.forEach((g,y)=>{const T=c.get(g);T!==void 0&&Ul(T.mutation,y,Yn.empty(),Yt.now()),fh(n,y)&&(p=p.insert(g,y))}),p})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return W.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(l){return{id:l.id,version:l.version,createTime:Pi(l.createTime)}}(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(l){return{name:l.name,query:AI(l.bundledQuery),readTime:Pi(l.readTime)}}(n)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(){this.overlays=new xt(be.comparator),this.Qr=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const s=$s();return W.forEach(n,l=>this.getOverlay(e,l).next(c=>{c!==null&&s.set(l,c)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((l,c)=>{this.St(e,n,c)}),W.resolve()}removeOverlaysForBatchId(e,n,s){const l=this.Qr.get(s);return l!==void 0&&(l.forEach(c=>this.overlays=this.overlays.remove(c)),this.Qr.delete(s)),W.resolve()}getOverlaysForCollection(e,n,s){const l=$s(),c=n.length+1,f=new be(n.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>s&&l.set(g.getKey(),g)}return W.resolve(l)}getOverlaysForCollectionGroup(e,n,s,l){let c=new xt((y,T)=>y-T);const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let T=c.get(y.largestBatchId);T===null&&(T=$s(),c=c.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const p=$s(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,T)=>p.set(y,T)),!(p.size()>=l)););return W.resolve(p)}St(e,n,s){const l=this.overlays.get(s.key);if(l!==null){const f=this.Qr.get(l.largestBatchId).delete(s.key);this.Qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new eI(n,s));let c=this.Qr.get(n);c===void 0&&(c=$e(),this.Qr.set(n,c)),this.Qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(){this.sessionToken=pn.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(){this.$r=new Kt(sn.Ur),this.Kr=new Kt(sn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new sn(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new sn(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new be(new Tt([])),s=new sn(n,e),l=new sn(n,e+1),c=[];return this.Kr.forEachInRange([s,l],f=>{this.zr(f),c.push(f.key)}),c}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new be(new Tt([])),s=new sn(n,e),l=new sn(n,e+1);let c=$e();return this.Kr.forEachInRange([s,l],f=>{c=c.add(f.key)}),c}containsKey(e){const n=new sn(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class sn{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return be.comparator(e.key,n.key)||Ge(e.Zr,n.Zr)}static Wr(e,n){return Ge(e.Zr,n.Zr)||be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Kt(sn.Ur)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,l){const c=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new JR(c,n,s,l);this.mutationQueue.push(f);for(const p of l)this.Xr=this.Xr.add(new sn(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return W.resolve(f)}lookupMutationBatch(e,n){return W.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,l=this.ti(s),c=l<0?0:l;return W.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?Dm:this.nr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new sn(n,0),l=new sn(n,Number.POSITIVE_INFINITY),c=[];return this.Xr.forEachInRange([s,l],f=>{const p=this.ei(f.Zr);c.push(p)}),W.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Kt(Ge);return n.forEach(l=>{const c=new sn(l,0),f=new sn(l,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([c,f],p=>{s=s.add(p.Zr)})}),W.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,l=s.length+1;let c=s;be.isDocumentKey(c)||(c=c.child(""));const f=new sn(new be(c),0);let p=new Kt(Ge);return this.Xr.forEachWhile(g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===l&&(p=p.add(g.Zr)),!0)},f),W.resolve(this.ni(p))}ni(e){const n=[];return e.forEach(s=>{const l=this.ei(s);l!==null&&n.push(l)}),n}removeMutationBatch(e,n){ot(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return W.forEach(n.mutations,l=>{const c=new sn(l.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new sn(n,0),l=this.Xr.firstAfterOrEqual(s);return W.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e){this.ii=e,this.docs=function(){return new xt(be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,l=this.docs.get(s),c=l?l.size:0,f=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return W.resolve(s?s.document.mutableCopy():bn.newInvalidDocument(n))}getEntries(e,n){let s=Er();return n.forEach(l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():bn.newInvalidDocument(l))}),W.resolve(s)}getDocumentsMatchingQuery(e,n,s,l){let c=Er();const f=n.path,p=new be(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:T}}=g.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||mR(dR(T),s)<=0||(l.has(T.key)||fh(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return W.resolve(c)}getAllFromCollectionGroup(e,n,s,l){De(9500)}si(e,n){return W.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new BI(this)}getSize(e){return W.resolve(this.size)}}class BI extends NI{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,l)=>{l.isValidDocument()?n.push(this.Br.addEntry(e,l)):this.Br.removeEntry(s)}),W.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e){this.persistence=e,this.oi=new na(n=>Mm(n),Vm),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this._i=0,this.ai=new zm,this.targetCount=0,this.ui=fo.cr()}forEachTarget(e,n){return this.oi.forEach((s,l)=>n(l)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),W.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new fo(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Tr(n),W.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,s){let l=0;const c=[];return this.oi.forEach((f,p)=>{p.sequenceNumber<=n&&s.get(p.targetId)===null&&(this.oi.delete(f),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)}),W.waitFor(c).next(()=>l)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return W.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),W.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach(f=>{c.push(l.markPotentiallyOrphaned(e,f))}),W.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return W.resolve(s)}containsKey(e,n){return W.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,n){this.ci={},this.overlays={},this.li=new lh(0),this.hi=!1,this.hi=!0,this.Pi=new PI,this.referenceDelegate=e(this),this.Ti=new zI(this),this.indexManager=new wI,this.remoteDocumentCache=function(l){return new LI(l)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new bI(n),this.Ei=new VI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new UI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new kI(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){ue("MemoryPersistence","Starting transaction:",e);const l=new jI(this.li.next());return this.referenceDelegate.di(),s(l).next(c=>this.referenceDelegate.Ai(l).next(()=>c)).toPromise().then(c=>(l.raiseOnCommittedEvent(),c))}Ri(e,n){return W.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class jI extends gR{constructor(e){super(),this.currentSequenceNumber=e}}class jm{constructor(e){this.persistence=e,this.Vi=new zm,this.mi=null}static fi(e){return new jm(e)}get gi(){if(this.mi)return this.mi;throw De(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),W.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),W.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(l=>this.gi.add(l.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(l=>{l.forEach(c=>this.gi.add(c.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.gi,s=>{const l=be.fromPath(s);return this.pi(e,l).next(c=>{c||n.removeEntry(l,Ve.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return W.or([()=>W.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class th{constructor(e,n){this.persistence=e,this.yi=new na(s=>_R(s.path),(s,l)=>s.isEqual(l)),this.garbageCollector=DI(this,n)}static fi(e,n){return new th(e,n)}di(){}Ai(e){return W.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(l=>s+l))}br(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return W.forEach(this.yi,(s,l)=>this.Dr(e,s,l).next(c=>c?W.resolve():n(l)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.si(e,f=>this.Dr(e,f,n).next(p=>{p||(s++,c.removeEntry(f,Ve.min()))})).next(()=>c.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),W.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),W.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),W.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Vc(e.data.value)),n}Dr(e,n,s){return W.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.yi.get(n);return W.resolve(l!==void 0&&l>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n,s,l){this.targetId=e,this.fromCache=n,this.ds=s,this.As=l}static Rs(e,n){let s=$e(),l=$e();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new qm(e,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return Ub()?8:yR(An())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,l){const c={result:null};return this.ws(e,n).next(f=>{c.result=f}).next(()=>{if(!c.result)return this.bs(e,n,l,s).next(f=>{c.result=f})}).next(()=>{if(c.result)return;const f=new qI;return this.Ss(e,n,f).next(p=>{if(c.result=p,this.fs)return this.Ds(e,n,f,p.size)})}).next(()=>c.result)}Ds(e,n,s,l){return s.documentReadCount<this.gs?(Wa()<=Xe.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Ja(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),W.resolve()):(Wa()<=Xe.DEBUG&&ue("QueryEngine","Query:",Ja(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.ps*l?(Wa()<=Xe.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Ja(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ui(n))):W.resolve())}ws(e,n){if(b_(n))return W.resolve(null);let s=Ui(n);return this.indexManager.getIndexType(e,s).next(l=>l===0?null:(n.limit!==null&&l===1&&(n=rm(n,null,"F"),s=Ui(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const f=$e(...c);return this.ys.getDocuments(e,f).next(p=>this.indexManager.getMinOffset(e,s).next(g=>{const y=this.vs(n,p);return this.Cs(n,y,f,g.readTime)?this.ws(e,rm(n,null,"F")):this.Fs(e,y,n,g)}))})))}bs(e,n,s,l){return b_(n)||l.isEqual(Ve.min())?W.resolve(null):this.ys.getDocuments(e,s).next(c=>{const f=this.vs(n,c);return this.Cs(n,f,s,l)?W.resolve(null):(Wa()<=Xe.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Ja(n)),this.Fs(e,f,n,fR(l,Ll)).next(p=>p))})}vs(e,n){let s=new Kt(wE(e));return n.forEach((l,c)=>{fh(e,c)&&(s=s.add(c))}),s}Cs(e,n,s,l){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,n,s){return Wa()<=Xe.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Ja(n)),this.ys.getDocumentsMatchingQuery(e,n,cs.min(),s)}Fs(e,n,s,l){return this.ys.getDocumentsMatchingQuery(e,s,l).next(c=>(n.forEach(f=>{c=c.insert(f.key,f)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="LocalStore",GI=3e8;class FI{constructor(e,n,s,l){this.persistence=e,this.Ms=n,this.serializer=l,this.xs=new xt(Ge),this.Os=new na(c=>Mm(c),Vm),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MI(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function QI(r,e,n,s){return new FI(r,e,n,s)}async function YE(r,e){const n=ke(r);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next(c=>(l=c,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(c=>{const f=[],p=[];let g=$e();for(const y of l){f.push(y.batchId);for(const T of y.mutations)g=g.add(T.key)}for(const y of c){p.push(y.batchId);for(const T of y.mutations)g=g.add(T.key)}return n.localDocuments.getDocuments(s,g).next(y=>({ks:y,removedBatchIds:f,addedBatchIds:p}))})})}function YI(r,e){const n=ke(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const l=e.batch.keys(),c=n.Bs.newChangeBuffer({trackRemovals:!0});return function(p,g,y,T){const R=y.batch,D=R.keys();let F=W.resolve();return D.forEach(ne=>{F=F.next(()=>T.getEntry(g,ne)).next($=>{const te=y.docVersions.get(ne);ot(te!==null,48541),$.version.compareTo(te)<0&&(R.applyToRemoteDocument($,y),$.isValidDocument()&&($.setReadTime(y.commitVersion),T.addEntry($)))})}),F.next(()=>p.mutationQueue.removeMutationBatch(g,R))}(n,s,e,c).next(()=>c.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(p){let g=$e();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g}(e))).next(()=>n.localDocuments.getDocuments(s,l))})}function KE(r){const e=ke(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function KI(r,e){const n=ke(r),s=e.snapshotVersion;let l=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const f=n.Bs.newChangeBuffer({trackRemovals:!0});l=n.xs;const p=[];e.targetChanges.forEach((T,R)=>{const D=l.get(R);if(!D)return;p.push(n.Ti.removeMatchingKeys(c,T.removedDocuments,R).next(()=>n.Ti.addMatchingKeys(c,T.addedDocuments,R)));let F=D.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(R)!==null?F=F.withResumeToken(pn.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):T.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(T.resumeToken,s)),l=l.insert(R,F),function($,te,Me){return $.resumeToken.approximateByteSize()===0||te.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=GI?!0:Me.addedDocuments.size+Me.modifiedDocuments.size+Me.removedDocuments.size>0}(D,F,T)&&p.push(n.Ti.updateTargetData(c,F))});let g=Er(),y=$e();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))}),p.push(XI(c,f,e.documentUpdates).next(T=>{g=T.qs,y=T.Qs})),!s.isEqual(Ve.min())){const T=n.Ti.getLastRemoteSnapshotVersion(c).next(R=>n.Ti.setTargetsMetadata(c,c.currentSequenceNumber,s));p.push(T)}return W.waitFor(p).next(()=>f.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,g,y)).next(()=>g)}).then(c=>(n.xs=l,c))}function XI(r,e,n){let s=$e(),l=$e();return n.forEach(c=>s=s.add(c)),e.getEntries(r,s).next(c=>{let f=Er();return n.forEach((p,g)=>{const y=c.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(Ve.min())?(e.removeEntry(p,g.readTime),f=f.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),f=f.insert(p,g)):ue(Hm,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)}),{qs:f,Qs:l}})}function $I(r,e){const n=ke(r);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Dm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function ZI(r,e){const n=ke(r);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let l;return n.Ti.getTargetData(s,e).next(c=>c?(l=c,W.resolve(l)):n.Ti.allocateTargetId(s).next(f=>(l=new is(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,l).next(()=>l))))}).then(s=>{const l=n.xs.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function um(r,e,n){const s=ke(r),l=s.xs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,f=>s.persistence.referenceDelegate.removeTarget(f,l))}catch(f){if(!To(f))throw f;ue(Hm,`Failed to update sequence numbers for target ${e}: ${f}`)}s.xs=s.xs.remove(e),s.Os.delete(l.target)}function U_(r,e,n){const s=ke(r);let l=Ve.min(),c=$e();return s.persistence.runTransaction("Execute query","readwrite",f=>function(g,y,T){const R=ke(g),D=R.Os.get(T);return D!==void 0?W.resolve(R.xs.get(D)):R.Ti.getTargetData(y,T)}(s,f,Ui(e)).next(p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(f,p.targetId).next(g=>{c=g})}).next(()=>s.Ms.getDocumentsMatchingQuery(f,e,n?l:Ve.min(),n?c:$e())).next(p=>(WI(s,LR(e),p),{documents:p,$s:c})))}function WI(r,e,n){let s=r.Ns.get(e)||Ve.min();n.forEach((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),r.Ns.set(e,s)}class P_{constructor(){this.activeTargetIds=GR()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JI{constructor(){this.xo=new P_,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new P_,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="ConnectivityMonitor";class L_{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ue(k_,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){ue(k_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cc=null;function cm(){return Cc===null?Cc=function(){return 268435456+Math.round(2147483648*Math.random())}():Cc++,"0x"+Cc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld="RestConnection",t2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class n2{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${l}`,this.Go=this.databaseId.database===Kc?`project_id=${s}`:`project_id=${s}&database_id=${l}`}zo(e,n,s,l,c){const f=cm(),p=this.jo(e,n.toUriEncodedString());ue(Ld,`Sending RPC '${e}' ${f}:`,p,s);const g={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(g,l,c);const{host:y}=new URL(p),T=go(y);return this.Jo(e,p,g,s,T).then(R=>(ue(Ld,`Received RPC '${e}' ${f}: `,R),R),R=>{throw lo(Ld,`RPC '${e}' ${f} failed with error: `,R,"url: ",p,"request:",s),R})}Yo(e,n,s,l,c,f){return this.zo(e,n,s,l,c)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_o}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((l,c)=>e[c]=l),s&&s.headers.forEach((l,c)=>e[c]=l)}jo(e,n){const s=t2[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="WebChannelConnection";class r2 extends n2{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,l,c){const f=cm();return new Promise((p,g)=>{const y=new Z0;y.setWithCredentials(!0),y.listenOnce(W0.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Mc.NO_ERROR:const R=y.getResponseJson();ue(En,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(R)),p(R);break;case Mc.TIMEOUT:ue(En,`RPC '${e}' ${f} timed out`),g(new ce(J.DEADLINE_EXCEEDED,"Request time out"));break;case Mc.HTTP_ERROR:const D=y.getStatus();if(ue(En,`RPC '${e}' ${f} failed with status:`,D,"response text:",y.getResponseText()),D>0){let F=y.getResponseJson();Array.isArray(F)&&(F=F[0]);const ne=F==null?void 0:F.error;if(ne&&ne.status&&ne.message){const $=function(Me){const Ae=Me.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(Ae)>=0?Ae:J.UNKNOWN}(ne.status);g(new ce($,ne.message))}else g(new ce(J.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new ce(J.UNAVAILABLE,"Connection failed."));break;default:De(9055,{h_:e,streamId:f,P_:y.getLastErrorCode(),T_:y.getLastError()})}}finally{ue(En,`RPC '${e}' ${f} completed.`)}});const T=JSON.stringify(l);ue(En,`RPC '${e}' ${f} sending request:`,l),y.send(n,"POST",T,s,15)})}I_(e,n,s){const l=cm(),c=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=tE(),p=eE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Ho(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const T=c.join("");ue(En,`Creating RPC '${e}' stream ${l}: ${T}`,g);const R=f.createWebChannel(T,g);this.E_(R);let D=!1,F=!1;const ne=new i2({Zo:te=>{F?ue(En,`Not sending because RPC '${e}' stream ${l} is closed:`,te):(D||(ue(En,`Opening RPC '${e}' stream ${l} transport.`),R.open(),D=!0),ue(En,`RPC '${e}' stream ${l} sending:`,te),R.send(te))},Xo:()=>R.close()}),$=(te,Me,Ae)=>{te.listen(Me,Te=>{try{Ae(Te)}catch(Ue){setTimeout(()=>{throw Ue},0)}})};return $(R,Rl.EventType.OPEN,()=>{F||(ue(En,`RPC '${e}' stream ${l} transport opened.`),ne.__())}),$(R,Rl.EventType.CLOSE,()=>{F||(F=!0,ue(En,`RPC '${e}' stream ${l} transport closed`),ne.u_(),this.d_(R))}),$(R,Rl.EventType.ERROR,te=>{F||(F=!0,lo(En,`RPC '${e}' stream ${l} transport errored. Name:`,te.name,"Message:",te.message),ne.u_(new ce(J.UNAVAILABLE,"The operation could not be completed")))}),$(R,Rl.EventType.MESSAGE,te=>{var Me;if(!F){const Ae=te.data[0];ot(!!Ae,16349);const Te=Ae,Ue=(Te==null?void 0:Te.error)||((Me=Te[0])===null||Me===void 0?void 0:Me.error);if(Ue){ue(En,`RPC '${e}' stream ${l} received error:`,Ue);const we=Ue.status;let Be=function(S){const O=zt[S];if(O!==void 0)return UE(O)}(we),x=Ue.message;Be===void 0&&(Be=J.INTERNAL,x="Unknown error status: "+we+" with message "+Ue.message),F=!0,ne.u_(new ce(Be,x)),R.close()}else ue(En,`RPC '${e}' stream ${l} received:`,Ae),ne.c_(Ae)}}),$(p,J0.STAT_EVENT,te=>{te.stat===Zd.PROXY?ue(En,`RPC '${e}' stream ${l} detected buffering proxy`):te.stat===Zd.NOPROXY&&ue(En,`RPC '${e}' stream ${l} detected no buffering proxy`)}),setTimeout(()=>{ne.a_()},0),ne}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function Bd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(r){return new lI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,n,s=1e3,l=1.5,c=6e4){this.xi=e,this.timerId=n,this.A_=s,this.R_=l,this.V_=c,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),l=Math.max(0,n-s);l>0&&ue("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,l,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="PersistentStream";class $E{constructor(e,n,s,l,c,f,p,g){this.xi=e,this.S_=s,this.D_=l,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new XE(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(_r(n.toString()),_r("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,l])=>{this.v_===n&&this.z_(s,l)},s=>{e(()=>{const l=new ce(J.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(l)})})}z_(e,n){const s=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(l=>{s(()=>this.j_(l))}),this.stream.onMessage(l=>{s(()=>++this.M_==1?this.J_(l):this.onNext(l))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return ue(B_,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(ue(B_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class s2 extends $E{constructor(e,n,s,l,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,f),this.serializer=c}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=hI(this.serializer,e),s=function(c){if(!("targetChange"in c))return Ve.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Ve.min():f.readTime?Pi(f.readTime):Ve.min()}(e);return this.listener.Y_(n,s)}Z_(e){const n={};n.database=lm(this.serializer),n.addTarget=function(c,f){let p;const g=f.target;if(p=nm(g)?{documents:mI(c,g)}:{query:pI(c,g).gt},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=LE(c,f.resumeToken);const y=sm(c,f.expectedCount);y!==null&&(p.expectedCount=y)}else if(f.snapshotVersion.compareTo(Ve.min())>0){p.readTime=eh(c,f.snapshotVersion.toTimestamp());const y=sm(c,f.expectedCount);y!==null&&(p.expectedCount=y)}return p}(this.serializer,e);const s=yI(this.serializer,e);s&&(n.labels=s),this.Q_(n)}X_(e){const n={};n.database=lm(this.serializer),n.removeTarget=e,this.Q_(n)}}class a2 extends $E{constructor(e,n,s,l,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,f),this.serializer=c}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return ot(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ot(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){ot(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=dI(e.writeResults,e.commitTime),s=Pi(e.commitTime);return this.listener.ra(s,n)}ia(){const e={};e.database=lm(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>fI(this.serializer,s))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{}class l2 extends o2{constructor(e,n,s,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.sa=!1}oa(){if(this.sa)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.zo(e,am(n,s),l,c,f)).catch(c=>{throw c.name==="FirebaseError"?(c.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ce(J.UNKNOWN,c.toString())})}Yo(e,n,s,l,c){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,p])=>this.connection.Yo(e,am(n,s),l,f,p,c)).catch(f=>{throw f.name==="FirebaseError"?(f.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ce(J.UNKNOWN,f.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class u2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(_r(n),this.ua=!1):ue("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta="RemoteStore";class c2{constructor(e,n,s,l,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=c,this.Ra.No(f=>{s.enqueueAndForget(async()=>{ia(this)&&(ue(ta,"Restarting streams for network reachability change."),await async function(g){const y=ke(g);y.da.add(4),await eu(y),y.Va.set("Unknown"),y.da.delete(4),await vh(y)}(this))})}),this.Va=new u2(s,l)}}async function vh(r){if(ia(r))for(const e of r.Aa)await e(!0)}async function eu(r){for(const e of r.Aa)await e(!1)}function ZE(r,e){const n=ke(r);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),Ym(n)?Qm(n):bo(n).N_()&&Fm(n,e))}function Gm(r,e){const n=ke(r),s=bo(n);n.Ea.delete(e),s.N_()&&WE(n,e),n.Ea.size===0&&(s.N_()?s.k_():ia(n)&&n.Va.set("Unknown"))}function Fm(r,e){if(r.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bo(r).Z_(e)}function WE(r,e){r.ma.Ke(e),bo(r).X_(e)}function Qm(r){r.ma=new rI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>r.Ea.get(e)||null,Pt:()=>r.datastore.serializer.databaseId}),bo(r).start(),r.Va.ca()}function Ym(r){return ia(r)&&!bo(r).O_()&&r.Ea.size>0}function ia(r){return ke(r).da.size===0}function JE(r){r.ma=void 0}async function h2(r){r.Va.set("Online")}async function f2(r){r.Ea.forEach((e,n)=>{Fm(r,e)})}async function d2(r,e){JE(r),Ym(r)?(r.Va.Pa(e),Qm(r)):r.Va.set("Unknown")}async function m2(r,e,n){if(r.Va.set("Online"),e instanceof kE&&e.state===2&&e.cause)try{await async function(l,c){const f=c.cause;for(const p of c.targetIds)l.Ea.has(p)&&(await l.remoteSyncer.rejectListen(p,f),l.Ea.delete(p),l.ma.removeTarget(p))}(r,e)}catch(s){ue(ta,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await nh(r,s)}else if(e instanceof kc?r.ma.Xe(e):e instanceof PE?r.ma.ot(e):r.ma.nt(e),!n.isEqual(Ve.min()))try{const s=await KE(r.localStore);n.compareTo(s)>=0&&await function(c,f){const p=c.ma.It(f);return p.targetChanges.forEach((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const T=c.Ea.get(y);T&&c.Ea.set(y,T.withResumeToken(g.resumeToken,f))}}),p.targetMismatches.forEach((g,y)=>{const T=c.Ea.get(g);if(!T)return;c.Ea.set(g,T.withResumeToken(pn.EMPTY_BYTE_STRING,T.snapshotVersion)),WE(c,g);const R=new is(T.target,g,y,T.sequenceNumber);Fm(c,R)}),c.remoteSyncer.applyRemoteEvent(p)}(r,n)}catch(s){ue(ta,"Failed to raise snapshot:",s),await nh(r,s)}}async function nh(r,e,n){if(!To(e))throw e;r.da.add(1),await eu(r),r.Va.set("Offline"),n||(n=()=>KE(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{ue(ta,"Retrying IndexedDB access"),await n(),r.da.delete(1),await vh(r)})}function e1(r,e){return e().catch(n=>nh(r,n,e))}async function _h(r){const e=ke(r),n=ms(e);let s=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Dm;for(;p2(e);)try{const l=await $I(e.localStore,s);if(l===null){e.Ia.length===0&&n.k_();break}s=l.batchId,g2(e,l)}catch(l){await nh(e,l)}t1(e)&&n1(e)}function p2(r){return ia(r)&&r.Ia.length<10}function g2(r,e){r.Ia.push(e);const n=ms(r);n.N_()&&n.ea&&n.ta(e.mutations)}function t1(r){return ia(r)&&!ms(r).O_()&&r.Ia.length>0}function n1(r){ms(r).start()}async function y2(r){ms(r).ia()}async function v2(r){const e=ms(r);for(const n of r.Ia)e.ta(n.mutations)}async function _2(r,e,n){const s=r.Ia.shift(),l=km.from(s,e,n);await e1(r,()=>r.remoteSyncer.applySuccessfulWrite(l)),await _h(r)}async function E2(r,e){e&&ms(r).ea&&await async function(s,l){if(function(f){return nI(f)&&f!==J.ABORTED}(l.code)){const c=s.Ia.shift();ms(s).L_(),await e1(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l)),await _h(s)}}(r,e),t1(r)&&n1(r)}async function z_(r,e){const n=ke(r);n.asyncQueue.verifyOperationInProgress(),ue(ta,"RemoteStore received new credentials");const s=ia(n);n.da.add(3),await eu(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await vh(n)}async function T2(r,e){const n=ke(r);e?(n.da.delete(2),await vh(n)):e||(n.da.add(2),await eu(n),n.Va.set("Unknown"))}function bo(r){return r.fa||(r.fa=function(n,s,l){const c=ke(n);return c.oa(),new s2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)}(r.datastore,r.asyncQueue,{e_:h2.bind(null,r),n_:f2.bind(null,r),i_:d2.bind(null,r),Y_:m2.bind(null,r)}),r.Aa.push(async e=>{e?(r.fa.L_(),Ym(r)?Qm(r):r.Va.set("Unknown")):(await r.fa.stop(),JE(r))})),r.fa}function ms(r){return r.ga||(r.ga=function(n,s,l){const c=ke(n);return c.oa(),new a2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)}(r.datastore,r.asyncQueue,{e_:()=>Promise.resolve(),n_:y2.bind(null,r),i_:E2.bind(null,r),na:v2.bind(null,r),ra:_2.bind(null,r)}),r.Aa.push(async e=>{e?(r.ga.L_(),await _h(r)):(await r.ga.stop(),r.Ia.length>0&&(ue(ta,`Stopping write stream with ${r.Ia.length} pending writes`),r.Ia=[]))})),r.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,n,s,l,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new ls,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,l,c){const f=Date.now()+s,p=new Km(e,n,f,l,c);return p.start(s),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xm(r,e){if(_r("AsyncQueue",`${e}: ${r}`),To(r))return new ce(J.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{static emptySet(e){return new ao(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||be.comparator(n.key,s.key):(n,s)=>be.comparator(n.key,s.key),this.keyedMap=Il(),this.sortedSet=new xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ao)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new ao;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(){this.pa=new xt(be.comparator)}track(e){const n=e.doc.key,s=this.pa.get(n);s?e.type!==0&&s.type===3?this.pa=this.pa.insert(n,e):e.type===3&&s.type!==1?this.pa=this.pa.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.pa=this.pa.remove(n):e.type===1&&s.type===2?this.pa=this.pa.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):De(63341,{Vt:e,ya:s}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,s)=>{e.push(s)}),e}}class mo{constructor(e,n,s,l,c,f,p,g,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,l,c){const f=[];return n.forEach(p=>{f.push({type:0,doc:p})}),new mo(e,n,ao.emptySet(n),f,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class A2{constructor(){this.queries=q_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=ke(n),c=l.queries;l.queries=q_(),c.forEach((f,p)=>{for(const g of p.Sa)g.onError(s)})})(this,new ce(J.ABORTED,"Firestore shutting down"))}}function q_(){return new na(r=>AE(r),hh)}async function i1(r,e){const n=ke(r);let s=3;const l=e.query;let c=n.queries.get(l);c?!c.Da()&&e.va()&&(s=2):(c=new b2,s=e.va()?0:1);try{switch(s){case 0:c.ba=await n.onListen(l,!0);break;case 1:c.ba=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const p=Xm(f,`Initialization of query '${Ja(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,c),c.Sa.push(e),e.Fa(n.onlineState),c.ba&&e.Ma(c.ba)&&$m(n)}async function r1(r,e){const n=ke(r),s=e.query;let l=3;const c=n.queries.get(s);if(c){const f=c.Sa.indexOf(e);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?l=e.va()?0:1:!c.Da()&&e.va()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function w2(r,e){const n=ke(r);let s=!1;for(const l of e){const c=l.query,f=n.queries.get(c);if(f){for(const p of f.Sa)p.Ma(l)&&(s=!0);f.ba=l}}s&&$m(n)}function S2(r,e,n){const s=ke(r),l=s.queries.get(e);if(l)for(const c of l.Sa)c.onError(n);s.queries.delete(e)}function $m(r){r.Ca.forEach(e=>{e.next()})}var hm,H_;(H_=hm||(hm={})).xa="default",H_.Cache="cache";class s1{constructor(e,n,s){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(e){if(!this.options.includeMetadataChanges){const s=[];for(const l of e.docChanges)l.type!==3&&s.push(l);e=new mo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const s=n!=="Offline";return(!this.options.Qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==hm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e){this.key=e}}class o1{constructor(e){this.key=e}}class R2{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=$e(),this.mutatedKeys=$e(),this.Za=wE(e),this.Xa=new ao(this.Za)}get eu(){return this.Ha}tu(e,n){const s=n?n.nu:new j_,l=n?n.Xa:this.Xa;let c=n?n.mutatedKeys:this.mutatedKeys,f=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal((T,R)=>{const D=l.get(T),F=fh(this.query,R)?R:null,ne=!!D&&this.mutatedKeys.has(D.key),$=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let te=!1;D&&F?D.data.isEqual(F.data)?ne!==$&&(s.track({type:3,doc:F}),te=!0):this.ru(D,F)||(s.track({type:2,doc:F}),te=!0,(g&&this.Za(F,g)>0||y&&this.Za(F,y)<0)&&(p=!0)):!D&&F?(s.track({type:0,doc:F}),te=!0):D&&!F&&(s.track({type:1,doc:D}),te=!0,(g||y)&&(p=!0)),te&&(F?(f=f.add(F),c=$?c.add(T):c.delete(T)):(f=f.delete(T),c=c.delete(T)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),c=c.delete(T.key),s.track({type:1,doc:T})}return{Xa:f,nu:s,Cs:p,mutatedKeys:c}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,l){const c=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const f=e.nu.wa();f.sort((T,R)=>function(F,ne){const $=te=>{switch(te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De(20277,{Vt:te})}};return $(F)-$(ne)}(T.type,R.type)||this.Za(T.doc,R.doc)),this.iu(s),l=l!=null&&l;const p=n&&!l?this.su():[],g=this.Ya.size===0&&this.current&&!l?1:0,y=g!==this.Ja;return this.Ja=g,f.length!==0||y?{snapshot:new mo(this.query,e.Xa,c,f,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:p}:{ou:p}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new j_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=$e(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const n=[];return e.forEach(s=>{this.Ya.has(s)||n.push(new o1(s))}),this.Ya.forEach(s=>{e.has(s)||n.push(new a1(s))}),n}au(e){this.Ha=e.$s,this.Ya=$e();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return mo.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Zm="SyncEngine";class I2{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class C2{constructor(e){this.key=e,this.cu=!1}}class x2{constructor(e,n,s,l,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.lu={},this.hu=new na(p=>AE(p),hh),this.Pu=new Map,this.Tu=new Set,this.Iu=new xt(be.comparator),this.Eu=new Map,this.du=new zm,this.Au={},this.Ru=new Map,this.Vu=fo.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function D2(r,e,n=!0){const s=d1(r);let l;const c=s.hu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.uu()):l=await l1(s,e,n,!0),l}async function N2(r,e){const n=d1(r);await l1(n,e,!0,!1)}async function l1(r,e,n,s){const l=await ZI(r.localStore,Ui(e)),c=l.targetId,f=r.sharedClientState.addLocalQueryTarget(c,n);let p;return s&&(p=await O2(r,e,c,f==="current",l.resumeToken)),r.isPrimaryClient&&n&&ZE(r.remoteStore,l),p}async function O2(r,e,n,s,l){r.fu=(R,D,F)=>async function($,te,Me,Ae){let Te=te.view.tu(Me);Te.Cs&&(Te=await U_($.localStore,te.query,!1).then(({documents:x})=>te.view.tu(x,Te)));const Ue=Ae&&Ae.targetChanges.get(te.targetId),we=Ae&&Ae.targetMismatches.get(te.targetId)!=null,Be=te.view.applyChanges(Te,$.isPrimaryClient,Ue,we);return F_($,te.targetId,Be.ou),Be.snapshot}(r,R,D,F);const c=await U_(r.localStore,e,!0),f=new R2(e,c.$s),p=f.tu(c.documents),g=Jl.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),y=f.applyChanges(p,r.isPrimaryClient,g);F_(r,n,y.ou);const T=new I2(e,n,f);return r.hu.set(e,T),r.Pu.has(n)?r.Pu.get(n).push(e):r.Pu.set(n,[e]),y.snapshot}async function M2(r,e,n){const s=ke(r),l=s.hu.get(e),c=s.Pu.get(l.targetId);if(c.length>1)return s.Pu.set(l.targetId,c.filter(f=>!hh(f,e))),void s.hu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await um(s.localStore,l.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(l.targetId),n&&Gm(s.remoteStore,l.targetId),fm(s,l.targetId)}).catch(Eo)):(fm(s,l.targetId),await um(s.localStore,l.targetId,!0))}async function V2(r,e){const n=ke(r),s=n.hu.get(e),l=n.Pu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Gm(n.remoteStore,s.targetId))}async function U2(r,e,n){const s=q2(r);try{const l=await function(f,p){const g=ke(f),y=Yt.now(),T=p.reduce((F,ne)=>F.add(ne.key),$e());let R,D;return g.persistence.runTransaction("Locally write mutations","readwrite",F=>{let ne=Er(),$=$e();return g.Bs.getEntries(F,T).next(te=>{ne=te,ne.forEach((Me,Ae)=>{Ae.isValidDocument()||($=$.add(Me))})}).next(()=>g.localDocuments.getOverlayedDocuments(F,ne)).next(te=>{R=te;const Me=[];for(const Ae of p){const Te=ZR(Ae,R.get(Ae.key).overlayedDocument);Te!=null&&Me.push(new vs(Ae.key,Te,pE(Te.value.mapValue),kn.exists(!0)))}return g.mutationQueue.addMutationBatch(F,y,Me,p)}).next(te=>{D=te;const Me=te.applyToLocalDocumentSet(R,$);return g.documentOverlayCache.saveOverlays(F,te.batchId,Me)})}).then(()=>({batchId:D.batchId,changes:RE(R)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(l.batchId),function(f,p,g){let y=f.Au[f.currentUser.toKey()];y||(y=new xt(Ge)),y=y.insert(p,g),f.Au[f.currentUser.toKey()]=y}(s,l.batchId,n),await tu(s,l.changes),await _h(s.remoteStore)}catch(l){const c=Xm(l,"Failed to persist write");n.reject(c)}}async function u1(r,e){const n=ke(r);try{const s=await KI(n.localStore,e);e.targetChanges.forEach((l,c)=>{const f=n.Eu.get(c);f&&(ot(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.cu=!0:l.modifiedDocuments.size>0?ot(f.cu,14607):l.removedDocuments.size>0&&(ot(f.cu,42227),f.cu=!1))}),await tu(n,s,e)}catch(s){await Eo(s)}}function G_(r,e,n){const s=ke(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.hu.forEach((c,f)=>{const p=f.view.Fa(e);p.snapshot&&l.push(p.snapshot)}),function(f,p){const g=ke(f);g.onlineState=p;let y=!1;g.queries.forEach((T,R)=>{for(const D of R.Sa)D.Fa(p)&&(y=!0)}),y&&$m(g)}(s.eventManager,e),l.length&&s.lu.Y_(l),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function P2(r,e,n){const s=ke(r);s.sharedClientState.updateQueryState(e,"rejected",n);const l=s.Eu.get(e),c=l&&l.key;if(c){let f=new xt(be.comparator);f=f.insert(c,bn.newNoDocument(c,Ve.min()));const p=$e().add(c),g=new gh(Ve.min(),new Map,new xt(Ge),f,p);await u1(s,g),s.Iu=s.Iu.remove(c),s.Eu.delete(e),Wm(s)}else await um(s.localStore,e,!1).then(()=>fm(s,e,n)).catch(Eo)}async function k2(r,e){const n=ke(r),s=e.batch.batchId;try{const l=await YI(n.localStore,e);h1(n,s,null),c1(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await tu(n,l)}catch(l){await Eo(l)}}async function L2(r,e,n){const s=ke(r);try{const l=await function(f,p){const g=ke(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let T;return g.mutationQueue.lookupMutationBatch(y,p).next(R=>(ot(R!==null,37113),T=R.keys(),g.mutationQueue.removeMutationBatch(y,R))).next(()=>g.mutationQueue.performConsistencyCheck(y)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(y,T,p)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T)).next(()=>g.localDocuments.getDocuments(y,T))})}(s.localStore,e);h1(s,e,n),c1(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await tu(s,l)}catch(l){await Eo(l)}}function c1(r,e){(r.Ru.get(e)||[]).forEach(n=>{n.resolve()}),r.Ru.delete(e)}function h1(r,e,n){const s=ke(r);let l=s.Au[s.currentUser.toKey()];if(l){const c=l.get(e);c&&(n?c.reject(n):c.resolve(),l=l.remove(e)),s.Au[s.currentUser.toKey()]=l}}function fm(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Pu.get(e))r.hu.delete(s),n&&r.lu.gu(s,n);r.Pu.delete(e),r.isPrimaryClient&&r.du.Hr(e).forEach(s=>{r.du.containsKey(s)||f1(r,s)})}function f1(r,e){r.Tu.delete(e.path.canonicalString());const n=r.Iu.get(e);n!==null&&(Gm(r.remoteStore,n),r.Iu=r.Iu.remove(e),r.Eu.delete(n),Wm(r))}function F_(r,e,n){for(const s of n)s instanceof a1?(r.du.addReference(s.key,e),B2(r,s)):s instanceof o1?(ue(Zm,"Document no longer in limbo: "+s.key),r.du.removeReference(s.key,e),r.du.containsKey(s.key)||f1(r,s.key)):De(19791,{pu:s})}function B2(r,e){const n=e.key,s=n.path.canonicalString();r.Iu.get(n)||r.Tu.has(s)||(ue(Zm,"New document in limbo: "+n),r.Tu.add(s),Wm(r))}function Wm(r){for(;r.Tu.size>0&&r.Iu.size<r.maxConcurrentLimboResolutions;){const e=r.Tu.values().next().value;r.Tu.delete(e);const n=new be(Tt.fromString(e)),s=r.Vu.next();r.Eu.set(s,new C2(n)),r.Iu=r.Iu.insert(n,s),ZE(r.remoteStore,new is(Ui(Um(n.path)),s,"TargetPurposeLimboResolution",lh.le))}}async function tu(r,e,n){const s=ke(r),l=[],c=[],f=[];s.hu.isEmpty()||(s.hu.forEach((p,g)=>{f.push(s.fu(g,e,n).then(y=>{var T;if((y||n)&&s.isPrimaryClient){const R=y?!y.fromCache:(T=n==null?void 0:n.targetChanges.get(g.targetId))===null||T===void 0?void 0:T.current;s.sharedClientState.updateQueryState(g.targetId,R?"current":"not-current")}if(y){l.push(y);const R=qm.Rs(g.targetId,y);c.push(R)}}))}),await Promise.all(f),s.lu.Y_(l),await async function(g,y){const T=ke(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>W.forEach(y,D=>W.forEach(D.ds,F=>T.persistence.referenceDelegate.addReference(R,D.targetId,F)).next(()=>W.forEach(D.As,F=>T.persistence.referenceDelegate.removeReference(R,D.targetId,F)))))}catch(R){if(!To(R))throw R;ue(Hm,"Failed to update sequence numbers: "+R)}for(const R of y){const D=R.targetId;if(!R.fromCache){const F=T.xs.get(D),ne=F.snapshotVersion,$=F.withLastLimboFreeSnapshotVersion(ne);T.xs=T.xs.insert(D,$)}}}(s.localStore,c))}async function z2(r,e){const n=ke(r);if(!n.currentUser.isEqual(e)){ue(Zm,"User change. New user:",e.toKey());const s=await YE(n.localStore,e);n.currentUser=e,function(c,f){c.Ru.forEach(p=>{p.forEach(g=>{g.reject(new ce(J.CANCELLED,f))})}),c.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await tu(n,s.ks)}}function j2(r,e){const n=ke(r),s=n.Eu.get(e);if(s&&s.cu)return $e().add(s.key);{let l=$e();const c=n.Pu.get(e);if(!c)return l;for(const f of c){const p=n.hu.get(f);l=l.unionWith(p.view.eu)}return l}}function d1(r){const e=ke(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=u1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=j2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=P2.bind(null,e),e.lu.Y_=w2.bind(null,e.eventManager),e.lu.gu=S2.bind(null,e.eventManager),e}function q2(r){const e=ke(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=k2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=L2.bind(null,e),e}class ih{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return QI(this.persistence,new HI,e.initialUser,this.serializer)}Su(e){return new QE(jm.fi,this.serializer)}bu(e){return new JI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ih.provider={build:()=>new ih};class H2 extends ih{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){ot(this.persistence.referenceDelegate instanceof th,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new CI(s,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Un.withCacheSize(this.cacheSizeBytes):Un.DEFAULT;return new QE(s=>th.fi(s,n),this.serializer)}}class dm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>G_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=z2.bind(null,this.syncEngine),await T2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new A2}()}createDatastore(e){const n=yh(e.databaseInfo.databaseId),s=function(c){return new r2(c)}(e.databaseInfo);return function(c,f,p,g){return new l2(c,f,p,g)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,l,c,f,p){return new c2(s,l,c,f,p)}(this.localStore,this.datastore,e.asyncQueue,n=>G_(this.syncEngine,n,0),function(){return L_.C()?new L_:new e2}())}createSyncEngine(e,n){return function(l,c,f,p,g,y,T){const R=new x2(l,c,f,p,g,y);return T&&(R.mu=!0),R}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(l){const c=ke(l);ue(ta,"RemoteStore shutting down."),c.da.add(5),await eu(c),c.Ra.shutdown(),c.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}dm.provider={build:()=>new dm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):_r("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="FirestoreClient";class G2{constructor(e,n,s,l,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=Tn.UNAUTHENTICATED,this.clientId=sE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async f=>{ue(ps,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(ue(ps,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ls;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Xm(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function zd(r,e){r.asyncQueue.verifyOperationInProgress(),ue(ps,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener(async l=>{s.isEqual(l)||(await YE(e.localStore,l),s=l)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function Q_(r,e){r.asyncQueue.verifyOperationInProgress();const n=await F2(r);ue(ps,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener(s=>z_(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,l)=>z_(e.remoteStore,l)),r._onlineComponents=e}async function F2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ue(ps,"Using user provided OfflineComponentProvider");try{await zd(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(l){return l.name==="FirebaseError"?l.code===J.FAILED_PRECONDITION||l.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11}(n))throw n;lo("Error using user provided cache. Falling back to memory cache: "+n),await zd(r,new ih)}}else ue(ps,"Using default OfflineComponentProvider"),await zd(r,new H2(void 0));return r._offlineComponents}async function p1(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ue(ps,"Using user provided OnlineComponentProvider"),await Q_(r,r._uninitializedComponentsProvider._online)):(ue(ps,"Using default OnlineComponentProvider"),await Q_(r,new dm))),r._onlineComponents}function Q2(r){return p1(r).then(e=>e.syncEngine)}async function mm(r){const e=await p1(r),n=e.eventManager;return n.onListen=D2.bind(null,e.syncEngine),n.onUnlisten=M2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=N2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=V2.bind(null,e.syncEngine),n}function Y2(r,e,n={}){const s=new ls;return r.asyncQueue.enqueueAndForget(async()=>function(c,f,p,g,y){const T=new m1({next:D=>{T.xu(),f.enqueueAndForget(()=>r1(c,R)),D.fromCache&&g.source==="server"?y.reject(new ce(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(D)},error:D=>y.reject(D)}),R=new s1(p,T,{includeMetadataChanges:!0,Qa:!0});return i1(c,R)}(await mm(r),r.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(r,e,n){if(!n)throw new ce(J.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function K2(r,e,n,s){if(e===!0&&s===!0)throw new ce(J.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function K_(r){if(!be.isDocumentKey(r))throw new ce(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function X_(r){if(be.isDocumentKey(r))throw new ce(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Eh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":De(12329,{type:typeof r})}function oi(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ce(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Eh(r);throw new ce(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1="firestore.googleapis.com",$_=!0;class Z_{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=v1,this.ssl=$_}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:$_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=FE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<RI)throw new ce(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}K2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=g1((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,l){return s.timeoutSeconds===l.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Th{constructor(e,n,s,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Z_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Z_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new iR;switch(s.type){case"firstParty":return new oR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ce(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Y_.get(n);s&&(ue("ComponentProvider","Removing Datastore"),Y_.delete(n),s.terminate())}(this),Promise.resolve()}}function X2(r,e,n,s={}){var l;r=oi(r,Th);const c=go(e),f=r._getSettings(),p=Object.assign(Object.assign({},f),{emulatorOptions:r._getEmulatorOptions()}),g=`${e}:${n}`;c&&(h0(`https://${g}`),f0("Firestore",!0)),f.host!==v1&&f.host!==g&&lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},f),{host:g,ssl:c,emulatorOptions:s});if(!Zs(y,p)&&(r._setSettings(y),s.mockUserToken)){let T,R;if(typeof s.mockUserToken=="string")T=s.mockUserToken,R=Tn.MOCK_USER;else{T=Rb(s.mockUserToken,(l=r._app)===null||l===void 0?void 0:l.options.projectId);const D=s.mockUserToken.sub||s.mockUserToken.user_id;if(!D)throw new ce(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");R=new Tn(D)}r._authCredentials=new rR(new iE(T,R))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ra(this.firestore,e,this._query)}}class xn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new us(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xn(this.firestore,e,this._key)}}class us extends ra{constructor(e,n,s){super(e,n,Um(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xn(this.firestore,null,new be(e))}withConverter(e){return new us(this.firestore,e,this._path)}}function Xa(r,e,...n){if(r=Xt(r),y1("collection","path",e),r instanceof Th){const s=Tt.fromString(e,...n);return X_(s),new us(r,null,s)}{if(!(r instanceof xn||r instanceof us))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Tt.fromString(e,...n));return X_(s),new us(r.firestore,null,s)}}function Ni(r,e,...n){if(r=Xt(r),arguments.length===1&&(e=sE.newId()),y1("doc","path",e),r instanceof Th){const s=Tt.fromString(e,...n);return K_(s),new xn(r,null,new be(s))}{if(!(r instanceof xn||r instanceof us))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Tt.fromString(e,...n));return K_(s),new xn(r.firestore,r instanceof us?r.converter:null,new be(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="AsyncQueue";class J_{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new XE(this,"async_queue_retry"),this.rc=()=>{const s=Bd();s&&ue(W_,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=e;const n=Bd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Bd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new ls;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!To(e))throw e;ue(W_,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(s=>{throw this.Xu=s,this.ec=!1,_r("INTERNAL UNHANDLED ERROR: ",e0(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=n,n}enqueueAfterDelay(e,n,s){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const l=Km.createAndSchedule(this,e,n,s,c=>this.uc(c));return this.Zu.push(l),l}oc(){this.Xu&&De(47125,{cc:e0(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function e0(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(r){return function(n,s){if(typeof n!="object"||n===null)return!1;const l=n;for(const c of s)if(c in l&&typeof l[c]=="function")return!0;return!1}(r,["next","error","complete"])}class gs extends Th{constructor(e,n,s,l){super(e,n,s,l),this.type="firestore",this._queue=new J_,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new J_(e),this._firestoreClient=void 0,await e}}}function $2(r,e){const n=typeof r=="object"?r:g0(),s=typeof r=="string"?r:Kc,l=_m(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=wb("firestore");c&&X2(l,...c)}return l}function bh(r){if(r._terminated)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||Z2(r),r._firestoreClient}function Z2(r){var e,n,s;const l=r._freezeSettings(),c=function(p,g,y,T){return new bR(p,g,y,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,g1(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,l);r._componentsProvider||!((n=l.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=l.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:l.localCache._offlineComponentProvider,_online:l.localCache._onlineComponentProvider}),r._firestoreClient=new G2(r._authCredentials,r._appCheckCredentials,r._queue,c,r._componentsProvider&&function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this._byteString=e}static fromBase64String(e){try{return new po(pn.fromBase64String(e))}catch(n){throw new ce(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new po(pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=/^__.*__$/;class J2{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new vs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wl(e,this.data,n,this.fieldTransforms)}}class _1{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new vs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function E1(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De(40011,{Ic:r})}}class np{constructor(e,n,s,l,c,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Ec(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new np(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),l=this.dc({path:s,Rc:!1});return l.Vc(e),l}mc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),l=this.dc({path:s,Rc:!1});return l.Ec(),l}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return rh(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(E1(this.Ic)&&W2.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class eC{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||yh(e)}bc(e,n,s,l=!1){return new np({Ic:e,methodName:n,wc:s,path:mn.emptyPath(),Rc:!1,yc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ah(r){const e=r._freezeSettings(),n=yh(r._databaseId);return new eC(r._databaseId,!!e.ignoreUndefinedProperties,n)}function T1(r,e,n,s,l,c={}){const f=r.bc(c.merge||c.mergeFields?2:0,e,n,l);ip("Data must be an object, but it was:",f,s);const p=w1(s,f);let g,y;if(c.merge)g=new Yn(f.fieldMask),y=f.fieldTransforms;else if(c.mergeFields){const T=[];for(const R of c.mergeFields){const D=pm(e,R,n);if(!f.contains(D))throw new ce(J.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);R1(T,D)||T.push(D)}g=new Yn(T),y=f.fieldTransforms.filter(R=>g.covers(R.field))}else g=null,y=f.fieldTransforms;return new J2(new Pn(p),g,y)}class wh extends Jm{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wh}}function b1(r,e,n,s){const l=r.bc(1,e,n);ip("Data must be an object, but it was:",l,s);const c=[],f=Pn.empty();ys(s,(g,y)=>{const T=rp(e,g,n);y=Xt(y);const R=l.mc(T);if(y instanceof wh)c.push(T);else{const D=iu(y,R);D!=null&&(c.push(T),f.set(T,D))}});const p=new Yn(c);return new _1(f,p,l.fieldTransforms)}function A1(r,e,n,s,l,c){const f=r.bc(1,e,n),p=[pm(e,s,n)],g=[l];if(c.length%2!=0)throw new ce(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let D=0;D<c.length;D+=2)p.push(pm(e,c[D])),g.push(c[D+1]);const y=[],T=Pn.empty();for(let D=p.length-1;D>=0;--D)if(!R1(y,p[D])){const F=p[D];let ne=g[D];ne=Xt(ne);const $=f.mc(F);if(ne instanceof wh)y.push(F);else{const te=iu(ne,$);te!=null&&(y.push(F),T.set(F,te))}}const R=new Yn(y);return new _1(T,R,f.fieldTransforms)}function tC(r,e,n,s=!1){return iu(n,r.bc(s?4:3,e))}function iu(r,e){if(S1(r=Xt(r)))return ip("Unsupported field value:",e,r),w1(r,e);if(r instanceof Jm)return function(s,l){if(!E1(l.Ic))throw l.gc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.gc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(s,l){const c=[];let f=0;for(const p of s){let g=iu(p,l.fc(f));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),f++}return{arrayValue:{values:c}}}(r,e)}return function(s,l){if((s=Xt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return FR(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=Yt.fromDate(s);return{timestampValue:eh(l.serializer,c)}}if(s instanceof Yt){const c=new Yt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:eh(l.serializer,c)}}if(s instanceof ep)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof po)return{bytesValue:LE(l.serializer,s._byteString)};if(s instanceof xn){const c=l.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw l.gc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Bm(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof tp)return function(f,p){return{mapValue:{fields:{[dE]:{stringValue:mE},[Xc]:{arrayValue:{values:f.toArray().map(y=>{if(typeof y!="number")throw p.gc("VectorValues must only contain numeric values.");return Pm(p.serializer,y)})}}}}}}(s,l);throw l.gc(`Unsupported field value: ${Eh(s)}`)}(r,e)}function w1(r,e){const n={};return oE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ys(r,(s,l)=>{const c=iu(l,e.Ac(s));c!=null&&(n[s]=c)}),{mapValue:{fields:n}}}function S1(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Yt||r instanceof ep||r instanceof po||r instanceof xn||r instanceof Jm||r instanceof tp)}function ip(r,e,n){if(!S1(n)||!function(l){return typeof l=="object"&&l!==null&&(Object.getPrototypeOf(l)===Object.prototype||Object.getPrototypeOf(l)===null)}(n)){const s=Eh(n);throw s==="an object"?e.gc(r+" a custom object"):e.gc(r+" "+s)}}function pm(r,e,n){if((e=Xt(e))instanceof nu)return e._internalPath;if(typeof e=="string")return rp(r,e);throw rh("Field path arguments must be of type string or ",r,!1,void 0,n)}const nC=new RegExp("[~\\*/\\[\\]]");function rp(r,e,n){if(e.search(nC)>=0)throw rh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new nu(...e.split("."))._internalPath}catch{throw rh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function rh(r,e,n,s,l){const c=s&&!s.isEmpty(),f=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||f)&&(g+=" (found",c&&(g+=` in field ${s}`),f&&(g+=` in document ${l}`),g+=")"),new ce(J.INVALID_ARGUMENT,p+r+g)}function R1(r,e){return r.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,n,s,l,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(sp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class iC extends I1{data(){return super.data()}}function sp(r,e){return typeof e=="string"?rp(r,e):e instanceof nu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ce(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ap{}class rC extends ap{}function $a(r,e,...n){let s=[];e instanceof ap&&s.push(e),s=s.concat(n),function(c){const f=c.filter(g=>g instanceof op).length,p=c.filter(g=>g instanceof Sh).length;if(f>1||f>0&&p>0)throw new ce(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const l of s)r=l._apply(r);return r}class Sh extends rC{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Sh(e,n,s)}_apply(e){const n=this._parse(e);return x1(e._query,n),new ra(e.firestore,e.converter,im(e._query,n))}_parse(e){const n=Ah(e.firestore);return function(c,f,p,g,y,T,R){let D;if(y.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new ce(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){i0(R,T);const ne=[];for(const $ of R)ne.push(n0(g,c,$));D={arrayValue:{values:ne}}}else D=n0(g,c,R)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||i0(R,T),D=tC(p,f,R,T==="in"||T==="not-in");return jt.create(y,T,D)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ks(r,e,n){const s=e,l=sp("where",r);return Sh._create(l,s,n)}class op extends ap{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new op(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:pi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(l,c){let f=l;const p=c.getFlattenedFilters();for(const g of p)x1(f,g),f=im(f,g)}(e._query,n),new ra(e.firestore,e.converter,im(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function n0(r,e,n){if(typeof(n=Xt(n))=="string"){if(n==="")throw new ce(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bE(e)&&n.indexOf("/")!==-1)throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Tt.fromString(n));if(!be.isDocumentKey(s))throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return g_(r,new be(s))}if(n instanceof xn)return g_(r,n._key);throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Eh(n)}.`)}function i0(r,e){if(!Array.isArray(r)||r.length===0)throw new ce(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function x1(r,e){const n=function(l,c){for(const f of l)for(const p of f.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null}(r.filters,function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ce(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class sC{convertValue(e,n="none"){switch(ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw De(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ys(e,(l,c)=>{s[l]=this.convertValue(c,n)}),s}convertVectorValue(e){var n,s,l;const c=(l=(s=(n=e.fields)===null||n===void 0?void 0:n[Xc].arrayValue)===null||s===void 0?void 0:s.values)===null||l===void 0?void 0:l.map(f=>Pt(f.doubleValue));return new tp(c)}convertGeoPoint(e){return new ep(Pt(e.latitude),Pt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=ch(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Bl(e));default:return null}}convertTimestamp(e){const n=hs(e);return new Yt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Tt.fromString(e);ot(GE(s),9688,{name:e});const l=new zl(s.get(1),s.get(3)),c=new be(s.popFirst(5));return l.isEqual(n)||_r(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class N1 extends I1{constructor(e,n,s,l,c,f){super(e,n,s,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Lc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(sp("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Lc extends N1{data(e={}){return super.data(e)}}class O1{constructor(e,n,s,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new xl(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Lc(this._firestore,this._userDataWriter,s.key,s,new xl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(l,c){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map(p=>{const g=new Lc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new xl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}})}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(p=>c||p.type!==3).map(p=>{const g=new Lc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new xl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,T=-1;return p.type!==0&&(y=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),T=f.indexOf(p.doc.key)),{type:aC(p.type),doc:g,oldIndex:y,newIndex:T}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function aC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De(61501,{type:r})}}class lp extends sC{constructor(e){super(),this.firestore=e}convertBytes(e){return new po(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,n)}}function wl(r){r=oi(r,ra);const e=oi(r.firestore,gs),n=bh(e),s=new lp(e);return C1(r._query),Y2(n,r._query).then(l=>new O1(e,s,r,l))}function oC(r,e,n){r=oi(r,xn);const s=oi(r.firestore,gs),l=D1(r.converter,e,n);return Rh(s,[T1(Ah(s),"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,kn.none())])}function lC(r,e,n,...s){r=oi(r,xn);const l=oi(r.firestore,gs),c=Ah(l);let f;return f=typeof(e=Xt(e))=="string"||e instanceof nu?A1(c,"updateDoc",r._key,e,n,s):b1(c,"updateDoc",r._key,e),Rh(l,[f.toMutation(r._key,kn.exists(!0))])}function uC(r){return Rh(oi(r.firestore,gs),[new ph(r._key,kn.none())])}function cC(r,...e){var n,s,l;r=Xt(r);let c={includeMetadataChanges:!1,source:"default"},f=0;typeof e[f]!="object"||t0(e[f])||(c=e[f],f++);const p={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(t0(e[f])){const R=e[f];e[f]=(n=R.next)===null||n===void 0?void 0:n.bind(R),e[f+1]=(s=R.error)===null||s===void 0?void 0:s.bind(R),e[f+2]=(l=R.complete)===null||l===void 0?void 0:l.bind(R)}let g,y,T;if(r instanceof xn)y=oi(r.firestore,gs),T=Um(r._key.path),g={next:R=>{e[f]&&e[f](hC(y,r,R))},error:e[f+1],complete:e[f+2]};else{const R=oi(r,ra);y=oi(R.firestore,gs),T=R._query;const D=new lp(y);g={next:F=>{e[f]&&e[f](new O1(y,D,R,F))},error:e[f+1],complete:e[f+2]},C1(r._query)}return function(D,F,ne,$){const te=new m1($),Me=new s1(F,te,ne);return D.asyncQueue.enqueueAndForget(async()=>i1(await mm(D),Me)),()=>{te.xu(),D.asyncQueue.enqueueAndForget(async()=>r1(await mm(D),Me))}}(bh(y),T,p,g)}function Rh(r,e){return function(s,l){const c=new ls;return s.asyncQueue.enqueueAndForget(async()=>U2(await Q2(s),l,c)),c.promise}(bh(r),e)}function hC(r,e,n){const s=n.docs.get(e._key),l=new lp(r);return new N1(r,l,e._key,s,new xl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ah(e)}set(e,n,s){this._verifyNotCommitted();const l=jd(e,this._firestore),c=D1(l.converter,n,s),f=T1(this._dataReader,"WriteBatch.set",l._key,c,l.converter!==null,s);return this._mutations.push(f.toMutation(l._key,kn.none())),this}update(e,n,s,...l){this._verifyNotCommitted();const c=jd(e,this._firestore);let f;return f=typeof(n=Xt(n))=="string"||n instanceof nu?A1(this._dataReader,"WriteBatch.update",c._key,n,s,l):b1(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(f.toMutation(c._key,kn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=jd(e,this._firestore);return this._mutations=this._mutations.concat(new ph(n._key,kn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ce(J.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jd(r,e){if((r=Xt(r)).firestore!==e)throw new ce(J.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(r){return bh(r=oi(r,gs)),new fC(r,e=>Rh(r,e))}(function(e,n=!0){(function(l){_o=l})(yo),oo(new Ws("firestore",(s,{instanceIdentifier:l,options:c})=>{const f=s.getProvider("app").getImmediate(),p=new gs(new sR(s.getProvider("auth-internal")),new lR(f,s.getProvider("app-check-internal")),function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ce(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zl(y.options.projectId,T)}(f,l),f);return c=Object.assign({useFetchStreams:n},c),p._setSettings(c),p},"PUBLIC").setMultipleInstances(!0)),as(r_,s_,e),as(r_,s_,"esm2017")})();const M1={apiKey:"AIzaSyDzxX9lnbrX2DDLqkdQWh2YIpiPvWhqSog",authDomain:"pedidosfrutam-160cb.firebaseapp.com",projectId:"pedidosfrutam-160cb",storageBucket:"pedidosfrutam-160cb.firebasestorage.app",messagingSenderId:"395673930325",appId:"1:395673930325:web:5668a07ce036107b08e2dc",measurementId:"G-3C5Y5NVJSL"},V1=p0(M1),Sl=tR(V1),Ut=$2(V1),Za=r0.forwardRef(({label:r,name:e,value:n,onChange:s,onBlur:l,placeholder:c="",className:f="",type:p="text",list:g,readOnly:y=!1},T)=>{const R=n==null?"":String(n);return U.jsxs("div",{className:"mb-2 w-full",children:[U.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-gray-700",children:r}),U.jsx("input",{type:p,id:e,name:e,value:R,onChange:s,onBlur:l,placeholder:c,className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-gray-50 border ${f}`,ref:T,list:g,readOnly:y})]})}),Vn=r0.forwardRef(({name:r,value:e,onChange:n,onBlur:s,type:l="text",placeholder:c="",readOnly:f=!1,isCanceledProp:p=!1,list:g},y)=>{const T=e==null?"":String(e);return U.jsx("input",{type:l,name:r,value:T,onChange:n,onBlur:s,placeholder:c,className:`w-full h-full p-px border-none bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded-md ${p?"line-through":""}`,ref:y,readOnly:f,list:g})}),dC=()=>{var Sr;const r=typeof __app_id<"u"?__app_id:M1.projectId,[e,n]=at.useState(null),[s,l]=at.useState(!1),[c,f]=at.useState(!0),[p,g]=at.useState([]),[y,T]=at.useState([]),[R,D]=at.useState(""),[F,ne]=at.useState(""),[$,te]=at.useState(null);at.useEffect(()=>{(async()=>{try{const H=Gw(Sl,async L=>{var re,le;if(L)n(L.uid),l(!0),console.log("Firebase Auth: Usuario autenticado con UID:",L.uid);else{console.log("Firebase Auth: No se detect usuario, intentando iniciar sesin annimamente.");try{typeof __initial_auth_token<"u"&&__initial_auth_token?(await jw(Sl,__initial_auth_token),console.log("Firebase Auth: Sesin iniciada con token personalizado."),n((re=Sl.currentUser)==null?void 0:re.uid)):(await Pw(Sl),console.log("Firebase Auth: Sesin iniciada annimamente."),n((le=Sl.currentUser)==null?void 0:le.uid))}catch(ve){console.error("Error al intentar inicio de sesin (fallback o token):",ve),n(crypto.randomUUID())}finally{l(!0)}}});return()=>H()}catch(H){console.error("Error al inicializar Firebase Auth:",H),l(!0)}})()},[]);const Me=()=>{const A=new Date;A.setHours(0,0,0,0),A.setDate(A.getDate()+3-(A.getDay()+6)%7);const H=new Date(A.getFullYear(),0,4);return 1+Math.round(((A.getTime()-H.getTime())/864e5-3+(H.getDay()+6)%7)/7)},Ae={MANZANA:"MANZANA",MANZANAS:"MANZANA",MZ:"MANZANA",APPLE:"MANZANA",APPLES:"MANZANA",PERA:"PERA",PERAS:"PERA",PR:"PERA",PEAR:"PERA",PEARS:"PERA",UVA:"UVA",UVAS:"UVA",GRAPE:"UVA",GRAPES:"UVA",UV:"UVA",KIWI:"KIWI",KIWIS:"KIWI",NARANJA:"NARANJA",NARANJAS:"NARANJA",LIMON:"LIMON",LIMONES:"LIMON",LM:"LIMON",CEREZA:"CEREZA",CEREZAS:"CEREZA",CLEMENTINA:"CLEMENTINA",CLEMENTINAS:"CLEMENTINA",CIRUELA:"CIRUELA",CIRUELAS:"CIRUELA",DURAZNO:"DURAZNO",DURAZNOS:"DURAZNO",NECTARIN:"NECTARIN",NECTARINES:"NECTARIN"},Te=A=>{if(typeof A!="string"||A.trim()==="")return"";const H=A.toUpperCase().trim();return Ae[H]||H},Ue=(A,H,L="")=>{const re=Me(),le=(fe,ge)=>{const ye=Array.isArray(fe)?fe:[],me=Array.from(new Set(ye.filter(xe=>typeof xe=="string"&&xe.trim()!=="").map(xe=>Te(xe))));return me.length>0?me.join("-"):ge},ve=Array.from(new Set(Array.isArray(A)?A:[])).filter(fe=>typeof fe=="string"&&fe.trim()!==""),he=ve.length>0?ve[0].toUpperCase().replace(/[^A-Z0-9]/g,""):"PROVEEDOR",Ce=le(H,"ESPECIE");return`PEDW${re}${he}${Ce}`},we={reDestinatarios:"",deNombrePais:"",nave:"",fechaCarga:"",exporta:"",emailSubject:"",mailId:"",status:"draft",createdAt:null,createdBy:null,lastModifiedBy:null,updatedAt:null},Be={id:crypto.randomUUID(),pallets:"",especie:"",variedad:"",formato:"",calibre:"",categoria:"",preciosFOB:"",estado:"",isCanceled:!1},[x,w]=at.useState(()=>({...we,emailSubject:Ue([],[])})),[S,O]=at.useState([Be]),[V,P]=at.useState(0),[C,It]=at.useState(!1),[bt,Y]=at.useState(""),[ae,pe]=at.useState(!1),[tt,N]=at.useState(!1),[ee,oe]=at.useState(!1),[ie,_e]=at.useState(null),[Le,Se]=at.useState(""),At=at.useRef(null),Fe=at.useRef({}),Pe=at.useRef({}),Dt=["reDestinatarios","deNombrePais","nave","fechaCarga","exporta","emailSubject"],an=["pallets","especie","variedad","formato","calibre","categoria","preciosFOB"],gn=async A=>{if(!Ut||!e){console.warn("Firestore not initialized or user not authenticated. Cannot save order.");return}try{const H=Xa(Ut,`artifacts/${r}/public/data/pedidos`),{header:L,items:re}=A,le=A.id||Ni(H).id;console.log("DEBUG-SAVE-TO-FIRESTORE: Saving order with ID:",le,"Data passed:",A);const ve={header:{...L,lastModifiedBy:e,updatedAt:Date.now()},items:JSON.stringify(re)},he=Ni(H,le);await oC(he,ve),console.log("DEBUG-SAVE-TO-FIRESTORE: Order saved/updated successfully:",le)}catch(H){throw console.error("Error saving/updating order:",H),H}},Li=async A=>{if(!Ut||!e){console.warn("Firestore not initialized or user not authenticated. Cannot delete order.");return}try{const H=Ni(Ut,`artifacts/${r}/public/data/pedidos`,A);await uC(H),console.log("Order deleted successfully:",A)}catch(H){console.error("Error deleting order:",H)}};at.useEffect(()=>{var re;const A=x.reDestinatarios,H=((re=S[0])==null?void 0:re.especie)||"",L=Ue([A],[H],x.mailId);L!==x.emailSubject&&w(le=>({...le,emailSubject:L}))},[x.reDestinatarios,(Sr=S[0])==null?void 0:Sr.especie,x.emailSubject,x.mailId]),at.useEffect(()=>{if(!Ut||!e||!s){console.log("DEBUG-FLOW: Firestore, userId, or auth not ready for data fetching.");return}f(!0);const A=Xa(Ut,`artifacts/${r}/public/data/pedidos`),H=$a(A),L=cC(H,async re=>{let le=re.docs.map(he=>{const Ce=he.data();let ze=[];if(Ce.items)if(typeof Ce.items=="string")try{ze=JSON.parse(Ce.items)}catch(fe){console.error(`Error parsing items for doc ${he.id}:`,fe,`Raw data.items: "${Ce.items}"`),ze=[]}else Array.isArray(Ce.items)&&(ze=Ce.items);return{id:he.id,header:Ce.header,items:ze}});le=le.map(he=>({...he,items:Array.isArray(he.items)?he.items:[he.items].filter(Boolean)})),le.sort((he,Ce)=>{var ge,ye;const ze=((ge=he.header)==null?void 0:ge.createdAt)||0,fe=((ye=Ce.header)==null?void 0:ye.createdAt)||0;return ze-fe}),console.log("DEBUG-FLOW: All orders fetched from Firestore (including sent) and sorted:",le.map(he=>{var Ce,ze,fe;return{id:he.id,mailId:(Ce=he.header)==null?void 0:Ce.mailId,status:(ze=he.header)==null?void 0:ze.status,createdAt:(fe=he.header)==null?void 0:fe.createdAt}})),g(le),f(!1);const ve=le.filter(he=>{var Ce;return((Ce=he.header)==null?void 0:Ce.status)==="draft"});if(ve.length===0&&!F&&$===null){console.log("DEBUG-FLOW: No draft orders found after fetch. Creating new initial order.");const Ce=Ni(A).id,ze={...we,mailId:crypto.randomUUID().substring(0,8).toUpperCase(),emailSubject:Ue([],[]),status:"draft",createdAt:Date.now(),createdBy:e,updatedAt:Date.now()},fe=[{...Be,id:crypto.randomUUID()}];try{await gn({id:Ce,header:ze,items:fe}),te(Ce),console.log("DEBUG-FLOW: New order created and set as active:",Ce)}catch(ge){console.error("ERROR: Failed to create initial draft order:",ge),f(!1)}}else ve.length>0&&$===null&&!F&&(te(ve[0].id),console.log("DEBUG-FLOW: Draft orders found, setting first (oldest) draft as active:",ve[0].id))},re=>{console.error("Error fetching orders from Firestore:",re),f(!1)});return()=>L()},[Ut,e,s,r,F,$]),at.useEffect(()=>{let A=[];console.log("DEBUG-FLOW: Effect filter by committedSearchTerm triggered. committedSearchTerm:",F,"Current activeOrderId before update:",$),console.log("DEBUG-FLOW: allOrdersFromFirestore at filter time:",p.map(L=>{var re,le;return{id:L.id,status:((re=L.header)==null?void 0:re.status)||"N/A",createdAt:(le=L.header)==null?void 0:le.createdAt}})),F?A=p.filter(L=>{var le,ve;const re=(((le=L.header)==null?void 0:le.mailId)||"").toLowerCase().includes(F.toLowerCase());return console.log(`DEBUG-FLOW-FILTER-SEARCH: Order ID ${L.id}, Mail ID "${(ve=L.header)==null?void 0:ve.mailId}", matches search: ${re}`),re}):(A=p.filter(L=>{var le,ve;const re=((le=L.header)==null?void 0:le.status)==="draft";return console.log(`DEBUG-FLOW-FILTER-DRAFT: Order ID ${L.id}, Status "${(ve=L.header)==null?void 0:ve.status}", isDraft: ${re}`),re}),console.log("DEBUG-FLOW: No search term, displaying only draft orders.")),A.sort((L,re)=>{var he,Ce;const le=((he=L.header)==null?void 0:he.createdAt)||0,ve=((Ce=re.header)==null?void 0:Ce.createdAt)||0;return le-ve}),console.log("DEBUG-FLOW: displayedOrders after filter and sort:",A.length,A.map(L=>{var re;return{id:L.id,createdAt:(re=L.header)==null?void 0:re.createdAt}})),T(A);let H=null;if(F?A.find(re=>re.id===$)?(H=$,console.log("DEBUG-FLOW: Search active. Keeping current activeOrderId:",H)):A.length>0?(H=A[A.length-1].id,console.log("DEBUG-FLOW: Search active. Current active not in results. Setting to LAST (newest) filtered:",H)):(H=null,console.log("DEBUG-FLOW: Search active. No results found. Setting activeOrderId to null.")):A.find(re=>re.id===$)?(H=$,console.log("DEBUG-FLOW: No search. Keeping current activeOrderId (draft):",H)):A.length>0?(H=A[A.length-1].id,console.log("DEBUG-FLOW: No search. Current active not in drafts. Setting to LAST (newest) draft:",H)):(H=null,console.log("DEBUG-FLOW: No search. No drafts found. Setting activeOrderId to null.")),H!==$)te(H),console.log("DEBUG-FLOW: activeOrderId changed from",$,"to",H);else if(H&&H===$){const L=A.findIndex(re=>re.id===$);L!==-1&&L!==V&&(P(L),console.log("DEBUG-FLOW: currentOrderIndex updated due to order sorting (activeOrderId unchanged):",L))}},[p,F,$]),at.useEffect(()=>{if(console.log("DEBUG-FLOW: Effect 'sync headerInfo/orderItems' triggered. displayedOrders.length:",y.length,"activeOrderId:",$),$&&y.length>0){const A=y.find(H=>H.id===$);if(A){console.log("DEBUG-FLOW: Sincronizando UI con ID de pedido:",A.id,"Estado:",A.header.status,"Mail ID:",A.header.mailId),w(A.header),O(A.items);const H=y.findIndex(L=>L.id===$);H!==-1&&H!==V&&(P(H),console.log("DEBUG-FLOW: Nuevo currentOrderIndex:",H))}else console.log("DEBUG-FLOW: Pedido activo (",$,") no encontrado en displayedOrders. Esperando sincronizacin de datos. El estado actual de la UI se mantiene.")}else if(!$&&y.length>0){const A=y[0];A?(te(A.id),console.log("DEBUG-FLOW: No activeOrderId, por defecto al primer borrador:",A.id)):(console.warn("DEBUG-FLOW: Estado inesperado: activeOrderId es nulo pero displayedOrders no est vaco y no se encontr el primer borrador."),w({...we,emailSubject:Ue([],[])}),O([Be]),P(0))}else!$&&y.length===0?(console.log("DEBUG-FLOW: No hay pedido activo y no hay pedidos mostrados. Reiniciando la UI a un formulario en blanco."),w({...we,emailSubject:Ue([],[])}),O([Be]),P(0)):$&&y.length===0&&(console.warn("DEBUG-FLOW: activeOrderId obsoleto detectado. Limpiando activeOrderId:",$),te(null))},[$,y]);const wn=async()=>{if(!Ut||!e){console.warn("Firestore not initialized or user not authenticated. Cannot save order.");return}if(!$){console.log("DEBUG-SAVE: saveCurrentFormDataToDisplayed called without activeOrderId. Skipping save for current form state.");return}const A={id:$,header:{...x},items:S.map(H=>({...H}))};console.log("DEBUG-SAVE: Attempting to save current order data for ID:",A.id,"Mail ID:",A.header.mailId,"Status:",A.header.status),await gn(A)},Kn=A=>{const{name:H,value:L}=A.target;w(re=>({...re,[H]:L}))},li=A=>{const{name:H,value:L,type:re}=A.target;re!=="date"&&re!=="number"&&H!=="emailSubject"&&H!=="mailId"&&w(le=>({...le,[H]:L.toUpperCase()}))},pt=(A,H)=>{const{name:L,value:re}=H.target;O(le=>le.map(he=>he.id===A?{...he,[L]:re}:he))},$t=(A,H)=>{const{name:L,value:re,type:le}=H.target;O(ve=>ve.map(Ce=>{if(Ce.id===A){let ze=re;if(L==="preciosFOB"){const fe=re.match(/\d+([.,]\d+)?/g),ge=[];if(fe&&fe.length>0)for(const ye of fe){const me=parseFloat(ye.replace(",","."));isNaN(me)||ge.push(`$ ${me.toFixed(2).replace(".",",")}`)}ge.length>0?ze=ge.join(" - "):ze=""}else if(L==="calibre")ze=re.split(/[,;\s-]+/).filter(ge=>ge.trim()!=="").map(ge=>ge.trim().toUpperCase()).join(" - ");else if(L==="categoria"){const fe=re.match(/[a-zA-Z0-9]+/g);fe&&fe.length>0?ze=fe.join(" - "):ze="",ze=ze.toUpperCase()}else le!=="number"&&(ze=re.toUpperCase());return{...Ce,[L]:ze}}return Ce}))},br=(A=null)=>{O(H=>{let L;if(A){const re=H.find(le=>le.id===A);if(re){const le={...re,id:crypto.randomUUID(),isCanceled:!1},ve=H.findIndex(he=>he.id===A);L=[...H.slice(0,ve+1),le,...H.slice(ve+1)]}else L=[...H,{id:crypto.randomUUID(),pallets:"",especie:"",variedad:"",formato:"",calibre:"",categoria:"",preciosFOB:"",estado:"",isCanceled:!1}]}else L=[...H,{id:crypto.randomUUID(),pallets:"",especie:"",variedad:"",formato:"",calibre:"",categoria:"",preciosFOB:"",estado:"",isCanceled:!1}];return gn({id:$,header:{...x},items:L}),L})},Bi=A=>{O(H=>{if(H.length<=1)return console.log("No se puede eliminar la ltima fila."),H;const L=H.filter(re=>re.id!==A);return gn({id:$,header:{...x},items:L}),L})},gi=A=>{O(H=>{const L=H.map(re=>{if(re.id===A){const le=!re.isCanceled;return{...re,isCanceled:le,estado:le?"CANCELADO":""}}return re});return gn({id:$,header:{...x},items:L}),L})},sa=S.reduce((A,H)=>{if(H.isCanceled)return A;const L=parseFloat(H.pallets)||0;return A+L},0),Ar=A=>{const H=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],L=["Domingo","Lunes","Martes","Mircoles","Jueves","Viernes","Sbado"];try{const re=new Date(A+"T00:00:00");if(isNaN(re.getTime()))return console.warn("Invalid date string received by formatDateToSpanish:",A),A;const le=L[re.getDay()],ve=re.getDate(),he=H[re.getMonth()],Ce=re.getFullYear();return`${le} ${ve} de ${he} de ${Ce}`}catch(re){return console.error("Error formatting date:",A,re),A}},wr=(A,H,L)=>{const le=H.filter(me=>!me.isCanceled).reduce((me,xe)=>{const ct=parseFloat(xe.pallets)||0;return me+ct},0),ve=H.map(me=>me.estado).filter(me=>me&&me.trim()!==""&&me.toUpperCase()!=="CANCELADO"),he=ve.length>0?ve.join(""):"",Ce=A.nave,ze=A.deNombrePais,fe=A.fechaCarga?Ar(A.fechaCarga):"",ge=A.exporta,ye=`
            <div class="table-wrapper-email" style="overflow-x: auto; -webkit-overflow-scrolling: touch; margin-top: 10px; border-radius: 8px; border: 1px solid #ddd;">
                <table border="1" cellpadding="0" cellspacing="0" style="width: auto; min-width: 650px; border-collapse: collapse; border: none; box-sizing: border-box; text-align: left; table-layout: auto;">
                    <thead>
                        <tr style="background-color: #2563eb; color: #ffffff;">
                            <th style="padding: 3px 5px; border: 1px solid #1e40af; border-top-left-radius: 8px; text-align: center; font-size: 11px; box-sizing: border-box; white-space: nowrap;">Pallets</th>
                            <th style="padding: 3px 5px; border: 1px solid #1e40af; text-align: center; font-size: 11px; box-sizing: border-box; white-space: nowrap;">Especie</th>
                            <th style="padding: 3px 5px; border: 1px solid #1e40af; text-align: center; font-size: 11px; box-sizing: border-box; white-space: nowrap;">Variedad</th>
                            <th style="padding: 3px 5px; border: 1px solid #1e40af; text-align: center; font-size: 11px; box-sizing: border-box; white-space: nowrap;">Formato</th>
                            <th style="padding: 3px 5px; border: 1px solid #1e40af; text-align: center; font-size: 11px; box-sizing: border-box; white-space: nowrap;">Calibre</th>
                            <th style="padding: 3px 5px; border: 1px solid #1e40af; border-top-right-radius: 8px; text-align: center; font-size: 11px; box-sizing: border-box; white-space: nowrap;">Categora</th>
                            <th style="padding: 3px 5px; border: 1px solid #1e40af; text-align: center; font-size: 11px; box-sizing: border-box; white-space: nowrap;">Precios FOB</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${H.map((me,xe)=>{const ct=me.isCanceled?"color: #ef4444; text-decoration: line-through;":"";return`<tr style="${xe%2===0?"background-color: #f9f9f9;":"background-color: #ffffff;"}${ct}"><td style="padding: 3px 5px; border: 1px solid #eee; text-align: center; box-sizing: border-box; font-size: 11px; white-space: nowrap;">${me.pallets}</td><td style="padding: 3px 5px; border: 1px solid #eee; text-align: center; box-sizing: border-box; font-size: 11px; white-space: nowrap;">${me.especie}</td><td style="padding: 3px 5px; border: 1px solid #eee; text-align: center; font-size: 11px; white-space: nowrap;">${me.variedad}</td><td style="padding: 3px 5px; border: 1px solid #eee; text-align: center; font-size: 11px; white-space: nowrap;">${me.formato}</td><td style="padding: 3px 5px; border: 1px solid #eee; text-align: center; font-size: 11px; white-space: nowrap;">${me.calibre}</td><td style="padding: 3px 5px; border: 1px solid #eee; text-align: center; font-size: 11px; white-space: nowrap;">${me.categoria}</td><td style="padding: 3px 5px; border: 1px solid #eee; text-align: center; box-sizing: border-box; font-size: 11px; white-space: nowrap;">${me.preciosFOB}</td></tr>`}).join("")}
                        <tr style="background-color: #e0e0e0;">
                            <td colSpan="6" style="padding: 6px 15px 6px 6px; text-align: right; font-weight: bold; border: 1px solid #ccc; border-bottom-left-radius: 8px; margin-top: 15px; box-sizing: border-box; font-size: 11px; white-space: nowrap;">Total de Pallets:</td>
                            <td colSpan="1" style="padding: 6px; font-weight: bold; border: 1px solid #ccc; border-bottom-right-radius: 8px; text-align: center; box-sizing: border-box; font-size: 11px; white-space: nowrap;">
                                ${le} Pallets
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        `;return`
        <div style="font-family: Arial, sans-serif; font-size: 14px; color: #333; margin-bottom: 20px; border: 1px solid #ddd; padding: 15px; border-radius: 8px; width: 100%; max-width: 900px; text-align: left; box-sizing: border-box;">
            <div style="padding-bottom: 10px; border-bottom: 1px solid #eee; margin-bottom: 10px;">
                <p class="email-header-p" style="margin: 0; margin-bottom: 2px;"><strong>Pas:</strong> ${ze}</p>
                <p class="email-header-p" style="margin: 0; margin-bottom: 2px;"><strong>Nave:</strong> ${Ce}</p>
                <p class="email-header-p" style="margin: 0; margin-bottom: 2px;"><strong>Fecha de carga:</strong> ${fe}</p>
                <p class="email-header-p" style="margin: 0;"><strong>Exporta:</strong> ${ge}</p>
                <div style="clear: both;"></div> <!-- Clear float -->
            </div>
            ${ye}
            <p style="margin-top: 10px; font-weight: bold; font-size: 13px;">Observaciones: <span style="font-weight: normal; font-style: italic;">${he}</span></p>
        </div>
    `},aa=A=>{const H=document.createElement("div");H.innerHTML=A,H.style.position="absolute",H.style.left="-9999px",document.body.appendChild(H);const L=document.createRange();L.selectNodeContents(H);const re=window.getSelection();re.removeAllRanges(),re.addRange(L),document.execCommand("copy"),document.body.removeChild(H)},wt=async()=>{if(!Ut||!e){console.warn("Firestore not initialized or user not authenticated. Cannot add new order.");return}$&&(console.log("DEBUG-ADD-ORDER: Saving current active order before creating a new one."),await wn());let A="";F?(A=F,console.log("DEBUG-ADD-ORDER: Inheriting Mail ID from committed search term:",A)):x.mailId&&x.status==="draft"?(A=x.mailId,console.log("DEBUG-ADD-ORDER: Inheriting Mail ID from current draft:",A)):(A=crypto.randomUUID().substring(0,8).toUpperCase(),console.log("DEBUG-ADD-ORDER: Generating new Mail ID for fresh order:",A));const H=Xa(Ut,`artifacts/${r}/public/data/pedidos`),re=Ni(H).id,le={...we,reDestinatarios:x.reDestinatarios,emailSubject:Ue([x.reDestinatarios],[],A),mailId:A,status:"draft",createdAt:Date.now(),createdBy:e,updatedAt:Date.now()},ve=[{...Be,id:crypto.randomUUID()}];console.log("DEBUG-ADD-ORDER: Creating new order with ID:",re,"and Mail ID:",A),await gn({id:re,header:le,items:ve}),te(re),console.log("DEBUG-FLOW: New order added, setting activeOrderId to new order:",re)},it=()=>{if(console.log("DEBUG-NAV-PREV: Before navigation:",{currentOrderIndex:V,activeOrderId:$,displayedOrdersLength:y.length}),V===0){console.log("DEBUG-NAV-PREV: Ya ests en el primer (ms antiguo) pedido.");return}wn();const A=V-1;if(y[A]){const H=y[A].id;te(H),console.log("DEBUG-NAV-PREV: Navegando a pedido anterior (ms antiguo). Nuevo activeOrderId:",H)}else console.warn("DEBUG-NAV-PREV: No se encontr el pedido anterior en el ndice:",A)},Sn=()=>{if(console.log("DEBUG-NAV-NEXT: Before navigation:",{currentOrderIndex:V,activeOrderId:$,displayedOrdersLength:y.length}),V===y.length-1){console.log("DEBUG-NAV-NEXT: Ya ests en el ltimo (ms reciente) pedido.");return}wn();const A=V+1;if(y[A]){const H=y[A].id;te(H),console.log("DEBUG-NAV-NEXT: Navegando a pedido siguiente (ms reciente). Nuevo activeOrderId:",H)}else console.warn("DEBUG-NAV-NEXT: No se encontr el pedido siguiente en el ndice:",A)},Zt=async()=>{if(y.length<=1){console.log("DEBUG-DELETE: No se puede eliminar el ltimo pedido.");return}const A=y[V].id;console.log("DEBUG-DELETE: Intentando eliminar pedido con ID:",A);let H=null;y.length>1&&(V===y.length-1?H=y[V-1].id:H=y[V+1].id),A&&(await Li(A),console.log("DEBUG-DELETE: Eliminacin iniciada. Firestore onSnapshot se encargar de la UI."),H?(te(H),console.log("DEBUG-DELETE: Setting next active order ID to:",H)):(te(null),console.log("DEBUG-DELETE: No next active order ID determined, setting activeOrderId to null.")))},oa=()=>{console.log("ACTION: Search button clicked. New search term:",R.toUpperCase()),ne(R.toUpperCase())},Ao=async()=>{if(console.log("ACTION: Clear Search button clicked. Clearing search term and drafts."),!Ut||!e){console.warn("Firestore not initialized or user not authenticated. Cannot clear drafts.");return}$&&(console.log("DEBUG-CLEAR-SEARCH: Saving current active order before clearing drafts."),await wn());const A=Xa(Ut,`artifacts/${r}/public/data/pedidos`),H=$a(A,Ks("header.status","==","draft")),L=await wl(H),re=qd(Ut);let le=0;L.docs.forEach(fe=>{re.delete(Ni(A,fe.id)),console.log("DEBUG-CLEAR-SEARCH: Marking draft for deletion:",fe.id),le++}),le>0?(await re.commit(),console.log(`DEBUG-CLEAR-SEARCH: Committed deletion of ${le} draft orders.`)):console.log("DEBUG-CLEAR-SEARCH: No draft orders to delete.");const he=Ni(A).id,Ce={...we,mailId:crypto.randomUUID().substring(0,8).toUpperCase(),emailSubject:Ue([],[]),status:"draft",createdAt:Date.now(),createdBy:e,updatedAt:Date.now()},ze=[{...Be,id:crypto.randomUUID()}];await gn({id:he,header:Ce,items:ze}),console.log("DEBUG-CLEAR-SEARCH: Created new blank draft order:",he),te(he),D(""),ne(""),console.log("DEBUG-CLEAR-SEARCH: UI states reset, new draft is active.")},zi=()=>window.innerWidth<=767,yi=async()=>{var A,H,L,re;console.log("ACTION: 'Enviar Email' button clicked.");try{if(!Ut||!e){console.warn("Firestore not initialized or user not authenticated. Cannot send email.");return}console.log("DEBUG-SEND: Saving current form data before consolidating for email."),await wn();const le=x.mailId;if(console.log("DEBUG-SEND: Mail ID del pedido activo:",le),!le){console.error("ERROR-SEND: Mail ID is missing when attempting to send email. Cannot consolidate orders."),It(!1);return}const ve=Xa(Ut,`artifacts/${r}/public/data/pedidos`),he=x.reDestinatarios;if(he&&le){const je=$a(ve,Ks("header.status","==","draft"),Ks("header.reDestinatarios","==",he)),St=await wl(je),Et=qd(Ut);St.docs.forEach(yn=>{var Rr;const gt=(Rr=yn.data().header)==null?void 0:Rr.mailId;if(!gt||gt!==le){const Ir=Ni(Ut,`artifacts/${r}/public/data/pedidos`,yn.id);Et.update(Ir,{"header.mailId":le}),console.log(`DEBUG-GROUPING: Order ${yn.id} updated with Mail ID: ${le}`)}}),Et._mutations.length>0?(await Et.commit(),console.log("DEBUG-GROUPING: Batch update committed for grouping orders.")):console.log("DEBUG-GROUPING: No other draft orders to group or already grouped.")}else console.warn("DEBUG-GROUPING: Skipping grouping, missing currentProveedor or mailGlobalId.");const Ce=$a(ve,Ks("header.mailId","==",le));console.log(`DEBUG-SEND: Querying Firestore for orders with header.mailId == '${le}' AFTER grouping update.`);const fe=(await wl(Ce)).docs.map(je=>({id:je.id,header:je.data().header,items:JSON.parse(je.data().items||"[]")}));console.log("DEBUG-SEND: Orders fetched from Firestore for consolidation (after grouping):",fe.map(je=>{var St,Et;return{id:je.id,mailId:(St=je.header)==null?void 0:St.mailId,status:(Et=je.header)==null?void 0:Et.status}}));const ge={id:$,header:{...x},items:S.map(je=>({...je}))};console.log("DEBUG-SEND: Active order's local state:",{id:ge.id,mailId:(A=ge.header)==null?void 0:A.mailId,status:(H=ge.header)==null?void 0:H.status});const ye=fe.findIndex(je=>je.id===$);ye!==-1?(fe[ye]=ge,console.log("DEBUG-SEND: Active order updated in consolidation list with local state.")):ge.id&&((L=ge.header)==null?void 0:L.mailId)===le&&(fe.push(ge),console.log("DEBUG-SEND: Active order added to consolidation list.")),fe.sort((je,St)=>{var qt,gt;const Et=((qt=je.header)==null?void 0:qt.createdAt)||0,yn=((gt=St.header)==null?void 0:gt.createdAt)||0;return Et-yn}),console.log("DEBUG-SEND: Orders after local state merge and sort:",fe.map(je=>{var St,Et;return{id:je.id,mailId:(St=je.header)==null?void 0:St.mailId,status:(Et=je.header)==null?void 0:Et.status}}));for(const je of fe)if(((re=je.header)==null?void 0:re.status)==="draft"){const St=Ni(Ut,`artifacts/${r}/public/data/pedidos`,je.id);await lC(St,{"header.mailId":le,"header.status":"sent","header.lastModifiedBy":e,"header.updatedAt":Date.now()}),je.header.status="sent",je.header.mailId=le}if(fe.length===0){console.log("DEBUG-SEND: No hay pedidos para enviar despus de la consolidacin."),It(!1);return}let me="";const xe=new Set,ct=new Set;fe.forEach((je,St)=>{me+=`
            <h3 style="font-size: 18px; color: #2563eb; margin-top: 40px; margin-bottom: 15px; text-align: left;">Pedido #${St+1}</h3>
            ${wr(je.header,je.items,St+1)}
        `,je.header.reDestinatarios&&xe.add(je.header.reDestinatarios),je.items.forEach(Et=>{Et.especie&&ct.add(Et.especie)})});const on=Ue(Array.from(xe),Array.from(ct),"");console.log("DEBUG-SEND: Consolidated Email Subject (without Mail ID):",on);const vt=`
        <!DOCTYPE html>
        <html>
        <head>
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Detalle de Pedido</title>
            <style>
              /* Global styles for email */
              body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f8f8f8; }
              .container { padding: 0px; box-sizing: border-box; text-align: left; }
              /* Estilos responsivos para email */
              @media only screen and (max-width: 767px) {
                  .email-header-p {
                      font-size: 12px !important;
                      margin-bottom: 1px !important;
                  }
                  .email-header-p:last-of-type {
                      margin-bottom: 4px !important;
                  }
                  h3 {
                      font-size: 16px !important;
                      margin-top: 20px !important;
                      margin-bottom: 10px !important;
                  }
                  /* Ensure bold for header labels in mobile preview */
                  .email-header-p strong {
                      font-weight: bold !important;
                  }
                  table th, table td {
                      font-size: 8px !important; /* Further reduced font size for mobile */
                      padding: 2px 2px !important; /* Further reduced padding for mobile */
                      white-space: nowrap; /* Force content onto one line */
                  }
                  table {
                      width: auto !important; /* Allow table to auto-size based on content/min-width */
                      min-width: 650px !important; /* Increased minimum width for content, allowing overflow-x to work */
                      table-layout: auto; /* Allow column widths to adjust to content */
                  }
                  /* Ensure the wrapper div for the table handles horizontal scrolling */
                  .table-wrapper-email {
                      overflow-x: auto !important;
                      -webkit-overflow-scrolling: touch !important;
                  }
              }
              /* General table styles */
              table {
                  max-width: 100%;
                  width: auto;
                  border-collapse: collapse;
                  table-layout: auto;
              }
              table th, table td {
                  border: 1px solid #eee;
                  padding: 3px 5px;
                  text-align: center;
                  vertical-align: top; /* Align content to top for multi-line cells */
                  white-space: nowrap; /* Force content onto one line */
              }
              table thead th {
                  background-color: #2563eb;
                  color: #ffffff;
              }
            </style>
        </head>
        <body>
            <div class="container">
                <div style="text-align: right; margin-bottom: 10px; font-weight: bold; font-size: 14px; color: #ef4444;">Mail ID: ${le}</div>
                ${me}
            </div>
        </body>
        </html>
      `;aa(vt),console.log("DEBUG-SEND: Email content copied to clipboard.");const Wt="",Dn="El contenido del pedido ha sido copiado a tu portapapeles. Por favor, abre tu aplicacin de correo y pega el contenido manualmente en el cuerpo del mensaje.";if(zi()){const je=`mailto:${Wt}?subject=${encodeURIComponent(on)}&body=${encodeURIComponent(Dn)}`;window.location.href=je,console.log("DEBUG-SEND: Attempting to open mailto link for mobile.")}else window.open(`https://mail.google.com/mail/?view=cm&fs=1&tf=1&to=${Wt}&su=${encodeURIComponent(on)}&body=`,"_blank"),console.log("DEBUG-SEND: Attempting to open Gmail compose window for desktop.");It(!1),D(""),ne(""),N(!1),pe(!1),Y(""),console.log("DEBUG-SEND: UI states reset after email send.")}catch(le){console.error("ERROR-SEND: Fallo al intentar enviar el email:",le)}},ji=async()=>{console.log("ACTION: 'Finalizar Pedido' button clicked.");let A=x.mailId;x.mailId?console.log("DEBUG-FINALIZE: Order already has Mail ID. Not generating new one:",x.mailId):(A=crypto.randomUUID().substring(0,8).toUpperCase(),console.log("DEBUG-FINALIZE: Generating new Mail ID:",A),w(H=>({...H,mailId:A}))),console.log("DEBUG-FINALIZE: Saving current form data before modal opens (con Mail ID potencialmente nuevo)."),await wn(),It(!0),N(!1),pe(!1),Y(""),console.log("DEBUG-FINALIZE: Modal opened with Mail ID:",A)},Ln=async()=>{var ze,fe,ge;console.log("ACTION: 'Previsualizar Pedido' button clicked."),console.log("DEBUG-PREVIEW: Saving current form data before consolidating for preview."),await wn();const A=x.mailId;if(console.log("DEBUG-PREVIEW: Mail ID del pedido activo para previsualizacin:",A),!A){console.warn("DEBUG-PREVIEW: Cannot preview: No Mail ID associated with the current order."),Y('<p style="text-align: center; color: #888;">No hay pedidos para previsualizar sin un ID de Mail asociado.</p>'),pe(!0);return}const H=Xa(Ut,`artifacts/${r}/public/data/pedidos`),L=x.reDestinatarios;if(L&&A){const ye=$a(H,Ks("header.status","==","draft"),Ks("header.reDestinatarios","==",L)),me=await wl(ye),xe=qd(Ut);me.docs.forEach(ct=>{var Wt;const vt=(Wt=ct.data().header)==null?void 0:Wt.mailId;if(!vt||vt!==A){const Dn=Ni(Ut,`artifacts/${r}/public/data/pedidos`,ct.id);xe.update(Dn,{"header.mailId":A}),console.log(`DEBUG-GROUPING: Order ${ct.id} updated with Mail ID: ${A}`)}}),xe._mutations.length>0?(await xe.commit(),console.log("DEBUG-GROUPING: Batch update committed for grouping orders (preview).")):console.log("DEBUG-GROUPING: No other draft orders to group for preview or already grouped.")}else console.warn("DEBUG-GROUPING: Skipping grouping for preview, missing currentProveedor or previewGlobalId.");const re=$a(H,Ks("header.mailId","==",A));console.log(`DEBUG-PREVIEW: Querying Firestore for orders with header.mailId == '${A}' AFTER grouping update.`);const ve=(await wl(re)).docs.map(ye=>({id:ye.id,header:ye.data().header,items:JSON.parse(ye.data().items||"[]")}));console.log("DEBUG-PREVIEW: Orders fetched from Firestore for consolidation (after grouping):",ve.map(ye=>{var me,xe;return{id:ye.id,mailId:(me=ye.header)==null?void 0:me.mailId,status:(xe=ye.header)==null?void 0:xe.status}}));const he={id:$,header:{...x},items:S.map(ye=>({...ye}))};console.log("DEBUG-PREVIEW: Active order's local state:",{id:he.id,mailId:(ze=he.header)==null?void 0:ze.mailId,status:(fe=he.header)==null?void 0:fe.status});const Ce=ve.findIndex(ye=>ye.id===$);if(Ce!==-1?(ve[Ce]=he,console.log("DEBUG-PREVIEW: Active order updated in consolidation list with local state.")):he.id&&((ge=he.header)==null?void 0:ge.mailId)===A&&(ve.push(he),console.log("DEBUG-PREVIEW: Active order added to consolidation list.")),ve.sort((ye,me)=>{var on,vt;const xe=((on=ye.header)==null?void 0:on.createdAt)||0,ct=((vt=me.header)==null?void 0:vt.createdAt)||0;return xe-ct}),console.log("DEBUG-PREVIEW: Orders after local state merge and sort:",ve.map(ye=>{var me,xe;return{id:ye.id,mailId:(me=ye.header)==null?void 0:me.mailId,status:(xe=ye.header)==null?void 0:xe.status}})),ve.length===0)Y('<p style="text-align: center; color: #888;">No hay pedidos para previsualizar.</p>'),console.log("DEBUG-PREVIEW: No orders to preview generated.");else{let ye="";ve.forEach((xe,ct)=>{ye+=`
          <h3 style="font-size: 18px; color: #2563eb; margin-top: 20px; margin-bottom: 10px; text-align: left;">Pedido #${ct+1}</h3>
          ${wr(xe.header,xe.items)}
        `});const me=`
        <!DOCTYPE html>
        <html>
        <head>
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Previsualizacin de Pedido</title>
            <style>
              /* Global styles for preview */
              body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f8f8f8; }
              .container { padding: 0px; box-sizing: border-box; text-align: left; }
              /* Estilos responsivos para preview */
              @media only screen and (max-width: 767px) {
                  .email-header-p {
                      font-size: 12px !important;
                      margin-bottom: 1px !important;
                  }
                  .email-header-p:last-of-type {
                      margin-bottom: 4px !important;
                  }
                  h3 {
                      font-size: 16px !important;
                      margin-top: 20px !important;
                      margin-bottom: 10px !important;
                  }
                  /* Ensure bold for header labels in mobile preview */
                  .email-header-p strong {
                      font-weight: bold !important;
                  }
                  table th, table td {
                      font-size: 8px !important; /* Further reduced font size for mobile */
                      padding: 2px 2px !important; /* Further reduced padding for mobile */
                      white-space: nowrap; /* Force content onto one line */
                  }
                  table {
                      width: auto !important; /* Allow table to auto-size based on content/min-width */
                      min-width: 650px !important; /* Increased minimum width for content, allowing overflow-x to work */
                      table-layout: auto; /* Allow column widths to adjust to content */
                  }
                  .table-wrapper-email {
                      overflow-x: auto !important;
                      -webkit-overflow-scrolling: touch !important;
                  }
              }
              /* General table styles */
              table {
                  max-width: 100%;
                  width: auto;
                  border-collapse: collapse;
                  table-layout: auto;
              }
              table th, table td {
                  border: 1px solid #eee;
                  padding: 3px 5px;
                  text-align: center;
                  vertical-align: top;
                  white-space: nowrap; /* Force content onto one line */
              }
              table thead th {
                  background-color: #2563eb;
                  color: #ffffff;
              }
            </style>
        </head>
        <body>
            <div class="container">
                <div style="text-align: right; margin-bottom: 10px; font-weight: bold; font-size: 14px; color: #ef4444;">Mail ID: ${A}</div>
                ${ye}
            </div>
        </body>
        </html>
      `;Y(me),console.log("DEBUG-PREVIEW: Preview content generated.")}pe(!0)},qi=A=>{const H=S.find(L=>L.id===A);H&&(_e(H),Se(H.estado),oe(!0),console.log("DEBUG: Observation modal opened for item:",A))};at.useEffect(()=>{ee&&At.current&&(At.current.focus(),At.current.value&&At.current.select(),console.log("DEBUG: Observation textarea focused."))},[ee]);const Hi=()=>{if(ie){const A=Le?Le.charAt(0).toUpperCase()+Le.slice(1).toLowerCase():"",H=S.map(L=>L.id===ie.id?{...L,estado:A}:L);O(H),gn({id:$,header:{...x},items:H}),console.log("DEBUG: Observation saved for item:",ie.id)}oe(!1),_e(null),Se("")},_s=()=>{oe(!1),_e(null),Se(""),console.log("DEBUG: Observation modal closed.")};return at.useEffect(()=>{const A=H=>{var Ce,ze;const L=document.activeElement;let re=!1;if(!(fe=>fe.tagName==="INPUT"&&fe.name&&(Dt.includes(fe.name)||an.includes(fe.name)))(L))return;const ve=Dt.indexOf(L.name);let he=null;if(ve===-1)for(const fe in Pe.current){for(const ge in Pe.current[fe])if(Pe.current[fe][ge]===L){he={rowId:fe,colName:ge};break}if(he)break}if(H.key==="ArrowRight"||H.key==="ArrowLeft"||H.key==="ArrowUp"||H.key==="ArrowDown"){if(H.preventDefault(),ve!==-1){let fe=ve;if(H.key==="ArrowRight")fe=(ve+1)%Dt.length;else if(H.key==="ArrowLeft")fe=(ve-1+Dt.length)%Dt.length;else if(H.key==="ArrowDown"){if(S.length>0){const ge=S[0].id,ye=an[0];Pe.current[ge]&&Pe.current[ge][ye]&&(Pe.current[ge][ye].focus(),re=!0)}}else H.key==="ArrowUp"&&(fe=(ve-1+Dt.length)%Dt.length,Fe.current[Dt[fe]]&&(Fe.current[Dt[fe]].focus(),re=!0));!re&&Fe.current[Dt[fe]]&&(Fe.current[Dt[fe]].focus(),re=!0)}else if(he){const{rowId:fe,colName:ge}=he,ye=S.findIndex(vt=>vt.id===fe),me=an.indexOf(ge);let xe=ye,ct=me;H.key==="ArrowRight"?(ct++,ct>=an.length&&(ct=0,xe++)):H.key==="ArrowLeft"?(ct--,ct<0&&(ct=an.length-1,xe--)):H.key==="ArrowDown"?xe++:H.key==="ArrowUp"&&xe--;let on=null;if(xe>=0&&xe<S.length){const vt=(Ce=S[xe])==null?void 0:Ce.id,Wt=an[ct];Pe.current[vt]&&Pe.current[vt][Wt]&&(on=Pe.current[vt][Wt])}else if(xe<0){const vt=Dt[Dt.length-1];on=Fe.current[vt]}else if(xe>=S.length){const vt=S.length-1,Wt=(ze=S[vt])==null?void 0:ze.id,Dn=an[me];Wt&&Pe.current[Wt]&&Pe.current[Wt][Dn]&&(on=Pe.current[Wt][Dn])}on&&(on.focus(),re=!0)}}};return document.addEventListener("keydown",A),()=>{document.removeEventListener("keydown",A)}},[S,x]),c?U.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:U.jsx("div",{className:"text-blue-600 text-lg font-semibold",children:"Cargando pedidos..."})}):U.jsxs("div",{className:"min-h-screen bg-gray-100 p-4 sm:p-6 lg:p-8 font-inter",children:[U.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-xl shadow-lg p-4 sm:p-6 space-y-6 relative",children:[U.jsx("img",{src:"https://www.vpcom.com/images/logo-vpc.png",onError:A=>{A.target.onerror=null,A.target.src="https://placehold.co/100x40/FFFFFF/000000?text=LogoVPC"},alt:"Logo VPC",className:"absolute top-4 right-4 w-20 sm:w-24 md:w-32 h-auto object-contain rounded-md z-10"}),e&&U.jsxs("div",{className:"absolute top-4 left-4 text-xs text-gray-500",children:["User ID: ",e]}),U.jsxs("div",{className:"border-b pb-4 mb-4 pt-16 sm:pt-0",children:[U.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-center text-gray-800 mb-4",children:"Pedidos Comercial Frutam"}),U.jsxs("div",{className:"flex items-end gap-2 mb-4",children:[U.jsxs("div",{className:"flex-grow",children:[U.jsx("label",{htmlFor:"searchTerm",className:"block text-sm font-medium text-gray-700",children:"Buscar por Mail ID:"}),U.jsx("input",{type:"text",id:"searchTerm",name:"searchTerm",value:R,onChange:A=>D(A.target.value),placeholder:"Ingrese el Mail ID (ej. 5B7D7692)",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-gray-50 border"})]}),U.jsx("button",{onClick:oa,className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-md shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-150 ease-in-out mt-auto",children:"Buscar"}),U.jsx("button",{onClick:Ao,className:"px-4 py-2 bg-gray-300 text-gray-800 font-semibold rounded-md shadow-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2 transition duration-150 ease-in-out mt-auto",children:"Limpiar Bsqueda"})]}),U.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-4",children:[U.jsx("div",{children:U.jsx(Za,{label:"Nombre de Proveedor:",name:"reDestinatarios",value:x.reDestinatarios,onChange:Kn,onBlur:li,placeholder:"Ingrese nombre de proveedor",ref:A=>Fe.current.reDestinatarios=A})}),U.jsx("div",{children:U.jsx(Za,{label:"Pas:",name:"deNombrePais",value:x.deNombrePais,onChange:Kn,onBlur:li,placeholder:"Pas de destino",ref:A=>Fe.current.deDestinatarios=A})}),U.jsx("div",{children:U.jsx(Za,{label:"Nave:",name:"nave",value:x.nave,onChange:Kn,onBlur:li,placeholder:"Nombre de Nave",ref:A=>Fe.current.nave=A})}),U.jsx("div",{children:U.jsx(Za,{label:"Fecha de carga:",name:"fechaCarga",value:x.fechaCarga,onChange:Kn,onBlur:li,placeholder:"FECHA DE CARGA",type:"date",ref:A=>Fe.current.fechaCarga=A})}),U.jsx("div",{children:U.jsx(Za,{label:"Exporta:",name:"exporta",value:x.exporta,onChange:Kn,onBlur:li,placeholder:"Exportadora",ref:A=>Fe.current.exporta=A})}),U.jsx("div",{children:U.jsx(Za,{label:"Asunto del Email:",name:"emailSubject",value:x.emailSubject,onChange:Kn,onBlur:li,placeholder:"Asunto del Correo (Se auto-completa)",ref:A=>Fe.current.emailSubject=A})})]})]}),U.jsx("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4 mt-4 mb-6",children:U.jsxs("div",{className:"flex items-center justify-center w-full sm:w-auto",children:[U.jsxs("button",{onClick:it,disabled:V===0,className:"flex items-center justify-center px-3 py-2 bg-gray-300 text-gray-800 font-semibold rounded-lg shadow-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2 transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed",title:"Ir al pedido anterior (ms antiguo)",children:[U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M9.707 4.293a1 1 0 010 1.414L5.414 10l4.293 4.293a1 1 0 01-1.414 1.414l-5-5a1 1 0 010-1.414l5-5a1 1 0 011.414 0z",clipRule:"evenodd"})}),U.jsx("span",{className:"hidden sm:inline ml-1",children:"Anterior"})]}),U.jsx("span",{className:"text-center text-gray-700 font-semibold text-lg mx-2 sm:mx-4 min-w-[150px] sm:min-w-0",children:`Pedido ${V+1} de ${y.length}`}),U.jsxs("button",{onClick:Sn,disabled:V===y.length-1,className:"flex items-center justify-center px-3 py-2 bg-gray-300 text-gray-800 font-semibold rounded-lg shadow-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2 transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed",title:"Ir al siguiente pedido (ms reciente)",children:[U.jsx("span",{className:"hidden sm:inline mr-1",children:"Siguiente"}),U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M10.293 15.707a1 1 0 010-1.414L14.586 10l-4.293-4.293a1 1 0 111.414-1.414l5 5a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})}),y.length===0&&F?U.jsxs("div",{className:"text-center text-gray-600 text-lg my-8",children:["No se encontraron pedidos con el ID:"," ",U.jsx("span",{className:"font-semibold",children:F}),"."]}):U.jsxs(U.Fragment,{children:[" ",U.jsx("div",{className:"overflow-x-auto rounded-lg shadow-md",children:U.jsxs("table",{className:"min-w-full divide-y divide-gray-200 hidden md:table",children:[U.jsx("thead",{className:"bg-blue-600 text-white",children:U.jsxs("tr",{style:{backgroundColor:"#2563eb",color:"#ffffff"},children:[U.jsx("th",{scope:"col",className:"px-1 py-px text-xs font-medium uppercase tracking-wider rounded-tl-lg whitespace-nowrap",children:"Pallets"}),U.jsx("th",{scope:"col",className:"px-1 py-px text-xs font-medium uppercase tracking-wider whitespace-nowrap",children:"Especie"}),U.jsx("th",{scope:"col",className:"px-1 py-px text-xs font-medium uppercase tracking-wider whitespace-nowrap",children:"Variedad"}),U.jsx("th",{scope:"col",className:"px-1 py-px text-xs font-medium uppercase tracking-wider whitespace-nowrap",children:"Formato"}),U.jsx("th",{scope:"col",className:"px-1 py-px text-xs font-medium uppercase tracking-wider whitespace-nowrap",children:"Calibre"}),U.jsx("th",{scope:"col",className:"px-1 py-px text-xs font-medium uppercase tracking-wider rounded-tr-lg whitespace-nowrap",children:"Categora"}),U.jsx("th",{scope:"col",className:"px-1 py-px text-xs font-medium uppercase tracking-wider whitespace-nowrap",children:"Precios FOB"}),U.jsx("th",{scope:"col",className:"px-1 py-px text-xs font-medium uppercase tracking-wider whitespace-nowrap",children:"Acciones"})]})}),U.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[S.map((A,H)=>U.jsxs("tr",{className:`hover:bg-gray-50 ${H%2===0?"bg-gray-50":"bg-white"} ${A.isCanceled?"text-red-500":""}`,children:[U.jsx("td",{className:"px-1 py-px text-xs border-r whitespace-nowrap",style:{textAlign:"center"},children:U.jsx(Vn,{type:"number",name:"pallets",value:A.pallets,onChange:L=>pt(A.id,L),onBlur:L=>$t(A.id,L),placeholder:"21",readOnly:A.isCanceled,isCanceledProp:A.isCanceled,ref:L=>{Pe.current[A.id]||(Pe.current[A.id]={}),Pe.current[A.id].pallets=L}})}),U.jsx("td",{className:"px-1 py-px text-xs border-r whitespace-nowrap",style:{textAlign:"center"},children:U.jsx(Vn,{name:"especie",value:A.especie,onChange:L=>pt(A.id,L),onBlur:L=>$t(A.id,L),placeholder:"Manzana",readOnly:A.isCanceled,isCanceledProp:A.isCanceled,...A.especie&&A.especie.toUpperCase()==="MANZANAS"?{list:"apple-varieties"}:{},ref:L=>{Pe.current[A.id]||(Pe.current[A.id]={}),Pe.current[A.id].especie=L}})}),U.jsx("td",{className:"px-1 py-px text-xs border-r whitespace-nowrap",style:{textAlign:"center"},children:U.jsx(Vn,{name:"variedad",value:A.variedad,onChange:L=>pt(A.id,L),onBlur:L=>$t(A.id,L),placeholder:"Galas",readOnly:A.isCanceled,isCanceledProp:A.isCanceled,...A.especie&&A.especie.toUpperCase()==="MANZANAS"?{list:"apple-varieties"}:{},ref:L=>{Pe.current[A.id]||(Pe.current[A.id]={}),Pe.current[A.id].variedad=L}})}),U.jsx("td",{className:"px-1 py-px text-xs border-r whitespace-nowrap",style:{textAlign:"center"},children:U.jsx(Vn,{name:"formato",value:A.formato,onChange:L=>pt(A.id,L),onBlur:L=>$t(A.id,L),placeholder:"20 Kg",readOnly:A.isCanceled,isCanceledProp:A.isCanceled,ref:L=>{Pe.current[A.id]||(Pe.current[A.id]={}),Pe.current[A.id].formato=L}})}),U.jsx("td",{className:"px-1 py-px text-xs border-r whitespace-nowrap",style:{textAlign:"center"},children:U.jsx(Vn,{name:"calibre",value:A.calibre,onChange:L=>pt(A.id,L),onBlur:L=>$t(A.id,L),placeholder:"100;113",readOnly:A.isCanceled,isCanceledProp:A.isCanceled,ref:L=>{Pe.current[A.id]||(Pe.current[A.id]={}),Pe.current[A.id].calibre=L}})}),U.jsx("td",{className:"px-1 py-px text-xs border-r whitespace-nowrap",style:{textAlign:"center"},children:U.jsx(Vn,{name:"categoria",value:A.categoria,onChange:L=>pt(A.id,L),onBlur:L=>$t(A.id,L),placeholder:"PRE:XFY",readOnly:A.isCanceled,isCanceledProp:A.isCanceled,ref:L=>{Pe.current[A.id]||(Pe.current[A.id]={}),Pe.current[A.id].categoria=L}})}),U.jsx("td",{className:"px-1 py-px text-xs border-r whitespace-nowrap",style:{textAlign:"center"},children:U.jsx(Vn,{name:"preciosFOB",value:A.preciosFOB,onChange:L=>pt(A.id,L),onBlur:L=>$t(A.id,L),placeholder:"$14",readOnly:A.isCanceled,isCanceledProp:A.isCanceled,ref:L=>{Pe.current[A.id]||(Pe.current[A.id]={}),Pe.current[A.id].preciosFOB=L}})}),U.jsxs("td",{className:"px-1 py-px text-right text-xs font-medium flex items-center justify-center h-full",children:[U.jsx("button",{onClick:()=>qi(A.id),className:"text-blue-600 hover:text-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 p-1 rounded-md",title:"Editar Observacin",children:U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:U.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),U.jsx("button",{onClick:()=>br(A.id),className:"text-green-600 hover:text-green-900 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 p-1 rounded-md",title:"Duplicar fila",children:U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})})}),U.jsx("button",{onClick:()=>gi(A.id),className:`ml-1 ${A.isCanceled?"text-gray-600 hover:text-gray-900":"text-red-600 hover:text-red-900"} focus:outline-none focus:ring-2 focus:ring-offset-2 p-1 rounded-md`,title:A.isCanceled?"Revertir cancelacin":"Cancelar fila",children:A.isCanceled?U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414L7.586 9H6a1 1 0 000 2h1.586l1.707 1.707a1 1 0 001.414-1.414L10.414 10H12a1 1 0 000-2h-1.586z",clipRule:"evenodd"})}):U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),U.jsx("button",{onClick:()=>Bi(A.id),className:`ml-1 text-red-600 hover:text-red-900 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 p-1 rounded-md ${S.length<=1?"opacity-50 cursor-not-allowed":""}`,title:S.length<=1?"No se puede eliminar la ltima fila":"Eliminar fila",disabled:S.length<=1,children:U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1zm2 3a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1zm-1 4a1 1 0 002 0v-4a1 1 0 00-2 0v4z"})})})]})]},A.id)),U.jsxs("tr",{style:{backgroundColor:"#e0e0e0"},children:[U.jsx("td",{colSpan:"6",style:{padding:"6px 15px 6px 6px",textAlign:"right",fontWeight:"bold",border:"1px solid #ccc",borderBottomLeftRadius:"8px",marginTop:"15px"},children:"Total de Pallets:"}),U.jsxs("td",{colSpan:"1",style:{padding:"6px",fontWeight:"bold",border:"1px solid #ccc",borderBottomRightRadius:"8px",textAlign:"center"},children:[sa," Pallets"]})]})]})]})}),U.jsxs("div",{className:"md:hidden space-y-4 p-2",children:[S.map((A,H)=>U.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg p-4 shadow-sm space-y-2 ${A.isCanceled?"line-through text-red-500 opacity-70":""}`,children:[U.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100",children:[U.jsxs("span",{className:"text-xs font-semibold text-blue-600",children:["Artculo #",H+1]}),U.jsxs("div",{className:"flex space-x-2",children:[U.jsx("button",{onClick:()=>qi(A.id),className:"text-blue-600 hover:text-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 p-1 rounded-md",title:"Editar Observacin",children:U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-5 w-5",children:U.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),U.jsx("button",{onClick:()=>br(A.id),className:"text-green-600 hover:text-green-900 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 p-1 rounded-md",title:"Duplicar fila",children:U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z"})})}),U.jsx("button",{onClick:()=>gi(A.id),className:`ml-1 ${A.isCanceled?"text-gray-600 hover:text-gray-900":"text-red-600 hover:text-red-900"} focus:outline-none focus:ring-2 focus:ring-offset-2 p-1 rounded-md`,title:A.isCanceled?"Revertir cancelacin":"Cancelar fila",children:A.isCanceled?U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414L7.586 9H6a1 1 0 000 2h1.586l1.707 1.707a1 1 0 001.414-1.414L10.414 10H12a1 1 0 000-2h-1.586z"})}):U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"})})}),U.jsx("button",{onClick:()=>Bi(A.id),className:`ml-1 text-red-600 hover:text-red-900 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 p-1 rounded-md ${S.length<=1?"opacity-50 cursor-not-allowed":""}`,title:S.length<=1?"No se puede eliminar la ltima fila":"Eliminar fila",disabled:S.length<=1,children:U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1zm2 3a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1zm-1 4a1 1 0 002 0v-4a1 1 0 00-2 0v4z"})})})]})]}),U.jsxs("div",{className:"flex justify-between items-center text-sm",children:[U.jsx("span",{className:"font-semibold text-gray-500 w-1/2",children:"Pallets:"}),U.jsx(Vn,{name:"pallets",value:A.pallets,onChange:L=>pt(A.id,L),onBlur:L=>$t(A.id,L),placeholder:"21",readOnly:A.isCanceled,isCanceledProp:A.isCanceled})]}),U.jsxs("div",{className:"flex justify-between items-center text-sm",children:[U.jsx("span",{className:"font-semibold text-gray-500 w-1/2",children:"Especie:"}),U.jsx(Vn,{name:"especie",value:A.especie,onChange:L=>pt(A.id,L),onBlur:L=>$t(A.id,L),placeholder:"Manzana",readOnly:A.isCanceled,isCanceledProp:A.isCanceled,...A.especie&&A.especie.toUpperCase()==="MANZANAS"?{list:"apple-varieties"}:{}})]}),U.jsxs("div",{className:"flex justify-between items-center text-sm",children:[U.jsx("span",{className:"font-semibold text-gray-500 w-1/2",children:"Variedad:"}),U.jsx(Vn,{name:"variedad",value:A.variedad,onChange:L=>pt(A.id,L),onBlur:L=>$t(A.id,L),placeholder:"Galas",readOnly:A.isCanceled,isCanceledProp:A.isCanceled,...A.especie&&A.especie.toUpperCase()==="MANZANAS"?{list:"apple-varieties"}:{}})]}),U.jsxs("div",{className:"flex justify-between items-center text-sm",children:[U.jsx("span",{className:"font-semibold text-gray-500 w-1/2",children:"Formato:"}),U.jsx(Vn,{name:"formato",value:A.formato,onChange:L=>pt(A.id,L),onBlur:L=>$t(A.id,L),placeholder:"20 Kg",readOnly:A.isCanceled,isCanceledProp:A.isCanceled})]}),U.jsxs("div",{className:"flex justify-between items-center text-sm",children:[U.jsx("span",{className:"font-semibold text-gray-500 w-1/2",children:"Calibre:"}),U.jsx(Vn,{name:"calibre",value:A.calibre,onChange:L=>pt(A.id,L),onBlur:L=>$t(A.id,L),placeholder:"100;113",readOnly:A.isCanceled,isCanceledProp:A.isCanceled})]}),U.jsxs("div",{className:"flex justify-between items-center text-sm",children:[U.jsx("span",{className:"font-semibold text-gray-500 w-1/2",children:"Categora:"}),U.jsx(Vn,{name:"categoria",value:A.categoria,onChange:L=>pt(L.id,L),onBlur:L=>$t(L.id,L),placeholder:"PRE:XFY",readOnly:A.isCanceled,isCanceledProp:A.isCanceled})]}),U.jsxs("div",{className:"flex justify-between items-center text-sm",children:[U.jsx("span",{className:"font-semibold text-gray-500 w-1/2",children:"Precios FOB:"}),U.jsx(Vn,{name:"preciosFOB",value:A.preciosFOB,onChange:L=>pt(L.id,L),onBlur:L=>$t(L.id,L),placeholder:"$14",readOnly:A.isCanceled,isCanceledProp:A.isCanceled})]})]},A.id)),U.jsxs("div",{className:"bg-blue-100 border border-blue-200 rounded-lg py-2 px-3 shadow-sm text-center font-bold text-base text-blue-800 mt-4",children:["Total de Pallets: ",sa," Pallets"]})]})]}),U.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4 mt-6",children:[U.jsxs("button",{onClick:wt,className:"flex items-center justify-center px-6 py-3 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:scale-105 w-full sm:w-auto",title:"Crear un nuevo pedido en blanco",children:[U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z"})}),"Agregar Pedido"]}),U.jsxs("button",{onClick:Zt,disabled:y.length<=1,className:`flex items-center justify-center px-6 py-3 bg-red-600 text-white font-semibold rounded-lg shadow-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:scale-105 w-full sm:w-auto ${y.length<=1?"opacity-50 cursor-not-allowed":""}`,title:"Eliminar el pedido actual",children:[U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1zm2 3a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1zm-1 4a1 1 0 002 0v-4a1 1 0 00-2 0v4z"})}),U.jsx("span",{children:"Eliminar Pedido"})]}),U.jsxs("button",{onClick:ji,className:"flex items-center justify-center px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:scale-105 w-full sm:w-auto",title:"Finalizar el pedido y ver opciones de envo",children:[U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"})}),"Finalizar Pedido"]})]}),C&&U.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50",children:U.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-screen-lg mx-auto my-8 relative flex flex-col max-h-[90vh]",children:[U.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800 text-center",children:"Opciones de Pedido Finalizado"}),!ae&&U.jsxs("h3",{className:"text-sm text-gray-600 text-center mb-4 leading-relaxed",children:[U.jsx("strong",{children:"Instruccin importante:"})," Despus de enviar el email, abre tu aplicacin de correo y pega (Ctrl+V o Cmd+V) el contenido manualmente en el cuerpo del mensaje."]}),ae?U.jsxs(U.Fragment,{children:[U.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-800 text-center",children:"Previsualizacin del Pedido"}),U.jsx("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200 text-left flex-grow overflow-y-auto",children:U.jsx("div",{dangerouslySetInnerHTML:{__html:bt}})}),U.jsxs("div",{className:"flex justify-center mt-3 gap-2 flex-wrap sm:flex-nowrap",children:[U.jsx("button",{onClick:()=>pe(!1),className:"flex items-center justify-center px-4 py-2 text-sm bg-gray-600 text-white font-semibold rounded-lg shadow-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:scale-105 w-full sm:w-auto",children:"Volver a Opciones"}),U.jsxs("button",{onClick:yi,className:"flex items-center justify-center px-4 py-2 text-sm bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:scale-105 w-full sm:w-auto",title:"Copiar contenido y abrir cliente de correo",children:[U.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:[U.jsx("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),U.jsx("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]}),"Enviar Email"]})]})]}):U.jsxs("div",{className:"flex justify-center gap-4 mb-4 flex-wrap sm:flex-nowrap",children:[U.jsxs("button",{onClick:Ln,className:"flex items-center justify-center px-4 py-2 text-sm bg-gray-600 text-white font-semibold rounded-lg shadow-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:scale-105 w-full sm:w-auto",title:"Previsualizar el pedido completo",children:[U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8c1.65 0 3-1.35 3-3V7a1 1 0 112 0v1a5 5 0 01-5 5H4a5 5 0 01-5-5v-1c0-1.65 1.35-3 3-3h1V4a1 1 0 11-2 0V3h-1a1 1 0 110-2h1a1 1 0 011 1v1h1a1 1 0 011 1V4zm0 2a2 2 0 100 4 2 2 0 000-4z"})}),"Previsualizar"]}),U.jsxs("button",{onClick:yi,className:"flex items-center justify-center px-4 py-2 text-sm bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:scale-105 w-full sm:w-auto",title:"Copiar contenido y abrir cliente de correo",children:[U.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:[U.jsx("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),U.jsx("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]}),"Enviar Email"]})]}),U.jsx("div",{className:"flex justify-center mt-4",children:U.jsx("button",{onClick:()=>It(!1),className:"px-6 py-3 bg-red-500 text-white font-semibold rounded-lg shadow-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition duration-150 ease-in-out",children:"Cerrar"})})]})}),ee&&ie&&U.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50",children:U.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-auto relative",children:[U.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800 text-center",children:"Editar Observacin para Lnea"}),U.jsxs("div",{className:"mb-4",children:[U.jsx("label",{htmlFor:"modalObservation",className:"block text-sm font-medium text-gray-700 mb-1",children:"Observacin:"}),U.jsx("textarea",{id:"modalObservation",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-gray-50 border",rows:"4",value:Le,onChange:A=>Se(A.target.value),placeholder:"Ingrese la observacin aqu...",ref:At})]}),U.jsxs("div",{className:"flex justify-end gap-3",children:[U.jsx("button",{onClick:_s,className:"px-4 py-2 bg-gray-300 text-gray-800 font-semibold rounded-lg shadow-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2 transition duration-150 ease-in-out",children:"Cancelar"}),U.jsx("button",{onClick:Hi,className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-150 ease-in-out",children:"Guardar"})]})]})}),U.jsxs("datalist",{id:"apple-varieties",children:[U.jsx("option",{value:"GALA"}),U.jsx("option",{value:"GRANNY"}),U.jsx("option",{value:"FUJI"}),U.jsx("option",{value:"PINK LADY"}),U.jsx("option",{value:"ROJA"}),U.jsx("option",{value:"CRIPPS PINK"})]})]})," "]})};pb.createRoot(document.getElementById("root")).render(U.jsx(at.StrictMode,{children:U.jsx(dC,{})}));

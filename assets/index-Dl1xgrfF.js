(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();function ab(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var bf={exports:{}},Tl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _v;function ob(){if(_v)return Tl;_v=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var g in l)g!=="key"&&(c[g]=l[g])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:c}}return Tl.Fragment=e,Tl.jsx=n,Tl.jsxs=n,Tl}var Ev;function lb(){return Ev||(Ev=1,bf.exports=ob()),bf.exports}var P=lb(),Af={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tv;function ub(){if(Tv)return qe;Tv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),I=Symbol.iterator;function D(N){return N===null||typeof N!="object"?null:(N=I&&N[I]||N["@@iterator"],typeof N=="function"?N:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},te=Object.assign,X={};function ne(N,ee,oe){this.props=N,this.context=ee,this.refs=X,this.updater=oe||G}ne.prototype.isReactComponent={},ne.prototype.setState=function(N,ee){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,ee,"setState")},ne.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function Me(){}Me.prototype=ne.prototype;function Ae(N,ee,oe){this.props=N,this.context=ee,this.refs=X,this.updater=oe||G}var Ee=Ae.prototype=new Me;Ee.constructor=Ae,te(Ee,ne.prototype),Ee.isPureReactComponent=!0;var ze=Array.isArray,we={H:null,A:null,T:null,S:null,V:null},Be=Object.prototype.hasOwnProperty;function x(N,ee,oe,re,ye,je){return oe=je.ref,{$$typeof:r,type:N,key:ee,ref:oe!==void 0?oe:null,props:je}}function w(N,ee){return x(N.type,ee,void 0,void 0,void 0,N.props)}function S(N){return typeof N=="object"&&N!==null&&N.$$typeof===r}function O(N){var ee={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(oe){return ee[oe]})}var V=/\/+/g;function k(N,ee){return typeof N=="object"&&N!==null&&N.key!=null?O(""+N.key):ee.toString(36)}function C(){}function Nt(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(C,C):(N.status="pending",N.then(function(ee){N.status==="pending"&&(N.status="fulfilled",N.value=ee)},function(ee){N.status==="pending"&&(N.status="rejected",N.reason=ee)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function wt(N,ee,oe,re,ye){var je=typeof N;(je==="undefined"||je==="boolean")&&(N=null);var Se=!1;if(N===null)Se=!0;else switch(je){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(N.$$typeof){case r:case e:Se=!0;break;case T:return Se=N._init,wt(Se(N._payload),ee,oe,re,ye)}}if(Se)return ye=ye(N),Se=re===""?"."+k(N,0):re,ze(ye)?(oe="",Se!=null&&(oe=Se.replace(V,"$&/")+"/"),wt(ye,ee,oe,"",function(Ue){return Ue})):ye!=null&&(S(ye)&&(ye=w(ye,oe+(ye.key==null||N&&N.key===ye.key?"":(""+ye.key).replace(V,"$&/")+"/")+Se)),ee.push(ye)),1;Se=0;var St=re===""?".":re+":";if(ze(N))for(var Ge=0;Ge<N.length;Ge++)re=N[Ge],je=St+k(re,Ge),Se+=wt(re,ee,oe,je,ye);else if(Ge=D(N),typeof Ge=="function")for(N=Ge.call(N),Ge=0;!(re=N.next()).done;)re=re.value,je=St+k(re,Ge++),Se+=wt(re,ee,oe,je,ye);else if(je==="object"){if(typeof N.then=="function")return wt(Nt(N),ee,oe,re,ye);throw ee=String(N),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Se}function K(N,ee,oe){if(N==null)return N;var re=[],ye=0;return wt(N,re,"","",function(je){return ee.call(oe,je,ye++)}),re}function ae(N){if(N._status===-1){var ee=N._result;ee=ee(),ee.then(function(oe){(N._status===0||N._status===-1)&&(N._status=1,N._result=oe)},function(oe){(N._status===0||N._status===-1)&&(N._status=2,N._result=oe)}),N._status===-1&&(N._status=0,N._result=ee)}if(N._status===1)return N._result.default;throw N._result}var pe=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function at(){}return qe.Children={map:K,forEach:function(N,ee,oe){K(N,function(){ee.apply(this,arguments)},oe)},count:function(N){var ee=0;return K(N,function(){ee++}),ee},toArray:function(N){return K(N,function(ee){return ee})||[]},only:function(N){if(!S(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},qe.Component=ne,qe.Fragment=n,qe.Profiler=l,qe.PureComponent=Ae,qe.StrictMode=s,qe.Suspense=p,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=we,qe.__COMPILER_RUNTIME={__proto__:null,c:function(N){return we.H.useMemoCache(N)}},qe.cache=function(N){return function(){return N.apply(null,arguments)}},qe.cloneElement=function(N,ee,oe){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var re=te({},N.props),ye=N.key,je=void 0;if(ee!=null)for(Se in ee.ref!==void 0&&(je=void 0),ee.key!==void 0&&(ye=""+ee.key),ee)!Be.call(ee,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&ee.ref===void 0||(re[Se]=ee[Se]);var Se=arguments.length-2;if(Se===1)re.children=oe;else if(1<Se){for(var St=Array(Se),Ge=0;Ge<Se;Ge++)St[Ge]=arguments[Ge+2];re.children=St}return x(N.type,ye,void 0,void 0,je,re)},qe.createContext=function(N){return N={$$typeof:d,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:c,_context:N},N},qe.createElement=function(N,ee,oe){var re,ye={},je=null;if(ee!=null)for(re in ee.key!==void 0&&(je=""+ee.key),ee)Be.call(ee,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(ye[re]=ee[re]);var Se=arguments.length-2;if(Se===1)ye.children=oe;else if(1<Se){for(var St=Array(Se),Ge=0;Ge<Se;Ge++)St[Ge]=arguments[Ge+2];ye.children=St}if(N&&N.defaultProps)for(re in Se=N.defaultProps,Se)ye[re]===void 0&&(ye[re]=Se[re]);return x(N,je,void 0,void 0,null,ye)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(N){return{$$typeof:g,render:N}},qe.isValidElement=S,qe.lazy=function(N){return{$$typeof:T,_payload:{_status:-1,_result:N},_init:ae}},qe.memo=function(N,ee){return{$$typeof:y,type:N,compare:ee===void 0?null:ee}},qe.startTransition=function(N){var ee=we.T,oe={};we.T=oe;try{var re=N(),ye=we.S;ye!==null&&ye(oe,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(at,pe)}catch(je){pe(je)}finally{we.T=ee}},qe.unstable_useCacheRefresh=function(){return we.H.useCacheRefresh()},qe.use=function(N){return we.H.use(N)},qe.useActionState=function(N,ee,oe){return we.H.useActionState(N,ee,oe)},qe.useCallback=function(N,ee){return we.H.useCallback(N,ee)},qe.useContext=function(N){return we.H.useContext(N)},qe.useDebugValue=function(){},qe.useDeferredValue=function(N,ee){return we.H.useDeferredValue(N,ee)},qe.useEffect=function(N,ee,oe){var re=we.H;if(typeof oe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(N,ee)},qe.useId=function(){return we.H.useId()},qe.useImperativeHandle=function(N,ee,oe){return we.H.useImperativeHandle(N,ee,oe)},qe.useInsertionEffect=function(N,ee){return we.H.useInsertionEffect(N,ee)},qe.useLayoutEffect=function(N,ee){return we.H.useLayoutEffect(N,ee)},qe.useMemo=function(N,ee){return we.H.useMemo(N,ee)},qe.useOptimistic=function(N,ee){return we.H.useOptimistic(N,ee)},qe.useReducer=function(N,ee,oe){return we.H.useReducer(N,ee,oe)},qe.useRef=function(N){return we.H.useRef(N)},qe.useState=function(N){return we.H.useState(N)},qe.useSyncExternalStore=function(N,ee,oe){return we.H.useSyncExternalStore(N,ee,oe)},qe.useTransition=function(){return we.H.useTransition()},qe.version="19.1.0",qe}var bv;function fm(){return bv||(bv=1,Af.exports=ub()),Af.exports}var ht=fm();const a0=ab(ht);var wf={exports:{}},bl={},Sf={exports:{}},If={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Av;function cb(){return Av||(Av=1,function(r){function e(K,ae){var pe=K.length;K.push(ae);e:for(;0<pe;){var at=pe-1>>>1,N=K[at];if(0<l(N,ae))K[at]=ae,K[pe]=N,pe=at;else break e}}function n(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var ae=K[0],pe=K.pop();if(pe!==ae){K[0]=pe;e:for(var at=0,N=K.length,ee=N>>>1;at<ee;){var oe=2*(at+1)-1,re=K[oe],ye=oe+1,je=K[ye];if(0>l(re,pe))ye<N&&0>l(je,re)?(K[at]=je,K[ye]=pe,at=ye):(K[at]=re,K[oe]=pe,at=oe);else if(ye<N&&0>l(je,pe))K[at]=je,K[ye]=pe,at=ye;else break e}}return ae}function l(K,ae){var pe=K.sortIndex-ae.sortIndex;return pe!==0?pe:K.id-ae.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,g=d.now();r.unstable_now=function(){return d.now()-g}}var p=[],y=[],T=1,I=null,D=3,G=!1,te=!1,X=!1,ne=!1,Me=typeof setTimeout=="function"?setTimeout:null,Ae=typeof clearTimeout=="function"?clearTimeout:null,Ee=typeof setImmediate<"u"?setImmediate:null;function ze(K){for(var ae=n(y);ae!==null;){if(ae.callback===null)s(y);else if(ae.startTime<=K)s(y),ae.sortIndex=ae.expirationTime,e(p,ae);else break;ae=n(y)}}function we(K){if(X=!1,ze(K),!te)if(n(p)!==null)te=!0,Be||(Be=!0,k());else{var ae=n(y);ae!==null&&wt(we,ae.startTime-K)}}var Be=!1,x=-1,w=5,S=-1;function O(){return ne?!0:!(r.unstable_now()-S<w)}function V(){if(ne=!1,Be){var K=r.unstable_now();S=K;var ae=!0;try{e:{te=!1,X&&(X=!1,Ae(x),x=-1),G=!0;var pe=D;try{t:{for(ze(K),I=n(p);I!==null&&!(I.expirationTime>K&&O());){var at=I.callback;if(typeof at=="function"){I.callback=null,D=I.priorityLevel;var N=at(I.expirationTime<=K);if(K=r.unstable_now(),typeof N=="function"){I.callback=N,ze(K),ae=!0;break t}I===n(p)&&s(p),ze(K)}else s(p);I=n(p)}if(I!==null)ae=!0;else{var ee=n(y);ee!==null&&wt(we,ee.startTime-K),ae=!1}}break e}finally{I=null,D=pe,G=!1}ae=void 0}}finally{ae?k():Be=!1}}}var k;if(typeof Ee=="function")k=function(){Ee(V)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Nt=C.port2;C.port1.onmessage=V,k=function(){Nt.postMessage(null)}}else k=function(){Me(V,0)};function wt(K,ae){x=Me(function(){K(r.unstable_now())},ae)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(K){K.callback=null},r.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<K?Math.floor(1e3/K):5},r.unstable_getCurrentPriorityLevel=function(){return D},r.unstable_next=function(K){switch(D){case 1:case 2:case 3:var ae=3;break;default:ae=D}var pe=D;D=ae;try{return K()}finally{D=pe}},r.unstable_requestPaint=function(){ne=!0},r.unstable_runWithPriority=function(K,ae){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var pe=D;D=K;try{return ae()}finally{D=pe}},r.unstable_scheduleCallback=function(K,ae,pe){var at=r.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?at+pe:at):pe=at,K){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=pe+N,K={id:T++,callback:ae,priorityLevel:K,startTime:pe,expirationTime:N,sortIndex:-1},pe>at?(K.sortIndex=pe,e(y,K),n(p)===null&&K===n(y)&&(X?(Ae(x),x=-1):X=!0,wt(we,pe-at))):(K.sortIndex=N,e(p,K),te||G||(te=!0,Be||(Be=!0,k()))),K},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(K){var ae=D;return function(){var pe=D;D=ae;try{return K.apply(this,arguments)}finally{D=pe}}}}(If)),If}var wv;function hb(){return wv||(wv=1,Sf.exports=cb()),Sf.exports}var Rf={exports:{}},_n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sv;function db(){if(Sv)return _n;Sv=1;var r=fm();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(p,y,T){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:I==null?null:""+I,children:p,containerInfo:y,implementation:T}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return _n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,_n.createPortal=function(p,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(p,y,null,T)},_n.flushSync=function(p){var y=d.T,T=s.p;try{if(d.T=null,s.p=2,p)return p()}finally{d.T=y,s.p=T,s.d.f()}},_n.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(p,y))},_n.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},_n.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var T=y.as,I=g(T,y.crossOrigin),D=typeof y.integrity=="string"?y.integrity:void 0,G=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?s.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:I,integrity:D,fetchPriority:G}):T==="script"&&s.d.X(p,{crossOrigin:I,integrity:D,fetchPriority:G,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},_n.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=g(y.as,y.crossOrigin);s.d.M(p,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(p)},_n.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,I=g(T,y.crossOrigin);s.d.L(p,T,{crossOrigin:I,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},_n.preloadModule=function(p,y){if(typeof p=="string")if(y){var T=g(y.as,y.crossOrigin);s.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(p)},_n.requestFormReset=function(p){s.d.r(p)},_n.unstable_batchedUpdates=function(p,y){return p(y)},_n.useFormState=function(p,y,T){return d.H.useFormState(p,y,T)},_n.useFormStatus=function(){return d.H.useHostTransitionStatus()},_n.version="19.1.0",_n}var Iv;function fb(){if(Iv)return Rf.exports;Iv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Rf.exports=db(),Rf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rv;function mb(){if(Rv)return bl;Rv=1;var r=hb(),e=fm(),n=fb();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function d(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(s(188))}function p(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,o=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return g(h),t;if(f===o)return g(h),i;f=f.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=f;else{for(var _=!1,E=h.child;E;){if(E===a){_=!0,a=h,o=f;break}if(E===o){_=!0,o=h,a=f;break}E=E.sibling}if(!_){for(E=f.child;E;){if(E===a){_=!0,a=f,o=h;break}if(E===o){_=!0,o=f,a=h;break}E=E.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function y(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=y(t),i!==null)return i;t=t.sibling}return null}var T=Object.assign,I=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),G=Symbol.for("react.portal"),te=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),Me=Symbol.for("react.provider"),Ae=Symbol.for("react.consumer"),Ee=Symbol.for("react.context"),ze=Symbol.for("react.forward_ref"),we=Symbol.for("react.suspense"),Be=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function k(t){return t===null||typeof t!="object"?null:(t=V&&t[V]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function Nt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case te:return"Fragment";case ne:return"Profiler";case X:return"StrictMode";case we:return"Suspense";case Be:return"SuspenseList";case S:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case G:return"Portal";case Ee:return(t.displayName||"Context")+".Provider";case Ae:return(t._context.displayName||"Context")+".Consumer";case ze:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case x:return i=t.displayName||null,i!==null?i:Nt(t.type)||"Memo";case w:i=t._payload,t=t._init;try{return Nt(t(i))}catch{}}return null}var wt=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},at=[],N=-1;function ee(t){return{current:t}}function oe(t){0>N||(t.current=at[N],at[N]=null,N--)}function re(t,i){N++,at[N]=t.current,t.current=i}var ye=ee(null),je=ee(null),Se=ee(null),St=ee(null);function Ge(t,i){switch(re(Se,i),re(je,t),re(ye,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?Ky(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=Ky(i),t=Yy(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}oe(ye),re(ye,t)}function Ue(){oe(ye),oe(je),oe(Se)}function Ot(t){t.memoizedState!==null&&re(St,t);var i=ye.current,a=Yy(i,t.type);i!==a&&(re(je,t),re(ye,a))}function on(t){je.current===t&&(oe(ye),oe(je)),St.current===t&&(oe(St),pl._currentValue=pe)}var wn=Object.prototype.hasOwnProperty,ji=r.unstable_scheduleCallback,yn=r.unstable_cancelCallback,$n=r.unstable_shouldYield,ui=r.unstable_requestPaint,_t=r.unstable_now,Zt=r.unstable_getCurrentPriorityLevel,Ar=r.unstable_ImmediatePriority,Bi=r.unstable_UserBlockingPriority,vi=r.unstable_NormalPriority,ra=r.unstable_LowPriority,wr=r.unstable_IdlePriority,Sr=r.log,sa=r.unstable_setDisableYieldValue,It=null,lt=null;function Sn(t){if(typeof Sr=="function"&&sa(t),lt&&typeof lt.setStrictMode=="function")try{lt.setStrictMode(It,t)}catch{}}var Jt=Math.clz32?Math.clz32:qi,aa=Math.log,bo=Math.LN2;function qi(t){return t>>>=0,t===0?32:31-(aa(t)/bo|0)|0}var _i=256,Hi=4194304;function Ln(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Fi(t,i,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,f=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var E=o&134217727;return E!==0?(o=E&~f,o!==0?h=Ln(o):(_&=E,_!==0?h=Ln(_):a||(a=E&~t,a!==0&&(h=Ln(a))))):(E=o&~f,E!==0?h=Ln(E):_!==0?h=Ln(_):a||(a=o&~t,a!==0&&(h=Ln(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function Gi(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function vs(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ve(){var t=_i;return _i<<=1,(_i&4194048)===0&&(_i=256),t}function Ir(){var t=Hi;return Hi<<=1,(Hi&62914560)===0&&(Hi=4194304),t}function A(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function F(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function L(t,i,a,o,h,f){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,R=t.expirationTimes,B=t.hiddenUpdates;for(a=_&~a;0<a;){var Y=31-Jt(a),Z=1<<Y;E[Y]=0,R[Y]=-1;var q=B[Y];if(q!==null)for(B[Y]=null,Y=0;Y<q.length;Y++){var H=q[Y];H!==null&&(H.lane&=-536870913)}a&=~Z}o!==0&&ie(t,o,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(_&~i))}function ie(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var o=31-Jt(i);t.entangledLanes|=i,t.entanglements[o]=t.entanglements[o]|1073741824|a&4194090}function ge(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var o=31-Jt(a),h=1<<o;h&i|t[o]&i&&(t[o]|=i),a&=~h}}function fe(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function le(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Te(){var t=ae.p;return t!==0?t:(t=window.event,t===void 0?32:fv(t.type))}function Ve(t,i){var a=ae.p;try{return ae.p=t,i()}finally{ae.p=a}}var ue=Math.random().toString(36).slice(2),xe="__reactFiber$"+ue,Re="__reactProps$"+ue,$e="__reactContainer$"+ue,ce="__reactEvents$"+ue,nt="__reactListeners$"+ue,it="__reactHandles$"+ue,bt="__reactResources$"+ue,Rt="__reactMarker$"+ue;function Ht(t){delete t[xe],delete t[Re],delete t[ce],delete t[nt],delete t[it]}function In(t){var i=t[xe];if(i)return i;for(var a=t.parentNode;a;){if(i=a[$e]||a[xe]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=Jy(t);t!==null;){if(a=t[xe])return a;t=Jy(t)}return i}t=a,a=t.parentNode}return null}function Nn(t){if(t=t[xe]||t[$e]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function Pe(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function rt(t){var i=t[bt];return i||(i=t[bt]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function st(t){t[Rt]=!0}var ci=new Set,Ei={};function ln(t,i){Xn(t,i),Xn(t+"Capture",i)}function Xn(t,i){for(Ei[t]=i,t=0;t<i.length;t++)ci.add(i[t])}var oa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ru={},_s={};function su(t){return wn.call(_s,t)?!0:wn.call(ru,t)?!1:oa.test(t)?_s[t]=!0:(ru[t]=!0,!1)}function Rr(t,i,a){if(su(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function Ti(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function un(t,i,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+o)}}var Es,au;function Qi(t){if(Es===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Es=i&&i[1]||"",au=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Es+t+au}var la=!1;function ua(t,i){if(!t||la)return"";la=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(H){var q=H}Reflect.construct(t,[],Z)}else{try{Z.call()}catch(H){q=H}t.call(Z.prototype)}}else{try{throw Error()}catch(H){q=H}(Z=t())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(H){if(H&&q&&typeof H.stack=="string")return[H.stack,q.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),_=f[0],E=f[1];if(_&&E){var R=_.split(`
`),B=E.split(`
`);for(h=o=0;o<R.length&&!R[o].includes("DetermineComponentFrameRoot");)o++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(o===R.length||h===B.length)for(o=R.length-1,h=B.length-1;1<=o&&0<=h&&R[o]!==B[h];)h--;for(;1<=o&&0<=h;o--,h--)if(R[o]!==B[h]){if(o!==1||h!==1)do if(o--,h--,0>h||R[o]!==B[h]){var Y=`
`+R[o].replace(" at new "," at ");return t.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",t.displayName)),Y}while(1<=o&&0<=h);break}}}finally{la=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Qi(a):""}function Ao(t){switch(t.tag){case 26:case 27:case 5:return Qi(t.type);case 16:return Qi("Lazy");case 13:return Qi("Suspense");case 19:return Qi("SuspenseList");case 0:case 15:return ua(t.type,!1);case 11:return ua(t.type.render,!1);case 1:return ua(t.type,!0);case 31:return Qi("Activity");default:return""}}function ca(t){try{var i="";do i+=Ao(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Rn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wo(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Sh(t){var i=wo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),o=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(_){o=""+_,f.call(this,_)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function ha(t){t._valueTracker||(t._valueTracker=Sh(t))}function So(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return t&&(o=wo(t)?t.checked?"true":"false":t.value),t=o,t!==a?(i.setValue(t),!0):!1}function Ts(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ih=/[\n"\\]/g;function Lt(t){return t.replace(Ih,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function zn(t,i,a,o,h,f,_,E){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),i!=null?_==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Rn(i)):t.value!==""+Rn(i)&&(t.value=""+Rn(i)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),i!=null?Cr(t,_,Rn(i)):a!=null?Cr(t,_,Rn(a)):o!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+Rn(E):t.removeAttribute("name")}function bs(t,i,a,o,h,f,_,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null))return;a=a!=null?""+Rn(a):"",i=i!=null?""+Rn(i):a,E||i===t.value||(t.value=i),t.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=E?t.checked:!!o,t.defaultChecked=!!o,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_)}function Cr(t,i,a){i==="number"&&Ts(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ki(t,i,a,o){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+Rn(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function gt(t,i,a){if(i!=null&&(i=""+Rn(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Rn(a):""}function As(t,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(wt(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=Rn(i),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o)}function Zn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var ws=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ou(t,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":o?t.setProperty(i,a):typeof a!="number"||a===0||ws.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Io(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&ou(t,h,o)}else for(var f in i)i.hasOwnProperty(f)&&ou(t,f,i[f])}function Ro(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ch=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function da(t){return Ch.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Yi=null;function Jn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $i=null,Xi=null;function Co(t){var i=Nn(t);if(i&&(t=i.stateNode)){var a=t[Re]||null;e:switch(t=i.stateNode,i.type){case"input":if(zn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Lt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==t&&o.form===t.form){var h=o[Re]||null;if(!h)throw Error(s(90));zn(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===t.form&&So(o)}break e;case"textarea":gt(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Ki(t,!!a.multiple,i,!1)}}}var bi=!1;function lu(t,i,a){if(bi)return t(i,a);bi=!0;try{var o=t(i);return o}finally{if(bi=!1,($i!==null||Xi!==null)&&(tc(),$i&&(i=$i,t=Xi,Xi=$i=null,Co(i),t)))for(i=0;i<t.length;i++)Co(t[i])}}function Ss(t,i){var a=t.stateNode;if(a===null)return null;var o=a[Re]||null;if(o===null)return null;a=o[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var hi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wn=!1;if(hi)try{var Is={};Object.defineProperty(Is,"passive",{get:function(){Wn=!0}}),window.addEventListener("test",Is,Is),window.removeEventListener("test",Is,Is)}catch{Wn=!1}var Ai=null,xr=null,Zi=null;function xo(){if(Zi)return Zi;var t,i=xr,a=i.length,o,h="value"in Ai?Ai.value:Ai.textContent,f=h.length;for(t=0;t<a&&i[t]===h[t];t++);var _=a-t;for(o=1;o<=_&&i[a-o]===h[f-o];o++);return Zi=h.slice(t,1<o?1-o:void 0)}function wi(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Si(){return!0}function Do(){return!1}function Wt(t){function i(a,o,h,f,_){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=_,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Si:Do,this.isPropagationStopped=Do,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Si)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Si)},persist:function(){},isPersistent:Si}),i}var ct={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fa=Wt(ct),Rs=T({},ct,{view:0,detail:0}),uu=Wt(Rs),ma,ga,Ii,Cs=T({},Rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ns,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ii&&(Ii&&t.type==="mousemove"?(ma=t.screenX-Ii.screenX,ga=t.screenY-Ii.screenY):ga=ma=0,Ii=t),ma)},movementY:function(t){return"movementY"in t?t.movementY:ga}}),ei=Wt(Cs),cu=T({},Cs,{dataTransfer:0}),xh=Wt(cu),xs=T({},Rs,{relatedTarget:0}),pa=Wt(xs),No=T({},ct,{animationName:0,elapsedTime:0,pseudoElement:0}),ya=Wt(No),hu=T({},ct,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),va=Wt(hu),Dh=T({},ct,{data:0}),Oo=Wt(Dh),Ds={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},du={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mo(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=fu[t])?!!i[t]:!1}function Ns(){return Mo}var mu=T({},Rs,{key:function(t){if(t.key){var i=Ds[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=wi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?du[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ns,charCode:function(t){return t.type==="keypress"?wi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_a=Wt(mu),gu=T({},Cs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vo=Wt(gu),Ji=T({},Rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ns}),pu=Wt(Ji),yu=T({},ct,{propertyName:0,elapsedTime:0,pseudoElement:0}),vu=Wt(yu),_u=T({},Cs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ea=Wt(_u),Cn=T({},ct,{newState:0,oldState:0}),Eu=Wt(Cn),Tu=[9,13,27,32],Ri=hi&&"CompositionEvent"in window,u=null;hi&&"documentMode"in document&&(u=document.documentMode);var m=hi&&"TextEvent"in window&&!u,v=hi&&(!Ri||u&&8<u&&11>=u),b=" ",z=!1;function Q(t,i){switch(t){case"keyup":return Tu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function se(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Je=!1;function Ft(t,i){switch(t){case"compositionend":return se(i);case"keypress":return i.which!==32?null:(z=!0,b);case"textInput":return t=i.data,t===b&&z?null:t;default:return null}}function We(t,i){if(Je)return t==="compositionend"||!Ri&&Q(t,i)?(t=xo(),Zi=xr=Ai=null,Je=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return v&&i.locale!=="ko"?null:i.data;default:return null}}var en={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gt(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!en[t.type]:i==="textarea"}function Wi(t,i,a,o){$i?Xi?Xi.push(o):Xi=[o]:$i=o,i=oc(i,"onChange"),0<i.length&&(a=new fa("onChange","change",null,a,o),t.push({event:a,listeners:i}))}var cn=null,Ci=null;function Po(t){qy(t,0)}function bu(t){var i=Pe(t);if(So(i))return t}function ug(t,i){if(t==="change")return i}var cg=!1;if(hi){var Nh;if(hi){var Oh="oninput"in document;if(!Oh){var hg=document.createElement("div");hg.setAttribute("oninput","return;"),Oh=typeof hg.oninput=="function"}Nh=Oh}else Nh=!1;cg=Nh&&(!document.documentMode||9<document.documentMode)}function dg(){cn&&(cn.detachEvent("onpropertychange",fg),Ci=cn=null)}function fg(t){if(t.propertyName==="value"&&bu(Ci)){var i=[];Wi(i,Ci,t,Jn(t)),lu(Po,i)}}function k1(t,i,a){t==="focusin"?(dg(),cn=i,Ci=a,cn.attachEvent("onpropertychange",fg)):t==="focusout"&&dg()}function U1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bu(Ci)}function L1(t,i){if(t==="click")return bu(i)}function z1(t,i){if(t==="input"||t==="change")return bu(i)}function j1(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var jn=typeof Object.is=="function"?Object.is:j1;function ko(t,i){if(jn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!wn.call(i,h)||!jn(t[h],i[h]))return!1}return!0}function mg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gg(t,i){var a=mg(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=i&&o>=i)return{node:a,offset:i-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=mg(a)}}function pg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?pg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function yg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Ts(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Ts(t.document)}return i}function Mh(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var B1=hi&&"documentMode"in document&&11>=document.documentMode,Ta=null,Vh=null,Uo=null,Ph=!1;function vg(t,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ph||Ta==null||Ta!==Ts(o)||(o=Ta,"selectionStart"in o&&Mh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Uo&&ko(Uo,o)||(Uo=o,o=oc(Vh,"onSelect"),0<o.length&&(i=new fa("onSelect","select",null,i,a),t.push({event:i,listeners:o}),i.target=Ta)))}function Os(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var ba={animationend:Os("Animation","AnimationEnd"),animationiteration:Os("Animation","AnimationIteration"),animationstart:Os("Animation","AnimationStart"),transitionrun:Os("Transition","TransitionRun"),transitionstart:Os("Transition","TransitionStart"),transitioncancel:Os("Transition","TransitionCancel"),transitionend:Os("Transition","TransitionEnd")},kh={},_g={};hi&&(_g=document.createElement("div").style,"AnimationEvent"in window||(delete ba.animationend.animation,delete ba.animationiteration.animation,delete ba.animationstart.animation),"TransitionEvent"in window||delete ba.transitionend.transition);function Ms(t){if(kh[t])return kh[t];if(!ba[t])return t;var i=ba[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in _g)return kh[t]=i[a];return t}var Eg=Ms("animationend"),Tg=Ms("animationiteration"),bg=Ms("animationstart"),q1=Ms("transitionrun"),H1=Ms("transitionstart"),F1=Ms("transitioncancel"),Ag=Ms("transitionend"),wg=new Map,Uh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uh.push("scrollEnd");function di(t,i){wg.set(t,i),ln(i,[t])}var Sg=new WeakMap;function ti(t,i){if(typeof t=="object"&&t!==null){var a=Sg.get(t);return a!==void 0?a:(i={value:t,source:i,stack:ca(i)},Sg.set(t,i),i)}return{value:t,source:i,stack:ca(i)}}var ni=[],Aa=0,Lh=0;function Au(){for(var t=Aa,i=Lh=Aa=0;i<t;){var a=ni[i];ni[i++]=null;var o=ni[i];ni[i++]=null;var h=ni[i];ni[i++]=null;var f=ni[i];if(ni[i++]=null,o!==null&&h!==null){var _=o.pending;_===null?h.next=h:(h.next=_.next,_.next=h),o.pending=h}f!==0&&Ig(a,h,f)}}function wu(t,i,a,o){ni[Aa++]=t,ni[Aa++]=i,ni[Aa++]=a,ni[Aa++]=o,Lh|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function zh(t,i,a,o){return wu(t,i,a,o),Su(t)}function wa(t,i){return wu(t,null,null,i),Su(t)}function Ig(t,i,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&i!==null&&(h=31-Jt(a),t=f.hiddenUpdates,o=t[h],o===null?t[h]=[i]:o.push(i),i.lane=a|536870912),f):null}function Su(t){if(50<ll)throw ll=0,Gd=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Sa={};function G1(t,i,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(t,i,a,o){return new G1(t,i,a,o)}function jh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function er(t,i){var a=t.alternate;return a===null?(a=Bn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Rg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Iu(t,i,a,o,h,f){var _=0;if(o=t,typeof t=="function")jh(t)&&(_=1);else if(typeof t=="string")_=KT(t,a,ye.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case S:return t=Bn(31,a,i,h),t.elementType=S,t.lanes=f,t;case te:return Vs(a.children,h,f,i);case X:_=8,h|=24;break;case ne:return t=Bn(12,a,i,h|2),t.elementType=ne,t.lanes=f,t;case we:return t=Bn(13,a,i,h),t.elementType=we,t.lanes=f,t;case Be:return t=Bn(19,a,i,h),t.elementType=Be,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Me:case Ee:_=10;break e;case Ae:_=9;break e;case ze:_=11;break e;case x:_=14;break e;case w:_=16,o=null;break e}_=29,a=Error(s(130,t===null?"null":typeof t,"")),o=null}return i=Bn(_,a,i,h),i.elementType=t,i.type=o,i.lanes=f,i}function Vs(t,i,a,o){return t=Bn(7,t,o,i),t.lanes=a,t}function Bh(t,i,a){return t=Bn(6,t,null,i),t.lanes=a,t}function qh(t,i,a){return i=Bn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Ia=[],Ra=0,Ru=null,Cu=0,ii=[],ri=0,Ps=null,tr=1,nr="";function ks(t,i){Ia[Ra++]=Cu,Ia[Ra++]=Ru,Ru=t,Cu=i}function Cg(t,i,a){ii[ri++]=tr,ii[ri++]=nr,ii[ri++]=Ps,Ps=t;var o=tr;t=nr;var h=32-Jt(o)-1;o&=~(1<<h),a+=1;var f=32-Jt(i)+h;if(30<f){var _=h-h%5;f=(o&(1<<_)-1).toString(32),o>>=_,h-=_,tr=1<<32-Jt(i)+h|a<<h|o,nr=f+t}else tr=1<<f|a<<h|o,nr=t}function Hh(t){t.return!==null&&(ks(t,1),Cg(t,1,0))}function Fh(t){for(;t===Ru;)Ru=Ia[--Ra],Ia[Ra]=null,Cu=Ia[--Ra],Ia[Ra]=null;for(;t===Ps;)Ps=ii[--ri],ii[ri]=null,nr=ii[--ri],ii[ri]=null,tr=ii[--ri],ii[ri]=null}var xn=null,Mt=null,ut=!1,Us=null,xi=!1,Gh=Error(s(519));function Ls(t){var i=Error(s(418,""));throw jo(ti(i,t)),Gh}function xg(t){var i=t.stateNode,a=t.type,o=t.memoizedProps;switch(i[xe]=t,i[Re]=o,a){case"dialog":Ye("cancel",i),Ye("close",i);break;case"iframe":case"object":case"embed":Ye("load",i);break;case"video":case"audio":for(a=0;a<cl.length;a++)Ye(cl[a],i);break;case"source":Ye("error",i);break;case"img":case"image":case"link":Ye("error",i),Ye("load",i);break;case"details":Ye("toggle",i);break;case"input":Ye("invalid",i),bs(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),ha(i);break;case"select":Ye("invalid",i);break;case"textarea":Ye("invalid",i),As(i,o.value,o.defaultValue,o.children),ha(i)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||Qy(i.textContent,a)?(o.popover!=null&&(Ye("beforetoggle",i),Ye("toggle",i)),o.onScroll!=null&&Ye("scroll",i),o.onScrollEnd!=null&&Ye("scrollend",i),o.onClick!=null&&(i.onclick=lc),i=!0):i=!1,i||Ls(t)}function Dg(t){for(xn=t.return;xn;)switch(xn.tag){case 5:case 13:xi=!1;return;case 27:case 3:xi=!0;return;default:xn=xn.return}}function Lo(t){if(t!==xn)return!1;if(!ut)return Dg(t),ut=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||lf(t.type,t.memoizedProps)),a=!a),a&&Mt&&Ls(t),Dg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){Mt=mi(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}Mt=null}}else i===27?(i=Mt,Gr(t.type)?(t=df,df=null,Mt=t):Mt=i):Mt=xn?mi(t.stateNode.nextSibling):null;return!0}function zo(){Mt=xn=null,ut=!1}function Ng(){var t=Us;return t!==null&&(Vn===null?Vn=t:Vn.push.apply(Vn,t),Us=null),t}function jo(t){Us===null?Us=[t]:Us.push(t)}var Qh=ee(null),zs=null,ir=null;function Dr(t,i,a){re(Qh,i._currentValue),i._currentValue=a}function rr(t){t._currentValue=Qh.current,oe(Qh)}function Kh(t,i,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),t===a)break;t=t.return}}function Yh(t,i,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var _=h.child;f=f.firstContext;e:for(;f!==null;){var E=f;f=h;for(var R=0;R<i.length;R++)if(E.context===i[R]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),Kh(f.return,a,t),o||(_=null);break e}f=E.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(s(341));_.lanes|=a,f=_.alternate,f!==null&&(f.lanes|=a),Kh(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function Bo(t,i,a,o){t=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var E=h.type;jn(h.pendingProps.value,_.value)||(t!==null?t.push(E):t=[E])}}else if(h===St.current){if(_=h.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(pl):t=[pl])}h=h.return}t!==null&&Yh(i,t,a,o),i.flags|=262144}function xu(t){for(t=t.firstContext;t!==null;){if(!jn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function js(t){zs=t,ir=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function vn(t){return Og(zs,t)}function Du(t,i){return zs===null&&js(t),Og(t,i)}function Og(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},ir===null){if(t===null)throw Error(s(308));ir=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else ir=ir.next=i;return a}var Q1=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},K1=r.unstable_scheduleCallback,Y1=r.unstable_NormalPriority,Qt={$$typeof:Ee,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $h(){return{controller:new Q1,data:new Map,refCount:0}}function qo(t){t.refCount--,t.refCount===0&&K1(Y1,function(){t.controller.abort()})}var Ho=null,Xh=0,Ca=0,xa=null;function $1(t,i){if(Ho===null){var a=Ho=[];Xh=0,Ca=Jd(),xa={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Xh++,i.then(Mg,Mg),i}function Mg(){if(--Xh===0&&Ho!==null){xa!==null&&(xa.status="fulfilled");var t=Ho;Ho=null,Ca=0,xa=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function X1(t,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Vg=K.S;K.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&$1(t,i),Vg!==null&&Vg(t,i)};var Bs=ee(null);function Zh(){var t=Bs.current;return t!==null?t:Tt.pooledCache}function Nu(t,i){i===null?re(Bs,Bs.current):re(Bs,i.pool)}function Pg(){var t=Zh();return t===null?null:{parent:Qt._currentValue,pool:t}}var Fo=Error(s(460)),kg=Error(s(474)),Ou=Error(s(542)),Jh={then:function(){}};function Ug(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Mu(){}function Lg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Mu,Mu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,jg(t),t;default:if(typeof i.status=="string")i.then(Mu,Mu);else{if(t=Tt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,jg(t),t}throw Go=i,Fo}}var Go=null;function zg(){if(Go===null)throw Error(s(459));var t=Go;return Go=null,t}function jg(t){if(t===Fo||t===Ou)throw Error(s(483))}var Nr=!1;function Wh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ed(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Or(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Mr(t,i,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(ft&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=Su(t),Ig(t,null,a),i}return wu(t,o,i,a),Su(t)}function Qo(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,ge(t,a)}}function td(t,i){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=_:f=f.next=_,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var nd=!1;function Ko(){if(nd){var t=xa;if(t!==null)throw t}}function Yo(t,i,a,o){nd=!1;var h=t.updateQueue;Nr=!1;var f=h.firstBaseUpdate,_=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var R=E,B=R.next;R.next=null,_===null?f=B:_.next=B,_=R;var Y=t.alternate;Y!==null&&(Y=Y.updateQueue,E=Y.lastBaseUpdate,E!==_&&(E===null?Y.firstBaseUpdate=B:E.next=B,Y.lastBaseUpdate=R))}if(f!==null){var Z=h.baseState;_=0,Y=B=R=null,E=f;do{var q=E.lane&-536870913,H=q!==E.lane;if(H?(et&q)===q:(o&q)===q){q!==0&&q===Ca&&(nd=!0),Y!==null&&(Y=Y.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Ne=t,Ie=E;q=i;var vt=a;switch(Ie.tag){case 1:if(Ne=Ie.payload,typeof Ne=="function"){Z=Ne.call(vt,Z,q);break e}Z=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Ie.payload,q=typeof Ne=="function"?Ne.call(vt,Z,q):Ne,q==null)break e;Z=T({},Z,q);break e;case 2:Nr=!0}}q=E.callback,q!==null&&(t.flags|=64,H&&(t.flags|=8192),H=h.callbacks,H===null?h.callbacks=[q]:H.push(q))}else H={lane:q,tag:E.tag,payload:E.payload,callback:E.callback,next:null},Y===null?(B=Y=H,R=Z):Y=Y.next=H,_|=q;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;H=E,E=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);Y===null&&(R=Z),h.baseState=R,h.firstBaseUpdate=B,h.lastBaseUpdate=Y,f===null&&(h.shared.lanes=0),Br|=_,t.lanes=_,t.memoizedState=Z}}function Bg(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function qg(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Bg(a[t],i)}var Da=ee(null),Vu=ee(0);function Hg(t,i){t=hr,re(Vu,t),re(Da,i),hr=t|i.baseLanes}function id(){re(Vu,hr),re(Da,Da.current)}function rd(){hr=Vu.current,oe(Da),oe(Vu)}var Vr=0,He=null,pt=null,zt=null,Pu=!1,Na=!1,qs=!1,ku=0,$o=0,Oa=null,Z1=0;function Pt(){throw Error(s(321))}function sd(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!jn(t[a],i[a]))return!1;return!0}function ad(t,i,a,o,h,f){return Vr=f,He=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,K.H=t===null||t.memoizedState===null?Ip:Rp,qs=!1,f=a(o,h),qs=!1,Na&&(f=Gg(i,a,o,h)),Fg(t),f}function Fg(t){K.H=qu;var i=pt!==null&&pt.next!==null;if(Vr=0,zt=pt=He=null,Pu=!1,$o=0,Oa=null,i)throw Error(s(300));t===null||tn||(t=t.dependencies,t!==null&&xu(t)&&(tn=!0))}function Gg(t,i,a,o){He=t;var h=0;do{if(Na&&(Oa=null),$o=0,Na=!1,25<=h)throw Error(s(301));if(h+=1,zt=pt=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}K.H=rT,f=i(a,o)}while(Na);return f}function J1(){var t=K.H,i=t.useState()[0];return i=typeof i.then=="function"?Xo(i):i,t=t.useState()[0],(pt!==null?pt.memoizedState:null)!==t&&(He.flags|=1024),i}function od(){var t=ku!==0;return ku=0,t}function ld(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function ud(t){if(Pu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Pu=!1}Vr=0,zt=pt=He=null,Na=!1,$o=ku=0,Oa=null}function On(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?He.memoizedState=zt=t:zt=zt.next=t,zt}function jt(){if(pt===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var i=zt===null?He.memoizedState:zt.next;if(i!==null)zt=i,pt=t;else{if(t===null)throw He.alternate===null?Error(s(467)):Error(s(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},zt===null?He.memoizedState=zt=t:zt=zt.next=t}return zt}function cd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xo(t){var i=$o;return $o+=1,Oa===null&&(Oa=[]),t=Lg(Oa,t,i),i=He,(zt===null?i.memoizedState:zt.next)===null&&(i=i.alternate,K.H=i===null||i.memoizedState===null?Ip:Rp),t}function Uu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Xo(t);if(t.$$typeof===Ee)return vn(t)}throw Error(s(438,String(t)))}function hd(t){var i=null,a=He.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=He.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=cd(),He.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),o=0;o<t;o++)a[o]=O;return i.index++,a}function sr(t,i){return typeof i=="function"?i(t):i}function Lu(t){var i=jt();return dd(i,pt,t)}function dd(t,i,a){var o=t.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=t.baseQueue,f=o.pending;if(f!==null){if(h!==null){var _=h.next;h.next=f.next,f.next=_}i.baseQueue=h=f,o.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{i=h.next;var E=_=null,R=null,B=i,Y=!1;do{var Z=B.lane&-536870913;if(Z!==B.lane?(et&Z)===Z:(Vr&Z)===Z){var q=B.revertLane;if(q===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),Z===Ca&&(Y=!0);else if((Vr&q)===q){B=B.next,q===Ca&&(Y=!0);continue}else Z={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},R===null?(E=R=Z,_=f):R=R.next=Z,He.lanes|=q,Br|=q;Z=B.action,qs&&a(f,Z),f=B.hasEagerState?B.eagerState:a(f,Z)}else q={lane:Z,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},R===null?(E=R=q,_=f):R=R.next=q,He.lanes|=Z,Br|=Z;B=B.next}while(B!==null&&B!==i);if(R===null?_=f:R.next=E,!jn(f,t.memoizedState)&&(tn=!0,Y&&(a=xa,a!==null)))throw a;t.memoizedState=f,t.baseState=_,t.baseQueue=R,o.lastRenderedState=f}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function fd(t){var i=jt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do f=t(f,_.action),_=_.next;while(_!==h);jn(f,i.memoizedState)||(tn=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,o]}function Qg(t,i,a){var o=He,h=jt(),f=ut;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=i();var _=!jn((pt||h).memoizedState,a);_&&(h.memoizedState=a,tn=!0),h=h.queue;var E=$g.bind(null,o,h,t);if(Zo(2048,8,E,[t]),h.getSnapshot!==i||_||zt!==null&&zt.memoizedState.tag&1){if(o.flags|=2048,Ma(9,zu(),Yg.bind(null,o,h,a,i),null),Tt===null)throw Error(s(349));f||(Vr&124)!==0||Kg(o,i,a)}return a}function Kg(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=He.updateQueue,i===null?(i=cd(),He.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Yg(t,i,a,o){i.value=a,i.getSnapshot=o,Xg(i)&&Zg(t)}function $g(t,i,a){return a(function(){Xg(i)&&Zg(t)})}function Xg(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!jn(t,a)}catch{return!0}}function Zg(t){var i=wa(t,2);i!==null&&Qn(i,t,2)}function md(t){var i=On();if(typeof t=="function"){var a=t;if(t=a(),qs){Sn(!0);try{a()}finally{Sn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sr,lastRenderedState:t},i}function Jg(t,i,a,o){return t.baseState=a,dd(t,pt,typeof o=="function"?o:sr)}function W1(t,i,a,o,h){if(Bu(t))throw Error(s(485));if(t=i.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){f.listeners.push(_)}};K.T!==null?a(!0):f.isTransition=!1,o(f),a=i.pending,a===null?(f.next=i.pending=f,Wg(i,f)):(f.next=a.next,i.pending=a.next=f)}}function Wg(t,i){var a=i.action,o=i.payload,h=t.state;if(i.isTransition){var f=K.T,_={};K.T=_;try{var E=a(h,o),R=K.S;R!==null&&R(_,E),ep(t,i,E)}catch(B){gd(t,i,B)}finally{K.T=f}}else try{f=a(h,o),ep(t,i,f)}catch(B){gd(t,i,B)}}function ep(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){tp(t,i,o)},function(o){return gd(t,i,o)}):tp(t,i,a)}function tp(t,i,a){i.status="fulfilled",i.value=a,np(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Wg(t,a)))}function gd(t,i,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,np(i),i=i.next;while(i!==o)}t.action=null}function np(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function ip(t,i){return i}function rp(t,i){if(ut){var a=Tt.formState;if(a!==null){e:{var o=He;if(ut){if(Mt){t:{for(var h=Mt,f=xi;h.nodeType!==8;){if(!f){h=null;break t}if(h=mi(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){Mt=mi(h.nextSibling),o=h.data==="F!";break e}}Ls(o)}o=!1}o&&(i=a[0])}}return a=On(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ip,lastRenderedState:i},a.queue=o,a=Ap.bind(null,He,o),o.dispatch=a,o=md(!1),f=Ed.bind(null,He,!1,o.queue),o=On(),h={state:i,dispatch:null,action:t,pending:null},o.queue=h,a=W1.bind(null,He,h,f,a),h.dispatch=a,o.memoizedState=t,[i,a,!1]}function sp(t){var i=jt();return ap(i,pt,t)}function ap(t,i,a){if(i=dd(t,i,ip)[0],t=Lu(sr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=Xo(i)}catch(_){throw _===Fo?Ou:_}else o=i;i=jt();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(He.flags|=2048,Ma(9,zu(),eT.bind(null,h,a),null)),[o,f,t]}function eT(t,i){t.action=i}function op(t){var i=jt(),a=pt;if(a!==null)return ap(i,a,t);jt(),i=i.memoizedState,a=jt();var o=a.queue.dispatch;return a.memoizedState=t,[i,o,!1]}function Ma(t,i,a,o){return t={tag:t,create:a,deps:o,inst:i,next:null},i=He.updateQueue,i===null&&(i=cd(),He.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,i.lastEffect=t),t}function zu(){return{destroy:void 0,resource:void 0}}function lp(){return jt().memoizedState}function ju(t,i,a,o){var h=On();o=o===void 0?null:o,He.flags|=t,h.memoizedState=Ma(1|i,zu(),a,o)}function Zo(t,i,a,o){var h=jt();o=o===void 0?null:o;var f=h.memoizedState.inst;pt!==null&&o!==null&&sd(o,pt.memoizedState.deps)?h.memoizedState=Ma(i,f,a,o):(He.flags|=t,h.memoizedState=Ma(1|i,f,a,o))}function up(t,i){ju(8390656,8,t,i)}function cp(t,i){Zo(2048,8,t,i)}function hp(t,i){return Zo(4,2,t,i)}function dp(t,i){return Zo(4,4,t,i)}function fp(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function mp(t,i,a){a=a!=null?a.concat([t]):null,Zo(4,4,fp.bind(null,i,t),a)}function pd(){}function gp(t,i){var a=jt();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&sd(i,o[1])?o[0]:(a.memoizedState=[t,i],t)}function pp(t,i){var a=jt();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&sd(i,o[1]))return o[0];if(o=t(),qs){Sn(!0);try{t()}finally{Sn(!1)}}return a.memoizedState=[o,i],o}function yd(t,i,a){return a===void 0||(Vr&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=_y(),He.lanes|=t,Br|=t,a)}function yp(t,i,a,o){return jn(a,i)?a:Da.current!==null?(t=yd(t,a,o),jn(t,i)||(tn=!0),t):(Vr&42)===0?(tn=!0,t.memoizedState=a):(t=_y(),He.lanes|=t,Br|=t,i)}function vp(t,i,a,o,h){var f=ae.p;ae.p=f!==0&&8>f?f:8;var _=K.T,E={};K.T=E,Ed(t,!1,i,a);try{var R=h(),B=K.S;if(B!==null&&B(E,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var Y=X1(R,o);Jo(t,i,Y,Gn(t))}else Jo(t,i,o,Gn(t))}catch(Z){Jo(t,i,{then:function(){},status:"rejected",reason:Z},Gn())}finally{ae.p=f,K.T=_}}function tT(){}function vd(t,i,a,o){if(t.tag!==5)throw Error(s(476));var h=_p(t).queue;vp(t,h,i,pe,a===null?tT:function(){return Ep(t),a(o)})}function _p(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sr,lastRenderedState:pe},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sr,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Ep(t){var i=_p(t).next.queue;Jo(t,i,{},Gn())}function _d(){return vn(pl)}function Tp(){return jt().memoizedState}function bp(){return jt().memoizedState}function nT(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Gn();t=Or(a);var o=Mr(i,t,a);o!==null&&(Qn(o,i,a),Qo(o,i,a)),i={cache:$h()},t.payload=i;return}i=i.return}}function iT(t,i,a){var o=Gn();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Bu(t)?wp(i,a):(a=zh(t,i,a,o),a!==null&&(Qn(a,t,o),Sp(a,i,o)))}function Ap(t,i,a){var o=Gn();Jo(t,i,a,o)}function Jo(t,i,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Bu(t))wp(i,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var _=i.lastRenderedState,E=f(_,a);if(h.hasEagerState=!0,h.eagerState=E,jn(E,_))return wu(t,i,h,0),Tt===null&&Au(),!1}catch{}finally{}if(a=zh(t,i,h,o),a!==null)return Qn(a,t,o),Sp(a,i,o),!0}return!1}function Ed(t,i,a,o){if(o={lane:2,revertLane:Jd(),action:o,hasEagerState:!1,eagerState:null,next:null},Bu(t)){if(i)throw Error(s(479))}else i=zh(t,a,o,2),i!==null&&Qn(i,t,2)}function Bu(t){var i=t.alternate;return t===He||i!==null&&i===He}function wp(t,i){Na=Pu=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Sp(t,i,a){if((a&4194048)!==0){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,ge(t,a)}}var qu={readContext:vn,use:Uu,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useLayoutEffect:Pt,useInsertionEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useSyncExternalStore:Pt,useId:Pt,useHostTransitionStatus:Pt,useFormState:Pt,useActionState:Pt,useOptimistic:Pt,useMemoCache:Pt,useCacheRefresh:Pt},Ip={readContext:vn,use:Uu,useCallback:function(t,i){return On().memoizedState=[t,i===void 0?null:i],t},useContext:vn,useEffect:up,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,ju(4194308,4,fp.bind(null,i,t),a)},useLayoutEffect:function(t,i){return ju(4194308,4,t,i)},useInsertionEffect:function(t,i){ju(4,2,t,i)},useMemo:function(t,i){var a=On();i=i===void 0?null:i;var o=t();if(qs){Sn(!0);try{t()}finally{Sn(!1)}}return a.memoizedState=[o,i],o},useReducer:function(t,i,a){var o=On();if(a!==void 0){var h=a(i);if(qs){Sn(!0);try{a(i)}finally{Sn(!1)}}}else h=i;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=iT.bind(null,He,t),[o.memoizedState,t]},useRef:function(t){var i=On();return t={current:t},i.memoizedState=t},useState:function(t){t=md(t);var i=t.queue,a=Ap.bind(null,He,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:pd,useDeferredValue:function(t,i){var a=On();return yd(a,t,i)},useTransition:function(){var t=md(!1);return t=vp.bind(null,He,t.queue,!0,!1),On().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var o=He,h=On();if(ut){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),Tt===null)throw Error(s(349));(et&124)!==0||Kg(o,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,up($g.bind(null,o,f,t),[t]),o.flags|=2048,Ma(9,zu(),Yg.bind(null,o,f,a,i),null),a},useId:function(){var t=On(),i=Tt.identifierPrefix;if(ut){var a=nr,o=tr;a=(o&~(1<<32-Jt(o)-1)).toString(32)+a,i="«"+i+"R"+a,a=ku++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=Z1++,i="«"+i+"r"+a.toString(32)+"»";return t.memoizedState=i},useHostTransitionStatus:_d,useFormState:rp,useActionState:rp,useOptimistic:function(t){var i=On();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Ed.bind(null,He,!0,a),a.dispatch=i,[t,i]},useMemoCache:hd,useCacheRefresh:function(){return On().memoizedState=nT.bind(null,He)}},Rp={readContext:vn,use:Uu,useCallback:gp,useContext:vn,useEffect:cp,useImperativeHandle:mp,useInsertionEffect:hp,useLayoutEffect:dp,useMemo:pp,useReducer:Lu,useRef:lp,useState:function(){return Lu(sr)},useDebugValue:pd,useDeferredValue:function(t,i){var a=jt();return yp(a,pt.memoizedState,t,i)},useTransition:function(){var t=Lu(sr)[0],i=jt().memoizedState;return[typeof t=="boolean"?t:Xo(t),i]},useSyncExternalStore:Qg,useId:Tp,useHostTransitionStatus:_d,useFormState:sp,useActionState:sp,useOptimistic:function(t,i){var a=jt();return Jg(a,pt,t,i)},useMemoCache:hd,useCacheRefresh:bp},rT={readContext:vn,use:Uu,useCallback:gp,useContext:vn,useEffect:cp,useImperativeHandle:mp,useInsertionEffect:hp,useLayoutEffect:dp,useMemo:pp,useReducer:fd,useRef:lp,useState:function(){return fd(sr)},useDebugValue:pd,useDeferredValue:function(t,i){var a=jt();return pt===null?yd(a,t,i):yp(a,pt.memoizedState,t,i)},useTransition:function(){var t=fd(sr)[0],i=jt().memoizedState;return[typeof t=="boolean"?t:Xo(t),i]},useSyncExternalStore:Qg,useId:Tp,useHostTransitionStatus:_d,useFormState:op,useActionState:op,useOptimistic:function(t,i){var a=jt();return pt!==null?Jg(a,pt,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:hd,useCacheRefresh:bp},Va=null,Wo=0;function Hu(t){var i=Wo;return Wo+=1,Va===null&&(Va=[]),Lg(Va,t,i)}function el(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Fu(t,i){throw i.$$typeof===I?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Cp(t){var i=t._init;return i(t._payload)}function xp(t){function i(U,M){if(t){var j=U.deletions;j===null?(U.deletions=[M],U.flags|=16):j.push(M)}}function a(U,M){if(!t)return null;for(;M!==null;)i(U,M),M=M.sibling;return null}function o(U){for(var M=new Map;U!==null;)U.key!==null?M.set(U.key,U):M.set(U.index,U),U=U.sibling;return M}function h(U,M){return U=er(U,M),U.index=0,U.sibling=null,U}function f(U,M,j){return U.index=j,t?(j=U.alternate,j!==null?(j=j.index,j<M?(U.flags|=67108866,M):j):(U.flags|=67108866,M)):(U.flags|=1048576,M)}function _(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function E(U,M,j,$){return M===null||M.tag!==6?(M=Bh(j,U.mode,$),M.return=U,M):(M=h(M,j),M.return=U,M)}function R(U,M,j,$){var me=j.type;return me===te?Y(U,M,j.props.children,$,j.key):M!==null&&(M.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===w&&Cp(me)===M.type)?(M=h(M,j.props),el(M,j),M.return=U,M):(M=Iu(j.type,j.key,j.props,null,U.mode,$),el(M,j),M.return=U,M)}function B(U,M,j,$){return M===null||M.tag!==4||M.stateNode.containerInfo!==j.containerInfo||M.stateNode.implementation!==j.implementation?(M=qh(j,U.mode,$),M.return=U,M):(M=h(M,j.children||[]),M.return=U,M)}function Y(U,M,j,$,me){return M===null||M.tag!==7?(M=Vs(j,U.mode,$,me),M.return=U,M):(M=h(M,j),M.return=U,M)}function Z(U,M,j){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Bh(""+M,U.mode,j),M.return=U,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case D:return j=Iu(M.type,M.key,M.props,null,U.mode,j),el(j,M),j.return=U,j;case G:return M=qh(M,U.mode,j),M.return=U,M;case w:var $=M._init;return M=$(M._payload),Z(U,M,j)}if(wt(M)||k(M))return M=Vs(M,U.mode,j,null),M.return=U,M;if(typeof M.then=="function")return Z(U,Hu(M),j);if(M.$$typeof===Ee)return Z(U,Du(U,M),j);Fu(U,M)}return null}function q(U,M,j,$){var me=M!==null?M.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return me!==null?null:E(U,M,""+j,$);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case D:return j.key===me?R(U,M,j,$):null;case G:return j.key===me?B(U,M,j,$):null;case w:return me=j._init,j=me(j._payload),q(U,M,j,$)}if(wt(j)||k(j))return me!==null?null:Y(U,M,j,$,null);if(typeof j.then=="function")return q(U,M,Hu(j),$);if(j.$$typeof===Ee)return q(U,M,Du(U,j),$);Fu(U,j)}return null}function H(U,M,j,$,me){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return U=U.get(j)||null,E(M,U,""+$,me);if(typeof $=="object"&&$!==null){switch($.$$typeof){case D:return U=U.get($.key===null?j:$.key)||null,R(M,U,$,me);case G:return U=U.get($.key===null?j:$.key)||null,B(M,U,$,me);case w:var Qe=$._init;return $=Qe($._payload),H(U,M,j,$,me)}if(wt($)||k($))return U=U.get(j)||null,Y(M,U,$,me,null);if(typeof $.then=="function")return H(U,M,j,Hu($),me);if($.$$typeof===Ee)return H(U,M,j,Du(M,$),me);Fu(M,$)}return null}function Ne(U,M,j,$){for(var me=null,Qe=null,_e=M,Ce=M=0,rn=null;_e!==null&&Ce<j.length;Ce++){_e.index>Ce?(rn=_e,_e=null):rn=_e.sibling;var ot=q(U,_e,j[Ce],$);if(ot===null){_e===null&&(_e=rn);break}t&&_e&&ot.alternate===null&&i(U,_e),M=f(ot,M,Ce),Qe===null?me=ot:Qe.sibling=ot,Qe=ot,_e=rn}if(Ce===j.length)return a(U,_e),ut&&ks(U,Ce),me;if(_e===null){for(;Ce<j.length;Ce++)_e=Z(U,j[Ce],$),_e!==null&&(M=f(_e,M,Ce),Qe===null?me=_e:Qe.sibling=_e,Qe=_e);return ut&&ks(U,Ce),me}for(_e=o(_e);Ce<j.length;Ce++)rn=H(_e,U,Ce,j[Ce],$),rn!==null&&(t&&rn.alternate!==null&&_e.delete(rn.key===null?Ce:rn.key),M=f(rn,M,Ce),Qe===null?me=rn:Qe.sibling=rn,Qe=rn);return t&&_e.forEach(function(Xr){return i(U,Xr)}),ut&&ks(U,Ce),me}function Ie(U,M,j,$){if(j==null)throw Error(s(151));for(var me=null,Qe=null,_e=M,Ce=M=0,rn=null,ot=j.next();_e!==null&&!ot.done;Ce++,ot=j.next()){_e.index>Ce?(rn=_e,_e=null):rn=_e.sibling;var Xr=q(U,_e,ot.value,$);if(Xr===null){_e===null&&(_e=rn);break}t&&_e&&Xr.alternate===null&&i(U,_e),M=f(Xr,M,Ce),Qe===null?me=Xr:Qe.sibling=Xr,Qe=Xr,_e=rn}if(ot.done)return a(U,_e),ut&&ks(U,Ce),me;if(_e===null){for(;!ot.done;Ce++,ot=j.next())ot=Z(U,ot.value,$),ot!==null&&(M=f(ot,M,Ce),Qe===null?me=ot:Qe.sibling=ot,Qe=ot);return ut&&ks(U,Ce),me}for(_e=o(_e);!ot.done;Ce++,ot=j.next())ot=H(_e,U,Ce,ot.value,$),ot!==null&&(t&&ot.alternate!==null&&_e.delete(ot.key===null?Ce:ot.key),M=f(ot,M,Ce),Qe===null?me=ot:Qe.sibling=ot,Qe=ot);return t&&_e.forEach(function(sb){return i(U,sb)}),ut&&ks(U,Ce),me}function vt(U,M,j,$){if(typeof j=="object"&&j!==null&&j.type===te&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case D:e:{for(var me=j.key;M!==null;){if(M.key===me){if(me=j.type,me===te){if(M.tag===7){a(U,M.sibling),$=h(M,j.props.children),$.return=U,U=$;break e}}else if(M.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===w&&Cp(me)===M.type){a(U,M.sibling),$=h(M,j.props),el($,j),$.return=U,U=$;break e}a(U,M);break}else i(U,M);M=M.sibling}j.type===te?($=Vs(j.props.children,U.mode,$,j.key),$.return=U,U=$):($=Iu(j.type,j.key,j.props,null,U.mode,$),el($,j),$.return=U,U=$)}return _(U);case G:e:{for(me=j.key;M!==null;){if(M.key===me)if(M.tag===4&&M.stateNode.containerInfo===j.containerInfo&&M.stateNode.implementation===j.implementation){a(U,M.sibling),$=h(M,j.children||[]),$.return=U,U=$;break e}else{a(U,M);break}else i(U,M);M=M.sibling}$=qh(j,U.mode,$),$.return=U,U=$}return _(U);case w:return me=j._init,j=me(j._payload),vt(U,M,j,$)}if(wt(j))return Ne(U,M,j,$);if(k(j)){if(me=k(j),typeof me!="function")throw Error(s(150));return j=me.call(j),Ie(U,M,j,$)}if(typeof j.then=="function")return vt(U,M,Hu(j),$);if(j.$$typeof===Ee)return vt(U,M,Du(U,j),$);Fu(U,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,M!==null&&M.tag===6?(a(U,M.sibling),$=h(M,j),$.return=U,U=$):(a(U,M),$=Bh(j,U.mode,$),$.return=U,U=$),_(U)):a(U,M)}return function(U,M,j,$){try{Wo=0;var me=vt(U,M,j,$);return Va=null,me}catch(_e){if(_e===Fo||_e===Ou)throw _e;var Qe=Bn(29,_e,null,U.mode);return Qe.lanes=$,Qe.return=U,Qe}finally{}}}var Pa=xp(!0),Dp=xp(!1),si=ee(null),Di=null;function Pr(t){var i=t.alternate;re(Kt,Kt.current&1),re(si,t),Di===null&&(i===null||Da.current!==null||i.memoizedState!==null)&&(Di=t)}function Np(t){if(t.tag===22){if(re(Kt,Kt.current),re(si,t),Di===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(Di=t)}}else kr()}function kr(){re(Kt,Kt.current),re(si,si.current)}function ar(t){oe(si),Di===t&&(Di=null),oe(Kt)}var Kt=ee(0);function Gu(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||hf(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Td(t,i,a,o){i=t.memoizedState,a=a(o,i),a=a==null?i:T({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var bd={enqueueSetState:function(t,i,a){t=t._reactInternals;var o=Gn(),h=Or(o);h.payload=i,a!=null&&(h.callback=a),i=Mr(t,h,o),i!==null&&(Qn(i,t,o),Qo(i,t,o))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var o=Gn(),h=Or(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Mr(t,h,o),i!==null&&(Qn(i,t,o),Qo(i,t,o))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Gn(),o=Or(a);o.tag=2,i!=null&&(o.callback=i),i=Mr(t,o,a),i!==null&&(Qn(i,t,a),Qo(i,t,a))}};function Op(t,i,a,o,h,f,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,f,_):i.prototype&&i.prototype.isPureReactComponent?!ko(a,o)||!ko(h,f):!0}function Mp(t,i,a,o){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==t&&bd.enqueueReplaceState(i,i.state,null)}function Hs(t,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(t=t.defaultProps){a===i&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var Qu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Vp(t){Qu(t)}function Pp(t){console.error(t)}function kp(t){Qu(t)}function Ku(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function Up(t,i,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Ad(t,i,a){return a=Or(a),a.tag=3,a.payload={element:null},a.callback=function(){Ku(t,i)},a}function Lp(t){return t=Or(t),t.tag=3,t}function zp(t,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;t.payload=function(){return h(f)},t.callback=function(){Up(i,a,o)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){Up(i,a,o),typeof h!="function"&&(qr===null?qr=new Set([this]):qr.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function sT(t,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&Bo(i,a,h,!0),a=si.current,a!==null){switch(a.tag){case 13:return Di===null?Kd():a.alternate===null&&Vt===0&&(Vt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===Jh?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),$d(t,o,h)),!1;case 22:return a.flags|=65536,o===Jh?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),$d(t,o,h)),!1}throw Error(s(435,a.tag))}return $d(t,o,h),Kd(),!1}if(ut)return i=si.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==Gh&&(t=Error(s(422),{cause:o}),jo(ti(t,a)))):(o!==Gh&&(i=Error(s(423),{cause:o}),jo(ti(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=ti(o,a),h=Ad(t.stateNode,o,h),td(t,h),Vt!==4&&(Vt=2)),!1;var f=Error(s(520),{cause:o});if(f=ti(f,a),ol===null?ol=[f]:ol.push(f),Vt!==4&&(Vt=2),i===null)return!0;o=ti(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Ad(a.stateNode,o,t),td(a,t),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(qr===null||!qr.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Lp(h),zp(h,t,a,o),td(a,h),!1}a=a.return}while(a!==null);return!1}var jp=Error(s(461)),tn=!1;function hn(t,i,a,o){i.child=t===null?Dp(i,null,a,o):Pa(i,t.child,a,o)}function Bp(t,i,a,o,h){a=a.render;var f=i.ref;if("ref"in o){var _={};for(var E in o)E!=="ref"&&(_[E]=o[E])}else _=o;return js(i),o=ad(t,i,a,_,f,h),E=od(),t!==null&&!tn?(ld(t,i,h),or(t,i,h)):(ut&&E&&Hh(i),i.flags|=1,hn(t,i,o,h),i.child)}function qp(t,i,a,o,h){if(t===null){var f=a.type;return typeof f=="function"&&!jh(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,Hp(t,i,f,o,h)):(t=Iu(a.type,null,o,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(f=t.child,!Nd(t,h)){var _=f.memoizedProps;if(a=a.compare,a=a!==null?a:ko,a(_,o)&&t.ref===i.ref)return or(t,i,h)}return i.flags|=1,t=er(f,o),t.ref=i.ref,t.return=i,i.child=t}function Hp(t,i,a,o,h){if(t!==null){var f=t.memoizedProps;if(ko(f,o)&&t.ref===i.ref)if(tn=!1,i.pendingProps=o=f,Nd(t,h))(t.flags&131072)!==0&&(tn=!0);else return i.lanes=t.lanes,or(t,i,h)}return wd(t,i,a,o,h)}function Fp(t,i,a){var o=i.pendingProps,h=o.children,f=t!==null?t.memoizedState:null;if(o.mode==="hidden"){if((i.flags&128)!==0){if(o=f!==null?f.baseLanes|a:a,t!==null){for(h=i.child=t.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;i.childLanes=f&~o}else i.childLanes=0,i.child=null;return Gp(t,i,o,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Nu(i,f!==null?f.cachePool:null),f!==null?Hg(i,f):id(),Np(i);else return i.lanes=i.childLanes=536870912,Gp(t,i,f!==null?f.baseLanes|a:a,a)}else f!==null?(Nu(i,f.cachePool),Hg(i,f),kr(),i.memoizedState=null):(t!==null&&Nu(i,null),id(),kr());return hn(t,i,h,a),i.child}function Gp(t,i,a,o){var h=Zh();return h=h===null?null:{parent:Qt._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&Nu(i,null),id(),Np(i),t!==null&&Bo(t,i,o,!0),null}function Yu(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function wd(t,i,a,o,h){return js(i),a=ad(t,i,a,o,void 0,h),o=od(),t!==null&&!tn?(ld(t,i,h),or(t,i,h)):(ut&&o&&Hh(i),i.flags|=1,hn(t,i,a,h),i.child)}function Qp(t,i,a,o,h,f){return js(i),i.updateQueue=null,a=Gg(i,o,a,h),Fg(t),o=od(),t!==null&&!tn?(ld(t,i,f),or(t,i,f)):(ut&&o&&Hh(i),i.flags|=1,hn(t,i,a,f),i.child)}function Kp(t,i,a,o,h){if(js(i),i.stateNode===null){var f=Sa,_=a.contextType;typeof _=="object"&&_!==null&&(f=vn(_)),f=new a(o,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=bd,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=o,f.state=i.memoizedState,f.refs={},Wh(i),_=a.contextType,f.context=typeof _=="object"&&_!==null?vn(_):Sa,f.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Td(i,a,_,o),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(_=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),_!==f.state&&bd.enqueueReplaceState(f,f.state,null),Yo(i,o,f,h),Ko(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(t===null){f=i.stateNode;var E=i.memoizedProps,R=Hs(a,E);f.props=R;var B=f.context,Y=a.contextType;_=Sa,typeof Y=="object"&&Y!==null&&(_=vn(Y));var Z=a.getDerivedStateFromProps;Y=typeof Z=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,Y||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||B!==_)&&Mp(i,f,o,_),Nr=!1;var q=i.memoizedState;f.state=q,Yo(i,o,f,h),Ko(),B=i.memoizedState,E||q!==B||Nr?(typeof Z=="function"&&(Td(i,a,Z,o),B=i.memoizedState),(R=Nr||Op(i,a,R,o,q,B,_))?(Y||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=B),f.props=o,f.state=B,f.context=_,o=R):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{f=i.stateNode,ed(t,i),_=i.memoizedProps,Y=Hs(a,_),f.props=Y,Z=i.pendingProps,q=f.context,B=a.contextType,R=Sa,typeof B=="object"&&B!==null&&(R=vn(B)),E=a.getDerivedStateFromProps,(B=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_!==Z||q!==R)&&Mp(i,f,o,R),Nr=!1,q=i.memoizedState,f.state=q,Yo(i,o,f,h),Ko();var H=i.memoizedState;_!==Z||q!==H||Nr||t!==null&&t.dependencies!==null&&xu(t.dependencies)?(typeof E=="function"&&(Td(i,a,E,o),H=i.memoizedState),(Y=Nr||Op(i,a,Y,o,q,H,R)||t!==null&&t.dependencies!==null&&xu(t.dependencies))?(B||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,H,R),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,H,R)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=H),f.props=o,f.state=H,f.context=R,o=Y):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),o=!1)}return f=o,Yu(t,i),o=(i.flags&128)!==0,f||o?(f=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,t!==null&&o?(i.child=Pa(i,t.child,null,h),i.child=Pa(i,null,a,h)):hn(t,i,a,h),i.memoizedState=f.state,t=i.child):t=or(t,i,h),t}function Yp(t,i,a,o){return zo(),i.flags|=256,hn(t,i,a,o),i.child}var Sd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Id(t){return{baseLanes:t,cachePool:Pg()}}function Rd(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=ai),t}function $p(t,i,a){var o=i.pendingProps,h=!1,f=(i.flags&128)!==0,_;if((_=f)||(_=t!==null&&t.memoizedState===null?!1:(Kt.current&2)!==0),_&&(h=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,t===null){if(ut){if(h?Pr(i):kr(),ut){var E=Mt,R;if(R=E){e:{for(R=E,E=xi;R.nodeType!==8;){if(!E){E=null;break e}if(R=mi(R.nextSibling),R===null){E=null;break e}}E=R}E!==null?(i.memoizedState={dehydrated:E,treeContext:Ps!==null?{id:tr,overflow:nr}:null,retryLane:536870912,hydrationErrors:null},R=Bn(18,null,null,0),R.stateNode=E,R.return=i,i.child=R,xn=i,Mt=null,R=!0):R=!1}R||Ls(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return hf(E)?i.lanes=32:i.lanes=536870912,null;ar(i)}return E=o.children,o=o.fallback,h?(kr(),h=i.mode,E=$u({mode:"hidden",children:E},h),o=Vs(o,h,a,null),E.return=i,o.return=i,E.sibling=o,i.child=E,h=i.child,h.memoizedState=Id(a),h.childLanes=Rd(t,_,a),i.memoizedState=Sd,o):(Pr(i),Cd(i,E))}if(R=t.memoizedState,R!==null&&(E=R.dehydrated,E!==null)){if(f)i.flags&256?(Pr(i),i.flags&=-257,i=xd(t,i,a)):i.memoizedState!==null?(kr(),i.child=t.child,i.flags|=128,i=null):(kr(),h=o.fallback,E=i.mode,o=$u({mode:"visible",children:o.children},E),h=Vs(h,E,a,null),h.flags|=2,o.return=i,h.return=i,o.sibling=h,i.child=o,Pa(i,t.child,null,a),o=i.child,o.memoizedState=Id(a),o.childLanes=Rd(t,_,a),i.memoizedState=Sd,i=h);else if(Pr(i),hf(E)){if(_=E.nextSibling&&E.nextSibling.dataset,_)var B=_.dgst;_=B,o=Error(s(419)),o.stack="",o.digest=_,jo({value:o,source:null,stack:null}),i=xd(t,i,a)}else if(tn||Bo(t,i,a,!1),_=(a&t.childLanes)!==0,tn||_){if(_=Tt,_!==null&&(o=a&-a,o=(o&42)!==0?1:fe(o),o=(o&(_.suspendedLanes|a))!==0?0:o,o!==0&&o!==R.retryLane))throw R.retryLane=o,wa(t,o),Qn(_,t,o),jp;E.data==="$?"||Kd(),i=xd(t,i,a)}else E.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=R.treeContext,Mt=mi(E.nextSibling),xn=i,ut=!0,Us=null,xi=!1,t!==null&&(ii[ri++]=tr,ii[ri++]=nr,ii[ri++]=Ps,tr=t.id,nr=t.overflow,Ps=i),i=Cd(i,o.children),i.flags|=4096);return i}return h?(kr(),h=o.fallback,E=i.mode,R=t.child,B=R.sibling,o=er(R,{mode:"hidden",children:o.children}),o.subtreeFlags=R.subtreeFlags&65011712,B!==null?h=er(B,h):(h=Vs(h,E,a,null),h.flags|=2),h.return=i,o.return=i,o.sibling=h,i.child=o,o=h,h=i.child,E=t.child.memoizedState,E===null?E=Id(a):(R=E.cachePool,R!==null?(B=Qt._currentValue,R=R.parent!==B?{parent:B,pool:B}:R):R=Pg(),E={baseLanes:E.baseLanes|a,cachePool:R}),h.memoizedState=E,h.childLanes=Rd(t,_,a),i.memoizedState=Sd,o):(Pr(i),a=t.child,t=a.sibling,a=er(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,t!==null&&(_=i.deletions,_===null?(i.deletions=[t],i.flags|=16):_.push(t)),i.child=a,i.memoizedState=null,a)}function Cd(t,i){return i=$u({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function $u(t,i){return t=Bn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function xd(t,i,a){return Pa(i,t.child,null,a),t=Cd(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Xp(t,i,a){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i),Kh(t.return,i,a)}function Dd(t,i,a,o,h){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=a,f.tailMode=h)}function Zp(t,i,a){var o=i.pendingProps,h=o.revealOrder,f=o.tail;if(hn(t,i,o.children,a),o=Kt.current,(o&2)!==0)o=o&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xp(t,a,i);else if(t.tag===19)Xp(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}switch(re(Kt,o),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&Gu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Dd(i,!1,h,a,f);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&Gu(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Dd(i,!0,a,null,f);break;case"together":Dd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function or(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Br|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Bo(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=er(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=er(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Nd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&xu(t)))}function aT(t,i,a){switch(i.tag){case 3:Ge(i,i.stateNode.containerInfo),Dr(i,Qt,t.memoizedState.cache),zo();break;case 27:case 5:Ot(i);break;case 4:Ge(i,i.stateNode.containerInfo);break;case 10:Dr(i,i.type,i.memoizedProps.value);break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(Pr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?$p(t,i,a):(Pr(i),t=or(t,i,a),t!==null?t.sibling:null);Pr(i);break;case 19:var h=(t.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(Bo(t,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return Zp(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),re(Kt,Kt.current),o)break;return null;case 22:case 23:return i.lanes=0,Fp(t,i,a);case 24:Dr(i,Qt,t.memoizedState.cache)}return or(t,i,a)}function Jp(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)tn=!0;else{if(!Nd(t,a)&&(i.flags&128)===0)return tn=!1,aT(t,i,a);tn=(t.flags&131072)!==0}else tn=!1,ut&&(i.flags&1048576)!==0&&Cg(i,Cu,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var o=i.elementType,h=o._init;if(o=h(o._payload),i.type=o,typeof o=="function")jh(o)?(t=Hs(o,t),i.tag=1,i=Kp(null,i,o,t,a)):(i.tag=0,i=wd(null,i,o,t,a));else{if(o!=null){if(h=o.$$typeof,h===ze){i.tag=11,i=Bp(null,i,o,t,a);break e}else if(h===x){i.tag=14,i=qp(null,i,o,t,a);break e}}throw i=Nt(o)||o,Error(s(306,i,""))}}return i;case 0:return wd(t,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=Hs(o,i.pendingProps),Kp(t,i,o,h,a);case 3:e:{if(Ge(i,i.stateNode.containerInfo),t===null)throw Error(s(387));o=i.pendingProps;var f=i.memoizedState;h=f.element,ed(t,i),Yo(i,o,null,a);var _=i.memoizedState;if(o=_.cache,Dr(i,Qt,o),o!==f.cache&&Yh(i,[Qt],a,!0),Ko(),o=_.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=Yp(t,i,o,a);break e}else if(o!==h){h=ti(Error(s(424)),i),jo(h),i=Yp(t,i,o,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Mt=mi(t.firstChild),xn=i,ut=!0,Us=null,xi=!0,a=Dp(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(zo(),o===h){i=or(t,i,a);break e}hn(t,i,o,a)}i=i.child}return i;case 26:return Yu(t,i),t===null?(a=nv(i.type,null,i.pendingProps,null))?i.memoizedState=a:ut||(a=i.type,t=i.pendingProps,o=uc(Se.current).createElement(a),o[xe]=i,o[Re]=t,fn(o,a,t),st(o),i.stateNode=o):i.memoizedState=nv(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Ot(i),t===null&&ut&&(o=i.stateNode=Wy(i.type,i.pendingProps,Se.current),xn=i,xi=!0,h=Mt,Gr(i.type)?(df=h,Mt=mi(o.firstChild)):Mt=h),hn(t,i,i.pendingProps.children,a),Yu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&ut&&((h=o=Mt)&&(o=VT(o,i.type,i.pendingProps,xi),o!==null?(i.stateNode=o,xn=i,Mt=mi(o.firstChild),xi=!1,h=!0):h=!1),h||Ls(i)),Ot(i),h=i.type,f=i.pendingProps,_=t!==null?t.memoizedProps:null,o=f.children,lf(h,f)?o=null:_!==null&&lf(h,_)&&(i.flags|=32),i.memoizedState!==null&&(h=ad(t,i,J1,null,null,a),pl._currentValue=h),Yu(t,i),hn(t,i,o,a),i.child;case 6:return t===null&&ut&&((t=a=Mt)&&(a=PT(a,i.pendingProps,xi),a!==null?(i.stateNode=a,xn=i,Mt=null,t=!0):t=!1),t||Ls(i)),null;case 13:return $p(t,i,a);case 4:return Ge(i,i.stateNode.containerInfo),o=i.pendingProps,t===null?i.child=Pa(i,null,o,a):hn(t,i,o,a),i.child;case 11:return Bp(t,i,i.type,i.pendingProps,a);case 7:return hn(t,i,i.pendingProps,a),i.child;case 8:return hn(t,i,i.pendingProps.children,a),i.child;case 12:return hn(t,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,Dr(i,i.type,o.value),hn(t,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,js(i),h=vn(h),o=o(h),i.flags|=1,hn(t,i,o,a),i.child;case 14:return qp(t,i,i.type,i.pendingProps,a);case 15:return Hp(t,i,i.type,i.pendingProps,a);case 19:return Zp(t,i,a);case 31:return o=i.pendingProps,a=i.mode,o={mode:o.mode,children:o.children},t===null?(a=$u(o,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=er(t.child,o),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Fp(t,i,a);case 24:return js(i),o=vn(Qt),t===null?(h=Zh(),h===null&&(h=Tt,f=$h(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:o,cache:h},Wh(i),Dr(i,Qt,h)):((t.lanes&a)!==0&&(ed(t,i),Yo(i,null,null,a),Ko()),h=t.memoizedState,f=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Dr(i,Qt,o)):(o=f.cache,Dr(i,Qt,o),o!==h.cache&&Yh(i,[Qt],a,!0))),hn(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function lr(t){t.flags|=4}function Wp(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!ov(i)){if(i=si.current,i!==null&&((et&4194048)===et?Di!==null:(et&62914560)!==et&&(et&536870912)===0||i!==Di))throw Go=Jh,kg;t.flags|=8192}}function Xu(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Ir():536870912,t.lanes|=i,za|=i)}function tl(t,i){if(!ut)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function xt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,i}function oT(t,i,a){var o=i.pendingProps;switch(Fh(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(i),null;case 1:return xt(i),null;case 3:return a=i.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),rr(Qt),Ue(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Lo(i)?lr(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ng())),xt(i),null;case 26:return a=i.memoizedState,t===null?(lr(i),a!==null?(xt(i),Wp(i,a)):(xt(i),i.flags&=-16777217)):a?a!==t.memoizedState?(lr(i),xt(i),Wp(i,a)):(xt(i),i.flags&=-16777217):(t.memoizedProps!==o&&lr(i),xt(i),i.flags&=-16777217),null;case 27:on(i),a=Se.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==o&&lr(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return xt(i),null}t=ye.current,Lo(i)?xg(i):(t=Wy(h,o,a),i.stateNode=t,lr(i))}return xt(i),null;case 5:if(on(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&lr(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return xt(i),null}if(t=ye.current,Lo(i))xg(i);else{switch(h=uc(Se.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?t.multiple=!0:o.size&&(t.size=o.size);break;default:t=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}t[xe]=i,t[Re]=o;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(fn(t,a,o),a){case"button":case"input":case"select":case"textarea":t=!!o.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&lr(i)}}return xt(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==o&&lr(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(t=Se.current,Lo(i)){if(t=i.stateNode,a=i.memoizedProps,o=null,h=xn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[xe]=i,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||Qy(t.nodeValue,a)),t||Ls(i)}else t=uc(t).createTextNode(o),t[xe]=i,i.stateNode=t}return xt(i),null;case 13:if(o=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Lo(i),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[xe]=i}else zo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;xt(i),h=!1}else h=Ng(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(ar(i),i):(ar(i),null)}if(ar(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=o!==null,t=t!==null&&t.memoizedState!==null,a){o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),Xu(i,i.updateQueue),xt(i),null;case 4:return Ue(),t===null&&nf(i.stateNode.containerInfo),xt(i),null;case 10:return rr(i.type),xt(i),null;case 19:if(oe(Kt),h=i.memoizedState,h===null)return xt(i),null;if(o=(i.flags&128)!==0,f=h.rendering,f===null)if(o)tl(h,!1);else{if(Vt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(f=Gu(t),f!==null){for(i.flags|=128,tl(h,!1),t=f.updateQueue,i.updateQueue=t,Xu(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Rg(a,t),a=a.sibling;return re(Kt,Kt.current&1|2),i.child}t=t.sibling}h.tail!==null&&_t()>Wu&&(i.flags|=128,o=!0,tl(h,!1),i.lanes=4194304)}else{if(!o)if(t=Gu(f),t!==null){if(i.flags|=128,o=!0,t=t.updateQueue,i.updateQueue=t,Xu(i,t),tl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!ut)return xt(i),null}else 2*_t()-h.renderingStartTime>Wu&&a!==536870912&&(i.flags|=128,o=!0,tl(h,!1),i.lanes=4194304);h.isBackwards?(f.sibling=i.child,i.child=f):(t=h.last,t!==null?t.sibling=f:i.child=f,h.last=f)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=_t(),i.sibling=null,t=Kt.current,re(Kt,o?t&1|2:t&1),i):(xt(i),null);case 22:case 23:return ar(i),rd(),o=i.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(xt(i),i.subtreeFlags&6&&(i.flags|=8192)):xt(i),a=i.updateQueue,a!==null&&Xu(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),t!==null&&oe(Bs),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),rr(Qt),xt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function lT(t,i){switch(Fh(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return rr(Qt),Ue(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return on(i),null;case 13:if(ar(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));zo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return oe(Kt),null;case 4:return Ue(),null;case 10:return rr(i.type),null;case 22:case 23:return ar(i),rd(),t!==null&&oe(Bs),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return rr(Qt),null;case 25:return null;default:return null}}function ey(t,i){switch(Fh(i),i.tag){case 3:rr(Qt),Ue();break;case 26:case 27:case 5:on(i);break;case 4:Ue();break;case 13:ar(i);break;case 19:oe(Kt);break;case 10:rr(i.type);break;case 22:case 23:ar(i),rd(),t!==null&&oe(Bs);break;case 24:rr(Qt)}}function nl(t,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var f=a.create,_=a.inst;o=f(),_.destroy=o}a=a.next}while(a!==h)}}catch(E){Et(i,i.return,E)}}function Ur(t,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&t)===t){var _=o.inst,E=_.destroy;if(E!==void 0){_.destroy=void 0,h=i;var R=a,B=E;try{B()}catch(Y){Et(h,R,Y)}}}o=o.next}while(o!==f)}}catch(Y){Et(i,i.return,Y)}}function ty(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{qg(i,a)}catch(o){Et(t,t.return,o)}}}function ny(t,i,a){a.props=Hs(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){Et(t,i,o)}}function il(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){Et(t,i,h)}}function Ni(t,i){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){Et(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Et(t,i,h)}else a.current=null}function iy(t){var i=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){Et(t,t.return,h)}}function Od(t,i,a){try{var o=t.stateNode;xT(o,t.type,a,i),o[Re]=i}catch(h){Et(t,t.return,h)}}function ry(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Gr(t.type)||t.tag===4}function Md(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ry(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Gr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vd(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=lc));else if(o!==4&&(o===27&&Gr(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Vd(t,i,a),t=t.sibling;t!==null;)Vd(t,i,a),t=t.sibling}function Zu(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(o!==4&&(o===27&&Gr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Zu(t,i,a),t=t.sibling;t!==null;)Zu(t,i,a),t=t.sibling}function sy(t){var i=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);fn(i,o,a),i[xe]=t,i[Re]=a}catch(f){Et(t,t.return,f)}}var ur=!1,kt=!1,Pd=!1,ay=typeof WeakSet=="function"?WeakSet:Set,nn=null;function uT(t,i){if(t=t.containerInfo,af=gc,t=yg(t),Mh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var _=0,E=-1,R=-1,B=0,Y=0,Z=t,q=null;t:for(;;){for(var H;Z!==a||h!==0&&Z.nodeType!==3||(E=_+h),Z!==f||o!==0&&Z.nodeType!==3||(R=_+o),Z.nodeType===3&&(_+=Z.nodeValue.length),(H=Z.firstChild)!==null;)q=Z,Z=H;for(;;){if(Z===t)break t;if(q===a&&++B===h&&(E=_),q===f&&++Y===o&&(R=_),(H=Z.nextSibling)!==null)break;Z=q,q=Z.parentNode}Z=H}a=E===-1||R===-1?null:{start:E,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(of={focusedElem:t,selectionRange:a},gc=!1,nn=i;nn!==null;)if(i=nn,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,nn=t;else for(;nn!==null;){switch(i=nn,f=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var Ne=Hs(a.type,h,a.elementType===a.type);t=o.getSnapshotBeforeUpdate(Ne,f),o.__reactInternalSnapshotBeforeUpdate=t}catch(Ie){Et(a,a.return,Ie)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)cf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":cf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,nn=t;break}nn=i.return}}function oy(t,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Lr(t,a),o&4&&nl(5,a);break;case 1:if(Lr(t,a),o&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(_){Et(a,a.return,_)}else{var h=Hs(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(_){Et(a,a.return,_)}}o&64&&ty(a),o&512&&il(a,a.return);break;case 3:if(Lr(t,a),o&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{qg(t,i)}catch(_){Et(a,a.return,_)}}break;case 27:i===null&&o&4&&sy(a);case 26:case 5:Lr(t,a),i===null&&o&4&&iy(a),o&512&&il(a,a.return);break;case 12:Lr(t,a);break;case 13:Lr(t,a),o&4&&cy(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=vT.bind(null,a),kT(t,a))));break;case 22:if(o=a.memoizedState!==null||ur,!o){i=i!==null&&i.memoizedState!==null||kt,h=ur;var f=kt;ur=o,(kt=i)&&!f?zr(t,a,(a.subtreeFlags&8772)!==0):Lr(t,a),ur=h,kt=f}break;case 30:break;default:Lr(t,a)}}function ly(t){var i=t.alternate;i!==null&&(t.alternate=null,ly(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Ht(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ct=null,Mn=!1;function cr(t,i,a){for(a=a.child;a!==null;)uy(t,i,a),a=a.sibling}function uy(t,i,a){if(lt&&typeof lt.onCommitFiberUnmount=="function")try{lt.onCommitFiberUnmount(It,a)}catch{}switch(a.tag){case 26:kt||Ni(a,i),cr(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:kt||Ni(a,i);var o=Ct,h=Mn;Gr(a.type)&&(Ct=a.stateNode,Mn=!1),cr(t,i,a),dl(a.stateNode),Ct=o,Mn=h;break;case 5:kt||Ni(a,i);case 6:if(o=Ct,h=Mn,Ct=null,cr(t,i,a),Ct=o,Mn=h,Ct!==null)if(Mn)try{(Ct.nodeType===9?Ct.body:Ct.nodeName==="HTML"?Ct.ownerDocument.body:Ct).removeChild(a.stateNode)}catch(f){Et(a,i,f)}else try{Ct.removeChild(a.stateNode)}catch(f){Et(a,i,f)}break;case 18:Ct!==null&&(Mn?(t=Ct,Zy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),El(t)):Zy(Ct,a.stateNode));break;case 4:o=Ct,h=Mn,Ct=a.stateNode.containerInfo,Mn=!0,cr(t,i,a),Ct=o,Mn=h;break;case 0:case 11:case 14:case 15:kt||Ur(2,a,i),kt||Ur(4,a,i),cr(t,i,a);break;case 1:kt||(Ni(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&ny(a,i,o)),cr(t,i,a);break;case 21:cr(t,i,a);break;case 22:kt=(o=kt)||a.memoizedState!==null,cr(t,i,a),kt=o;break;default:cr(t,i,a)}}function cy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{El(t)}catch(a){Et(i,i.return,a)}}function cT(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new ay),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new ay),i;default:throw Error(s(435,t.tag))}}function kd(t,i){var a=cT(t);i.forEach(function(o){var h=_T.bind(null,t,o);a.has(o)||(a.add(o),o.then(h,h))})}function qn(t,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],f=t,_=i,E=_;e:for(;E!==null;){switch(E.tag){case 27:if(Gr(E.type)){Ct=E.stateNode,Mn=!1;break e}break;case 5:Ct=E.stateNode,Mn=!1;break e;case 3:case 4:Ct=E.stateNode.containerInfo,Mn=!0;break e}E=E.return}if(Ct===null)throw Error(s(160));uy(f,_,h),Ct=null,Mn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)hy(i,t),i=i.sibling}var fi=null;function hy(t,i){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:qn(i,t),Hn(t),o&4&&(Ur(3,t,t.return),nl(3,t),Ur(5,t,t.return));break;case 1:qn(i,t),Hn(t),o&512&&(kt||a===null||Ni(a,a.return)),o&64&&ur&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=fi;if(qn(i,t),Hn(t),o&512&&(kt||a===null||Ni(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[Rt]||f[xe]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),fn(f,o,a),f[xe]=t,st(f),o=f;break e;case"link":var _=sv("link","href",h).get(o+(a.href||""));if(_){for(var E=0;E<_.length;E++)if(f=_[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(E,1);break t}}f=h.createElement(o),fn(f,o,a),h.head.appendChild(f);break;case"meta":if(_=sv("meta","content",h).get(o+(a.content||""))){for(E=0;E<_.length;E++)if(f=_[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(E,1);break t}}f=h.createElement(o),fn(f,o,a),h.head.appendChild(f);break;default:throw Error(s(468,o))}f[xe]=t,st(f),o=f}t.stateNode=o}else av(h,t.type,t.stateNode);else t.stateNode=rv(h,o,t.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?av(h,t.type,t.stateNode):rv(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Od(t,t.memoizedProps,a.memoizedProps)}break;case 27:qn(i,t),Hn(t),o&512&&(kt||a===null||Ni(a,a.return)),a!==null&&o&4&&Od(t,t.memoizedProps,a.memoizedProps);break;case 5:if(qn(i,t),Hn(t),o&512&&(kt||a===null||Ni(a,a.return)),t.flags&32){h=t.stateNode;try{Zn(h,"")}catch(H){Et(t,t.return,H)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,Od(t,h,a!==null?a.memoizedProps:h)),o&1024&&(Pd=!0);break;case 6:if(qn(i,t),Hn(t),o&4){if(t.stateNode===null)throw Error(s(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(H){Et(t,t.return,H)}}break;case 3:if(dc=null,h=fi,fi=cc(i.containerInfo),qn(i,t),fi=h,Hn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{El(i.containerInfo)}catch(H){Et(t,t.return,H)}Pd&&(Pd=!1,dy(t));break;case 4:o=fi,fi=cc(t.stateNode.containerInfo),qn(i,t),Hn(t),fi=o;break;case 12:qn(i,t),Hn(t);break;case 13:qn(i,t),Hn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(qd=_t()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,kd(t,o)));break;case 22:h=t.memoizedState!==null;var R=a!==null&&a.memoizedState!==null,B=ur,Y=kt;if(ur=B||h,kt=Y||R,qn(i,t),kt=Y,ur=B,Hn(t),o&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||R||ur||kt||Fs(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){R=a=i;try{if(f=R.stateNode,h)_=f.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{E=R.stateNode;var Z=R.memoizedProps.style,q=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;E.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(H){Et(R,R.return,H)}}}else if(i.tag===6){if(a===null){R=i;try{R.stateNode.nodeValue=h?"":R.memoizedProps}catch(H){Et(R,R.return,H)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,kd(t,a))));break;case 19:qn(i,t),Hn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,kd(t,o)));break;case 30:break;case 21:break;default:qn(i,t),Hn(t)}}function Hn(t){var i=t.flags;if(i&2){try{for(var a,o=t.return;o!==null;){if(ry(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=Md(t);Zu(t,f,h);break;case 5:var _=a.stateNode;a.flags&32&&(Zn(_,""),a.flags&=-33);var E=Md(t);Zu(t,E,_);break;case 3:case 4:var R=a.stateNode.containerInfo,B=Md(t);Vd(t,B,R);break;default:throw Error(s(161))}}catch(Y){Et(t,t.return,Y)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function dy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;dy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Lr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)oy(t,i.alternate,i),i=i.sibling}function Fs(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Ur(4,i,i.return),Fs(i);break;case 1:Ni(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&ny(i,i.return,a),Fs(i);break;case 27:dl(i.stateNode);case 26:case 5:Ni(i,i.return),Fs(i);break;case 22:i.memoizedState===null&&Fs(i);break;case 30:Fs(i);break;default:Fs(i)}t=t.sibling}}function zr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=t,f=i,_=f.flags;switch(f.tag){case 0:case 11:case 15:zr(h,f,a),nl(4,f);break;case 1:if(zr(h,f,a),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){Et(o,o.return,B)}if(o=f,h=o.updateQueue,h!==null){var E=o.stateNode;try{var R=h.shared.hiddenCallbacks;if(R!==null)for(h.shared.hiddenCallbacks=null,h=0;h<R.length;h++)Bg(R[h],E)}catch(B){Et(o,o.return,B)}}a&&_&64&&ty(f),il(f,f.return);break;case 27:sy(f);case 26:case 5:zr(h,f,a),a&&o===null&&_&4&&iy(f),il(f,f.return);break;case 12:zr(h,f,a);break;case 13:zr(h,f,a),a&&_&4&&cy(h,f);break;case 22:f.memoizedState===null&&zr(h,f,a),il(f,f.return);break;case 30:break;default:zr(h,f,a)}i=i.sibling}}function Ud(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&qo(a))}function Ld(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&qo(t))}function Oi(t,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)fy(t,i,a,o),i=i.sibling}function fy(t,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Oi(t,i,a,o),h&2048&&nl(9,i);break;case 1:Oi(t,i,a,o);break;case 3:Oi(t,i,a,o),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&qo(t)));break;case 12:if(h&2048){Oi(t,i,a,o),t=i.stateNode;try{var f=i.memoizedProps,_=f.id,E=f.onPostCommit;typeof E=="function"&&E(_,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(R){Et(i,i.return,R)}}else Oi(t,i,a,o);break;case 13:Oi(t,i,a,o);break;case 23:break;case 22:f=i.stateNode,_=i.alternate,i.memoizedState!==null?f._visibility&2?Oi(t,i,a,o):rl(t,i):f._visibility&2?Oi(t,i,a,o):(f._visibility|=2,ka(t,i,a,o,(i.subtreeFlags&10256)!==0)),h&2048&&Ud(_,i);break;case 24:Oi(t,i,a,o),h&2048&&Ld(i.alternate,i);break;default:Oi(t,i,a,o)}}function ka(t,i,a,o,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var f=t,_=i,E=a,R=o,B=_.flags;switch(_.tag){case 0:case 11:case 15:ka(f,_,E,R,h),nl(8,_);break;case 23:break;case 22:var Y=_.stateNode;_.memoizedState!==null?Y._visibility&2?ka(f,_,E,R,h):rl(f,_):(Y._visibility|=2,ka(f,_,E,R,h)),h&&B&2048&&Ud(_.alternate,_);break;case 24:ka(f,_,E,R,h),h&&B&2048&&Ld(_.alternate,_);break;default:ka(f,_,E,R,h)}i=i.sibling}}function rl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,o=i,h=o.flags;switch(o.tag){case 22:rl(a,o),h&2048&&Ud(o.alternate,o);break;case 24:rl(a,o),h&2048&&Ld(o.alternate,o);break;default:rl(a,o)}i=i.sibling}}var sl=8192;function Ua(t){if(t.subtreeFlags&sl)for(t=t.child;t!==null;)my(t),t=t.sibling}function my(t){switch(t.tag){case 26:Ua(t),t.flags&sl&&t.memoizedState!==null&&$T(fi,t.memoizedState,t.memoizedProps);break;case 5:Ua(t);break;case 3:case 4:var i=fi;fi=cc(t.stateNode.containerInfo),Ua(t),fi=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=sl,sl=16777216,Ua(t),sl=i):Ua(t));break;default:Ua(t)}}function gy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function al(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];nn=o,yy(o,t)}gy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)py(t),t=t.sibling}function py(t){switch(t.tag){case 0:case 11:case 15:al(t),t.flags&2048&&Ur(9,t,t.return);break;case 3:al(t);break;case 12:al(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Ju(t)):al(t);break;default:al(t)}}function Ju(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];nn=o,yy(o,t)}gy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Ur(8,i,i.return),Ju(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Ju(i));break;default:Ju(i)}t=t.sibling}}function yy(t,i){for(;nn!==null;){var a=nn;switch(a.tag){case 0:case 11:case 15:Ur(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:qo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,nn=o;else e:for(a=t;nn!==null;){o=nn;var h=o.sibling,f=o.return;if(ly(o),o===a){nn=null;break e}if(h!==null){h.return=f,nn=h;break e}nn=f}}}var hT={getCacheForType:function(t){var i=vn(Qt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},dT=typeof WeakMap=="function"?WeakMap:Map,ft=0,Tt=null,Ke=null,et=0,mt=0,Fn=null,jr=!1,La=!1,zd=!1,hr=0,Vt=0,Br=0,Gs=0,jd=0,ai=0,za=0,ol=null,Vn=null,Bd=!1,qd=0,Wu=1/0,ec=null,qr=null,dn=0,Hr=null,ja=null,Ba=0,Hd=0,Fd=null,vy=null,ll=0,Gd=null;function Gn(){if((ft&2)!==0&&et!==0)return et&-et;if(K.T!==null){var t=Ca;return t!==0?t:Jd()}return Te()}function _y(){ai===0&&(ai=(et&536870912)===0||ut?ve():536870912);var t=si.current;return t!==null&&(t.flags|=32),ai}function Qn(t,i,a){(t===Tt&&(mt===2||mt===9)||t.cancelPendingCommit!==null)&&(qa(t,0),Fr(t,et,ai,!1)),F(t,a),((ft&2)===0||t!==Tt)&&(t===Tt&&((ft&2)===0&&(Gs|=a),Vt===4&&Fr(t,et,ai,!1)),Mi(t))}function Ey(t,i,a){if((ft&6)!==0)throw Error(s(327));var o=!a&&(i&124)===0&&(i&t.expiredLanes)===0||Gi(t,i),h=o?gT(t,i):Yd(t,i,!0),f=o;do{if(h===0){La&&!o&&Fr(t,i,0,!1);break}else{if(a=t.current.alternate,f&&!fT(a)){h=Yd(t,i,!1),f=!1;continue}if(h===2){if(f=i,t.errorRecoveryDisabledLanes&f)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var E=t;h=ol;var R=E.current.memoizedState.isDehydrated;if(R&&(qa(E,_).flags|=256),_=Yd(E,_,!1),_!==2){if(zd&&!R){E.errorRecoveryDisabledLanes|=f,Gs|=f,h=4;break e}f=Vn,Vn=h,f!==null&&(Vn===null?Vn=f:Vn.push.apply(Vn,f))}h=_}if(f=!1,h!==2)continue}}if(h===1){qa(t,0),Fr(t,i,0,!0);break}e:{switch(o=t,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Fr(o,i,ai,!jr);break e;case 2:Vn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=qd+300-_t(),10<h)){if(Fr(o,i,ai,!jr),Fi(o,0,!0)!==0)break e;o.timeoutHandle=$y(Ty.bind(null,o,a,Vn,ec,Bd,i,ai,Gs,za,jr,f,2,-0,0),h);break e}Ty(o,a,Vn,ec,Bd,i,ai,Gs,za,jr,f,0,-0,0)}}break}while(!0);Mi(t)}function Ty(t,i,a,o,h,f,_,E,R,B,Y,Z,q,H){if(t.timeoutHandle=-1,Z=i.subtreeFlags,(Z&8192||(Z&16785408)===16785408)&&(gl={stylesheets:null,count:0,unsuspend:YT},my(i),Z=XT(),Z!==null)){t.cancelPendingCommit=Z(Cy.bind(null,t,i,f,a,o,h,_,E,R,Y,1,q,H)),Fr(t,f,_,!B);return}Cy(t,i,f,a,o,h,_,E,R)}function fT(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],f=h.getSnapshot;h=h.value;try{if(!jn(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Fr(t,i,a,o){i&=~jd,i&=~Gs,t.suspendedLanes|=i,t.pingedLanes&=~i,o&&(t.warmLanes|=i),o=t.expirationTimes;for(var h=i;0<h;){var f=31-Jt(h),_=1<<f;o[f]=-1,h&=~_}a!==0&&ie(t,a,i)}function tc(){return(ft&6)===0?(ul(0),!1):!0}function Qd(){if(Ke!==null){if(mt===0)var t=Ke.return;else t=Ke,ir=zs=null,ud(t),Va=null,Wo=0,t=Ke;for(;t!==null;)ey(t.alternate,t),t=t.return;Ke=null}}function qa(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,NT(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Qd(),Tt=t,Ke=a=er(t.current,null),et=i,mt=0,Fn=null,jr=!1,La=Gi(t,i),zd=!1,za=ai=jd=Gs=Br=Vt=0,Vn=ol=null,Bd=!1,(i&8)!==0&&(i|=i&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=i;0<o;){var h=31-Jt(o),f=1<<h;i|=t[h],o&=~f}return hr=i,Au(),a}function by(t,i){He=null,K.H=qu,i===Fo||i===Ou?(i=zg(),mt=3):i===kg?(i=zg(),mt=4):mt=i===jp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Fn=i,Ke===null&&(Vt=1,Ku(t,ti(i,t.current)))}function Ay(){var t=K.H;return K.H=qu,t===null?qu:t}function wy(){var t=K.A;return K.A=hT,t}function Kd(){Vt=4,jr||(et&4194048)!==et&&si.current!==null||(La=!0),(Br&134217727)===0&&(Gs&134217727)===0||Tt===null||Fr(Tt,et,ai,!1)}function Yd(t,i,a){var o=ft;ft|=2;var h=Ay(),f=wy();(Tt!==t||et!==i)&&(ec=null,qa(t,i)),i=!1;var _=Vt;e:do try{if(mt!==0&&Ke!==null){var E=Ke,R=Fn;switch(mt){case 8:Qd(),_=6;break e;case 3:case 2:case 9:case 6:si.current===null&&(i=!0);var B=mt;if(mt=0,Fn=null,Ha(t,E,R,B),a&&La){_=0;break e}break;default:B=mt,mt=0,Fn=null,Ha(t,E,R,B)}}mT(),_=Vt;break}catch(Y){by(t,Y)}while(!0);return i&&t.shellSuspendCounter++,ir=zs=null,ft=o,K.H=h,K.A=f,Ke===null&&(Tt=null,et=0,Au()),_}function mT(){for(;Ke!==null;)Sy(Ke)}function gT(t,i){var a=ft;ft|=2;var o=Ay(),h=wy();Tt!==t||et!==i?(ec=null,Wu=_t()+500,qa(t,i)):La=Gi(t,i);e:do try{if(mt!==0&&Ke!==null){i=Ke;var f=Fn;t:switch(mt){case 1:mt=0,Fn=null,Ha(t,i,f,1);break;case 2:case 9:if(Ug(f)){mt=0,Fn=null,Iy(i);break}i=function(){mt!==2&&mt!==9||Tt!==t||(mt=7),Mi(t)},f.then(i,i);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:Ug(f)?(mt=0,Fn=null,Iy(i)):(mt=0,Fn=null,Ha(t,i,f,7));break;case 5:var _=null;switch(Ke.tag){case 26:_=Ke.memoizedState;case 5:case 27:var E=Ke;if(!_||ov(_)){mt=0,Fn=null;var R=E.sibling;if(R!==null)Ke=R;else{var B=E.return;B!==null?(Ke=B,nc(B)):Ke=null}break t}}mt=0,Fn=null,Ha(t,i,f,5);break;case 6:mt=0,Fn=null,Ha(t,i,f,6);break;case 8:Qd(),Vt=6;break e;default:throw Error(s(462))}}pT();break}catch(Y){by(t,Y)}while(!0);return ir=zs=null,K.H=o,K.A=h,ft=a,Ke!==null?0:(Tt=null,et=0,Au(),Vt)}function pT(){for(;Ke!==null&&!$n();)Sy(Ke)}function Sy(t){var i=Jp(t.alternate,t,hr);t.memoizedProps=t.pendingProps,i===null?nc(t):Ke=i}function Iy(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Qp(a,i,i.pendingProps,i.type,void 0,et);break;case 11:i=Qp(a,i,i.pendingProps,i.type.render,i.ref,et);break;case 5:ud(i);default:ey(a,i),i=Ke=Rg(i,hr),i=Jp(a,i,hr)}t.memoizedProps=t.pendingProps,i===null?nc(t):Ke=i}function Ha(t,i,a,o){ir=zs=null,ud(i),Va=null,Wo=0;var h=i.return;try{if(sT(t,h,i,a,et)){Vt=1,Ku(t,ti(a,t.current)),Ke=null;return}}catch(f){if(h!==null)throw Ke=h,f;Vt=1,Ku(t,ti(a,t.current)),Ke=null;return}i.flags&32768?(ut||o===1?t=!0:La||(et&536870912)!==0?t=!1:(jr=t=!0,(o===2||o===9||o===3||o===6)&&(o=si.current,o!==null&&o.tag===13&&(o.flags|=16384))),Ry(i,t)):nc(i)}function nc(t){var i=t;do{if((i.flags&32768)!==0){Ry(i,jr);return}t=i.return;var a=oT(i.alternate,i,hr);if(a!==null){Ke=a;return}if(i=i.sibling,i!==null){Ke=i;return}Ke=i=t}while(i!==null);Vt===0&&(Vt=5)}function Ry(t,i){do{var a=lT(t.alternate,t);if(a!==null){a.flags&=32767,Ke=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ke=t;return}Ke=t=a}while(t!==null);Vt=6,Ke=null}function Cy(t,i,a,o,h,f,_,E,R){t.cancelPendingCommit=null;do ic();while(dn!==0);if((ft&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(f=i.lanes|i.childLanes,f|=Lh,L(t,a,f,_,E,R),t===Tt&&(Ke=Tt=null,et=0),ja=i,Hr=t,Ba=a,Hd=f,Fd=h,vy=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,ET(vi,function(){return My(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=K.T,K.T=null,h=ae.p,ae.p=2,_=ft,ft|=4;try{uT(t,i,a)}finally{ft=_,ae.p=h,K.T=o}}dn=1,xy(),Dy(),Ny()}}function xy(){if(dn===1){dn=0;var t=Hr,i=ja,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var o=ae.p;ae.p=2;var h=ft;ft|=4;try{hy(i,t);var f=of,_=yg(t.containerInfo),E=f.focusedElem,R=f.selectionRange;if(_!==E&&E&&E.ownerDocument&&pg(E.ownerDocument.documentElement,E)){if(R!==null&&Mh(E)){var B=R.start,Y=R.end;if(Y===void 0&&(Y=B),"selectionStart"in E)E.selectionStart=B,E.selectionEnd=Math.min(Y,E.value.length);else{var Z=E.ownerDocument||document,q=Z&&Z.defaultView||window;if(q.getSelection){var H=q.getSelection(),Ne=E.textContent.length,Ie=Math.min(R.start,Ne),vt=R.end===void 0?Ie:Math.min(R.end,Ne);!H.extend&&Ie>vt&&(_=vt,vt=Ie,Ie=_);var U=gg(E,Ie),M=gg(E,vt);if(U&&M&&(H.rangeCount!==1||H.anchorNode!==U.node||H.anchorOffset!==U.offset||H.focusNode!==M.node||H.focusOffset!==M.offset)){var j=Z.createRange();j.setStart(U.node,U.offset),H.removeAllRanges(),Ie>vt?(H.addRange(j),H.extend(M.node,M.offset)):(j.setEnd(M.node,M.offset),H.addRange(j))}}}}for(Z=[],H=E;H=H.parentNode;)H.nodeType===1&&Z.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<Z.length;E++){var $=Z[E];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}gc=!!af,of=af=null}finally{ft=h,ae.p=o,K.T=a}}t.current=i,dn=2}}function Dy(){if(dn===2){dn=0;var t=Hr,i=ja,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var o=ae.p;ae.p=2;var h=ft;ft|=4;try{oy(t,i.alternate,i)}finally{ft=h,ae.p=o,K.T=a}}dn=3}}function Ny(){if(dn===4||dn===3){dn=0,ui();var t=Hr,i=ja,a=Ba,o=vy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?dn=5:(dn=0,ja=Hr=null,Oy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(qr=null),le(a),i=i.stateNode,lt&&typeof lt.onCommitFiberRoot=="function")try{lt.onCommitFiberRoot(It,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=K.T,h=ae.p,ae.p=2,K.T=null;try{for(var f=t.onRecoverableError,_=0;_<o.length;_++){var E=o[_];f(E.value,{componentStack:E.stack})}}finally{K.T=i,ae.p=h}}(Ba&3)!==0&&ic(),Mi(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Gd?ll++:(ll=0,Gd=t):ll=0,ul(0)}}function Oy(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,qo(i)))}function ic(t){return xy(),Dy(),Ny(),My()}function My(){if(dn!==5)return!1;var t=Hr,i=Hd;Hd=0;var a=le(Ba),o=K.T,h=ae.p;try{ae.p=32>a?32:a,K.T=null,a=Fd,Fd=null;var f=Hr,_=Ba;if(dn=0,ja=Hr=null,Ba=0,(ft&6)!==0)throw Error(s(331));var E=ft;if(ft|=4,py(f.current),fy(f,f.current,_,a),ft=E,ul(0,!1),lt&&typeof lt.onPostCommitFiberRoot=="function")try{lt.onPostCommitFiberRoot(It,f)}catch{}return!0}finally{ae.p=h,K.T=o,Oy(t,i)}}function Vy(t,i,a){i=ti(a,i),i=Ad(t.stateNode,i,2),t=Mr(t,i,2),t!==null&&(F(t,2),Mi(t))}function Et(t,i,a){if(t.tag===3)Vy(t,t,a);else for(;i!==null;){if(i.tag===3){Vy(i,t,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(qr===null||!qr.has(o))){t=ti(a,t),a=Lp(2),o=Mr(i,a,2),o!==null&&(zp(a,o,i,t),F(o,2),Mi(o));break}}i=i.return}}function $d(t,i,a){var o=t.pingCache;if(o===null){o=t.pingCache=new dT;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(zd=!0,h.add(a),t=yT.bind(null,t,i,a),i.then(t,t))}function yT(t,i,a){var o=t.pingCache;o!==null&&o.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Tt===t&&(et&a)===a&&(Vt===4||Vt===3&&(et&62914560)===et&&300>_t()-qd?(ft&2)===0&&qa(t,0):jd|=a,za===et&&(za=0)),Mi(t)}function Py(t,i){i===0&&(i=Ir()),t=wa(t,i),t!==null&&(F(t,i),Mi(t))}function vT(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),Py(t,a)}function _T(t,i){var a=0;switch(t.tag){case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),Py(t,a)}function ET(t,i){return ji(t,i)}var rc=null,Fa=null,Xd=!1,sc=!1,Zd=!1,Qs=0;function Mi(t){t!==Fa&&t.next===null&&(Fa===null?rc=Fa=t:Fa=Fa.next=t),sc=!0,Xd||(Xd=!0,bT())}function ul(t,i){if(!Zd&&sc){Zd=!0;do for(var a=!1,o=rc;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var _=o.suspendedLanes,E=o.pingedLanes;f=(1<<31-Jt(42|t)+1)-1,f&=h&~(_&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,zy(o,f))}else f=et,f=Fi(o,o===Tt?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||Gi(o,f)||(a=!0,zy(o,f));o=o.next}while(a);Zd=!1}}function TT(){ky()}function ky(){sc=Xd=!1;var t=0;Qs!==0&&(DT()&&(t=Qs),Qs=0);for(var i=_t(),a=null,o=rc;o!==null;){var h=o.next,f=Uy(o,i);f===0?(o.next=null,a===null?rc=h:a.next=h,h===null&&(Fa=a)):(a=o,(t!==0||(f&3)!==0)&&(sc=!0)),o=h}ul(t)}function Uy(t,i){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var _=31-Jt(f),E=1<<_,R=h[_];R===-1?((E&a)===0||(E&o)!==0)&&(h[_]=vs(E,i)):R<=i&&(t.expiredLanes|=E),f&=~E}if(i=Tt,a=et,a=Fi(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===i&&(mt===2||mt===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&yn(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Gi(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(o!==null&&yn(o),le(a)){case 2:case 8:a=Bi;break;case 32:a=vi;break;case 268435456:a=wr;break;default:a=vi}return o=Ly.bind(null,t),a=ji(a,o),t.callbackPriority=i,t.callbackNode=a,i}return o!==null&&o!==null&&yn(o),t.callbackPriority=2,t.callbackNode=null,2}function Ly(t,i){if(dn!==0&&dn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(ic()&&t.callbackNode!==a)return null;var o=et;return o=Fi(t,t===Tt?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Ey(t,o,i),Uy(t,_t()),t.callbackNode!=null&&t.callbackNode===a?Ly.bind(null,t):null)}function zy(t,i){if(ic())return null;Ey(t,i,!0)}function bT(){OT(function(){(ft&6)!==0?ji(Ar,TT):ky()})}function Jd(){return Qs===0&&(Qs=ve()),Qs}function jy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:da(""+t)}function By(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function AT(t,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var f=jy((h[Re]||null).action),_=o.submitter;_&&(i=(i=_[Re]||null)?jy(i.formAction):_.getAttribute("formAction"),i!==null&&(f=i,_=null));var E=new fa("action","action",null,o,h);t.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Qs!==0){var R=_?By(h,_):new FormData(h);vd(a,{pending:!0,data:R,method:h.method,action:f},null,R)}}else typeof f=="function"&&(E.preventDefault(),R=_?By(h,_):new FormData(h),vd(a,{pending:!0,data:R,method:h.method,action:f},f,R))},currentTarget:h}]})}}for(var Wd=0;Wd<Uh.length;Wd++){var ef=Uh[Wd],wT=ef.toLowerCase(),ST=ef[0].toUpperCase()+ef.slice(1);di(wT,"on"+ST)}di(Eg,"onAnimationEnd"),di(Tg,"onAnimationIteration"),di(bg,"onAnimationStart"),di("dblclick","onDoubleClick"),di("focusin","onFocus"),di("focusout","onBlur"),di(q1,"onTransitionRun"),di(H1,"onTransitionStart"),di(F1,"onTransitionCancel"),di(Ag,"onTransitionEnd"),Xn("onMouseEnter",["mouseout","mouseover"]),Xn("onMouseLeave",["mouseout","mouseover"]),Xn("onPointerEnter",["pointerout","pointerover"]),Xn("onPointerLeave",["pointerout","pointerover"]),ln("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ln("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ln("onBeforeInput",["compositionend","keypress","textInput","paste"]),ln("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ln("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ln("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cl));function qy(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var f=void 0;if(i)for(var _=o.length-1;0<=_;_--){var E=o[_],R=E.instance,B=E.currentTarget;if(E=E.listener,R!==f&&h.isPropagationStopped())break e;f=E,h.currentTarget=B;try{f(h)}catch(Y){Qu(Y)}h.currentTarget=null,f=R}else for(_=0;_<o.length;_++){if(E=o[_],R=E.instance,B=E.currentTarget,E=E.listener,R!==f&&h.isPropagationStopped())break e;f=E,h.currentTarget=B;try{f(h)}catch(Y){Qu(Y)}h.currentTarget=null,f=R}}}}function Ye(t,i){var a=i[ce];a===void 0&&(a=i[ce]=new Set);var o=t+"__bubble";a.has(o)||(Hy(i,t,2,!1),a.add(o))}function tf(t,i,a){var o=0;i&&(o|=4),Hy(a,t,o,i)}var ac="_reactListening"+Math.random().toString(36).slice(2);function nf(t){if(!t[ac]){t[ac]=!0,ci.forEach(function(a){a!=="selectionchange"&&(IT.has(a)||tf(a,!1,t),tf(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[ac]||(i[ac]=!0,tf("selectionchange",!1,i))}}function Hy(t,i,a,o){switch(fv(i)){case 2:var h=WT;break;case 8:h=eb;break;default:h=yf}a=h.bind(null,i,a,t),h=void 0,!Wn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function rf(t,i,a,o,h){var f=o;if((i&1)===0&&(i&2)===0&&o!==null)e:for(;;){if(o===null)return;var _=o.tag;if(_===3||_===4){var E=o.stateNode.containerInfo;if(E===h)break;if(_===4)for(_=o.return;_!==null;){var R=_.tag;if((R===3||R===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;E!==null;){if(_=In(E),_===null)return;if(R=_.tag,R===5||R===6||R===26||R===27){o=f=_;continue e}E=E.parentNode}}o=o.return}lu(function(){var B=f,Y=Jn(a),Z=[];e:{var q=wg.get(t);if(q!==void 0){var H=fa,Ne=t;switch(t){case"keypress":if(wi(a)===0)break e;case"keydown":case"keyup":H=_a;break;case"focusin":Ne="focus",H=pa;break;case"focusout":Ne="blur",H=pa;break;case"beforeblur":case"afterblur":H=pa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=ei;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=xh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=pu;break;case Eg:case Tg:case bg:H=ya;break;case Ag:H=vu;break;case"scroll":case"scrollend":H=uu;break;case"wheel":H=Ea;break;case"copy":case"cut":case"paste":H=va;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Vo;break;case"toggle":case"beforetoggle":H=Eu}var Ie=(i&4)!==0,vt=!Ie&&(t==="scroll"||t==="scrollend"),U=Ie?q!==null?q+"Capture":null:q;Ie=[];for(var M=B,j;M!==null;){var $=M;if(j=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||j===null||U===null||($=Ss(M,U),$!=null&&Ie.push(hl(M,$,j))),vt)break;M=M.return}0<Ie.length&&(q=new H(q,Ne,null,a,Y),Z.push({event:q,listeners:Ie}))}}if((i&7)===0){e:{if(q=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",q&&a!==Yi&&(Ne=a.relatedTarget||a.fromElement)&&(In(Ne)||Ne[$e]))break e;if((H||q)&&(q=Y.window===Y?Y:(q=Y.ownerDocument)?q.defaultView||q.parentWindow:window,H?(Ne=a.relatedTarget||a.toElement,H=B,Ne=Ne?In(Ne):null,Ne!==null&&(vt=c(Ne),Ie=Ne.tag,Ne!==vt||Ie!==5&&Ie!==27&&Ie!==6)&&(Ne=null)):(H=null,Ne=B),H!==Ne)){if(Ie=ei,$="onMouseLeave",U="onMouseEnter",M="mouse",(t==="pointerout"||t==="pointerover")&&(Ie=Vo,$="onPointerLeave",U="onPointerEnter",M="pointer"),vt=H==null?q:Pe(H),j=Ne==null?q:Pe(Ne),q=new Ie($,M+"leave",H,a,Y),q.target=vt,q.relatedTarget=j,$=null,In(Y)===B&&(Ie=new Ie(U,M+"enter",Ne,a,Y),Ie.target=j,Ie.relatedTarget=vt,$=Ie),vt=$,H&&Ne)t:{for(Ie=H,U=Ne,M=0,j=Ie;j;j=Ga(j))M++;for(j=0,$=U;$;$=Ga($))j++;for(;0<M-j;)Ie=Ga(Ie),M--;for(;0<j-M;)U=Ga(U),j--;for(;M--;){if(Ie===U||U!==null&&Ie===U.alternate)break t;Ie=Ga(Ie),U=Ga(U)}Ie=null}else Ie=null;H!==null&&Fy(Z,q,H,Ie,!1),Ne!==null&&vt!==null&&Fy(Z,vt,Ne,Ie,!0)}}e:{if(q=B?Pe(B):window,H=q.nodeName&&q.nodeName.toLowerCase(),H==="select"||H==="input"&&q.type==="file")var me=ug;else if(Gt(q))if(cg)me=z1;else{me=U1;var Qe=k1}else H=q.nodeName,!H||H.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&Ro(B.elementType)&&(me=ug):me=L1;if(me&&(me=me(t,B))){Wi(Z,me,a,Y);break e}Qe&&Qe(t,q,B),t==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&Cr(q,"number",q.value)}switch(Qe=B?Pe(B):window,t){case"focusin":(Gt(Qe)||Qe.contentEditable==="true")&&(Ta=Qe,Vh=B,Uo=null);break;case"focusout":Uo=Vh=Ta=null;break;case"mousedown":Ph=!0;break;case"contextmenu":case"mouseup":case"dragend":Ph=!1,vg(Z,a,Y);break;case"selectionchange":if(B1)break;case"keydown":case"keyup":vg(Z,a,Y)}var _e;if(Ri)e:{switch(t){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else Je?Q(t,a)&&(Ce="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ce="onCompositionStart");Ce&&(v&&a.locale!=="ko"&&(Je||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&Je&&(_e=xo()):(Ai=Y,xr="value"in Ai?Ai.value:Ai.textContent,Je=!0)),Qe=oc(B,Ce),0<Qe.length&&(Ce=new Oo(Ce,t,null,a,Y),Z.push({event:Ce,listeners:Qe}),_e?Ce.data=_e:(_e=se(a),_e!==null&&(Ce.data=_e)))),(_e=m?Ft(t,a):We(t,a))&&(Ce=oc(B,"onBeforeInput"),0<Ce.length&&(Qe=new Oo("onBeforeInput","beforeinput",null,a,Y),Z.push({event:Qe,listeners:Ce}),Qe.data=_e)),AT(Z,t,B,a,Y)}qy(Z,i)})}function hl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function oc(t,i){for(var a=i+"Capture",o=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=Ss(t,a),h!=null&&o.unshift(hl(t,h,f)),h=Ss(t,i),h!=null&&o.push(hl(t,h,f))),t.tag===3)return o;t=t.return}return[]}function Ga(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Fy(t,i,a,o,h){for(var f=i._reactName,_=[];a!==null&&a!==o;){var E=a,R=E.alternate,B=E.stateNode;if(E=E.tag,R!==null&&R===o)break;E!==5&&E!==26&&E!==27||B===null||(R=B,h?(B=Ss(a,f),B!=null&&_.unshift(hl(a,B,R))):h||(B=Ss(a,f),B!=null&&_.push(hl(a,B,R)))),a=a.return}_.length!==0&&t.push({event:i,listeners:_})}var RT=/\r\n?/g,CT=/\u0000|\uFFFD/g;function Gy(t){return(typeof t=="string"?t:""+t).replace(RT,`
`).replace(CT,"")}function Qy(t,i){return i=Gy(i),Gy(t)===i}function lc(){}function yt(t,i,a,o,h,f){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||Zn(t,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&Zn(t,""+o);break;case"className":Ti(t,"class",o);break;case"tabIndex":Ti(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Ti(t,a,o);break;case"style":Io(t,o,f);break;case"data":if(i!=="object"){Ti(t,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=da(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&yt(t,i,"name",h.name,h,null),yt(t,i,"formEncType",h.formEncType,h,null),yt(t,i,"formMethod",h.formMethod,h,null),yt(t,i,"formTarget",h.formTarget,h,null)):(yt(t,i,"encType",h.encType,h,null),yt(t,i,"method",h.method,h,null),yt(t,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=da(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=lc);break;case"onScroll":o!=null&&Ye("scroll",t);break;case"onScrollEnd":o!=null&&Ye("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=da(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":Ye("beforetoggle",t),Ye("toggle",t),Rr(t,"popover",o);break;case"xlinkActuate":un(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":un(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":un(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":un(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":un(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":un(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":un(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":un(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":un(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Rr(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Rh.get(a)||a,Rr(t,a,o))}}function sf(t,i,a,o,h,f){switch(a){case"style":Io(t,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof o=="string"?Zn(t,o):(typeof o=="number"||typeof o=="bigint")&&Zn(t,""+o);break;case"onScroll":o!=null&&Ye("scroll",t);break;case"onScrollEnd":o!=null&&Ye("scrollend",t);break;case"onClick":o!=null&&(t.onclick=lc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ei.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=t[Re]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(i,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):Rr(t,a,o)}}}function fn(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",t),Ye("load",t);var o=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var _=a[f];if(_!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:yt(t,i,f,_,a,null)}}h&&yt(t,i,"srcSet",a.srcSet,a,null),o&&yt(t,i,"src",a.src,a,null);return;case"input":Ye("invalid",t);var E=f=_=h=null,R=null,B=null;for(o in a)if(a.hasOwnProperty(o)){var Y=a[o];if(Y!=null)switch(o){case"name":h=Y;break;case"type":_=Y;break;case"checked":R=Y;break;case"defaultChecked":B=Y;break;case"value":f=Y;break;case"defaultValue":E=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:yt(t,i,o,Y,a,null)}}bs(t,f,E,R,B,_,h,!1),ha(t);return;case"select":Ye("invalid",t),o=_=f=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":f=E;break;case"defaultValue":_=E;break;case"multiple":o=E;default:yt(t,i,h,E,a,null)}i=f,a=_,t.multiple=!!o,i!=null?Ki(t,!!o,i,!1):a!=null&&Ki(t,!!o,a,!0);return;case"textarea":Ye("invalid",t),f=h=o=null;for(_ in a)if(a.hasOwnProperty(_)&&(E=a[_],E!=null))switch(_){case"value":o=E;break;case"defaultValue":h=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:yt(t,i,_,E,a,null)}As(t,o,h,f),ha(t);return;case"option":for(R in a)if(a.hasOwnProperty(R)&&(o=a[R],o!=null))switch(R){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:yt(t,i,R,o,a,null)}return;case"dialog":Ye("beforetoggle",t),Ye("toggle",t),Ye("cancel",t),Ye("close",t);break;case"iframe":case"object":Ye("load",t);break;case"video":case"audio":for(o=0;o<cl.length;o++)Ye(cl[o],t);break;case"image":Ye("error",t),Ye("load",t);break;case"details":Ye("toggle",t);break;case"embed":case"source":case"link":Ye("error",t),Ye("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(o=a[B],o!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:yt(t,i,B,o,a,null)}return;default:if(Ro(i)){for(Y in a)a.hasOwnProperty(Y)&&(o=a[Y],o!==void 0&&sf(t,i,Y,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&yt(t,i,E,o,a,null))}function xT(t,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,_=null,E=null,R=null,B=null,Y=null;for(H in a){var Z=a[H];if(a.hasOwnProperty(H)&&Z!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":R=Z;default:o.hasOwnProperty(H)||yt(t,i,H,null,o,Z)}}for(var q in o){var H=o[q];if(Z=a[q],o.hasOwnProperty(q)&&(H!=null||Z!=null))switch(q){case"type":f=H;break;case"name":h=H;break;case"checked":B=H;break;case"defaultChecked":Y=H;break;case"value":_=H;break;case"defaultValue":E=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:H!==Z&&yt(t,i,q,H,o,Z)}}zn(t,_,E,R,B,Y,f,h);return;case"select":H=_=E=q=null;for(f in a)if(R=a[f],a.hasOwnProperty(f)&&R!=null)switch(f){case"value":break;case"multiple":H=R;default:o.hasOwnProperty(f)||yt(t,i,f,null,o,R)}for(h in o)if(f=o[h],R=a[h],o.hasOwnProperty(h)&&(f!=null||R!=null))switch(h){case"value":q=f;break;case"defaultValue":E=f;break;case"multiple":_=f;default:f!==R&&yt(t,i,h,f,o,R)}i=E,a=_,o=H,q!=null?Ki(t,!!a,q,!1):!!o!=!!a&&(i!=null?Ki(t,!!a,i,!0):Ki(t,!!a,a?[]:"",!1));return;case"textarea":H=q=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:yt(t,i,E,null,o,h)}for(_ in o)if(h=o[_],f=a[_],o.hasOwnProperty(_)&&(h!=null||f!=null))switch(_){case"value":q=h;break;case"defaultValue":H=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&yt(t,i,_,h,o,f)}gt(t,q,H);return;case"option":for(var Ne in a)if(q=a[Ne],a.hasOwnProperty(Ne)&&q!=null&&!o.hasOwnProperty(Ne))switch(Ne){case"selected":t.selected=!1;break;default:yt(t,i,Ne,null,o,q)}for(R in o)if(q=o[R],H=a[R],o.hasOwnProperty(R)&&q!==H&&(q!=null||H!=null))switch(R){case"selected":t.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:yt(t,i,R,q,o,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in a)q=a[Ie],a.hasOwnProperty(Ie)&&q!=null&&!o.hasOwnProperty(Ie)&&yt(t,i,Ie,null,o,q);for(B in o)if(q=o[B],H=a[B],o.hasOwnProperty(B)&&q!==H&&(q!=null||H!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,i));break;default:yt(t,i,B,q,o,H)}return;default:if(Ro(i)){for(var vt in a)q=a[vt],a.hasOwnProperty(vt)&&q!==void 0&&!o.hasOwnProperty(vt)&&sf(t,i,vt,void 0,o,q);for(Y in o)q=o[Y],H=a[Y],!o.hasOwnProperty(Y)||q===H||q===void 0&&H===void 0||sf(t,i,Y,q,o,H);return}}for(var U in a)q=a[U],a.hasOwnProperty(U)&&q!=null&&!o.hasOwnProperty(U)&&yt(t,i,U,null,o,q);for(Z in o)q=o[Z],H=a[Z],!o.hasOwnProperty(Z)||q===H||q==null&&H==null||yt(t,i,Z,q,o,H)}var af=null,of=null;function uc(t){return t.nodeType===9?t:t.ownerDocument}function Ky(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Yy(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function lf(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var uf=null;function DT(){var t=window.event;return t&&t.type==="popstate"?t===uf?!1:(uf=t,!0):(uf=null,!1)}var $y=typeof setTimeout=="function"?setTimeout:void 0,NT=typeof clearTimeout=="function"?clearTimeout:void 0,Xy=typeof Promise=="function"?Promise:void 0,OT=typeof queueMicrotask=="function"?queueMicrotask:typeof Xy<"u"?function(t){return Xy.resolve(null).then(t).catch(MT)}:$y;function MT(t){setTimeout(function(){throw t})}function Gr(t){return t==="head"}function Zy(t,i){var a=i,o=0,h=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<o&&8>o){a=o;var _=t.ownerDocument;if(a&1&&dl(_.documentElement),a&2&&dl(_.body),a&4)for(a=_.head,dl(a),_=a.firstChild;_;){var E=_.nextSibling,R=_.nodeName;_[Rt]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=E}}if(h===0){t.removeChild(f),El(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:o=a.charCodeAt(0)-48;else o=0;a=f}while(a);El(i)}function cf(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":cf(a),Ht(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function VT(t,i,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Rt])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=mi(t.nextSibling),t===null)break}return null}function PT(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=mi(t.nextSibling),t===null))return null;return t}function hf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function kT(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function mi(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var df=null;function Jy(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function Wy(t,i,a){switch(i=uc(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function dl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Ht(t)}var oi=new Map,ev=new Set;function cc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var dr=ae.d;ae.d={f:UT,r:LT,D:zT,C:jT,L:BT,m:qT,X:FT,S:HT,M:GT};function UT(){var t=dr.f(),i=tc();return t||i}function LT(t){var i=Nn(t);i!==null&&i.tag===5&&i.type==="form"?Ep(i):dr.r(t)}var Qa=typeof document>"u"?null:document;function tv(t,i,a){var o=Qa;if(o&&typeof i=="string"&&i){var h=Lt(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),ev.has(h)||(ev.add(h),t={rel:t,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),fn(i,"link",t),st(i),o.head.appendChild(i)))}}function zT(t){dr.D(t),tv("dns-prefetch",t,null)}function jT(t,i){dr.C(t,i),tv("preconnect",t,i)}function BT(t,i,a){dr.L(t,i,a);var o=Qa;if(o&&t&&i){var h='link[rel="preload"][as="'+Lt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Lt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Lt(a.imageSizes)+'"]')):h+='[href="'+Lt(t)+'"]';var f=h;switch(i){case"style":f=Ka(t);break;case"script":f=Ya(t)}oi.has(f)||(t=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),oi.set(f,t),o.querySelector(h)!==null||i==="style"&&o.querySelector(fl(f))||i==="script"&&o.querySelector(ml(f))||(i=o.createElement("link"),fn(i,"link",t),st(i),o.head.appendChild(i)))}}function qT(t,i){dr.m(t,i);var a=Qa;if(a&&t){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Lt(o)+'"][href="'+Lt(t)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Ya(t)}if(!oi.has(f)&&(t=T({rel:"modulepreload",href:t},i),oi.set(f,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ml(f)))return}o=a.createElement("link"),fn(o,"link",t),st(o),a.head.appendChild(o)}}}function HT(t,i,a){dr.S(t,i,a);var o=Qa;if(o&&t){var h=rt(o).hoistableStyles,f=Ka(t);i=i||"default";var _=h.get(f);if(!_){var E={loading:0,preload:null};if(_=o.querySelector(fl(f)))E.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":i},a),(a=oi.get(f))&&ff(t,a);var R=_=o.createElement("link");st(R),fn(R,"link",t),R._p=new Promise(function(B,Y){R.onload=B,R.onerror=Y}),R.addEventListener("load",function(){E.loading|=1}),R.addEventListener("error",function(){E.loading|=2}),E.loading|=4,hc(_,i,o)}_={type:"stylesheet",instance:_,count:1,state:E},h.set(f,_)}}}function FT(t,i){dr.X(t,i);var a=Qa;if(a&&t){var o=rt(a).hoistableScripts,h=Ya(t),f=o.get(h);f||(f=a.querySelector(ml(h)),f||(t=T({src:t,async:!0},i),(i=oi.get(h))&&mf(t,i),f=a.createElement("script"),st(f),fn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function GT(t,i){dr.M(t,i);var a=Qa;if(a&&t){var o=rt(a).hoistableScripts,h=Ya(t),f=o.get(h);f||(f=a.querySelector(ml(h)),f||(t=T({src:t,async:!0,type:"module"},i),(i=oi.get(h))&&mf(t,i),f=a.createElement("script"),st(f),fn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function nv(t,i,a,o){var h=(h=Se.current)?cc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ka(a.href),a=rt(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Ka(a.href);var f=rt(h).hoistableStyles,_=f.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,_),(f=h.querySelector(fl(t)))&&!f._p&&(_.instance=f,_.state.loading=5),oi.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},oi.set(t,a),f||QT(h,t,a,_.state))),i&&o===null)throw Error(s(528,""));return _}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ya(a),a=rt(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Ka(t){return'href="'+Lt(t)+'"'}function fl(t){return'link[rel="stylesheet"]['+t+"]"}function iv(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function QT(t,i,a,o){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=t.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),fn(i,"link",a),st(i),t.head.appendChild(i))}function Ya(t){return'[src="'+Lt(t)+'"]'}function ml(t){return"script[async]"+t}function rv(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=t.querySelector('style[data-href~="'+Lt(a.href)+'"]');if(o)return i.instance=o,st(o),o;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),st(o),fn(o,"style",h),hc(o,a.precedence,t),i.instance=o;case"stylesheet":h=Ka(a.href);var f=t.querySelector(fl(h));if(f)return i.state.loading|=4,i.instance=f,st(f),f;o=iv(a),(h=oi.get(h))&&ff(o,h),f=(t.ownerDocument||t).createElement("link"),st(f);var _=f;return _._p=new Promise(function(E,R){_.onload=E,_.onerror=R}),fn(f,"link",o),i.state.loading|=4,hc(f,a.precedence,t),i.instance=f;case"script":return f=Ya(a.src),(h=t.querySelector(ml(f)))?(i.instance=h,st(h),h):(o=a,(h=oi.get(f))&&(o=T({},a),mf(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),st(h),fn(h,"link",o),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,hc(o,a.precedence,t));return i.instance}function hc(t,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,_=0;_<o.length;_++){var E=o[_];if(E.dataset.precedence===i)f=E;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function ff(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function mf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var dc=null;function sv(t,i,a){if(dc===null){var o=new Map,h=dc=new Map;h.set(a,o)}else h=dc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[Rt]||f[xe]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var _=f.getAttribute(i)||"";_=t+_;var E=o.get(_);E?E.push(f):o.set(_,[f])}}return o}function av(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function KT(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function ov(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var gl=null;function YT(){}function $T(t,i,a){if(gl===null)throw Error(s(475));var o=gl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Ka(a.href),f=t.querySelector(fl(h));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(o.count++,o=fc.bind(o),t.then(o,o)),i.state.loading|=4,i.instance=f,st(f);return}f=t.ownerDocument||t,a=iv(a),(h=oi.get(h))&&ff(a,h),f=f.createElement("link"),st(f);var _=f;_._p=new Promise(function(E,R){_.onload=E,_.onerror=R}),fn(f,"link",a),i.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(o.count++,i=fc.bind(o),t.addEventListener("load",i),t.addEventListener("error",i))}}function XT(){if(gl===null)throw Error(s(475));var t=gl;return t.stylesheets&&t.count===0&&gf(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&gf(t,t.stylesheets),t.unsuspend){var o=t.unsuspend;t.unsuspend=null,o()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function fc(){if(this.count--,this.count===0){if(this.stylesheets)gf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var mc=null;function gf(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,mc=new Map,i.forEach(ZT,t),mc=null,fc.call(t))}function ZT(t,i){if(!(i.state.loading&4)){var a=mc.get(t);if(a)var o=a.get(null);else{a=new Map,mc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var _=h[f];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),o=_)}o&&a.set(null,o)}h=i.instance,_=h.getAttribute("data-precedence"),f=a.get(_)||o,f===o&&a.set(null,h),a.set(_,h),this.count++,o=fc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var pl={$$typeof:Ee,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function JT(t,i,a,o,h,f,_,E){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=A(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=A(0),this.hiddenUpdates=A(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function lv(t,i,a,o,h,f,_,E,R,B,Y,Z){return t=new JT(t,i,a,_,E,R,B,Z),i=1,f===!0&&(i|=24),f=Bn(3,null,null,i),t.current=f,f.stateNode=t,i=$h(),i.refCount++,t.pooledCache=i,i.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:i},Wh(f),t}function uv(t){return t?(t=Sa,t):Sa}function cv(t,i,a,o,h,f){h=uv(h),o.context===null?o.context=h:o.pendingContext=h,o=Or(i),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=Mr(t,o,i),a!==null&&(Qn(a,t,i),Qo(a,t,i))}function hv(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function pf(t,i){hv(t,i),(t=t.alternate)&&hv(t,i)}function dv(t){if(t.tag===13){var i=wa(t,67108864);i!==null&&Qn(i,t,67108864),pf(t,67108864)}}var gc=!0;function WT(t,i,a,o){var h=K.T;K.T=null;var f=ae.p;try{ae.p=2,yf(t,i,a,o)}finally{ae.p=f,K.T=h}}function eb(t,i,a,o){var h=K.T;K.T=null;var f=ae.p;try{ae.p=8,yf(t,i,a,o)}finally{ae.p=f,K.T=h}}function yf(t,i,a,o){if(gc){var h=vf(o);if(h===null)rf(t,i,o,pc,a),mv(t,o);else if(nb(h,t,i,a,o))o.stopPropagation();else if(mv(t,o),i&4&&-1<tb.indexOf(t)){for(;h!==null;){var f=Nn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var _=Ln(f.pendingLanes);if(_!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;_;){var R=1<<31-Jt(_);E.entanglements[1]|=R,_&=~R}Mi(f),(ft&6)===0&&(Wu=_t()+500,ul(0))}}break;case 13:E=wa(f,2),E!==null&&Qn(E,f,2),tc(),pf(f,2)}if(f=vf(o),f===null&&rf(t,i,o,pc,a),f===h)break;h=f}h!==null&&o.stopPropagation()}else rf(t,i,o,null,a)}}function vf(t){return t=Jn(t),_f(t)}var pc=null;function _f(t){if(pc=null,t=In(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=d(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return pc=t,null}function fv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zt()){case Ar:return 2;case Bi:return 8;case vi:case ra:return 32;case wr:return 268435456;default:return 32}default:return 32}}var Ef=!1,Qr=null,Kr=null,Yr=null,yl=new Map,vl=new Map,$r=[],tb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mv(t,i){switch(t){case"focusin":case"focusout":Qr=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Yr=null;break;case"pointerover":case"pointerout":yl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":vl.delete(i.pointerId)}}function _l(t,i,a,o,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},i!==null&&(i=Nn(i),i!==null&&dv(i)),t):(t.eventSystemFlags|=o,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function nb(t,i,a,o,h){switch(i){case"focusin":return Qr=_l(Qr,t,i,a,o,h),!0;case"dragenter":return Kr=_l(Kr,t,i,a,o,h),!0;case"mouseover":return Yr=_l(Yr,t,i,a,o,h),!0;case"pointerover":var f=h.pointerId;return yl.set(f,_l(yl.get(f)||null,t,i,a,o,h)),!0;case"gotpointercapture":return f=h.pointerId,vl.set(f,_l(vl.get(f)||null,t,i,a,o,h)),!0}return!1}function gv(t){var i=In(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){t.blockedOn=i,Ve(t.priority,function(){if(a.tag===13){var o=Gn();o=fe(o);var h=wa(a,o);h!==null&&Qn(h,a,o),pf(a,o)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=vf(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);Yi=o,a.target.dispatchEvent(o),Yi=null}else return i=Nn(a),i!==null&&dv(i),t.blockedOn=a,!1;i.shift()}return!0}function pv(t,i,a){yc(t)&&a.delete(i)}function ib(){Ef=!1,Qr!==null&&yc(Qr)&&(Qr=null),Kr!==null&&yc(Kr)&&(Kr=null),Yr!==null&&yc(Yr)&&(Yr=null),yl.forEach(pv),vl.forEach(pv)}function vc(t,i){t.blockedOn===i&&(t.blockedOn=null,Ef||(Ef=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,ib)))}var _c=null;function yv(t){_c!==t&&(_c=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){_c===t&&(_c=null);for(var i=0;i<t.length;i+=3){var a=t[i],o=t[i+1],h=t[i+2];if(typeof o!="function"){if(_f(o||a)===null)continue;break}var f=Nn(a);f!==null&&(t.splice(i,3),i-=3,vd(f,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function El(t){function i(R){return vc(R,t)}Qr!==null&&vc(Qr,t),Kr!==null&&vc(Kr,t),Yr!==null&&vc(Yr,t),yl.forEach(i),vl.forEach(i);for(var a=0;a<$r.length;a++){var o=$r[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<$r.length&&(a=$r[0],a.blockedOn===null);)gv(a),a.blockedOn===null&&$r.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],f=a[o+1],_=h[Re]||null;if(typeof f=="function")_||yv(a);else if(_){var E=null;if(f&&f.hasAttribute("formAction")){if(h=f,_=f[Re]||null)E=_.formAction;else if(_f(h)!==null)continue}else E=_.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),yv(a)}}}function Tf(t){this._internalRoot=t}Ec.prototype.render=Tf.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=Gn();cv(a,o,t,i,null,null)},Ec.prototype.unmount=Tf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;cv(t.current,2,null,t,null,null),tc(),i[$e]=null}};function Ec(t){this._internalRoot=t}Ec.prototype.unstable_scheduleHydration=function(t){if(t){var i=Te();t={blockedOn:null,target:t,priority:i};for(var a=0;a<$r.length&&i!==0&&i<$r[a].priority;a++);$r.splice(a,0,t),a===0&&gv(t)}};var vv=e.version;if(vv!=="19.1.0")throw Error(s(527,vv,"19.1.0"));ae.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(i),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var rb={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tc.isDisabled&&Tc.supportsFiber)try{It=Tc.inject(rb),lt=Tc}catch{}}return bl.createRoot=function(t,i){if(!l(t))throw Error(s(299));var a=!1,o="",h=Vp,f=Pp,_=kp,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=lv(t,1,!1,null,null,a,o,h,f,_,E,null),t[$e]=i.current,nf(t),new Tf(i)},bl.hydrateRoot=function(t,i,a){if(!l(t))throw Error(s(299));var o=!1,h="",f=Vp,_=Pp,E=kp,R=null,B=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(R=a.unstable_transitionCallbacks),a.formState!==void 0&&(B=a.formState)),i=lv(t,1,!0,i,a??null,o,h,f,_,E,R,B),i.context=uv(null),a=i.current,o=Gn(),o=fe(o),h=Or(o),h.callback=null,Mr(a,h,o),a=o,i.current.lanes=a,F(i,a),Mi(i),t[$e]=i.current,nf(t),new Ec(i)},bl.version="19.1.0",bl}var Cv;function gb(){if(Cv)return wf.exports;Cv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),wf.exports=mb(),wf.exports}var pb=gb();const yb=()=>{};var xv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},vb=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[n++];e[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[n++],d=r[n++],g=r[n++],p=((l&7)<<18|(c&63)<<12|(d&63)<<6|g&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const c=r[n++],d=r[n++];e[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return e.join("")},l0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],d=l+1<r.length,g=d?r[l+1]:0,p=l+2<r.length,y=p?r[l+2]:0,T=c>>2,I=(c&3)<<4|g>>4;let D=(g&15)<<2|y>>6,G=y&63;p||(G=64,d||(D=64)),s.push(n[T],n[I],n[D],n[G])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(o0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):vb(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=n[r.charAt(l++)],g=l<r.length?n[r.charAt(l)]:0;++l;const y=l<r.length?n[r.charAt(l)]:64;++l;const I=l<r.length?n[r.charAt(l)]:64;if(++l,c==null||g==null||y==null||I==null)throw new _b;const D=c<<2|g>>4;if(s.push(D),y!==64){const G=g<<4&240|y>>2;if(s.push(G),I!==64){const te=y<<6&192|I;s.push(te)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class _b extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Eb=function(r){const e=o0(r);return l0.encodeByteArray(e,!0)},zc=function(r){return Eb(r).replace(/\./g,"")},u0=function(r){try{return l0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb=()=>Tb().__FIREBASE_DEFAULTS__,Ab=()=>{if(typeof process>"u"||typeof xv>"u")return;const r=xv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},wb=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&u0(r[1]);return e&&JSON.parse(e)},sh=()=>{try{return yb()||bb()||Ab()||wb()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},c0=r=>{var e,n;return(n=(e=sh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[r]},Sb=r=>{const e=c0(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},h0=()=>{var r;return(r=sh())===null||r===void 0?void 0:r.config},d0=r=>{var e;return(e=sh())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(r){return r.endsWith(".cloudworkstations.dev")}async function f0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},r);return[zc(JSON.stringify(n)),zc(JSON.stringify(d)),""].join(".")}const Dl={};function Cb(){const r={prod:[],emulator:[]};for(const e of Object.keys(Dl))Dl[e]?r.emulator.push(e):r.prod.push(e);return r}function xb(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let Dv=!1;function m0(r,e){if(typeof window>"u"||typeof document>"u"||!go(window.location.host)||Dl[r]===e||Dl[r]||Dv)return;Dl[r]=e;function n(D){return`__firebase__banner__${D}`}const s="__firebase__banner",c=Cb().prod.length>0;function d(){const D=document.getElementById(s);D&&D.remove()}function g(D){D.style.display="flex",D.style.background="#7faaf0",D.style.position="fixed",D.style.bottom="5px",D.style.left="5px",D.style.padding=".5em",D.style.borderRadius="5px",D.style.alignItems="center"}function p(D,G){D.setAttribute("width","24"),D.setAttribute("id",G),D.setAttribute("height","24"),D.setAttribute("viewBox","0 0 24 24"),D.setAttribute("fill","none"),D.style.marginLeft="-6px"}function y(){const D=document.createElement("span");return D.style.cursor="pointer",D.style.marginLeft="16px",D.style.fontSize="24px",D.innerHTML=" &times;",D.onclick=()=>{Dv=!0,d()},D}function T(D,G){D.setAttribute("id",G),D.innerText="Learn more",D.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",D.setAttribute("target","__blank"),D.style.paddingLeft="5px",D.style.textDecoration="underline"}function I(){const D=xb(s),G=n("text"),te=document.getElementById(G)||document.createElement("span"),X=n("learnmore"),ne=document.getElementById(X)||document.createElement("a"),Me=n("preprendIcon"),Ae=document.getElementById(Me)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(D.created){const Ee=D.element;g(Ee),T(ne,X);const ze=y();p(Ae,Me),Ee.append(Ae,te,ne,ze),document.body.appendChild(Ee)}c?(te.innerText="Preview backend disconnected.",Ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,te.innerText="Preview backend running in this workspace."),te.setAttribute("id",G)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Db(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(An())}function Nb(){var r;const e=(r=sh())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ob(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Mb(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Vb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Pb(){const r=An();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function kb(){return!Nb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ub(){try{return typeof indexedDB=="object"}catch{return!1}}function Lb(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var c;e(((c=l.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="FirebaseError";class br extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=zb,Object.setPrototypeOf(this,br.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fl.prototype.create)}}class Fl{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},l=`${this.service}/${e}`,c=this.errors[e],d=c?jb(c,s):"Error",g=`${this.serviceName}: ${d} (${l}).`;return new br(l,g,s)}}function jb(r,e){return r.replace(Bb,(n,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const Bb=/\{\$([^}]+)}/g;function qb(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function $s(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const l of n){if(!s.includes(l))return!1;const c=r[l],d=e[l];if(Nv(c)&&Nv(d)){if(!$s(c,d))return!1}else if(c!==d)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function Nv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Hb(r,e){const n=new Fb(r,e);return n.subscribe.bind(n)}class Fb{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let l;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Gb(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:s},l.next===void 0&&(l.next=Cf),l.error===void 0&&(l.error=Cf),l.complete===void 0&&(l.complete=Cf);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Gb(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Cf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(r){return r&&r._delegate?r._delegate:r}class Xs{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Ib;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),l=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(l)return null;throw c}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Yb(e))try{this.getOrInitializeService({instanceIdentifier:Ks})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(e=Ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ks){return this.instances.has(e)}getOptions(e=Ks){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);s===g&&d.resolve(l)}return l}onInit(e,n){var s;const l=this.normalizeInstanceIdentifier(n),c=(s=this.onInitCallbacks.get(l))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(l,c);const d=this.instances.get(l);return d&&e(d,l),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Kb(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ks){return this.component?this.component.multipleInstances?e:Ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Kb(r){return r===Ks?void 0:r}function Yb(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Qb(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Xe||(Xe={}));const Xb={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},Zb=Xe.INFO,Jb={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},Wb=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),l=Jb[e];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mm{constructor(e){this.name=e,this._logLevel=Zb,this._logHandler=Wb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Xb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const eA=(r,e)=>e.some(n=>r instanceof n);let Ov,Mv;function tA(){return Ov||(Ov=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nA(){return Mv||(Mv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const g0=new WeakMap,jf=new WeakMap,p0=new WeakMap,xf=new WeakMap,gm=new WeakMap;function iA(r){const e=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{n(rs(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&g0.set(n,r)}).catch(()=>{}),gm.set(e,r),e}function rA(r){if(jf.has(r))return;const e=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{n(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});jf.set(r,e)}let Bf={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return jf.get(r);if(e==="objectStoreNames")return r.objectStoreNames||p0.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return rs(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function sA(r){Bf=r(Bf)}function aA(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(Df(this),e,...n);return p0.set(s,e.sort?e.sort():[e]),rs(s)}:nA().includes(r)?function(...e){return r.apply(Df(this),e),rs(g0.get(this))}:function(...e){return rs(r.apply(Df(this),e))}}function oA(r){return typeof r=="function"?aA(r):(r instanceof IDBTransaction&&rA(r),eA(r,tA())?new Proxy(r,Bf):r)}function rs(r){if(r instanceof IDBRequest)return iA(r);if(xf.has(r))return xf.get(r);const e=oA(r);return e!==r&&(xf.set(r,e),gm.set(e,r)),e}const Df=r=>gm.get(r);function lA(r,e,{blocked:n,upgrade:s,blocking:l,terminated:c}={}){const d=indexedDB.open(r,e),g=rs(d);return s&&d.addEventListener("upgradeneeded",p=>{s(rs(d.result),p.oldVersion,p.newVersion,rs(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{c&&p.addEventListener("close",()=>c()),l&&p.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const uA=["get","getKey","getAll","getAllKeys","count"],cA=["put","add","delete","clear"],Nf=new Map;function Vv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Nf.get(e))return Nf.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,l=cA.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||uA.includes(n)))return;const c=async function(d,...g){const p=this.transaction(d,l?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(g.shift())),(await Promise.all([y[n](...g),l&&p.done]))[0]};return Nf.set(e,c),c}sA(r=>({...r,get:(e,n,s)=>Vv(e,n)||r.get(e,n,s),has:(e,n)=>!!Vv(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(dA(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function dA(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qf="@firebase/app",Pv="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr=new mm("@firebase/app"),fA="@firebase/app-compat",mA="@firebase/analytics-compat",gA="@firebase/analytics",pA="@firebase/app-check-compat",yA="@firebase/app-check",vA="@firebase/auth",_A="@firebase/auth-compat",EA="@firebase/database",TA="@firebase/data-connect",bA="@firebase/database-compat",AA="@firebase/functions",wA="@firebase/functions-compat",SA="@firebase/installations",IA="@firebase/installations-compat",RA="@firebase/messaging",CA="@firebase/messaging-compat",xA="@firebase/performance",DA="@firebase/performance-compat",NA="@firebase/remote-config",OA="@firebase/remote-config-compat",MA="@firebase/storage",VA="@firebase/storage-compat",PA="@firebase/firestore",kA="@firebase/ai",UA="@firebase/firestore-compat",LA="firebase",zA="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf="[DEFAULT]",jA={[qf]:"fire-core",[fA]:"fire-core-compat",[gA]:"fire-analytics",[mA]:"fire-analytics-compat",[yA]:"fire-app-check",[pA]:"fire-app-check-compat",[vA]:"fire-auth",[_A]:"fire-auth-compat",[EA]:"fire-rtdb",[TA]:"fire-data-connect",[bA]:"fire-rtdb-compat",[AA]:"fire-fn",[wA]:"fire-fn-compat",[SA]:"fire-iid",[IA]:"fire-iid-compat",[RA]:"fire-fcm",[CA]:"fire-fcm-compat",[xA]:"fire-perf",[DA]:"fire-perf-compat",[NA]:"fire-rc",[OA]:"fire-rc-compat",[MA]:"fire-gcs",[VA]:"fire-gcs-compat",[PA]:"fire-fst",[UA]:"fire-fst-compat",[kA]:"fire-vertex","fire-js":"fire-js",[LA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=new Map,BA=new Map,Ff=new Map;function kv(r,e){try{r.container.addComponent(e)}catch(n){pr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function ao(r){const e=r.name;if(Ff.has(e))return pr.debug(`There were multiple attempts to register component ${e}.`),!1;Ff.set(e,r);for(const n of jc.values())kv(n,r);for(const n of BA.values())kv(n,r);return!0}function pm(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function li(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ss=new Fl("app","Firebase",qA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Xs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ss.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=zA;function y0(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Hf,automaticDataCollectionEnabled:!0},e),l=s.name;if(typeof l!="string"||!l)throw ss.create("bad-app-name",{appName:String(l)});if(n||(n=h0()),!n)throw ss.create("no-options");const c=jc.get(l);if(c){if($s(n,c.options)&&$s(s,c.config))return c;throw ss.create("duplicate-app",{appName:l})}const d=new $b(l);for(const p of Ff.values())d.addComponent(p);const g=new HA(n,s,d);return jc.set(l,g),g}function v0(r=Hf){const e=jc.get(r);if(!e&&r===Hf&&h0())return y0();if(!e)throw ss.create("no-app",{appName:r});return e}function as(r,e,n){var s;let l=(s=jA[r])!==null&&s!==void 0?s:r;n&&(l+=`-${n}`);const c=l.match(/\s|\//),d=e.match(/\s|\//);if(c||d){const g=[`Unable to register library "${l}" with version "${e}":`];c&&g.push(`library name "${l}" contains illegal characters (whitespace or "/")`),c&&d&&g.push("and"),d&&g.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pr.warn(g.join(" "));return}ao(new Xs(`${l}-version`,()=>({library:l,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA="firebase-heartbeat-database",GA=1,kl="firebase-heartbeat-store";let Of=null;function _0(){return Of||(Of=lA(FA,GA,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(kl)}catch(n){console.warn(n)}}}}).catch(r=>{throw ss.create("idb-open",{originalErrorMessage:r.message})})),Of}async function QA(r){try{const n=(await _0()).transaction(kl),s=await n.objectStore(kl).get(E0(r));return await n.done,s}catch(e){if(e instanceof br)pr.warn(e.message);else{const n=ss.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pr.warn(n.message)}}}async function Uv(r,e){try{const s=(await _0()).transaction(kl,"readwrite");await s.objectStore(kl).put(e,E0(r)),await s.done}catch(n){if(n instanceof br)pr.warn(n.message);else{const s=ss.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});pr.warn(s.message)}}}function E0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=1024,YA=30;class $A{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ZA(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Lv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>YA){const d=JA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){pr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Lv(),{heartbeatsToSend:s,unsentEntries:l}=XA(this._heartbeatsCache.heartbeats),c=zc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return pr.warn(n),""}}}function Lv(){return new Date().toISOString().substring(0,10)}function XA(r,e=KA){const n=[];let s=r.slice();for(const l of r){const c=n.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),zv(n)>e){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),zv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class ZA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ub()?Lb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await QA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return Uv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return Uv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...e.heartbeats]})}else return}}function zv(r){return zc(JSON.stringify({version:2,heartbeats:r})).length}function JA(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(r){ao(new Xs("platform-logger",e=>new hA(e),"PRIVATE")),ao(new Xs("heartbeat",e=>new $A(e),"PRIVATE")),as(qf,Pv,r),as(qf,Pv,"esm2017"),as("fire-js","")}WA("");var ew="firebase",tw="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */as(ew,tw,"app");function ym(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(r);l<s.length;l++)e.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(r,s[l])&&(n[s[l]]=r[s[l]]);return n}function T0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nw=T0,b0=new Fl("auth","Firebase",T0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=new mm("@firebase/auth");function iw(r,...e){Bc.logLevel<=Xe.WARN&&Bc.warn(`Auth (${po}): ${r}`,...e)}function xc(r,...e){Bc.logLevel<=Xe.ERROR&&Bc.error(`Auth (${po}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(r,...e){throw vm(r,...e)}function Pi(r,...e){return vm(r,...e)}function A0(r,e,n){const s=Object.assign(Object.assign({},nw()),{[e]:n});return new Fl("auth","Firebase",s).create(e,{appName:r.name})}function gr(r){return A0(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vm(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return b0.create(r,...e)}function Oe(r,e,...n){if(!r)throw vm(e,...n)}function fr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw xc(e),new Error(e)}function vr(r,e){r||fr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function rw(){return jv()==="http:"||jv()==="https:"}function jv(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rw()||Mb()||"connection"in navigator)?navigator.onLine:!0}function aw(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n){this.shortDelay=e,this.longDelay=n,vr(n>e,"Short delay should be less than long delay!"),this.isMobile=Db()||Vb()}get(){return sw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(r,e){vr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],uw=new Ql(3e4,6e4);function Kl(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function yo(r,e,n,s,l={}){return S0(r,l,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const g=Gl(Object.assign({key:r.config.apiKey},d)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const y=Object.assign({method:e,headers:p},c);return Ob()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&go(r.emulatorConfig.host)&&(y.credentials="include"),w0.fetch()(await I0(r,r.config.apiHost,n,g),y)})}async function S0(r,e,n){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},ow),e);try{const l=new cw(r),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw bc(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const g=c.ok?d.errorMessage:d.error.message,[p,y]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw bc(r,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw bc(r,"email-already-in-use",d);if(p==="USER_DISABLED")throw bc(r,"user-disabled",d);const T=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw A0(r,T,y);yr(r,T)}}catch(l){if(l instanceof br)throw l;yr(r,"network-request-failed",{message:String(l)})}}async function Em(r,e,n,s,l={}){const c=await yo(r,e,n,s,l);return"mfaPendingCredential"in c&&yr(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function I0(r,e,n,s){const l=`${e}${n}?${s}`,c=r,d=c.config.emulator?_m(r.config,l):`${r.config.apiScheme}://${l}`;return lw.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}class cw{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Pi(this.auth,"network-request-failed")),uw.get())})}}function bc(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=Pi(r,e,s);return l.customData._tokenResponse=n,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hw(r,e){return yo(r,"POST","/v1/accounts:delete",e)}async function qc(r,e){return yo(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dw(r,e=!1){const n=Xt(r),s=await n.getIdToken(e),l=Tm(s);Oe(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:l,token:s,authTime:Nl(Mf(l.auth_time)),issuedAtTime:Nl(Mf(l.iat)),expirationTime:Nl(Mf(l.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Mf(r){return Number(r)*1e3}function Tm(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return xc("JWT malformed, contained fewer than 3 sections"),null;try{const l=u0(n);return l?JSON.parse(l):(xc("Failed to decode base64 JWT payload"),null)}catch(l){return xc("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function Bv(r){const e=Tm(r);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ul(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof br&&fw(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function fw({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const l=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,l)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nl(this.lastLoginAt),this.creationTime=Nl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hc(r){var e;const n=r.auth,s=await r.getIdToken(),l=await Ul(r,qc(n,{idToken:s}));Oe(l==null?void 0:l.users.length,n,"internal-error");const c=l.users[0];r._notifyReloadListener(c);const d=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?R0(c.providerUserInfo):[],g=pw(r.providerData,d),p=r.isAnonymous,y=!(r.email&&c.passwordHash)&&!(g!=null&&g.length),T=p?y:!1,I={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:g,metadata:new Qf(c.createdAt,c.lastLoginAt),isAnonymous:T};Object.assign(r,I)}async function gw(r){const e=Xt(r);await Hc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pw(r,e){return[...r.filter(s=>!e.some(l=>l.providerId===s.providerId)),...e]}function R0(r){return r.map(e=>{var{providerId:n}=e,s=ym(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yw(r,e){const n=await S0(r,{},async()=>{const s=Gl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,d=await I0(r,l,"/v1/token",`key=${c}`),g=await r._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:s};return r.emulatorConfig&&go(r.emulatorConfig.host)&&(p.credentials="include"),w0.fetch()(d,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function vw(r,e){return yo(r,"POST","/v2/accounts:revokeToken",Kl(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Bv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const n=Bv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:l,expiresIn:c}=await yw(e,n);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:l,expirationTime:c}=n,d=new no;return s&&(Oe(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),l&&(Oe(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),c&&(Oe(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new no,this.toJSON())}_performRefresh(){return fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(r,e){Oe(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class gi{constructor(e){var{uid:n,auth:s,stsTokenManager:l}=e,c=ym(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=l,this.accessToken=l.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Qf(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const n=await Ul(this,this.stsTokenManager.getToken(this.auth,e));return Oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return dw(this,e)}reload(){return gw(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new gi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Hc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(li(this.auth.app))return Promise.reject(gr(this.auth));const e=await this.getIdToken();return await Ul(this,hw(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,l,c,d,g,p,y,T;const I=(s=n.displayName)!==null&&s!==void 0?s:void 0,D=(l=n.email)!==null&&l!==void 0?l:void 0,G=(c=n.phoneNumber)!==null&&c!==void 0?c:void 0,te=(d=n.photoURL)!==null&&d!==void 0?d:void 0,X=(g=n.tenantId)!==null&&g!==void 0?g:void 0,ne=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,Me=(y=n.createdAt)!==null&&y!==void 0?y:void 0,Ae=(T=n.lastLoginAt)!==null&&T!==void 0?T:void 0,{uid:Ee,emailVerified:ze,isAnonymous:we,providerData:Be,stsTokenManager:x}=n;Oe(Ee&&x,e,"internal-error");const w=no.fromJSON(this.name,x);Oe(typeof Ee=="string",e,"internal-error"),Zr(I,e.name),Zr(D,e.name),Oe(typeof ze=="boolean",e,"internal-error"),Oe(typeof we=="boolean",e,"internal-error"),Zr(G,e.name),Zr(te,e.name),Zr(X,e.name),Zr(ne,e.name),Zr(Me,e.name),Zr(Ae,e.name);const S=new gi({uid:Ee,auth:e,email:D,emailVerified:ze,displayName:I,isAnonymous:we,photoURL:te,phoneNumber:G,tenantId:X,stsTokenManager:w,createdAt:Me,lastLoginAt:Ae});return Be&&Array.isArray(Be)&&(S.providerData=Be.map(O=>Object.assign({},O))),ne&&(S._redirectEventId=ne),S}static async _fromIdTokenResponse(e,n,s=!1){const l=new no;l.updateFromServerResponse(n);const c=new gi({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:s});return await Hc(c),c}static async _fromGetAccountInfoResponse(e,n,s){const l=n.users[0];Oe(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?R0(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!(c!=null&&c.length),g=new no;g.updateFromIdToken(s);const p=new gi({uid:l.localId,auth:e,stsTokenManager:g,isAnonymous:d}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new Qf(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(c!=null&&c.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=new Map;function mr(r){vr(r instanceof Function,"Expected a class definition");let e=qv.get(r);return e?(vr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,qv.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}C0.type="NONE";const Hv=C0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(r,e,n){return`firebase:${r}:${e}:${n}`}class io{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=Dc(this.userKey,l.apiKey,c),this.fullPersistenceKey=Dc("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await qc(this.auth,{idToken:e}).catch(()=>{});return n?gi._fromGetAccountInfoResponse(this.auth,n,e):null}return gi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new io(mr(Hv),e,s);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=l[0]||mr(Hv);const d=Dc(s,e.config.apiKey,e.name);let g=null;for(const y of n)try{const T=await y._get(d);if(T){let I;if(typeof T=="string"){const D=await qc(e,{idToken:T}).catch(()=>{});if(!D)break;I=await gi._fromGetAccountInfoResponse(e,D,T)}else I=gi._fromJSON(e,T);y!==c&&(g=I),c=y;break}}catch{}const p=l.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new io(c,e,s):(c=p[0],g&&await c._set(d,g.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new io(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(O0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(x0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(V0(e))return"Blackberry";if(P0(e))return"Webos";if(D0(e))return"Safari";if((e.includes("chrome/")||N0(e))&&!e.includes("edge/"))return"Chrome";if(M0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function x0(r=An()){return/firefox\//i.test(r)}function D0(r=An()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function N0(r=An()){return/crios\//i.test(r)}function O0(r=An()){return/iemobile/i.test(r)}function M0(r=An()){return/android/i.test(r)}function V0(r=An()){return/blackberry/i.test(r)}function P0(r=An()){return/webos/i.test(r)}function bm(r=An()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function _w(r=An()){var e;return bm(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Ew(){return Pb()&&document.documentMode===10}function k0(r=An()){return bm(r)||M0(r)||P0(r)||V0(r)||/windows phone/i.test(r)||O0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(r,e=[]){let n;switch(r){case"Browser":n=Fv(An());break;case"Worker":n=`${Fv(An())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${po}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((d,g)=>{try{const p=e(c);d(p)}catch(p){g(p)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bw(r,e={}){return yo(r,"GET","/v2/passwordPolicy",Kl(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw=6;class ww{constructor(e){var n,s,l,c;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=d.minPasswordLength)!==null&&n!==void 0?n:Aw,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(l=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&l!==void 0?l:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,l,c,d,g;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(l=p.containsLowercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsUppercaseLetter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNumericCharacter)!==null&&d!==void 0?d:!0),p.isValid&&(p.isValid=(g=p.containsNonAlphanumericCharacter)!==null&&g!==void 0?g:!0),p}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<e.length;l++)s=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,n,s,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gv(this),this.idTokenSubscription=new Gv(this),this.beforeStateQueue=new Tw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=b0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=mr(n)),this._initializationPromise=this.queue(async()=>{var s,l,c;if(!this._deleted&&(this.persistenceManager=await io.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((l=this._popupRedirectResolver)===null||l===void 0)&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await qc(this,{idToken:e}),s=await gi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(li(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(g,g))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let l=s,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,g=l==null?void 0:l._redirectEventId,p=await this.tryRedirectSignIn(e);(!d||d===g)&&(p!=null&&p.user)&&(l=p.user,c=!0)}if(!l)return this.directlySetCurrentUser(null);if(!l._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(l)}catch(d){l=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return l?this.reloadAndSetCurrentUserOrClear(l):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===l._redirectEventId?this.directlySetCurrentUser(l):this.reloadAndSetCurrentUserOrClear(l)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=aw()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(li(this.app))return Promise.reject(gr(this));const n=e?Xt(e):null;return n&&Oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return li(this.app)?Promise.reject(gr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return li(this.app)?Promise.reject(gr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(mr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bw(this),n=new ww(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Fl("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await vw(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&mr(e)||this._popupRedirectResolver;Oe(n,this,"argument-error"),this.redirectPersistenceManager=await io.create(this,[mr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(g,this,"internal-error"),g.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,l);return()=>{d=!0,p()}}else{const p=e.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=U0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const l=await this._getAppCheckToken();return l&&(n["X-Firebase-AppCheck"]=l),n}async _getAppCheckToken(){var e;if(li(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&iw(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Yl(r){return Xt(r)}class Gv{constructor(e){this.auth=e,this.observer=null,this.addObserver=Hb(n=>this.observer=n)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Am={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Iw(r){Am=r}function Rw(r){return Am.loadJS(r)}function Cw(){return Am.gapiScript}function xw(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(r,e){const n=pm(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if($s(c,e??{}))return l;yr(l,"already-initialized")}return n.initialize({options:e})}function Nw(r,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(mr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function Ow(r,e,n){const s=Yl(r);Oe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const l=!1,c=L0(e),{host:d,port:g}=Mw(e),p=g===null?"":`:${g}`,y={url:`${c}//${d}${p}/`},T=Object.freeze({host:d,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){Oe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Oe($s(y,s.config.emulator)&&$s(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,go(d)?(f0(`${c}//${d}${p}`),m0("Auth",!0)):Vw()}function L0(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function Mw(r){const e=L0(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:Qv(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:Qv(d)}}}function Qv(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function Vw(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return fr("not implemented")}_getIdTokenResponse(e){return fr("not implemented")}_linkToIdToken(e,n){return fr("not implemented")}_getReauthenticationResolver(e){return fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ro(r,e){return Em(r,"POST","/v1/accounts:signInWithIdp",Kl(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw="http://localhost";class Zs extends z0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Zs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):yr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:l}=n,c=ym(n,["providerId","signInMethod"]);if(!s||!l)return null;const d=new Zs(s,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return ro(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,ro(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ro(e,n)}buildRequest(){const e={requestUri:Pw,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Gl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l extends j0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends $l{constructor(){super("facebook.com")}static credential(e){return Zs._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends $l{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Zs._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return es.credential(n,s)}catch{return null}}}es.GOOGLE_SIGN_IN_METHOD="google.com";es.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends $l{constructor(){super("github.com")}static credential(e){return Zs._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.GITHUB_SIGN_IN_METHOD="github.com";ts.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends $l{constructor(){super("twitter.com")}static credential(e,n){return Zs._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ns.credential(n,s)}catch{return null}}}ns.TWITTER_SIGN_IN_METHOD="twitter.com";ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kw(r,e){return Em(r,"POST","/v1/accounts:signUp",Kl(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,l=!1){const c=await gi._fromIdTokenResponse(e,s,l),d=Kv(s);return new _r({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const l=Kv(s);return new _r({user:e,providerId:l,_tokenResponse:s,operationType:n})}}function Kv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uw(r){var e;if(li(r.app))return Promise.reject(gr(r));const n=Yl(r);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new _r({user:n.currentUser,providerId:null,operationType:"signIn"});const s=await kw(n,{returnSecureToken:!0}),l=await _r._fromIdTokenResponse(n,"signIn",s,!0);return await n._updateCurrentUser(l.user),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc extends br{constructor(e,n,s,l){var c;super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,Fc.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,l){return new Fc(e,n,s,l)}}function B0(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Fc._fromErrorAndOperation(r,c,e,s):c})}async function Lw(r,e,n=!1){const s=await Ul(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return _r._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zw(r,e,n=!1){const{auth:s}=r;if(li(s.app))return Promise.reject(gr(s));const l="reauthenticate";try{const c=await Ul(r,B0(s,l,e,r),n);Oe(c.idToken,s,"internal-error");const d=Tm(c.idToken);Oe(d,s,"internal-error");const{sub:g}=d;return Oe(r.uid===g,s,"user-mismatch"),_r._forOperation(r,l,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&yr(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jw(r,e,n=!1){if(li(r.app))return Promise.reject(gr(r));const s="signIn",l=await B0(r,s,e),c=await _r._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(c.user),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bw(r,e){return Em(r,"POST","/v1/accounts:signInWithCustomToken",Kl(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qw(r,e){if(li(r.app))return Promise.reject(gr(r));const n=Yl(r),s=await Bw(n,{token:e,returnSecureToken:!0}),l=await _r._fromIdTokenResponse(n,"signIn",s);return await n._updateCurrentUser(l.user),l}function Hw(r,e,n,s){return Xt(r).onIdTokenChanged(e,n,s)}function Fw(r,e,n){return Xt(r).beforeAuthStateChanged(e,n)}function Gw(r,e,n,s){return Xt(r).onAuthStateChanged(e,n,s)}const Gc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gc,"1"),this.storage.removeItem(Gc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw=1e3,Kw=10;class H0 extends q0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=k0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&e(n,l,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,g,p)=>{this.notifyListeners(d,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);Ew()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,Kw):l()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Qw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}H0.type="LOCAL";const Yw=H0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0 extends q0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}F0.type="SESSION";const G0=F0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const s=new ah(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:l,data:c}=n.data,d=this.handlersMap[l];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const g=Array.from(d).map(async y=>y(n.origin,c)),p=await $w(g);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ah.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((g,p)=>{const y=wm("",20);l.port1.start();const T=setTimeout(()=>{p(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(I){const D=I;if(D.data.eventId===y)switch(D.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(D.data.response);break;default:clearTimeout(T),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(){return window}function Zw(r){ki().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(){return typeof ki().WorkerGlobalScope<"u"&&typeof ki().importScripts=="function"}async function Jw(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ww(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function eS(){return Q0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="firebaseLocalStorageDb",tS=1,Qc="firebaseLocalStorage",Y0="fbase_key";class Xl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function oh(r,e){return r.transaction([Qc],e?"readwrite":"readonly").objectStore(Qc)}function nS(){const r=indexedDB.deleteDatabase(K0);return new Xl(r).toPromise()}function Kf(){const r=indexedDB.open(K0,tS);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Qc,{keyPath:Y0})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Qc)?e(s):(s.close(),await nS(),e(await Kf()))})})}async function Yv(r,e,n){const s=oh(r,!0).put({[Y0]:e,value:n});return new Xl(s).toPromise()}async function iS(r,e){const n=oh(r,!1).get(e),s=await new Xl(n).toPromise();return s===void 0?null:s.value}function $v(r,e){const n=oh(r,!0).delete(e);return new Xl(n).toPromise()}const rS=800,sS=3;class $0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>sS)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Q0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ah._getInstance(eS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Jw(),!this.activeServiceWorker)return;this.sender=new Xw(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ww()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kf();return await Yv(e,Gc,"1"),await $v(e,Gc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Yv(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>iS(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$v(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=oh(l,!1).getAll();return new Xl(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$0.type="LOCAL";const aS=$0;new Ql(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(r,e){return e?mr(e):(Oe(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm extends z0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ro(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ro(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ro(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function lS(r){return jw(r.auth,new Sm(r),r.bypassAuthState)}function uS(r){const{auth:e,user:n}=r;return Oe(n,e,"internal-error"),zw(n,new Sm(r),r.bypassAuthState)}async function cS(r){const{auth:e,user:n}=r;return Oe(n,e,"internal-error"),Lw(n,new Sm(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,n,s,l,c=!1){this.auth=e,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:l,tenantId:c,error:d,type:g}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lS;case"linkViaPopup":case"linkViaRedirect":return cS;case"reauthViaPopup":case"reauthViaRedirect":return uS;default:yr(this.auth,"internal-error")}}resolve(e){vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS=new Ql(2e3,1e4);class to extends X0{constructor(e,n,s,l,c){super(e,n,l,c),this.provider=s,this.authWindow=null,this.pollId=null,to.currentPopupAction&&to.currentPopupAction.cancel(),to.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){vr(this.filter.length===1,"Popup operations only handle one event");const e=wm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,to.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hS.get())};e()}}to.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS="pendingRedirect",Nc=new Map;class fS extends X0{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Nc.get(this.auth._key());if(!e){try{const s=await mS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Nc.set(this.auth._key(),e)}return this.bypassAuthState||Nc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mS(r,e){const n=yS(e),s=pS(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function gS(r,e){Nc.set(r._key(),e)}function pS(r){return mr(r._redirectPersistence)}function yS(r){return Dc(dS,r.config.apiKey,r.name)}async function vS(r,e,n=!1){if(li(r.app))return Promise.reject(gr(r));const s=Yl(r),l=oS(s,e),d=await new fS(s,l,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S=10*60*1e3;class ES{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!TS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!Z0(e)){const l=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Pi(this.auth,l))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_S&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xv(e))}saveEventToCache(e){this.cachedEventUids.add(Xv(e)),this.lastProcessedEventTime=Date.now()}}function Xv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Z0({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function TS(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Z0(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bS(r,e={}){return yo(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wS=/^https?/;async function SS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await bS(r);for(const n of e)try{if(IS(n))return}catch{}yr(r,"unauthorized-domain")}function IS(r){const e=Gf(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!wS.test(n))return!1;if(AS.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=new Ql(3e4,6e4);function Zv(){const r=ki().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function CS(r){return new Promise((e,n)=>{var s,l,c;function d(){Zv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Zv(),n(Pi(r,"network-request-failed"))},timeout:RS.get()})}if(!((l=(s=ki().gapi)===null||s===void 0?void 0:s.iframes)===null||l===void 0)&&l.Iframe)e(gapi.iframes.getContext());else if(!((c=ki().gapi)===null||c===void 0)&&c.load)d();else{const g=xw("iframefcb");return ki()[g]=()=>{gapi.load?d():n(Pi(r,"network-request-failed"))},Rw(`${Cw()}?onload=${g}`).catch(p=>n(p))}}).catch(e=>{throw Oc=null,e})}let Oc=null;function xS(r){return Oc=Oc||CS(r),Oc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS=new Ql(5e3,15e3),NS="__/auth/iframe",OS="emulator/auth/iframe",MS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PS(r){const e=r.config;Oe(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?_m(e,OS):`https://${r.config.authDomain}/${NS}`,s={apiKey:e.apiKey,appName:r.name,v:po},l=VS.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${Gl(s).slice(1)}`}async function kS(r){const e=await xS(r),n=ki().gapi;return Oe(n,r,"internal-error"),e.open({where:document.body,url:PS(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MS,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const d=Pi(r,"network-request-failed"),g=ki().setTimeout(()=>{c(d)},DS.get());function p(){ki().clearTimeout(g),l(s)}s.ping(p).then(p,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LS=500,zS=600,jS="_blank",BS="http://localhost";class Jv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qS(r,e,n,s=LS,l=zS){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const p=Object.assign(Object.assign({},US),{width:s.toString(),height:l.toString(),top:c,left:d}),y=An().toLowerCase();n&&(g=N0(y)?jS:n),x0(y)&&(e=e||BS,p.scrollbars="yes");const T=Object.entries(p).reduce((D,[G,te])=>`${D}${G}=${te},`,"");if(_w(y)&&g!=="_self")return HS(e||"",g),new Jv(null);const I=window.open(e||"",g,T);Oe(I,r,"popup-blocked");try{I.focus()}catch{}return new Jv(I)}function HS(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="__/auth/handler",GS="emulator/auth/handler",QS=encodeURIComponent("fac");async function Wv(r,e,n,s,l,c){Oe(r.config.authDomain,r,"auth-domain-config-required"),Oe(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:po,eventId:l};if(e instanceof j0){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",qb(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,I]of Object.entries({}))d[T]=I}if(e instanceof $l){const T=e.getScopes().filter(I=>I!=="");T.length>0&&(d.scopes=T.join(","))}r.tenantId&&(d.tid=r.tenantId);const g=d;for(const T of Object.keys(g))g[T]===void 0&&delete g[T];const p=await r._getAppCheckToken(),y=p?`#${QS}=${encodeURIComponent(p)}`:"";return`${KS(r)}?${Gl(g).slice(1)}${y}`}function KS({config:r}){return r.emulator?_m(r,GS):`https://${r.authDomain}/${FS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf="webStorageSupport";class YS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=G0,this._completeRedirectFn=vS,this._overrideRedirectResult=gS}async _openPopup(e,n,s,l){var c;vr((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const d=await Wv(e,n,s,Gf(),l);return qS(e,d,wm())}async _openRedirect(e,n,s,l){await this._originValidation(e);const c=await Wv(e,n,s,Gf(),l);return Zw(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(vr(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await kS(e),s=new ES(e);return n.register("authEvent",l=>(Oe(l==null?void 0:l.authEvent,e,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Vf,{type:Vf},l=>{var c;const d=(c=l==null?void 0:l[0])===null||c===void 0?void 0:c[Vf];d!==void 0&&n(!!d),yr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=SS(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return k0()||D0()||bm()}}const $S=YS;var e_="@firebase/auth",t_="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JS(r){ao(new Xs("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=s.options;Oe(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:d,authDomain:g,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:U0(r)},y=new Sw(s,l,c,p);return Nw(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),ao(new Xs("auth-internal",e=>{const n=Yl(e.getProvider("auth").getImmediate());return(s=>new XS(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),as(e_,t_,ZS(r)),as(e_,t_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=5*60,eI=d0("authIdTokenMaxAge")||WS;let n_=null;const tI=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>eI)return;const l=n==null?void 0:n.token;n_!==l&&(n_=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function nI(r=v0()){const e=pm(r,"auth");if(e.isInitialized())return e.getImmediate();const n=Dw(r,{popupRedirectResolver:$S,persistence:[aS,Yw,G0]}),s=d0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=tI(c.toString());Fw(n,d,()=>d(n.currentUser)),Hw(n,g=>d(g))}}const l=c0("auth");return l&&Ow(n,`http://${l}`),n}function iI(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}Iw({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=l=>{const c=Pi("internal-error");c.customData=l,n(c)},s.type="text/javascript",s.charset="UTF-8",iI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JS("Browser");var i_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var os,J0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,w){function S(){}S.prototype=w.prototype,x.D=w.prototype,x.prototype=new S,x.prototype.constructor=x,x.C=function(O,V,k){for(var C=Array(arguments.length-2),Nt=2;Nt<arguments.length;Nt++)C[Nt-2]=arguments[Nt];return w.prototype[V].apply(O,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(x,w,S){S||(S=0);var O=Array(16);if(typeof w=="string")for(var V=0;16>V;++V)O[V]=w.charCodeAt(S++)|w.charCodeAt(S++)<<8|w.charCodeAt(S++)<<16|w.charCodeAt(S++)<<24;else for(V=0;16>V;++V)O[V]=w[S++]|w[S++]<<8|w[S++]<<16|w[S++]<<24;w=x.g[0],S=x.g[1],V=x.g[2];var k=x.g[3],C=w+(k^S&(V^k))+O[0]+3614090360&4294967295;w=S+(C<<7&4294967295|C>>>25),C=k+(V^w&(S^V))+O[1]+3905402710&4294967295,k=w+(C<<12&4294967295|C>>>20),C=V+(S^k&(w^S))+O[2]+606105819&4294967295,V=k+(C<<17&4294967295|C>>>15),C=S+(w^V&(k^w))+O[3]+3250441966&4294967295,S=V+(C<<22&4294967295|C>>>10),C=w+(k^S&(V^k))+O[4]+4118548399&4294967295,w=S+(C<<7&4294967295|C>>>25),C=k+(V^w&(S^V))+O[5]+1200080426&4294967295,k=w+(C<<12&4294967295|C>>>20),C=V+(S^k&(w^S))+O[6]+2821735955&4294967295,V=k+(C<<17&4294967295|C>>>15),C=S+(w^V&(k^w))+O[7]+4249261313&4294967295,S=V+(C<<22&4294967295|C>>>10),C=w+(k^S&(V^k))+O[8]+1770035416&4294967295,w=S+(C<<7&4294967295|C>>>25),C=k+(V^w&(S^V))+O[9]+2336552879&4294967295,k=w+(C<<12&4294967295|C>>>20),C=V+(S^k&(w^S))+O[10]+4294925233&4294967295,V=k+(C<<17&4294967295|C>>>15),C=S+(w^V&(k^w))+O[11]+2304563134&4294967295,S=V+(C<<22&4294967295|C>>>10),C=w+(k^S&(V^k))+O[12]+1804603682&4294967295,w=S+(C<<7&4294967295|C>>>25),C=k+(V^w&(S^V))+O[13]+4254626195&4294967295,k=w+(C<<12&4294967295|C>>>20),C=V+(S^k&(w^S))+O[14]+2792965006&4294967295,V=k+(C<<17&4294967295|C>>>15),C=S+(w^V&(k^w))+O[15]+1236535329&4294967295,S=V+(C<<22&4294967295|C>>>10),C=w+(V^k&(S^V))+O[1]+4129170786&4294967295,w=S+(C<<5&4294967295|C>>>27),C=k+(S^V&(w^S))+O[6]+3225465664&4294967295,k=w+(C<<9&4294967295|C>>>23),C=V+(w^S&(k^w))+O[11]+643717713&4294967295,V=k+(C<<14&4294967295|C>>>18),C=S+(k^w&(V^k))+O[0]+3921069994&4294967295,S=V+(C<<20&4294967295|C>>>12),C=w+(V^k&(S^V))+O[5]+3593408605&4294967295,w=S+(C<<5&4294967295|C>>>27),C=k+(S^V&(w^S))+O[10]+38016083&4294967295,k=w+(C<<9&4294967295|C>>>23),C=V+(w^S&(k^w))+O[15]+3634488961&4294967295,V=k+(C<<14&4294967295|C>>>18),C=S+(k^w&(V^k))+O[4]+3889429448&4294967295,S=V+(C<<20&4294967295|C>>>12),C=w+(V^k&(S^V))+O[9]+568446438&4294967295,w=S+(C<<5&4294967295|C>>>27),C=k+(S^V&(w^S))+O[14]+3275163606&4294967295,k=w+(C<<9&4294967295|C>>>23),C=V+(w^S&(k^w))+O[3]+4107603335&4294967295,V=k+(C<<14&4294967295|C>>>18),C=S+(k^w&(V^k))+O[8]+1163531501&4294967295,S=V+(C<<20&4294967295|C>>>12),C=w+(V^k&(S^V))+O[13]+2850285829&4294967295,w=S+(C<<5&4294967295|C>>>27),C=k+(S^V&(w^S))+O[2]+4243563512&4294967295,k=w+(C<<9&4294967295|C>>>23),C=V+(w^S&(k^w))+O[7]+1735328473&4294967295,V=k+(C<<14&4294967295|C>>>18),C=S+(k^w&(V^k))+O[12]+2368359562&4294967295,S=V+(C<<20&4294967295|C>>>12),C=w+(S^V^k)+O[5]+4294588738&4294967295,w=S+(C<<4&4294967295|C>>>28),C=k+(w^S^V)+O[8]+2272392833&4294967295,k=w+(C<<11&4294967295|C>>>21),C=V+(k^w^S)+O[11]+1839030562&4294967295,V=k+(C<<16&4294967295|C>>>16),C=S+(V^k^w)+O[14]+4259657740&4294967295,S=V+(C<<23&4294967295|C>>>9),C=w+(S^V^k)+O[1]+2763975236&4294967295,w=S+(C<<4&4294967295|C>>>28),C=k+(w^S^V)+O[4]+1272893353&4294967295,k=w+(C<<11&4294967295|C>>>21),C=V+(k^w^S)+O[7]+4139469664&4294967295,V=k+(C<<16&4294967295|C>>>16),C=S+(V^k^w)+O[10]+3200236656&4294967295,S=V+(C<<23&4294967295|C>>>9),C=w+(S^V^k)+O[13]+681279174&4294967295,w=S+(C<<4&4294967295|C>>>28),C=k+(w^S^V)+O[0]+3936430074&4294967295,k=w+(C<<11&4294967295|C>>>21),C=V+(k^w^S)+O[3]+3572445317&4294967295,V=k+(C<<16&4294967295|C>>>16),C=S+(V^k^w)+O[6]+76029189&4294967295,S=V+(C<<23&4294967295|C>>>9),C=w+(S^V^k)+O[9]+3654602809&4294967295,w=S+(C<<4&4294967295|C>>>28),C=k+(w^S^V)+O[12]+3873151461&4294967295,k=w+(C<<11&4294967295|C>>>21),C=V+(k^w^S)+O[15]+530742520&4294967295,V=k+(C<<16&4294967295|C>>>16),C=S+(V^k^w)+O[2]+3299628645&4294967295,S=V+(C<<23&4294967295|C>>>9),C=w+(V^(S|~k))+O[0]+4096336452&4294967295,w=S+(C<<6&4294967295|C>>>26),C=k+(S^(w|~V))+O[7]+1126891415&4294967295,k=w+(C<<10&4294967295|C>>>22),C=V+(w^(k|~S))+O[14]+2878612391&4294967295,V=k+(C<<15&4294967295|C>>>17),C=S+(k^(V|~w))+O[5]+4237533241&4294967295,S=V+(C<<21&4294967295|C>>>11),C=w+(V^(S|~k))+O[12]+1700485571&4294967295,w=S+(C<<6&4294967295|C>>>26),C=k+(S^(w|~V))+O[3]+2399980690&4294967295,k=w+(C<<10&4294967295|C>>>22),C=V+(w^(k|~S))+O[10]+4293915773&4294967295,V=k+(C<<15&4294967295|C>>>17),C=S+(k^(V|~w))+O[1]+2240044497&4294967295,S=V+(C<<21&4294967295|C>>>11),C=w+(V^(S|~k))+O[8]+1873313359&4294967295,w=S+(C<<6&4294967295|C>>>26),C=k+(S^(w|~V))+O[15]+4264355552&4294967295,k=w+(C<<10&4294967295|C>>>22),C=V+(w^(k|~S))+O[6]+2734768916&4294967295,V=k+(C<<15&4294967295|C>>>17),C=S+(k^(V|~w))+O[13]+1309151649&4294967295,S=V+(C<<21&4294967295|C>>>11),C=w+(V^(S|~k))+O[4]+4149444226&4294967295,w=S+(C<<6&4294967295|C>>>26),C=k+(S^(w|~V))+O[11]+3174756917&4294967295,k=w+(C<<10&4294967295|C>>>22),C=V+(w^(k|~S))+O[2]+718787259&4294967295,V=k+(C<<15&4294967295|C>>>17),C=S+(k^(V|~w))+O[9]+3951481745&4294967295,x.g[0]=x.g[0]+w&4294967295,x.g[1]=x.g[1]+(V+(C<<21&4294967295|C>>>11))&4294967295,x.g[2]=x.g[2]+V&4294967295,x.g[3]=x.g[3]+k&4294967295}s.prototype.u=function(x,w){w===void 0&&(w=x.length);for(var S=w-this.blockSize,O=this.B,V=this.h,k=0;k<w;){if(V==0)for(;k<=S;)l(this,x,k),k+=this.blockSize;if(typeof x=="string"){for(;k<w;)if(O[V++]=x.charCodeAt(k++),V==this.blockSize){l(this,O),V=0;break}}else for(;k<w;)if(O[V++]=x[k++],V==this.blockSize){l(this,O),V=0;break}}this.h=V,this.o+=w},s.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var w=1;w<x.length-8;++w)x[w]=0;var S=8*this.o;for(w=x.length-8;w<x.length;++w)x[w]=S&255,S/=256;for(this.u(x),x=Array(16),w=S=0;4>w;++w)for(var O=0;32>O;O+=8)x[S++]=this.g[w]>>>O&255;return x};function c(x,w){var S=g;return Object.prototype.hasOwnProperty.call(S,x)?S[x]:S[x]=w(x)}function d(x,w){this.h=w;for(var S=[],O=!0,V=x.length-1;0<=V;V--){var k=x[V]|0;O&&k==w||(S[V]=k,O=!1)}this.g=S}var g={};function p(x){return-128<=x&&128>x?c(x,function(w){return new d([w|0],0>w?-1:0)}):new d([x|0],0>x?-1:0)}function y(x){if(isNaN(x)||!isFinite(x))return I;if(0>x)return ne(y(-x));for(var w=[],S=1,O=0;x>=S;O++)w[O]=x/S|0,S*=4294967296;return new d(w,0)}function T(x,w){if(x.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(x.charAt(0)=="-")return ne(T(x.substring(1),w));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=y(Math.pow(w,8)),O=I,V=0;V<x.length;V+=8){var k=Math.min(8,x.length-V),C=parseInt(x.substring(V,V+k),w);8>k?(k=y(Math.pow(w,k)),O=O.j(k).add(y(C))):(O=O.j(S),O=O.add(y(C)))}return O}var I=p(0),D=p(1),G=p(16777216);r=d.prototype,r.m=function(){if(X(this))return-ne(this).m();for(var x=0,w=1,S=0;S<this.g.length;S++){var O=this.i(S);x+=(0<=O?O:4294967296+O)*w,w*=4294967296}return x},r.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(te(this))return"0";if(X(this))return"-"+ne(this).toString(x);for(var w=y(Math.pow(x,6)),S=this,O="";;){var V=ze(S,w).g;S=Me(S,V.j(w));var k=((0<S.g.length?S.g[0]:S.h)>>>0).toString(x);if(S=V,te(S))return k+O;for(;6>k.length;)k="0"+k;O=k+O}},r.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function te(x){if(x.h!=0)return!1;for(var w=0;w<x.g.length;w++)if(x.g[w]!=0)return!1;return!0}function X(x){return x.h==-1}r.l=function(x){return x=Me(this,x),X(x)?-1:te(x)?0:1};function ne(x){for(var w=x.g.length,S=[],O=0;O<w;O++)S[O]=~x.g[O];return new d(S,~x.h).add(D)}r.abs=function(){return X(this)?ne(this):this},r.add=function(x){for(var w=Math.max(this.g.length,x.g.length),S=[],O=0,V=0;V<=w;V++){var k=O+(this.i(V)&65535)+(x.i(V)&65535),C=(k>>>16)+(this.i(V)>>>16)+(x.i(V)>>>16);O=C>>>16,k&=65535,C&=65535,S[V]=C<<16|k}return new d(S,S[S.length-1]&-2147483648?-1:0)};function Me(x,w){return x.add(ne(w))}r.j=function(x){if(te(this)||te(x))return I;if(X(this))return X(x)?ne(this).j(ne(x)):ne(ne(this).j(x));if(X(x))return ne(this.j(ne(x)));if(0>this.l(G)&&0>x.l(G))return y(this.m()*x.m());for(var w=this.g.length+x.g.length,S=[],O=0;O<2*w;O++)S[O]=0;for(O=0;O<this.g.length;O++)for(var V=0;V<x.g.length;V++){var k=this.i(O)>>>16,C=this.i(O)&65535,Nt=x.i(V)>>>16,wt=x.i(V)&65535;S[2*O+2*V]+=C*wt,Ae(S,2*O+2*V),S[2*O+2*V+1]+=k*wt,Ae(S,2*O+2*V+1),S[2*O+2*V+1]+=C*Nt,Ae(S,2*O+2*V+1),S[2*O+2*V+2]+=k*Nt,Ae(S,2*O+2*V+2)}for(O=0;O<w;O++)S[O]=S[2*O+1]<<16|S[2*O];for(O=w;O<2*w;O++)S[O]=0;return new d(S,0)};function Ae(x,w){for(;(x[w]&65535)!=x[w];)x[w+1]+=x[w]>>>16,x[w]&=65535,w++}function Ee(x,w){this.g=x,this.h=w}function ze(x,w){if(te(w))throw Error("division by zero");if(te(x))return new Ee(I,I);if(X(x))return w=ze(ne(x),w),new Ee(ne(w.g),ne(w.h));if(X(w))return w=ze(x,ne(w)),new Ee(ne(w.g),w.h);if(30<x.g.length){if(X(x)||X(w))throw Error("slowDivide_ only works with positive integers.");for(var S=D,O=w;0>=O.l(x);)S=we(S),O=we(O);var V=Be(S,1),k=Be(O,1);for(O=Be(O,2),S=Be(S,2);!te(O);){var C=k.add(O);0>=C.l(x)&&(V=V.add(S),k=C),O=Be(O,1),S=Be(S,1)}return w=Me(x,V.j(w)),new Ee(V,w)}for(V=I;0<=x.l(w);){for(S=Math.max(1,Math.floor(x.m()/w.m())),O=Math.ceil(Math.log(S)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),k=y(S),C=k.j(w);X(C)||0<C.l(x);)S-=O,k=y(S),C=k.j(w);te(k)&&(k=D),V=V.add(k),x=Me(x,C)}return new Ee(V,x)}r.A=function(x){return ze(this,x).h},r.and=function(x){for(var w=Math.max(this.g.length,x.g.length),S=[],O=0;O<w;O++)S[O]=this.i(O)&x.i(O);return new d(S,this.h&x.h)},r.or=function(x){for(var w=Math.max(this.g.length,x.g.length),S=[],O=0;O<w;O++)S[O]=this.i(O)|x.i(O);return new d(S,this.h|x.h)},r.xor=function(x){for(var w=Math.max(this.g.length,x.g.length),S=[],O=0;O<w;O++)S[O]=this.i(O)^x.i(O);return new d(S,this.h^x.h)};function we(x){for(var w=x.g.length+1,S=[],O=0;O<w;O++)S[O]=x.i(O)<<1|x.i(O-1)>>>31;return new d(S,x.h)}function Be(x,w){var S=w>>5;w%=32;for(var O=x.g.length-S,V=[],k=0;k<O;k++)V[k]=0<w?x.i(k+S)>>>w|x.i(k+S+1)<<32-w:x.i(k+S);return new d(V,x.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,J0=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=T,os=d}).apply(typeof i_<"u"?i_:typeof self<"u"?self:typeof window<"u"?window:{});var Ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var W0,Il,eE,Mc,Yf,tE,nE,iE;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,v){return u==Array.prototype||u==Object.prototype||(u[m]=v.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ac=="object"&&Ac];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function l(u,m){if(m)e:{var v=s;u=u.split(".");for(var b=0;b<u.length-1;b++){var z=u[b];if(!(z in v))break e;v=v[z]}u=u[u.length-1],b=v[u],m=m(b),m!=b&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}function c(u,m){u instanceof String&&(u+="");var v=0,b=!1,z={next:function(){if(!b&&v<u.length){var Q=v++;return{value:m(Q,u[Q]),done:!1}}return b=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}l("Array.prototype.values",function(u){return u||function(){return c(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},g=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function T(u,m,v){return u.call.apply(u.bind,arguments)}function I(u,m,v){if(!u)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,b),u.apply(m,z)}}return function(){return u.apply(m,arguments)}}function D(u,m,v){return D=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:I,D.apply(null,arguments)}function G(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var b=v.slice();return b.push.apply(b,arguments),u.apply(this,b)}}function te(u,m){function v(){}v.prototype=m.prototype,u.aa=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(b,z,Q){for(var se=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)se[Je-2]=arguments[Je];return m.prototype[z].apply(b,se)}}function X(u){const m=u.length;if(0<m){const v=Array(m);for(let b=0;b<m;b++)v[b]=u[b];return v}return[]}function ne(u,m){for(let v=1;v<arguments.length;v++){const b=arguments[v];if(p(b)){const z=u.length||0,Q=b.length||0;u.length=z+Q;for(let se=0;se<Q;se++)u[z+se]=b[se]}else u.push(b)}}class Me{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function Ae(u){return/^[\s\xa0]*$/.test(u)}function Ee(){var u=g.navigator;return u&&(u=u.userAgent)?u:""}function ze(u){return ze[" "](u),u}ze[" "]=function(){};var we=Ee().indexOf("Gecko")!=-1&&!(Ee().toLowerCase().indexOf("webkit")!=-1&&Ee().indexOf("Edge")==-1)&&!(Ee().indexOf("Trident")!=-1||Ee().indexOf("MSIE")!=-1)&&Ee().indexOf("Edge")==-1;function Be(u,m,v){for(const b in u)m.call(v,u[b],b,u)}function x(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function w(u){const m={};for(const v in u)m[v]=u[v];return m}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(u,m){let v,b;for(let z=1;z<arguments.length;z++){b=arguments[z];for(v in b)u[v]=b[v];for(let Q=0;Q<S.length;Q++)v=S[Q],Object.prototype.hasOwnProperty.call(b,v)&&(u[v]=b[v])}}function V(u){var m=1;u=u.split(":");const v=[];for(;0<m&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function k(u){g.setTimeout(()=>{throw u},0)}function C(){var u=at;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Nt{constructor(){this.h=this.g=null}add(m,v){const b=wt.get();b.set(m,v),this.h?this.h.next=b:this.g=b,this.h=b}}var wt=new Me(()=>new K,u=>u.reset());class K{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,pe=!1,at=new Nt,N=()=>{const u=g.Promise.resolve(void 0);ae=()=>{u.then(ee)}};var ee=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(v){k(v)}var m=wt;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}pe=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};g.addEventListener("test",v,m),g.removeEventListener("test",v,m)}catch{}return u}();function je(u,m){if(re.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,b=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(we){e:{try{ze(m.nodeName);var z=!0;break e}catch{}z=!1}z||(m=null)}}else v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement);this.relatedTarget=m,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Se[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&je.aa.h.call(this)}}te(je,re);var Se={2:"touch",3:"pen",4:"mouse"};je.prototype.h=function(){je.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var St="closure_listenable_"+(1e6*Math.random()|0),Ge=0;function Ue(u,m,v,b,z){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!b,this.ha=z,this.key=++Ge,this.da=this.fa=!1}function Ot(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function on(u){this.src=u,this.g={},this.h=0}on.prototype.add=function(u,m,v,b,z){var Q=u.toString();u=this.g[Q],u||(u=this.g[Q]=[],this.h++);var se=ji(u,m,b,z);return-1<se?(m=u[se],v||(m.fa=!1)):(m=new Ue(m,this.src,Q,!!b,z),m.fa=v,u.push(m)),m};function wn(u,m){var v=m.type;if(v in u.g){var b=u.g[v],z=Array.prototype.indexOf.call(b,m,void 0),Q;(Q=0<=z)&&Array.prototype.splice.call(b,z,1),Q&&(Ot(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function ji(u,m,v,b){for(var z=0;z<u.length;++z){var Q=u[z];if(!Q.da&&Q.listener==m&&Q.capture==!!v&&Q.ha==b)return z}return-1}var yn="closure_lm_"+(1e6*Math.random()|0),$n={};function ui(u,m,v,b,z){if(Array.isArray(m)){for(var Q=0;Q<m.length;Q++)ui(u,m[Q],v,b,z);return null}return v=sa(v),u&&u[St]?u.K(m,v,y(b)?!!b.capture:!1,z):_t(u,m,v,!1,b,z)}function _t(u,m,v,b,z,Q){if(!m)throw Error("Invalid event type");var se=y(z)?!!z.capture:!!z,Je=wr(u);if(Je||(u[yn]=Je=new on(u)),v=Je.add(m,v,b,se,Q),v.proxy)return v;if(b=Zt(),v.proxy=b,b.src=u,b.listener=v,u.addEventListener)ye||(z=se),z===void 0&&(z=!1),u.addEventListener(m.toString(),b,z);else if(u.attachEvent)u.attachEvent(vi(m.toString()),b);else if(u.addListener&&u.removeListener)u.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Zt(){function u(v){return m.call(u.src,u.listener,v)}const m=ra;return u}function Ar(u,m,v,b,z){if(Array.isArray(m))for(var Q=0;Q<m.length;Q++)Ar(u,m[Q],v,b,z);else b=y(b)?!!b.capture:!!b,v=sa(v),u&&u[St]?(u=u.i,m=String(m).toString(),m in u.g&&(Q=u.g[m],v=ji(Q,v,b,z),-1<v&&(Ot(Q[v]),Array.prototype.splice.call(Q,v,1),Q.length==0&&(delete u.g[m],u.h--)))):u&&(u=wr(u))&&(m=u.g[m.toString()],u=-1,m&&(u=ji(m,v,b,z)),(v=-1<u?m[u]:null)&&Bi(v))}function Bi(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[St])wn(m.i,u);else{var v=u.type,b=u.proxy;m.removeEventListener?m.removeEventListener(v,b,u.capture):m.detachEvent?m.detachEvent(vi(v),b):m.addListener&&m.removeListener&&m.removeListener(b),(v=wr(m))?(wn(v,u),v.h==0&&(v.src=null,m[yn]=null)):Ot(u)}}}function vi(u){return u in $n?$n[u]:$n[u]="on"+u}function ra(u,m){if(u.da)u=!0;else{m=new je(m,this);var v=u.listener,b=u.ha||u.src;u.fa&&Bi(u),u=v.call(b,m)}return u}function wr(u){return u=u[yn],u instanceof on?u:null}var Sr="__closure_events_fn_"+(1e9*Math.random()>>>0);function sa(u){return typeof u=="function"?u:(u[Sr]||(u[Sr]=function(m){return u.handleEvent(m)}),u[Sr])}function It(){oe.call(this),this.i=new on(this),this.M=this,this.F=null}te(It,oe),It.prototype[St]=!0,It.prototype.removeEventListener=function(u,m,v,b){Ar(this,u,m,v,b)};function lt(u,m){var v,b=u.F;if(b)for(v=[];b;b=b.F)v.push(b);if(u=u.M,b=m.type||m,typeof m=="string")m=new re(m,u);else if(m instanceof re)m.target=m.target||u;else{var z=m;m=new re(b,u),O(m,z)}if(z=!0,v)for(var Q=v.length-1;0<=Q;Q--){var se=m.g=v[Q];z=Sn(se,b,!0,m)&&z}if(se=m.g=u,z=Sn(se,b,!0,m)&&z,z=Sn(se,b,!1,m)&&z,v)for(Q=0;Q<v.length;Q++)se=m.g=v[Q],z=Sn(se,b,!1,m)&&z}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var v=u.g[m],b=0;b<v.length;b++)Ot(v[b]);delete u.g[m],u.h--}}this.F=null},It.prototype.K=function(u,m,v,b){return this.i.add(String(u),m,!1,v,b)},It.prototype.L=function(u,m,v,b){return this.i.add(String(u),m,!0,v,b)};function Sn(u,m,v,b){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var z=!0,Q=0;Q<m.length;++Q){var se=m[Q];if(se&&!se.da&&se.capture==v){var Je=se.listener,Ft=se.ha||se.src;se.fa&&wn(u.i,se),z=Je.call(Ft,b)!==!1&&z}}return z&&!b.defaultPrevented}function Jt(u,m,v){if(typeof u=="function")v&&(u=D(u,v));else if(u&&typeof u.handleEvent=="function")u=D(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:g.setTimeout(u,m||0)}function aa(u){u.g=Jt(()=>{u.g=null,u.i&&(u.i=!1,aa(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class bo extends oe{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:aa(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qi(u){oe.call(this),this.h=u,this.g={}}te(qi,oe);var _i=[];function Hi(u){Be(u.g,function(m,v){this.g.hasOwnProperty(v)&&Bi(m)},u),u.g={}}qi.prototype.N=function(){qi.aa.N.call(this),Hi(this)},qi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ln=g.JSON.stringify,Fi=g.JSON.parse,Gi=class{stringify(u){return g.JSON.stringify(u,void 0)}parse(u){return g.JSON.parse(u,void 0)}};function vs(){}vs.prototype.h=null;function ve(u){return u.h||(u.h=u.i())}function Ir(){}var A={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function F(){re.call(this,"d")}te(F,re);function L(){re.call(this,"c")}te(L,re);var ie={},ge=null;function fe(){return ge=ge||new It}ie.La="serverreachability";function le(u){re.call(this,ie.La,u)}te(le,re);function Te(u){const m=fe();lt(m,new le(m))}ie.STAT_EVENT="statevent";function Ve(u,m){re.call(this,ie.STAT_EVENT,u),this.stat=m}te(Ve,re);function ue(u){const m=fe();lt(m,new Ve(m,u))}ie.Ma="timingevent";function xe(u,m){re.call(this,ie.Ma,u),this.size=m}te(xe,re);function Re(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){u()},m)}function $e(){this.g=!0}$e.prototype.xa=function(){this.g=!1};function ce(u,m,v,b,z,Q){u.info(function(){if(u.g)if(Q)for(var se="",Je=Q.split("&"),Ft=0;Ft<Je.length;Ft++){var We=Je[Ft].split("=");if(1<We.length){var en=We[0];We=We[1];var Gt=en.split("_");se=2<=Gt.length&&Gt[1]=="type"?se+(en+"="+We+"&"):se+(en+"=redacted&")}}else se=null;else se=Q;return"XMLHTTP REQ ("+b+") [attempt "+z+"]: "+m+`
`+v+`
`+se})}function nt(u,m,v,b,z,Q,se){u.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+z+"]: "+m+`
`+v+`
`+Q+" "+se})}function it(u,m,v,b){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Rt(u,v)+(b?" "+b:"")})}function bt(u,m){u.info(function(){return"TIMEOUT: "+m})}$e.prototype.info=function(){};function Rt(u,m){if(!u.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var b=v[u];if(!(2>b.length)){var z=b[1];if(Array.isArray(z)&&!(1>z.length)){var Q=z[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var se=1;se<z.length;se++)z[se]=""}}}}return Ln(v)}catch{return m}}var Ht={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},In={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Nn;function Pe(){}te(Pe,vs),Pe.prototype.g=function(){return new XMLHttpRequest},Pe.prototype.i=function(){return{}},Nn=new Pe;function rt(u,m,v,b){this.j=u,this.i=m,this.l=v,this.R=b||1,this.U=new qi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new st}function st(){this.i=null,this.g="",this.h=!1}var ci={},Ei={};function ln(u,m,v){u.L=1,u.v=As(zn(m)),u.m=v,u.P=!0,Xn(u,null)}function Xn(u,m){u.F=Date.now(),_s(u),u.A=zn(u.v);var v=u.A,b=u.R;Array.isArray(b)||(b=[String(b)]),Co(v.i,"t",b),u.C=0,v=u.j.J,u.h=new st,u.g=vu(u.j,v?m:null,!u.m),0<u.O&&(u.M=new bo(D(u.Y,u,u.g),u.O)),m=u.U,v=u.g,b=u.ca;var z="readystatechange";Array.isArray(z)||(z&&(_i[0]=z.toString()),z=_i);for(var Q=0;Q<z.length;Q++){var se=ui(v,z[Q],b||m.handleEvent,!1,m.h||m);if(!se)break;m.g[se.key]=se}m=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Te(),ce(u.i,u.u,u.A,u.l,u.R,u.m)}rt.prototype.ca=function(u){u=u.target;const m=this.M;m&&ei(u)==3?m.j():this.Y(u)},rt.prototype.Y=function(u){try{if(u==this.g)e:{const Gt=ei(this.g);var m=this.g.Ba();const Wi=this.g.Z();if(!(3>Gt)&&(Gt!=3||this.g&&(this.h.h||this.g.oa()||cu(this.g)))){this.J||Gt!=4||m==7||(m==8||0>=Wi?Te(3):Te(2)),Rr(this);var v=this.g.Z();this.X=v;t:if(oa(this)){var b=cu(this.g);u="";var z=b.length,Q=ei(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){un(this),Ti(this);var se="";break t}this.h.i=new g.TextDecoder}for(m=0;m<z;m++)this.h.h=!0,u+=this.h.i.decode(b[m],{stream:!(Q&&m==z-1)});b.length=0,this.h.g+=u,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=v==200,nt(this.i,this.u,this.A,this.l,this.R,Gt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,Ft=this.g;if((Je=Ft.g?Ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ae(Je)){var We=Je;break t}}We=null}if(v=We)it(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Es(this,v);else{this.o=!1,this.s=3,ue(12),un(this),Ti(this);break e}}if(this.P){v=!0;let cn;for(;!this.J&&this.C<se.length;)if(cn=ru(this,se),cn==Ei){Gt==4&&(this.s=4,ue(14),v=!1),it(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==ci){this.s=4,ue(15),it(this.i,this.l,se,"[Invalid Chunk]"),v=!1;break}else it(this.i,this.l,cn,null),Es(this,cn);if(oa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gt!=4||se.length!=0||this.h.h||(this.s=1,ue(16),v=!1),this.o=this.o&&v,!v)it(this.i,this.l,se,"[Invalid Chunked Response]"),un(this),Ti(this);else if(0<se.length&&!this.W){this.W=!0;var en=this.j;en.g==this&&en.ba&&!en.M&&(en.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),Ns(en),en.M=!0,ue(11))}}else it(this.i,this.l,se,null),Es(this,se);Gt==4&&un(this),this.o&&!this.J&&(Gt==4?gu(this.j,this):(this.o=!1,_s(this)))}else xh(this.g),v==400&&0<se.indexOf("Unknown SID")?(this.s=3,ue(12)):(this.s=0,ue(13)),un(this),Ti(this)}}}catch{}finally{}};function oa(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function ru(u,m){var v=u.C,b=m.indexOf(`
`,v);return b==-1?Ei:(v=Number(m.substring(v,b)),isNaN(v)?ci:(b+=1,b+v>m.length?Ei:(m=m.slice(b,b+v),u.C=b+v,m)))}rt.prototype.cancel=function(){this.J=!0,un(this)};function _s(u){u.S=Date.now()+u.I,su(u,u.I)}function su(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Re(D(u.ba,u),m)}function Rr(u){u.B&&(g.clearTimeout(u.B),u.B=null)}rt.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(bt(this.i,this.A),this.L!=2&&(Te(),ue(17)),un(this),this.s=2,Ti(this)):su(this,this.S-u)};function Ti(u){u.j.G==0||u.J||gu(u.j,u)}function un(u){Rr(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Hi(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Es(u,m){try{var v=u.j;if(v.G!=0&&(v.g==u||Ao(v.h,u))){if(!u.K&&Ao(v.h,u)&&v.G==3){try{var b=v.Da.g.parse(m)}catch{b=null}if(Array.isArray(b)&&b.length==3){var z=b;if(z[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)_a(v),ya(v);else break e;Mo(v),ue(18)}}else v.za=z[1],0<v.za-v.T&&37500>z[2]&&v.F&&v.v==0&&!v.C&&(v.C=Re(D(v.Za,v),6e3));if(1>=ua(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Ji(v,11)}else if((u.K||v.g==u)&&_a(v),!Ae(m))for(z=v.Da.g.parse(m),m=0;m<z.length;m++){let We=z[m];if(v.T=We[0],We=We[1],v.G==2)if(We[0]=="c"){v.K=We[1],v.ia=We[2];const en=We[3];en!=null&&(v.la=en,v.j.info("VER="+v.la));const Gt=We[4];Gt!=null&&(v.Aa=Gt,v.j.info("SVER="+v.Aa));const Wi=We[5];Wi!=null&&typeof Wi=="number"&&0<Wi&&(b=1.5*Wi,v.L=b,v.j.info("backChannelRequestTimeoutMs_="+b)),b=v;const cn=u.g;if(cn){const Ci=cn.g?cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ci){var Q=b.h;Q.g||Ci.indexOf("spdy")==-1&&Ci.indexOf("quic")==-1&&Ci.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(ca(Q,Q.h),Q.h=null))}if(b.D){const Po=cn.g?cn.g.getResponseHeader("X-HTTP-Session-Id"):null;Po&&(b.ya=Po,gt(b.I,b.D,Po))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),b=v;var se=u;if(b.qa=yu(b,b.J?b.ia:null,b.W),se.K){Rn(b.h,se);var Je=se,Ft=b.L;Ft&&(Je.I=Ft),Je.B&&(Rr(Je),_s(Je)),b.g=se}else fu(b);0<v.i.length&&va(v)}else We[0]!="stop"&&We[0]!="close"||Ji(v,7);else v.G==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?Ji(v,7):No(v):We[0]!="noop"&&v.l&&v.l.ta(We),v.v=0)}}Te(4)}catch{}}var au=class{constructor(u,m){this.g=u,this.map=m}};function Qi(u){this.l=u||10,g.PerformanceNavigationTiming?(u=g.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function la(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ua(u){return u.h?1:u.g?u.g.size:0}function Ao(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ca(u,m){u.g?u.g.add(m):u.h=m}function Rn(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Qi.prototype.cancel=function(){if(this.i=wo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function wo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.D);return m}return X(u.i)}function Sh(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],v=u.length,b=0;b<v;b++)m.push(u[b]);return m}m=[],v=0;for(b in u)m[v++]=u[b];return m}function ha(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var v=0;v<u;v++)m.push(v);return m}m=[],v=0;for(const b in u)m[v++]=b;return m}}}function So(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var v=ha(u),b=Sh(u),z=b.length,Q=0;Q<z;Q++)m.call(void 0,b[Q],v&&v[Q],u)}var Ts=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ih(u,m){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var b=u[v].indexOf("="),z=null;if(0<=b){var Q=u[v].substring(0,b);z=u[v].substring(b+1)}else Q=u[v];m(Q,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Lt(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Lt){this.h=u.h,bs(this,u.j),this.o=u.o,this.g=u.g,Cr(this,u.s),this.l=u.l;var m=u.i,v=new Yi;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),Ki(this,v),this.m=u.m}else u&&(m=String(u).match(Ts))?(this.h=!1,bs(this,m[1]||"",!0),this.o=Zn(m[2]||""),this.g=Zn(m[3]||"",!0),Cr(this,m[4]),this.l=Zn(m[5]||"",!0),Ki(this,m[6]||"",!0),this.m=Zn(m[7]||"")):(this.h=!1,this.i=new Yi(null,this.h))}Lt.prototype.toString=function(){var u=[],m=this.j;m&&u.push(ws(m,Io,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(ws(m,Io,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(ws(v,v.charAt(0)=="/"?Rh:Ro,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",ws(v,da)),u.join("")};function zn(u){return new Lt(u)}function bs(u,m,v){u.j=v?Zn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Cr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Ki(u,m,v){m instanceof Yi?(u.i=m,lu(u.i,u.h)):(v||(m=ws(m,Ch)),u.i=new Yi(m,u.h))}function gt(u,m,v){u.i.set(m,v)}function As(u){return gt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Zn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ws(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,ou),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ou(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Io=/[#\/\?@]/g,Ro=/[#\?:]/g,Rh=/[#\?]/g,Ch=/[#\?@]/g,da=/#/g;function Yi(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Jn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ih(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}r=Yi.prototype,r.add=function(u,m){Jn(this),this.i=null,u=bi(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function $i(u,m){Jn(u),m=bi(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Xi(u,m){return Jn(u),m=bi(u,m),u.g.has(m)}r.forEach=function(u,m){Jn(this),this.g.forEach(function(v,b){v.forEach(function(z){u.call(m,z,b,this)},this)},this)},r.na=function(){Jn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let b=0;b<m.length;b++){const z=u[b];for(let Q=0;Q<z.length;Q++)v.push(m[b])}return v},r.V=function(u){Jn(this);let m=[];if(typeof u=="string")Xi(this,u)&&(m=m.concat(this.g.get(bi(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)m=m.concat(u[v])}return m},r.set=function(u,m){return Jn(this),this.i=null,u=bi(this,u),Xi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Co(u,m,v){$i(u,m),0<v.length&&(u.i=null,u.g.set(bi(u,m),X(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var b=m[v];const Q=encodeURIComponent(String(b)),se=this.V(b);for(b=0;b<se.length;b++){var z=Q;se[b]!==""&&(z+="="+encodeURIComponent(String(se[b]))),u.push(z)}}return this.i=u.join("&")};function bi(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function lu(u,m){m&&!u.j&&(Jn(u),u.i=null,u.g.forEach(function(v,b){var z=b.toLowerCase();b!=z&&($i(this,b),Co(this,z,v))},u)),u.j=m}function Ss(u,m){const v=new $e;if(g.Image){const b=new Image;b.onload=G(Wn,v,"TestLoadImage: loaded",!0,m,b),b.onerror=G(Wn,v,"TestLoadImage: error",!1,m,b),b.onabort=G(Wn,v,"TestLoadImage: abort",!1,m,b),b.ontimeout=G(Wn,v,"TestLoadImage: timeout",!1,m,b),g.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=u}else m(!1)}function hi(u,m){const v=new $e,b=new AbortController,z=setTimeout(()=>{b.abort(),Wn(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:b.signal}).then(Q=>{clearTimeout(z),Q.ok?Wn(v,"TestPingServer: ok",!0,m):Wn(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(z),Wn(v,"TestPingServer: error",!1,m)})}function Wn(u,m,v,b,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),b(v)}catch{}}function Is(){this.g=new Gi}function Ai(u,m,v){const b=v||"";try{So(u,function(z,Q){let se=z;y(z)&&(se=Ln(z)),m.push(b+Q+"="+encodeURIComponent(se))})}catch(z){throw m.push(b+"type="+encodeURIComponent("_badmap")),z}}function xr(u){this.l=u.Ub||null,this.j=u.eb||!1}te(xr,vs),xr.prototype.g=function(){return new Zi(this.l,this.j)},xr.prototype.i=function(u){return function(){return u}}({});function Zi(u,m){It.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}te(Zi,It),r=Zi.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Si(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||g).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wi(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Si(this)),this.g&&(this.readyState=3,Si(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xo(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function xo(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?wi(this):Si(this),this.readyState==3&&xo(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,wi(this))},r.Qa=function(u){this.g&&(this.response=u,wi(this))},r.ga=function(){this.g&&wi(this)};function wi(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Si(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function Si(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Do(u){let m="";return Be(u,function(v,b){m+=b,m+=":",m+=v,m+=`\r
`}),m}function Wt(u,m,v){e:{for(b in v){var b=!1;break e}b=!0}b||(v=Do(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):gt(u,m,v))}function ct(u){It.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}te(ct,It);var fa=/^https?$/i,Rs=["POST","PUT"];r=ct.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,v,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nn.g(),this.v=this.o?ve(this.o):ve(Nn),this.g.onreadystatechange=D(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(Q){uu(this,Q);return}if(u=v||"",v=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var z in b)v.set(z,b[z]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const Q of b.keys())v.set(Q,b.get(Q));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(v.keys()).find(Q=>Q.toLowerCase()=="content-type"),z=g.FormData&&u instanceof g.FormData,!(0<=Array.prototype.indexOf.call(Rs,m,void 0))||b||z||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,se]of v)this.g.setRequestHeader(Q,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cs(this),this.u=!0,this.g.send(u),this.u=!1}catch(Q){uu(this,Q)}};function uu(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,ma(u),Ii(u)}function ma(u){u.A||(u.A=!0,lt(u,"complete"),lt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,lt(this,"complete"),lt(this,"abort"),Ii(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ii(this,!0)),ct.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ga(this):this.bb())},r.bb=function(){ga(this)};function ga(u){if(u.h&&typeof d<"u"&&(!u.v[1]||ei(u)!=4||u.Z()!=2)){if(u.u&&ei(u)==4)Jt(u.Ea,0,u);else if(lt(u,"readystatechange"),ei(u)==4){u.h=!1;try{const se=u.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var b;if(b=se===0){var z=String(u.D).match(Ts)[1]||null;!z&&g.self&&g.self.location&&(z=g.self.location.protocol.slice(0,-1)),b=!fa.test(z?z.toLowerCase():"")}v=b}if(v)lt(u,"complete"),lt(u,"success");else{u.m=6;try{var Q=2<ei(u)?u.g.statusText:""}catch{Q=""}u.l=Q+" ["+u.Z()+"]",ma(u)}}finally{Ii(u)}}}}function Ii(u,m){if(u.g){Cs(u);const v=u.g,b=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||lt(u,"ready");try{v.onreadystatechange=b}catch{}}}function Cs(u){u.I&&(g.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function ei(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<ei(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Fi(m)}};function cu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function xh(u){const m={};u=(u.g&&2<=ei(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<u.length;b++){if(Ae(u[b]))continue;var v=V(u[b]);const z=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Q=m[z]||[];m[z]=Q,Q.push(v)}x(m,function(b){return b.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xs(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function pa(u){this.Aa=0,this.i=[],this.j=new $e,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xs("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xs("baseRetryDelayMs",5e3,u),this.cb=xs("retryDelaySeedMs",1e4,u),this.Wa=xs("forwardChannelMaxRetries",2,u),this.wa=xs("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Qi(u&&u.concurrentRequestLimit),this.Da=new Is,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=pa.prototype,r.la=8,r.G=1,r.connect=function(u,m,v,b){ue(0),this.W=u,this.H=m||{},v&&b!==void 0&&(this.H.OSID=v,this.H.OAID=b),this.F=this.X,this.I=yu(this,null,this.W),va(this)};function No(u){if(hu(u),u.G==3){var m=u.U++,v=zn(u.I);if(gt(v,"SID",u.K),gt(v,"RID",m),gt(v,"TYPE","terminate"),Ds(u,v),m=new rt(u,u.j,m),m.L=2,m.v=As(zn(v)),v=!1,g.navigator&&g.navigator.sendBeacon)try{v=g.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&g.Image&&(new Image().src=m.v,v=!0),v||(m.g=vu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),_s(m)}pu(u)}function ya(u){u.g&&(Ns(u),u.g.cancel(),u.g=null)}function hu(u){ya(u),u.u&&(g.clearTimeout(u.u),u.u=null),_a(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&g.clearTimeout(u.s),u.s=null)}function va(u){if(!la(u.h)&&!u.s){u.s=!0;var m=u.Ga;ae||N(),pe||(ae(),pe=!0),at.add(m,u),u.B=0}}function Dh(u,m){return ua(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Re(D(u.Ga,u,m),Vo(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const z=new rt(this,this.j,u);let Q=this.o;if(this.S&&(Q?(Q=w(Q),O(Q,this.S)):Q=this.S),this.m!==null||this.O||(z.H=Q,Q=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var b=this.i[v];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(m+=b,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=du(this,z,m),v=zn(this.I),gt(v,"RID",u),gt(v,"CVER",22),this.D&&gt(v,"X-HTTP-Session-Id",this.D),Ds(this,v),Q&&(this.O?m="headers="+encodeURIComponent(String(Do(Q)))+"&"+m:this.m&&Wt(v,this.m,Q)),ca(this.h,z),this.Ua&&gt(v,"TYPE","init"),this.P?(gt(v,"$req",m),gt(v,"SID","null"),z.T=!0,ln(z,v,null)):ln(z,v,m),this.G=2}}else this.G==3&&(u?Oo(this,u):this.i.length==0||la(this.h)||Oo(this))};function Oo(u,m){var v;m?v=m.l:v=u.U++;const b=zn(u.I);gt(b,"SID",u.K),gt(b,"RID",v),gt(b,"AID",u.T),Ds(u,b),u.m&&u.o&&Wt(b,u.m,u.o),v=new rt(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),m&&(u.i=m.D.concat(u.i)),m=du(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ca(u.h,v),ln(v,b,m)}function Ds(u,m){u.H&&Be(u.H,function(v,b){gt(m,b,v)}),u.l&&So({},function(v,b){gt(m,b,v)})}function du(u,m,v){v=Math.min(u.i.length,v);var b=u.l?D(u.l.Na,u.l,u):null;e:{var z=u.i;let Q=-1;for(;;){const se=["count="+v];Q==-1?0<v?(Q=z[0].g,se.push("ofs="+Q)):Q=0:se.push("ofs="+Q);let Je=!0;for(let Ft=0;Ft<v;Ft++){let We=z[Ft].g;const en=z[Ft].map;if(We-=Q,0>We)Q=Math.max(0,z[Ft].g-100),Je=!1;else try{Ai(en,se,"req"+We+"_")}catch{b&&b(en)}}if(Je){b=se.join("&");break e}}}return u=u.i.splice(0,v),m.D=u,b}function fu(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;ae||N(),pe||(ae(),pe=!0),at.add(m,u),u.v=0}}function Mo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Re(D(u.Fa,u),Vo(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,mu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Re(D(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ue(10),ya(this),mu(this))};function Ns(u){u.A!=null&&(g.clearTimeout(u.A),u.A=null)}function mu(u){u.g=new rt(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=zn(u.qa);gt(m,"RID","rpc"),gt(m,"SID",u.K),gt(m,"AID",u.T),gt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&gt(m,"TO",u.ja),gt(m,"TYPE","xmlhttp"),Ds(u,m),u.m&&u.o&&Wt(m,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=As(zn(m)),v.m=null,v.P=!0,Xn(v,u)}r.Za=function(){this.C!=null&&(this.C=null,ya(this),Mo(this),ue(19))};function _a(u){u.C!=null&&(g.clearTimeout(u.C),u.C=null)}function gu(u,m){var v=null;if(u.g==m){_a(u),Ns(u),u.g=null;var b=2}else if(Ao(u.h,m))v=m.D,Rn(u.h,m),b=1;else return;if(u.G!=0){if(m.o)if(b==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var z=u.B;b=fe(),lt(b,new xe(b,v)),va(u)}else fu(u);else if(z=m.s,z==3||z==0&&0<m.X||!(b==1&&Dh(u,m)||b==2&&Mo(u)))switch(v&&0<v.length&&(m=u.h,m.i=m.i.concat(v)),z){case 1:Ji(u,5);break;case 4:Ji(u,10);break;case 3:Ji(u,6);break;default:Ji(u,2)}}}function Vo(u,m){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*m}function Ji(u,m){if(u.j.info("Error code "+m),m==2){var v=D(u.fb,u),b=u.Xa;const z=!b;b=new Lt(b||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||bs(b,"https"),As(b),z?Ss(b.toString(),v):hi(b.toString(),v)}else ue(2);u.G=0,u.l&&u.l.sa(m),pu(u),hu(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ue(2)):(this.j.info("Failed to ping google.com"),ue(1))};function pu(u){if(u.G=0,u.ka=[],u.l){const m=wo(u.h);(m.length!=0||u.i.length!=0)&&(ne(u.ka,m),ne(u.ka,u.i),u.h.i.length=0,X(u.i),u.i.length=0),u.l.ra()}}function yu(u,m,v){var b=v instanceof Lt?zn(v):new Lt(v);if(b.g!="")m&&(b.g=m+"."+b.g),Cr(b,b.s);else{var z=g.location;b=z.protocol,m=m?m+"."+z.hostname:z.hostname,z=+z.port;var Q=new Lt(null);b&&bs(Q,b),m&&(Q.g=m),z&&Cr(Q,z),v&&(Q.l=v),b=Q}return v=u.D,m=u.ya,v&&m&&gt(b,v,m),gt(b,"VER",u.la),Ds(u,b),b}function vu(u,m,v){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new ct(new xr({eb:v})):new ct(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function _u(){}r=_u.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ea(){}Ea.prototype.g=function(u,m){return new Cn(u,m)};function Cn(u,m){It.call(this),this.g=new pa(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!Ae(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!Ae(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Ri(this)}te(Cn,It),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){No(this.g)},Cn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=Ln(u),u=v);m.i.push(new au(m.Ya++,u)),m.G==3&&va(m)},Cn.prototype.N=function(){this.g.l=null,delete this.j,No(this.g),delete this.g,Cn.aa.N.call(this)};function Eu(u){F.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}te(Eu,F);function Tu(){L.call(this),this.status=1}te(Tu,L);function Ri(u){this.g=u}te(Ri,_u),Ri.prototype.ua=function(){lt(this.g,"a")},Ri.prototype.ta=function(u){lt(this.g,new Eu(u))},Ri.prototype.sa=function(u){lt(this.g,new Tu)},Ri.prototype.ra=function(){lt(this.g,"b")},Ea.prototype.createWebChannel=Ea.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,iE=function(){return new Ea},nE=function(){return fe()},tE=ie,Yf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ht.NO_ERROR=0,Ht.TIMEOUT=8,Ht.HTTP_ERROR=6,Mc=Ht,In.COMPLETE="complete",eE=In,Ir.EventType=A,A.OPEN="a",A.CLOSE="b",A.ERROR="c",A.MESSAGE="d",It.prototype.listen=It.prototype.K,Il=Ir,ct.prototype.listenOnce=ct.prototype.L,ct.prototype.getLastError=ct.prototype.Ka,ct.prototype.getLastErrorCode=ct.prototype.Ba,ct.prototype.getStatus=ct.prototype.Z,ct.prototype.getResponseJson=ct.prototype.Oa,ct.prototype.getResponseText=ct.prototype.oa,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Ha,W0=ct}).apply(typeof Ac<"u"?Ac:typeof self<"u"?self:typeof window<"u"?window:{});const r_="@firebase/firestore",s_="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tn.UNAUTHENTICATED=new Tn(null),Tn.GOOGLE_CREDENTIALS=new Tn("google-credentials-uid"),Tn.FIRST_PARTY=new Tn("first-party-uid"),Tn.MOCK_USER=new Tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vo="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=new mm("@firebase/firestore");function Za(){return Js.logLevel}function he(r,...e){if(Js.logLevel<=Xe.DEBUG){const n=e.map(Im);Js.debug(`Firestore (${vo}): ${r}`,...n)}}function Er(r,...e){if(Js.logLevel<=Xe.ERROR){const n=e.map(Im);Js.error(`Firestore (${vo}): ${r}`,...n)}}function oo(r,...e){if(Js.logLevel<=Xe.WARN){const n=e.map(Im);Js.warn(`Firestore (${vo}): ${r}`,...n)}}function Im(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,rE(r,s,n)}function rE(r,e,n){let s=`FIRESTORE (${vo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Er(s),new Error(s)}function dt(r,e,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||rE(e,l,s)}function Le(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends br{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Tn.UNAUTHENTICATED))}shutdown(){}}class sI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class aI{constructor(e){this.t=e,this.currentUser=Tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){dt(this.o===void 0,42304);let s=this.i;const l=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let c=new ls;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ls,e.enqueueRetryable(()=>l(this.currentUser))};const d=()=>{const p=c;e.enqueueRetryable(async()=>{await p.promise,await l(this.currentUser)})},g=p=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(p=>g(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ls)}},0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(dt(typeof s.accessToken=="string",31837,{l:s}),new sE(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dt(e===null||typeof e=="string",2055,{h:e}),new Tn(e)}}class oI{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class lI{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new oI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Tn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class a_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,li(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){dt(this.o===void 0,3512);const s=c=>{c.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,he("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const l=c=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>l(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new a_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(dt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new a_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=cI(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<n&&(s+=e.charAt(l[c]%62))}return s}}function Fe(r,e){return r<e?-1:r>e?1:0}function $f(r,e){let n=0;for(;n<r.length&&n<e.length;){const s=r.codePointAt(n),l=e.codePointAt(n);if(s!==l){if(s<128&&l<128)return Fe(s,l);{const c=aE(),d=hI(c.encode(o_(r,n)),c.encode(o_(e,n)));return d!==0?d:Fe(s,l)}}n+=s>65535?2:1}return Fe(r.length,e.length)}function o_(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function hI(r,e){for(let n=0;n<r.length&&n<e.length;++n)if(r[n]!==e[n])return Fe(r[n],e[n]);return Fe(r.length,e.length)}function lo(r,e,n){return r.length===e.length&&r.every((s,l)=>n(s,e[l]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_=-62135596800,u_=1e6;class Yt{static now(){return Yt.fromMillis(Date.now())}static fromDate(e){return Yt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*u_);return new Yt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<l_)throw new de(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/u_}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-l_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new Yt(0,0))}static max(){return new ke(new Yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="__name__";class Vi{constructor(e,n,s){n===void 0?n=0:n>e.length&&De(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&De(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Vi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vi?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let l=0;l<s;l++){const c=Vi.compareSegments(e.get(l),n.get(l));if(c!==0)return c}return Fe(e.length,n.length)}static compareSegments(e,n){const s=Vi.isNumericId(e),l=Vi.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?Vi.extractNumericId(e).compare(Vi.extractNumericId(n)):$f(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return os.fromString(e.substring(4,e.length-2))}}class At extends Vi{construct(e,n,s){return new At(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new de(W.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(l=>l.length>0))}return new At(n)}static emptyPath(){return new At([])}}const dI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gn extends Vi{construct(e,n,s){return new gn(e,n,s)}static isValidIdentifier(e){return dI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===c_}static keyField(){return new gn([c_])}static fromServerFormat(e){const n=[];let s="",l=0;const c=()=>{if(s.length===0)throw new de(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;l<e.length;){const g=e[l];if(g==="\\"){if(l+1===e.length)throw new de(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[l+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new de(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,l+=2}else g==="`"?(d=!d,l++):g!=="."||d?(s+=g,l++):(c(),l++)}if(c(),d)throw new de(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gn(n)}static emptyPath(){return new gn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(At.fromString(e))}static fromName(e){return new be(At.fromString(e).popFirst(5))}static empty(){return new be(At.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&At.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return At.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new At(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=-1;function fI(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=ke.fromTimestamp(s===1e9?new Yt(n+1,0):new Yt(n,s));return new cs(l,be.empty(),e)}function mI(r){return new cs(r.readTime,r.key,Ll)}class cs{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new cs(ke.min(),be.empty(),Ll)}static max(){return new cs(ke.max(),be.empty(),Ll)}}function gI(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(r.documentKey,e.documentKey),n!==0?n:Fe(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _o(r){if(r.code!==W.FAILED_PRECONDITION||r.message!==pI)throw r;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&De(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new J((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,l)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof J?n:J.resolve(n)}catch(n){return J.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):J.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):J.reject(n)}static resolve(e){return new J((n,s)=>{n(e)})}static reject(e){return new J((n,s)=>{s(e)})}static waitFor(e){return new J((n,s)=>{let l=0,c=0,d=!1;e.forEach(g=>{++l,g.next(()=>{++c,d&&c===l&&n()},p=>s(p))}),d=!0,c===l&&n()})}static or(e){let n=J.resolve(!1);for(const s of e)n=n.next(l=>l?J.resolve(l):s());return n}static forEach(e,n){const s=[];return e.forEach((l,c)=>{s.push(n.call(this,l,c))}),this.waitFor(s)}static mapArray(e,n){return new J((s,l)=>{const c=e.length,d=new Array(c);let g=0;for(let p=0;p<c;p++){const y=p;n(e[y]).next(T=>{d[y]=T,++g,g===c&&s(d)},T=>l(T))}})}static doWhile(e,n){return new J((s,l)=>{const c=()=>{e()===!0?n().next(()=>{c()},l):s()};c()})}}function vI(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Eo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}lh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm=-1;function uh(r){return r==null}function Kc(r){return r===0&&1/r==-1/0}function _I(r){return typeof r=="number"&&Number.isInteger(r)&&!Kc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="";function EI(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=h_(e)),e=TI(r.get(n),e);return h_(e)}function TI(r,e){let n=e;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":n+="";break;case lE:n+="";break;default:n+=c}}return n}function h_(r){return r+lE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function ps(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function uE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n){this.comparator=e,this.root=n||mn.EMPTY}insert(e,n){return new Dt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new Dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(e,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wc(this.root,e,this.comparator,!1)}getReverseIterator(){return new wc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wc(this.root,e,this.comparator,!0)}}class wc{constructor(e,n,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,n,s,l,c){this.key=e,this.value=n,this.color=s??mn.RED,this.left=l??mn.EMPTY,this.right=c??mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,l,c){return new mn(e??this.key,n??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let l=this;const c=s(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,n,s),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return mn.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw De(43730,{key:this.key,value:this.value});if(this.right.isRed())throw De(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw De(27949);return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw De(57766)}get value(){throw De(16141)}get color(){throw De(16727)}get left(){throw De(29726)}get right(){throw De(36894)}copy(e,n,s,l,c){return this}insert(e,n,s){return new mn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.comparator=e,this.data=new Dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new f_(this.data.getIterator())}getIteratorFrom(e){return new f_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof $t)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new $t(this.comparator);return n.data=e,n}}class f_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.fields=e,e.sort(gn.comparator)}static empty(){return new Kn([])}unionWith(e){let n=new $t(gn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Kn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return lo(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new cE("Invalid base64 string: "+c):c}}(e);return new pn(n)}static fromUint8Array(e){const n=function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c}(e);return new pn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pn.EMPTY_BYTE_STRING=new pn("");const bI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hs(r){if(dt(!!r,39018),typeof r=="string"){let e=0;const n=bI.exec(r);if(dt(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ut(r.seconds),nanos:Ut(r.nanos)}}function Ut(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ds(r){return typeof r=="string"?pn.fromBase64String(r):pn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="server_timestamp",dE="__type__",fE="__previous_value__",mE="__local_write_time__";function Cm(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[dE])===null||n===void 0?void 0:n.stringValue)===hE}function ch(r){const e=r.mapValue.fields[fE];return Cm(e)?ch(e):e}function zl(r){const e=hs(r.mapValue.fields[mE].timestampValue);return new Yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,n,s,l,c,d,g,p,y,T){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=T}}const Yc="(default)";class jl{constructor(e,n){this.projectId=e,this.database=n||Yc}static empty(){return new jl("","")}get isDefaultDatabase(){return this.database===Yc}isEqual(e){return e instanceof jl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="__type__",wI="__max__",Sc={mapValue:{}},pE="__vector__",$c="value";function fs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Cm(r)?4:II(r)?9007199254740991:SI(r)?10:11:De(28295,{value:r})}function zi(r,e){if(r===e)return!0;const n=fs(r);if(n!==fs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return zl(r).isEqual(zl(e));case 3:return function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=hs(l.timestampValue),g=hs(c.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(l,c){return ds(l.bytesValue).isEqual(ds(c.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(l,c){return Ut(l.geoPointValue.latitude)===Ut(c.geoPointValue.latitude)&&Ut(l.geoPointValue.longitude)===Ut(c.geoPointValue.longitude)}(r,e);case 2:return function(l,c){if("integerValue"in l&&"integerValue"in c)return Ut(l.integerValue)===Ut(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=Ut(l.doubleValue),g=Ut(c.doubleValue);return d===g?Kc(d)===Kc(g):isNaN(d)&&isNaN(g)}return!1}(r,e);case 9:return lo(r.arrayValue.values||[],e.arrayValue.values||[],zi);case 10:case 11:return function(l,c){const d=l.mapValue.fields||{},g=c.mapValue.fields||{};if(d_(d)!==d_(g))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(g[p]===void 0||!zi(d[p],g[p])))return!1;return!0}(r,e);default:return De(52216,{left:r})}}function Bl(r,e){return(r.values||[]).find(n=>zi(n,e))!==void 0}function uo(r,e){if(r===e)return 0;const n=fs(r),s=fs(e);if(n!==s)return Fe(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(r.booleanValue,e.booleanValue);case 2:return function(c,d){const g=Ut(c.integerValue||c.doubleValue),p=Ut(d.integerValue||d.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1}(r,e);case 3:return m_(r.timestampValue,e.timestampValue);case 4:return m_(zl(r),zl(e));case 5:return $f(r.stringValue,e.stringValue);case 6:return function(c,d){const g=ds(c),p=ds(d);return g.compareTo(p)}(r.bytesValue,e.bytesValue);case 7:return function(c,d){const g=c.split("/"),p=d.split("/");for(let y=0;y<g.length&&y<p.length;y++){const T=Fe(g[y],p[y]);if(T!==0)return T}return Fe(g.length,p.length)}(r.referenceValue,e.referenceValue);case 8:return function(c,d){const g=Fe(Ut(c.latitude),Ut(d.latitude));return g!==0?g:Fe(Ut(c.longitude),Ut(d.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return g_(r.arrayValue,e.arrayValue);case 10:return function(c,d){var g,p,y,T;const I=c.fields||{},D=d.fields||{},G=(g=I[$c])===null||g===void 0?void 0:g.arrayValue,te=(p=D[$c])===null||p===void 0?void 0:p.arrayValue,X=Fe(((y=G==null?void 0:G.values)===null||y===void 0?void 0:y.length)||0,((T=te==null?void 0:te.values)===null||T===void 0?void 0:T.length)||0);return X!==0?X:g_(G,te)}(r.mapValue,e.mapValue);case 11:return function(c,d){if(c===Sc.mapValue&&d===Sc.mapValue)return 0;if(c===Sc.mapValue)return 1;if(d===Sc.mapValue)return-1;const g=c.fields||{},p=Object.keys(g),y=d.fields||{},T=Object.keys(y);p.sort(),T.sort();for(let I=0;I<p.length&&I<T.length;++I){const D=$f(p[I],T[I]);if(D!==0)return D;const G=uo(g[p[I]],y[T[I]]);if(G!==0)return G}return Fe(p.length,T.length)}(r.mapValue,e.mapValue);default:throw De(23264,{Pe:n})}}function m_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Fe(r,e);const n=hs(r),s=hs(e),l=Fe(n.seconds,s.seconds);return l!==0?l:Fe(n.nanos,s.nanos)}function g_(r,e){const n=r.values||[],s=e.values||[];for(let l=0;l<n.length&&l<s.length;++l){const c=uo(n[l],s[l]);if(c)return c}return Fe(n.length,s.length)}function co(r){return Xf(r)}function Xf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const s=hs(n);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return ds(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return be.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let s="[",l=!0;for(const c of n.values||[])l?l=!1:s+=",",s+=Xf(c);return s+"]"}(r.arrayValue):"mapValue"in r?function(n){const s=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const d of s)c?c=!1:l+=",",l+=`${d}:${Xf(n.fields[d])}`;return l+"}"}(r.mapValue):De(61005,{value:r})}function Vc(r){switch(fs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ch(r);return e?16+Vc(e):16;case 5:return 2*r.stringValue.length;case 6:return ds(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((l,c)=>l+Vc(c),0)}(r.arrayValue);case 10:case 11:return function(s){let l=0;return ps(s.fields,(c,d)=>{l+=c.length+Vc(d)}),l}(r.mapValue);default:throw De(13486,{value:r})}}function p_(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Zf(r){return!!r&&"integerValue"in r}function xm(r){return!!r&&"arrayValue"in r}function y_(r){return!!r&&"nullValue"in r}function v_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Pc(r){return!!r&&"mapValue"in r}function SI(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[gE])===null||n===void 0?void 0:n.stringValue)===pE}function Ol(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return ps(r.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Ol(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ol(r.arrayValue.values[n]);return e}return Object.assign({},r)}function II(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===wI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Pc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ol(n)}setAll(e){let n=gn.emptyPath(),s={},l=[];e.forEach((d,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,s,l),s={},l=[],n=g.popLast()}d?s[g.lastSegment()]=Ol(d):l.push(g.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,s,l)}delete(e){const n=this.field(e.popLast());Pc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let l=n.mapValue.fields[e.get(s)];Pc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,s){ps(n,(l,c)=>e[l]=c);for(const l of s)delete e[l]}clone(){return new Un(Ol(this.value))}}function yE(r){const e=[];return ps(r.fields,(n,s)=>{const l=new gn([n]);if(Pc(s)){const c=yE(s.mapValue).fields;if(c.length===0)e.push(l);else for(const d of c)e.push(l.child(d))}else e.push(l)}),new Kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,n,s,l,c,d,g){this.key=e,this.documentType=n,this.version=s,this.readTime=l,this.createTime=c,this.data=d,this.documentState=g}static newInvalidDocument(e){return new bn(e,0,ke.min(),ke.min(),ke.min(),Un.empty(),0)}static newFoundDocument(e,n,s,l){return new bn(e,1,n,ke.min(),s,l,0)}static newNoDocument(e,n){return new bn(e,2,n,ke.min(),ke.min(),Un.empty(),0)}static newUnknownDocument(e,n){return new bn(e,3,n,ke.min(),ke.min(),Un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n){this.position=e,this.inclusive=n}}function __(r,e,n){let s=0;for(let l=0;l<r.position.length;l++){const c=e[l],d=r.position[l];if(c.field.isKeyField()?s=be.comparator(be.fromName(d.referenceValue),n.key):s=uo(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function E_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!zi(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n="asc"){this.field=e,this.dir=n}}function RI(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{}class qt extends vE{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new xI(e,n,s):n==="array-contains"?new OI(e,s):n==="in"?new MI(e,s):n==="not-in"?new VI(e,s):n==="array-contains-any"?new PI(e,s):new qt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new DI(e,s):new NI(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(uo(n,this.value)):n!==null&&fs(this.value)===fs(n)&&this.matchesComparison(uo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yi extends vE{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new yi(e,n)}matches(e){return _E(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function _E(r){return r.op==="and"}function EE(r){return CI(r)&&_E(r)}function CI(r){for(const e of r.filters)if(e instanceof yi)return!1;return!0}function Jf(r){if(r instanceof qt)return r.field.canonicalString()+r.op.toString()+co(r.value);if(EE(r))return r.filters.map(e=>Jf(e)).join(",");{const e=r.filters.map(n=>Jf(n)).join(",");return`${r.op}(${e})`}}function TE(r,e){return r instanceof qt?function(s,l){return l instanceof qt&&s.op===l.op&&s.field.isEqual(l.field)&&zi(s.value,l.value)}(r,e):r instanceof yi?function(s,l){return l instanceof yi&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce((c,d,g)=>c&&TE(d,l.filters[g]),!0):!1}(r,e):void De(19439)}function bE(r){return r instanceof qt?function(n){return`${n.field.canonicalString()} ${n.op} ${co(n.value)}`}(r):r instanceof yi?function(n){return n.op.toString()+" {"+n.getFilters().map(bE).join(" ,")+"}"}(r):"Filter"}class xI extends qt{constructor(e,n,s){super(e,n,s),this.key=be.fromName(s.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class DI extends qt{constructor(e,n){super(e,"in",n),this.keys=AE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class NI extends qt{constructor(e,n){super(e,"not-in",n),this.keys=AE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function AE(r,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>be.fromName(s.referenceValue))}class OI extends qt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return xm(n)&&Bl(n.arrayValue,this.value)}}class MI extends qt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Bl(this.value.arrayValue,n)}}class VI extends qt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Bl(this.value.arrayValue,n)}}class PI extends qt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!xm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Bl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n=null,s=[],l=[],c=null,d=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=d,this.endAt=g,this.Ie=null}}function T_(r,e=null,n=[],s=[],l=null,c=null,d=null){return new kI(r,e,n,s,l,c,d)}function Dm(r){const e=Le(r);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Jf(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(c){return c.field.canonicalString()+c.dir}(s)).join(","),uh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>co(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>co(s)).join(",")),e.Ie=n}return e.Ie}function Nm(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!RI(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!TE(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!E_(r.startAt,e.startAt)&&E_(r.endAt,e.endAt)}function Wf(r){return be.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n=null,s=[],l=[],c=null,d="F",g=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=d,this.startAt=g,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function UI(r,e,n,s,l,c,d,g){return new Zl(r,e,n,s,l,c,d,g)}function Om(r){return new Zl(r)}function b_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function wE(r){return r.collectionGroup!==null}function Ml(r){const e=Le(r);if(e.Ee===null){e.Ee=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ee.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new $t(gn.comparator);return d.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(g=g.add(y.field))})}),g})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ee.push(new Zc(c,s))}),n.has(gn.keyField().canonicalString())||e.Ee.push(new Zc(gn.keyField(),s))}return e.Ee}function Ui(r){const e=Le(r);return e.de||(e.de=LI(e,Ml(r))),e.de}function LI(r,e){if(r.limitType==="F")return T_(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(l=>{const c=l.dir==="desc"?"asc":"desc";return new Zc(l.field,c)});const n=r.endAt?new Xc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Xc(r.startAt.position,r.startAt.inclusive):null;return T_(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function em(r,e){const n=r.filters.concat([e]);return new Zl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function tm(r,e,n){return new Zl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function hh(r,e){return Nm(Ui(r),Ui(e))&&r.limitType===e.limitType}function SE(r){return`${Dm(Ui(r))}|lt:${r.limitType}`}function Ja(r){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(l=>bE(l)).join(", ")}]`),uh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(l=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(l)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(l=>co(l)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(l=>co(l)).join(",")),`Target(${s})`}(Ui(r))}; limitType=${r.limitType})`}function dh(r,e){return e.isFoundDocument()&&function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):be.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(r,e)&&function(s,l){for(const c of Ml(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0}(r,e)&&function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0}(r,e)&&function(s,l){return!(s.startAt&&!function(d,g,p){const y=__(d,g,p);return d.inclusive?y<=0:y<0}(s.startAt,Ml(s),l)||s.endAt&&!function(d,g,p){const y=__(d,g,p);return d.inclusive?y>=0:y>0}(s.endAt,Ml(s),l))}(r,e)}function zI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function IE(r){return(e,n)=>{let s=!1;for(const l of Ml(r)){const c=jI(l,e,n);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function jI(r,e,n){const s=r.field.isKeyField()?be.comparator(e.key,n.key):function(c,d,g){const p=d.data.field(c),y=g.data.field(c);return p!==null&&y!==null?uo(p,y):De(42886)}(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return De(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),l=this.inner[s];if(l===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(e){ps(this.inner,(n,s)=>{for(const[l,c]of s)e(l,c)})}isEmpty(){return uE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI=new Dt(be.comparator);function Tr(){return BI}const RE=new Dt(be.comparator);function Rl(...r){let e=RE;for(const n of r)e=e.insert(n.key,n);return e}function CE(r){let e=RE;return r.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Ys(){return Vl()}function xE(){return Vl()}function Vl(){return new ta(r=>r.toString(),(r,e)=>r.isEqual(e))}const qI=new Dt(be.comparator),HI=new $t(be.comparator);function Ze(...r){let e=HI;for(const n of r)e=e.add(n);return e}const FI=new $t(Fe);function GI(){return FI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kc(e)?"-0":e}}function DE(r){return{integerValue:""+r}}function QI(r,e){return _I(e)?DE(e):Mm(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(){this._=void 0}}function KI(r,e,n){return r instanceof Jc?function(l,c){const d={fields:{[dE]:{stringValue:hE},[mE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Cm(c)&&(c=ch(c)),c&&(d.fields[fE]=c),{mapValue:d}}(n,e):r instanceof ql?OE(r,e):r instanceof Hl?ME(r,e):function(l,c){const d=NE(l,c),g=A_(d)+A_(l.Re);return Zf(d)&&Zf(l.Re)?DE(g):Mm(l.serializer,g)}(r,e)}function YI(r,e,n){return r instanceof ql?OE(r,e):r instanceof Hl?ME(r,e):n}function NE(r,e){return r instanceof Wc?function(s){return Zf(s)||function(c){return!!c&&"doubleValue"in c}(s)}(e)?e:{integerValue:0}:null}class Jc extends fh{}class ql extends fh{constructor(e){super(),this.elements=e}}function OE(r,e){const n=VE(e);for(const s of r.elements)n.some(l=>zi(l,s))||n.push(s);return{arrayValue:{values:n}}}class Hl extends fh{constructor(e){super(),this.elements=e}}function ME(r,e){let n=VE(e);for(const s of r.elements)n=n.filter(l=>!zi(l,s));return{arrayValue:{values:n}}}class Wc extends fh{constructor(e,n){super(),this.serializer=e,this.Re=n}}function A_(r){return Ut(r.integerValue||r.doubleValue)}function VE(r){return xm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function $I(r,e){return r.field.isEqual(e.field)&&function(s,l){return s instanceof ql&&l instanceof ql||s instanceof Hl&&l instanceof Hl?lo(s.elements,l.elements,zi):s instanceof Wc&&l instanceof Wc?zi(s.Re,l.Re):s instanceof Jc&&l instanceof Jc}(r.transform,e.transform)}class XI{constructor(e,n){this.version=e,this.transformResults=n}}class Yn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Yn}static exists(e){return new Yn(void 0,e)}static updateTime(e){return new Yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class mh{}function PE(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Vm(r.key,Yn.none()):new Jl(r.key,r.data,Yn.none());{const n=r.data,s=Un.empty();let l=new $t(gn.comparator);for(let c of e.fields)if(!l.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),l=l.add(c)}return new ys(r.key,s,new Kn(l.toArray()),Yn.none())}}function ZI(r,e,n){r instanceof Jl?function(l,c,d){const g=l.value.clone(),p=S_(l.fieldTransforms,c,d.transformResults);g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(r,e,n):r instanceof ys?function(l,c,d){if(!kc(l.precondition,c))return void c.convertToUnknownDocument(d.version);const g=S_(l.fieldTransforms,c,d.transformResults),p=c.data;p.setAll(kE(l)),p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()}(r,e,n):function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,n)}function Pl(r,e,n,s){return r instanceof Jl?function(c,d,g,p){if(!kc(c.precondition,d))return g;const y=c.value.clone(),T=I_(c.fieldTransforms,p,d);return y.setAll(T),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null}(r,e,n,s):r instanceof ys?function(c,d,g,p){if(!kc(c.precondition,d))return g;const y=I_(c.fieldTransforms,p,d),T=d.data;return T.setAll(kE(c)),T.setAll(y),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(I=>I.field))}(r,e,n,s):function(c,d,g){return kc(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g}(r,e,n)}function JI(r,e){let n=null;for(const s of r.fieldTransforms){const l=e.data.field(s.field),c=NE(s.transform,l||null);c!=null&&(n===null&&(n=Un.empty()),n.set(s.field,c))}return n||null}function w_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&lo(s,l,(c,d)=>$I(c,d))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Jl extends mh{constructor(e,n,s,l=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class ys extends mh{constructor(e,n,s,l,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function kE(r){const e=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}}),e}function S_(r,e,n){const s=new Map;dt(r.length===n.length,32656,{Ve:n.length,me:r.length});for(let l=0;l<n.length;l++){const c=r[l],d=c.transform,g=e.data.field(c.field);s.set(c.field,YI(d,g,n[l]))}return s}function I_(r,e,n){const s=new Map;for(const l of r){const c=l.transform,d=n.data.field(l.field);s.set(l.field,KI(c,d,e))}return s}class Vm extends mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WI extends mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e,n,s,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&ZI(c,e,s[l])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Pl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Pl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=xE();return this.mutations.forEach(l=>{const c=e.get(l.key),d=c.overlayedDocument;let g=this.applyToLocalView(d,c.mutatedFields);g=n.has(l.key)?null:g;const p=PE(d,g);p!==null&&s.set(l.key,p),d.isValidDocument()||d.convertToNoDocument(ke.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ze())}isEqual(e){return this.batchId===e.batchId&&lo(this.mutations,e.mutations,(n,s)=>w_(n,s))&&lo(this.baseMutations,e.baseMutations,(n,s)=>w_(n,s))}}class Pm{constructor(e,n,s,l){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(e,n,s){dt(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let l=function(){return qI}();const c=e.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,s[d].version);return new Pm(e,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,tt;function iR(r){switch(r){case W.OK:return De(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return De(15467,{code:r})}}function UE(r){if(r===void 0)return Er("GRPC error has no .code"),W.UNKNOWN;switch(r){case Bt.OK:return W.OK;case Bt.CANCELLED:return W.CANCELLED;case Bt.UNKNOWN:return W.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return W.INTERNAL;case Bt.UNAVAILABLE:return W.UNAVAILABLE;case Bt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case Bt.NOT_FOUND:return W.NOT_FOUND;case Bt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case Bt.ABORTED:return W.ABORTED;case Bt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case Bt.DATA_LOSS:return W.DATA_LOSS;default:return De(39323,{code:r})}}(tt=Bt||(Bt={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=new os([4294967295,4294967295],0);function R_(r){const e=aE().encode(r),n=new J0;return n.update(e),new Uint8Array(n.digest())}function C_(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new os([n,s],0),new os([l,c],0)]}class km{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Cl(`Invalid padding: ${n}`);if(s<0)throw new Cl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Cl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Cl(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=os.fromNumber(this.pe)}we(e,n,s){let l=e.add(n.multiply(os.fromNumber(s)));return l.compare(rR)===1&&(l=new os([l.getBits(0),l.getBits(1)],0)),l.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=R_(e),[s,l]=C_(n);for(let c=0;c<this.hashCount;c++){const d=this.we(s,l,c);if(!this.be(d))return!1}return!0}static create(e,n,s){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new km(c,l,n);return s.forEach(g=>d.insert(g)),d}insert(e){if(this.pe===0)return;const n=R_(e),[s,l]=C_(n);for(let c=0;c<this.hashCount;c++){const d=this.we(s,l,c);this.Se(d)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Cl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n,s,l,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const l=new Map;return l.set(e,Wl.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new gh(ke.min(),l,new Dt(Fe),Tr(),Ze())}}class Wl{constructor(e,n,s,l,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Wl(s,n,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,n,s,l){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=l}}class LE{constructor(e,n){this.targetId=e,this.Ce=n}}class zE{constructor(e,n,s=pn.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=l}}class x_{constructor(){this.Fe=0,this.Me=D_(),this.xe=pn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ze(),n=Ze(),s=Ze();return this.Me.forEach((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:De(38017,{changeType:c})}}),new Wl(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=D_()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,dt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class sR{constructor(e){this.ze=e,this.je=new Map,this.He=Tr(),this.Je=Ic(),this.Ye=Ic(),this.Ze=new Dt(Fe)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:De(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,l)=>{this.it(l)&&n(l)})}ot(e){const n=e.targetId,s=e.Ce.count,l=this._t(n);if(l){const c=l.target;if(Wf(c))if(s===0){const d=new be(c.path);this.tt(n,d,bn.newNoDocument(d,ke.min()))}else dt(s===1,20013,{expectedCount:s});else{const d=this.ut(n);if(d!==s){const g=this.ct(e),p=g?this.lt(g,e,d):1;if(p!==0){this.st(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=n;let d,g;try{d=ds(s).toUint8Array()}catch(p){if(p instanceof cE)return oo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new km(d,l,c)}catch(p){return oo(p instanceof Cl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.pe===0?null:g}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let l=0;return s.forEach(c=>{const d=this.ze.Pt(),g=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.tt(n,c,null),l++)}),l}It(e){const n=new Map;this.je.forEach((c,d)=>{const g=this._t(d);if(g){if(c.current&&Wf(g.target)){const p=new be(g.target.path);this.Et(p).has(d)||this.dt(d,p)||this.tt(d,p,bn.newNoDocument(p,e))}c.Le&&(n.set(d,c.qe()),c.Qe())}});let s=Ze();this.Ye.forEach((c,d)=>{let g=!0;d.forEachWhile(p=>{const y=this._t(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(s=s.add(c))}),this.He.forEach((c,d)=>d.setReadTime(e));const l=new gh(e,n,this.Ze,this.He,s);return this.He=Tr(),this.Je=Ic(),this.Ye=Ic(),this.Ze=new Dt(Fe),l}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const l=this.rt(e);this.dt(e,n)?l.$e(n,1):l.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new x_,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new $t(Fe),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new $t(Fe),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new x_),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Ic(){return new Dt(be.comparator)}function D_(){return new Dt(be.comparator)}const aR={asc:"ASCENDING",desc:"DESCENDING"},oR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lR={and:"AND",or:"OR"};class uR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function nm(r,e){return r.useProto3Json||uh(e)?e:{value:e}}function eh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jE(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function cR(r,e){return eh(r,e.toTimestamp())}function Li(r){return dt(!!r,49232),ke.fromTimestamp(function(n){const s=hs(n);return new Yt(s.seconds,s.nanos)}(r))}function Um(r,e){return im(r,e).canonicalString()}function im(r,e){const n=function(l){return new At(["projects",l.projectId,"databases",l.database])}(r).child("documents");return e===void 0?n:n.child(e)}function BE(r){const e=At.fromString(r);return dt(QE(e),10190,{key:e.toString()}),e}function rm(r,e){return Um(r.databaseId,e.path)}function Pf(r,e){const n=BE(e);if(n.get(1)!==r.databaseId.projectId)throw new de(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new de(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new be(HE(n))}function qE(r,e){return Um(r.databaseId,e)}function hR(r){const e=BE(r);return e.length===4?At.emptyPath():HE(e)}function sm(r){return new At(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function HE(r){return dt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function N_(r,e,n){return{name:rm(r,e),fields:n.value.mapValue.fields}}function dR(r,e){let n;if("targetChange"in e){e.targetChange;const s=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:De(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=function(y,T){return y.useProto3Json?(dt(T===void 0||typeof T=="string",58123),pn.fromBase64String(T||"")):(dt(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),pn.fromUint8Array(T||new Uint8Array))}(r,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&function(y){const T=y.code===void 0?W.UNKNOWN:UE(y.code);return new de(T,y.message||"")}(d);n=new zE(s,l,c,g||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const l=Pf(r,s.document.name),c=Li(s.document.updateTime),d=s.document.createTime?Li(s.document.createTime):ke.min(),g=new Un({mapValue:{fields:s.document.fields}}),p=bn.newFoundDocument(l,c,d,g),y=s.targetIds||[],T=s.removedTargetIds||[];n=new Uc(y,T,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const l=Pf(r,s.document),c=s.readTime?Li(s.readTime):ke.min(),d=bn.newNoDocument(l,c),g=s.removedTargetIds||[];n=new Uc([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const l=Pf(r,s.document),c=s.removedTargetIds||[];n=new Uc([],c,l,null)}else{if(!("filter"in e))return De(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,d=new nR(l,c),g=s.targetId;n=new LE(g,d)}}return n}function fR(r,e){let n;if(e instanceof Jl)n={update:N_(r,e.key,e.value)};else if(e instanceof Vm)n={delete:rm(r,e.key)};else if(e instanceof ys)n={update:N_(r,e.key,e.data),updateMask:bR(e.fieldMask)};else{if(!(e instanceof WI))return De(16599,{ft:e.type});n={verify:rm(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(c,d){const g=d.transform;if(g instanceof Jc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof ql)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Hl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Wc)return{fieldPath:d.field.canonicalString(),increment:g.Re};throw De(20930,{transform:d.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(l,c){return c.updateTime!==void 0?{updateTime:cR(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:De(27497)}(r,e.precondition)),n}function mR(r,e){return r&&r.length>0?(dt(e!==void 0,14353),r.map(n=>function(l,c){let d=l.updateTime?Li(l.updateTime):Li(c);return d.isEqual(ke.min())&&(d=Li(c)),new XI(d,l.transformResults||[])}(n,e))):[]}function gR(r,e){return{documents:[qE(r,e.path)]}}function pR(r,e){const n={structuredQuery:{}},s=e.path;let l;e.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=qE(r,l);const c=function(y){if(y.length!==0)return GE(yi.create(y,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const d=function(y){if(y.length!==0)return y.map(T=>function(D){return{field:Wa(D.field),direction:_R(D.dir)}}(T))}(e.orderBy);d&&(n.structuredQuery.orderBy=d);const g=nm(r,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{gt:n,parent:l}}function yR(r){let e=hR(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){dt(s===1,65062);const T=n.from[0];T.allDescendants?l=T.collectionId:e=e.child(T.collectionId)}let c=[];n.where&&(c=function(I){const D=FE(I);return D instanceof yi&&EE(D)?D.getFilters():[D]}(n.where));let d=[];n.orderBy&&(d=function(I){return I.map(D=>function(te){return new Zc(eo(te.field),function(ne){switch(ne){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(te.direction))}(D))}(n.orderBy));let g=null;n.limit&&(g=function(I){let D;return D=typeof I=="object"?I.value:I,uh(D)?null:D}(n.limit));let p=null;n.startAt&&(p=function(I){const D=!!I.before,G=I.values||[];return new Xc(G,D)}(n.startAt));let y=null;return n.endAt&&(y=function(I){const D=!I.before,G=I.values||[];return new Xc(G,D)}(n.endAt)),UI(e,l,d,c,g,"F",p,y)}function vR(r,e){const n=function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De(28987,{purpose:l})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function FE(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=eo(n.unaryFilter.field);return qt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=eo(n.unaryFilter.field);return qt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=eo(n.unaryFilter.field);return qt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=eo(n.unaryFilter.field);return qt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return De(61313);default:return De(60726)}}(r):r.fieldFilter!==void 0?function(n){return qt.create(eo(n.fieldFilter.field),function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return De(58110);default:return De(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return yi.create(n.compositeFilter.filters.map(s=>FE(s)),function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return De(1026)}}(n.compositeFilter.op))}(r):De(30097,{filter:r})}function _R(r){return aR[r]}function ER(r){return oR[r]}function TR(r){return lR[r]}function Wa(r){return{fieldPath:r.canonicalString()}}function eo(r){return gn.fromServerFormat(r.fieldPath)}function GE(r){return r instanceof qt?function(n){if(n.op==="=="){if(v_(n.value))return{unaryFilter:{field:Wa(n.field),op:"IS_NAN"}};if(y_(n.value))return{unaryFilter:{field:Wa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(v_(n.value))return{unaryFilter:{field:Wa(n.field),op:"IS_NOT_NAN"}};if(y_(n.value))return{unaryFilter:{field:Wa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wa(n.field),op:ER(n.op),value:n.value}}}(r):r instanceof yi?function(n){const s=n.getFilters().map(l=>GE(l));return s.length===1?s[0]:{compositeFilter:{op:TR(n.op),filters:s}}}(r):De(54877,{filter:r})}function bR(r){const e=[];return r.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function QE(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n,s,l,c=ke.min(),d=ke.min(),g=pn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(e){return new is(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e){this.wt=e}}function wR(r){const e=yR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?tm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(){this.Cn=new IR}addToCollectionParentIndex(e,n){return this.Cn.add(n),J.resolve()}getCollectionParents(e,n){return J.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return J.resolve()}deleteFieldIndex(e,n){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,n){return J.resolve()}getDocumentsMatchingTarget(e,n){return J.resolve(null)}getIndexType(e,n){return J.resolve(0)}getFieldIndexes(e,n){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,n){return J.resolve(cs.min())}getMinOffsetFromCollectionGroup(e,n){return J.resolve(cs.min())}updateCollectionGroup(e,n,s){return J.resolve()}updateIndexEntries(e,n){return J.resolve()}}class IR{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n]||new $t(At.comparator),c=!l.has(s);return this.index[n]=l.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(e){return(this.index[e]||new $t(At.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},KE=41943040;class kn{static withCacheSize(e){return new kn(e,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kn.DEFAULT_COLLECTION_PERCENTILE=10,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kn.DEFAULT=new kn(KE,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kn.DISABLED=new kn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new ho(0)}static lr(){return new ho(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="LruGarbageCollector",RR=1048576;function V_([r,e],[n,s]){const l=Fe(r,n);return l===0?Fe(e,s):l}class CR{constructor(e){this.Er=e,this.buffer=new $t(V_),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();V_(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class xR{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){he(M_,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Eo(n)?he(M_,"Ignoring IndexedDB error during garbage collection: ",n):await _o(n)}await this.mr(3e5)})}}class DR{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return J.resolve(lh.le);const s=new CR(n);return this.gr.forEachTarget(e,l=>s.Rr(l.sequenceNumber)).next(()=>this.gr.yr(e,l=>s.Rr(l))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(O_)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),O_):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,l,c,d,g,p,y;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),l=this.params.maximumSequenceNumbersToCollect):l=I,d=Date.now(),this.nthSequenceNumber(e,l))).next(I=>(s=I,g=Date.now(),this.removeTargets(e,s,n))).next(I=>(c=I,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(I=>(y=Date.now(),Za()<=Xe.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${l} in `+(g-d)+`ms
	Removed ${c} targets in `+(p-g)+`ms
	Removed ${I} documents in `+(y-p)+`ms
Total Duration: ${y-T}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:I})))}}function NR(r,e){return new DR(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(){this.changes=new ta(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?J.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,n,s,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(l=>(s=l,this.remoteDocumentCache.getEntry(e,n))).next(l=>(s!==null&&Pl(s.mutation,l,Kn.empty(),Yt.now()),l))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Ze()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Ze()){const l=Ys();return this.populateOverlays(e,l,n).next(()=>this.computeViews(e,n,l,s).next(c=>{let d=Rl();return c.forEach((g,p)=>{d=d.insert(g,p.overlayedDocument)}),d}))}getOverlayedDocuments(e,n){const s=Ys();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Ze()))}populateOverlays(e,n,s){const l=[];return s.forEach(c=>{n.has(c)||l.push(c)}),this.documentOverlayCache.getOverlays(e,l).next(c=>{c.forEach((d,g)=>{n.set(d,g)})})}computeViews(e,n,s,l){let c=Tr();const d=Vl(),g=function(){return Vl()}();return n.forEach((p,y)=>{const T=s.get(y.key);l.has(y.key)&&(T===void 0||T.mutation instanceof ys)?c=c.insert(y.key,y):T!==void 0?(d.set(y.key,T.mutation.getFieldMask()),Pl(T.mutation,y,T.mutation.getFieldMask(),Yt.now())):d.set(y.key,Kn.empty())}),this.recalculateAndSaveOverlays(e,c).next(p=>(p.forEach((y,T)=>d.set(y,T)),n.forEach((y,T)=>{var I;return g.set(y,new MR(T,(I=d.get(y))!==null&&I!==void 0?I:null))}),g))}recalculateAndSaveOverlays(e,n){const s=Vl();let l=new Dt((d,g)=>d-g),c=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(d=>{for(const g of d)g.keys().forEach(p=>{const y=n.get(p);if(y===null)return;let T=s.get(p)||Kn.empty();T=g.applyToLocalView(y,T),s.set(p,T);const I=(l.get(g.batchId)||Ze()).add(p);l=l.insert(g.batchId,I)})}).next(()=>{const d=[],g=l.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),y=p.key,T=p.value,I=xE();T.forEach(D=>{if(!c.has(D)){const G=PE(n.get(D),s.get(D));G!==null&&I.set(D,G),c=c.add(D)}}),d.push(this.documentOverlayCache.saveOverlays(e,y,I))}return J.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,l){return function(d){return be.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,l):this.getDocumentsMatchingCollectionQuery(e,n,s,l)}getNextDocuments(e,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,l).next(c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,l-c.size):J.resolve(Ys());let g=Ll,p=c;return d.next(y=>J.forEach(y,(T,I)=>(g<I.largestBatchId&&(g=I.largestBatchId),c.get(T)?J.resolve():this.remoteDocumentCache.getEntry(e,T).next(D=>{p=p.insert(T,D)}))).next(()=>this.populateOverlays(e,y,c)).next(()=>this.computeViews(e,p,y,Ze())).next(T=>({batchId:g,changes:CE(T)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next(s=>{let l=Rl();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l})}getDocumentsMatchingCollectionGroupQuery(e,n,s,l){const c=n.collectionGroup;let d=Rl();return this.indexManager.getCollectionParents(e,c).next(g=>J.forEach(g,p=>{const y=function(I,D){return new Zl(D,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)}(n,p.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,s,l).next(T=>{T.forEach((I,D)=>{d=d.insert(I,D)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,n,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,l))).next(d=>{c.forEach((p,y)=>{const T=y.getKey();d.get(T)===null&&(d=d.insert(T,bn.newInvalidDocument(T)))});let g=Rl();return d.forEach((p,y)=>{const T=c.get(p);T!==void 0&&Pl(T.mutation,y,Kn.empty(),Yt.now()),dh(n,y)&&(g=g.insert(p,y))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return J.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(l){return{id:l.id,version:l.version,createTime:Li(l.createTime)}}(n)),J.resolve()}getNamedQuery(e,n){return J.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(l){return{name:l.name,query:wR(l.bundledQuery),readTime:Li(l.readTime)}}(n)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(){this.overlays=new Dt(be.comparator),this.Qr=new Map}getOverlay(e,n){return J.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Ys();return J.forEach(n,l=>this.getOverlay(e,l).next(c=>{c!==null&&s.set(l,c)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((l,c)=>{this.St(e,n,c)}),J.resolve()}removeOverlaysForBatchId(e,n,s){const l=this.Qr.get(s);return l!==void 0&&(l.forEach(c=>this.overlays=this.overlays.remove(c)),this.Qr.delete(s)),J.resolve()}getOverlaysForCollection(e,n,s){const l=Ys(),c=n.length+1,d=new be(n.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const p=g.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&p.largestBatchId>s&&l.set(p.getKey(),p)}return J.resolve(l)}getOverlaysForCollectionGroup(e,n,s,l){let c=new Dt((y,T)=>y-T);const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let T=c.get(y.largestBatchId);T===null&&(T=Ys(),c=c.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const g=Ys(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,T)=>g.set(y,T)),!(g.size()>=l)););return J.resolve(g)}St(e,n,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.Qr.get(l.largestBatchId).delete(s.key);this.Qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new tR(n,s));let c=this.Qr.get(n);c===void 0&&(c=Ze(),this.Qr.set(n,c)),this.Qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(){this.sessionToken=pn.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(){this.$r=new $t(an.Ur),this.Kr=new $t(an.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new an(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new an(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new be(new At([])),s=new an(n,e),l=new an(n,e+1),c=[];return this.Kr.forEachInRange([s,l],d=>{this.zr(d),c.push(d.key)}),c}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new be(new At([])),s=new an(n,e),l=new an(n,e+1);let c=Ze();return this.Kr.forEachInRange([s,l],d=>{c=c.add(d.key)}),c}containsKey(e){const n=new an(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class an{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return be.comparator(e.key,n.key)||Fe(e.Zr,n.Zr)}static Wr(e,n){return Fe(e.Zr,n.Zr)||be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new $t(an.Ur)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,l){const c=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new eR(c,n,s,l);this.mutationQueue.push(d);for(const g of l)this.Xr=this.Xr.add(new an(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return J.resolve(d)}lookupMutationBatch(e,n){return J.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,l=this.ti(s),c=l<0?0:l;return J.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?Rm:this.nr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new an(n,0),l=new an(n,Number.POSITIVE_INFINITY),c=[];return this.Xr.forEachInRange([s,l],d=>{const g=this.ei(d.Zr);c.push(g)}),J.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new $t(Fe);return n.forEach(l=>{const c=new an(l,0),d=new an(l,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([c,d],g=>{s=s.add(g.Zr)})}),J.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,l=s.length+1;let c=s;be.isDocumentKey(c)||(c=c.child(""));const d=new an(new be(c),0);let g=new $t(Fe);return this.Xr.forEachWhile(p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===l&&(g=g.add(p.Zr)),!0)},d),J.resolve(this.ni(g))}ni(e){const n=[];return e.forEach(s=>{const l=this.ei(s);l!==null&&n.push(l)}),n}removeMutationBatch(e,n){dt(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return J.forEach(n.mutations,l=>{const c=new an(l.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new an(n,0),l=this.Xr.firstAfterOrEqual(s);return J.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.ii=e,this.docs=function(){return new Dt(be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,l=this.docs.get(s),c=l?l.size:0,d=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return J.resolve(s?s.document.mutableCopy():bn.newInvalidDocument(n))}getEntries(e,n){let s=Tr();return n.forEach(l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():bn.newInvalidDocument(l))}),J.resolve(s)}getDocumentsMatchingQuery(e,n,s,l){let c=Tr();const d=n.path,g=new be(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:y,value:{document:T}}=p.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||gI(mI(T),s)<=0||(l.has(T.key)||dh(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return J.resolve(c)}getAllFromCollectionGroup(e,n,s,l){De(9500)}si(e,n){return J.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new jR(this)}getSize(e){return J.resolve(this.size)}}class jR extends OR{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,l)=>{l.isValidDocument()?n.push(this.Br.addEntry(e,l)):this.Br.removeEntry(s)}),J.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.persistence=e,this.oi=new ta(n=>Dm(n),Nm),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this._i=0,this.ai=new Lm,this.targetCount=0,this.ui=ho.cr()}forEachTarget(e,n){return this.oi.forEach((s,l)=>n(l)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),J.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new ho(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,J.resolve()}updateTargetData(e,n){return this.Tr(n),J.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,n,s){let l=0;const c=[];return this.oi.forEach((d,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.oi.delete(d),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),l++)}),J.waitFor(c).next(()=>l)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return J.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),J.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach(d=>{c.push(l.markPotentiallyOrphaned(e,d))}),J.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),J.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return J.resolve(s)}containsKey(e,n){return J.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n){this.ci={},this.overlays={},this.li=new lh(0),this.hi=!1,this.hi=!0,this.Pi=new UR,this.referenceDelegate=e(this),this.Ti=new BR(this),this.indexManager=new SR,this.remoteDocumentCache=function(l){return new zR(l)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new AR(n),this.Ei=new PR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new kR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new LR(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){he("MemoryPersistence","Starting transaction:",e);const l=new qR(this.li.next());return this.referenceDelegate.di(),s(l).next(c=>this.referenceDelegate.Ai(l).next(()=>c)).toPromise().then(c=>(l.raiseOnCommittedEvent(),c))}Ri(e,n){return J.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class qR extends yI{constructor(e){super(),this.currentSequenceNumber=e}}class zm{constructor(e){this.persistence=e,this.Vi=new Lm,this.mi=null}static fi(e){return new zm(e)}get gi(){if(this.mi)return this.mi;throw De(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),J.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),J.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),J.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(l=>this.gi.add(l.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(l=>{l.forEach(c=>this.gi.add(c.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.gi,s=>{const l=be.fromPath(s);return this.pi(e,l).next(c=>{c||n.removeEntry(l,ke.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return J.or([()=>J.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class th{constructor(e,n){this.persistence=e,this.yi=new ta(s=>EI(s.path),(s,l)=>s.isEqual(l)),this.garbageCollector=NR(this,n)}static fi(e,n){return new th(e,n)}di(){}Ai(e){return J.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(l=>s+l))}br(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return J.forEach(this.yi,(s,l)=>this.Dr(e,s,l).next(c=>c?J.resolve():n(l)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.si(e,d=>this.Dr(e,d,n).next(g=>{g||(s++,c.removeEntry(d,ke.min()))})).next(()=>c.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),J.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),J.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),J.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Vc(e.data.value)),n}Dr(e,n,s){return J.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.yi.get(n);return J.resolve(l!==void 0&&l>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,n,s,l){this.targetId=e,this.fromCache=n,this.ds=s,this.As=l}static Rs(e,n){let s=Ze(),l=Ze();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new jm(e,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return kb()?8:vI(An())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,l){const c={result:null};return this.ws(e,n).next(d=>{c.result=d}).next(()=>{if(!c.result)return this.bs(e,n,l,s).next(d=>{c.result=d})}).next(()=>{if(c.result)return;const d=new HR;return this.Ss(e,n,d).next(g=>{if(c.result=g,this.fs)return this.Ds(e,n,d,g.size)})}).next(()=>c.result)}Ds(e,n,s,l){return s.documentReadCount<this.gs?(Za()<=Xe.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Ja(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),J.resolve()):(Za()<=Xe.DEBUG&&he("QueryEngine","Query:",Ja(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.ps*l?(Za()<=Xe.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Ja(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ui(n))):J.resolve())}ws(e,n){if(b_(n))return J.resolve(null);let s=Ui(n);return this.indexManager.getIndexType(e,s).next(l=>l===0?null:(n.limit!==null&&l===1&&(n=tm(n,null,"F"),s=Ui(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const d=Ze(...c);return this.ys.getDocuments(e,d).next(g=>this.indexManager.getMinOffset(e,s).next(p=>{const y=this.vs(n,g);return this.Cs(n,y,d,p.readTime)?this.ws(e,tm(n,null,"F")):this.Fs(e,y,n,p)}))})))}bs(e,n,s,l){return b_(n)||l.isEqual(ke.min())?J.resolve(null):this.ys.getDocuments(e,s).next(c=>{const d=this.vs(n,c);return this.Cs(n,d,s,l)?J.resolve(null):(Za()<=Xe.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Ja(n)),this.Fs(e,d,n,fI(l,Ll)).next(g=>g))})}vs(e,n){let s=new $t(IE(e));return n.forEach((l,c)=>{dh(e,c)&&(s=s.add(c))}),s}Cs(e,n,s,l){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,n,s){return Za()<=Xe.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Ja(n)),this.ys.getDocumentsMatchingQuery(e,n,cs.min(),s)}Fs(e,n,s,l){return this.ys.getDocumentsMatchingQuery(e,s,l).next(c=>(n.forEach(d=>{c=c.insert(d.key,d)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="LocalStore",GR=3e8;class QR{constructor(e,n,s,l){this.persistence=e,this.Ms=n,this.serializer=l,this.xs=new Dt(Fe),this.Os=new ta(c=>Dm(c),Nm),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VR(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function KR(r,e,n,s){return new QR(r,e,n,s)}async function $E(r,e){const n=Le(r);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next(c=>(l=c,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(c=>{const d=[],g=[];let p=Ze();for(const y of l){d.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}for(const y of c){g.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}return n.localDocuments.getDocuments(s,p).next(y=>({ks:y,removedBatchIds:d,addedBatchIds:g}))})})}function YR(r,e){const n=Le(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const l=e.batch.keys(),c=n.Bs.newChangeBuffer({trackRemovals:!0});return function(g,p,y,T){const I=y.batch,D=I.keys();let G=J.resolve();return D.forEach(te=>{G=G.next(()=>T.getEntry(p,te)).next(X=>{const ne=y.docVersions.get(te);dt(ne!==null,48541),X.version.compareTo(ne)<0&&(I.applyToRemoteDocument(X,y),X.isValidDocument()&&(X.setReadTime(y.commitVersion),T.addEntry(X)))})}),G.next(()=>g.mutationQueue.removeMutationBatch(p,I))}(n,s,e,c).next(()=>c.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(g){let p=Ze();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(p=p.add(g.batch.mutations[y].key));return p}(e))).next(()=>n.localDocuments.getDocuments(s,l))})}function XE(r){const e=Le(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function $R(r,e){const n=Le(r),s=e.snapshotVersion;let l=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=n.Bs.newChangeBuffer({trackRemovals:!0});l=n.xs;const g=[];e.targetChanges.forEach((T,I)=>{const D=l.get(I);if(!D)return;g.push(n.Ti.removeMatchingKeys(c,T.removedDocuments,I).next(()=>n.Ti.addMatchingKeys(c,T.addedDocuments,I)));let G=D.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(I)!==null?G=G.withResumeToken(pn.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):T.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(T.resumeToken,s)),l=l.insert(I,G),function(X,ne,Me){return X.resumeToken.approximateByteSize()===0||ne.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=GR?!0:Me.addedDocuments.size+Me.modifiedDocuments.size+Me.removedDocuments.size>0}(D,G,T)&&g.push(n.Ti.updateTargetData(c,G))});let p=Tr(),y=Ze();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))}),g.push(XR(c,d,e.documentUpdates).next(T=>{p=T.qs,y=T.Qs})),!s.isEqual(ke.min())){const T=n.Ti.getLastRemoteSnapshotVersion(c).next(I=>n.Ti.setTargetsMetadata(c,c.currentSequenceNumber,s));g.push(T)}return J.waitFor(g).next(()=>d.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,p,y)).next(()=>p)}).then(c=>(n.xs=l,c))}function XR(r,e,n){let s=Ze(),l=Ze();return n.forEach(c=>s=s.add(c)),e.getEntries(r,s).next(c=>{let d=Tr();return n.forEach((g,p)=>{const y=c.get(g);p.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(g)),p.isNoDocument()&&p.version.isEqual(ke.min())?(e.removeEntry(g,p.readTime),d=d.insert(g,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),d=d.insert(g,p)):he(Bm,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",p.version)}),{qs:d,Qs:l}})}function ZR(r,e){const n=Le(r);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Rm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function JR(r,e){const n=Le(r);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let l;return n.Ti.getTargetData(s,e).next(c=>c?(l=c,J.resolve(l)):n.Ti.allocateTargetId(s).next(d=>(l=new is(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,l).next(()=>l))))}).then(s=>{const l=n.xs.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function am(r,e,n){const s=Le(r),l=s.xs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,d=>s.persistence.referenceDelegate.removeTarget(d,l))}catch(d){if(!Eo(d))throw d;he(Bm,`Failed to update sequence numbers for target ${e}: ${d}`)}s.xs=s.xs.remove(e),s.Os.delete(l.target)}function P_(r,e,n){const s=Le(r);let l=ke.min(),c=Ze();return s.persistence.runTransaction("Execute query","readwrite",d=>function(p,y,T){const I=Le(p),D=I.Os.get(T);return D!==void 0?J.resolve(I.xs.get(D)):I.Ti.getTargetData(y,T)}(s,d,Ui(e)).next(g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(d,g.targetId).next(p=>{c=p})}).next(()=>s.Ms.getDocumentsMatchingQuery(d,e,n?l:ke.min(),n?c:Ze())).next(g=>(WR(s,zI(e),g),{documents:g,$s:c})))}function WR(r,e,n){let s=r.Ns.get(e)||ke.min();n.forEach((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),r.Ns.set(e,s)}class k_{constructor(){this.activeTargetIds=GI()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class e2{constructor(){this.xo=new k_,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new k_,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="ConnectivityMonitor";class L_{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){he(U_,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){he(U_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rc=null;function om(){return Rc===null?Rc=function(){return 268435456+Math.round(2147483648*Math.random())}():Rc++,"0x"+Rc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf="RestConnection",n2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class i2{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${l}`,this.Go=this.databaseId.database===Yc?`project_id=${s}`:`project_id=${s}&database_id=${l}`}zo(e,n,s,l,c){const d=om(),g=this.jo(e,n.toUriEncodedString());he(kf,`Sending RPC '${e}' ${d}:`,g,s);const p={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(p,l,c);const{host:y}=new URL(g),T=go(y);return this.Jo(e,g,p,s,T).then(I=>(he(kf,`Received RPC '${e}' ${d}: `,I),I),I=>{throw oo(kf,`RPC '${e}' ${d} failed with error: `,I,"url: ",g,"request:",s),I})}Yo(e,n,s,l,c,d){return this.zo(e,n,s,l,c)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+vo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((l,c)=>e[c]=l),s&&s.headers.forEach((l,c)=>e[c]=l)}jo(e,n){const s=n2[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="WebChannelConnection";class s2 extends i2{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,l,c){const d=om();return new Promise((g,p)=>{const y=new W0;y.setWithCredentials(!0),y.listenOnce(eE.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Mc.NO_ERROR:const I=y.getResponseJson();he(En,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(I)),g(I);break;case Mc.TIMEOUT:he(En,`RPC '${e}' ${d} timed out`),p(new de(W.DEADLINE_EXCEEDED,"Request time out"));break;case Mc.HTTP_ERROR:const D=y.getStatus();if(he(En,`RPC '${e}' ${d} failed with status:`,D,"response text:",y.getResponseText()),D>0){let G=y.getResponseJson();Array.isArray(G)&&(G=G[0]);const te=G==null?void 0:G.error;if(te&&te.status&&te.message){const X=function(Me){const Ae=Me.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(Ae)>=0?Ae:W.UNKNOWN}(te.status);p(new de(X,te.message))}else p(new de(W.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new de(W.UNAVAILABLE,"Connection failed."));break;default:De(9055,{h_:e,streamId:d,P_:y.getLastErrorCode(),T_:y.getLastError()})}}finally{he(En,`RPC '${e}' ${d} completed.`)}});const T=JSON.stringify(l);he(En,`RPC '${e}' ${d} sending request:`,l),y.send(n,"POST",T,s,15)})}I_(e,n,s){const l=om(),c=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=iE(),g=nE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Ho(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const T=c.join("");he(En,`Creating RPC '${e}' stream ${l}: ${T}`,p);const I=d.createWebChannel(T,p);this.E_(I);let D=!1,G=!1;const te=new r2({Zo:ne=>{G?he(En,`Not sending because RPC '${e}' stream ${l} is closed:`,ne):(D||(he(En,`Opening RPC '${e}' stream ${l} transport.`),I.open(),D=!0),he(En,`RPC '${e}' stream ${l} sending:`,ne),I.send(ne))},Xo:()=>I.close()}),X=(ne,Me,Ae)=>{ne.listen(Me,Ee=>{try{Ae(Ee)}catch(ze){setTimeout(()=>{throw ze},0)}})};return X(I,Il.EventType.OPEN,()=>{G||(he(En,`RPC '${e}' stream ${l} transport opened.`),te.__())}),X(I,Il.EventType.CLOSE,()=>{G||(G=!0,he(En,`RPC '${e}' stream ${l} transport closed`),te.u_(),this.d_(I))}),X(I,Il.EventType.ERROR,ne=>{G||(G=!0,oo(En,`RPC '${e}' stream ${l} transport errored. Name:`,ne.name,"Message:",ne.message),te.u_(new de(W.UNAVAILABLE,"The operation could not be completed")))}),X(I,Il.EventType.MESSAGE,ne=>{var Me;if(!G){const Ae=ne.data[0];dt(!!Ae,16349);const Ee=Ae,ze=(Ee==null?void 0:Ee.error)||((Me=Ee[0])===null||Me===void 0?void 0:Me.error);if(ze){he(En,`RPC '${e}' stream ${l} received error:`,ze);const we=ze.status;let Be=function(S){const O=Bt[S];if(O!==void 0)return UE(O)}(we),x=ze.message;Be===void 0&&(Be=W.INTERNAL,x="Unknown error status: "+we+" with message "+ze.message),G=!0,te.u_(new de(Be,x)),I.close()}else he(En,`RPC '${e}' stream ${l} received:`,Ae),te.c_(Ae)}}),X(g,tE.STAT_EVENT,ne=>{ne.stat===Yf.PROXY?he(En,`RPC '${e}' stream ${l} detected buffering proxy`):ne.stat===Yf.NOPROXY&&he(En,`RPC '${e}' stream ${l} detected no buffering proxy`)}),setTimeout(()=>{te.a_()},0),te}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function Uf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(r){return new uR(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,n,s=1e3,l=1.5,c=6e4){this.xi=e,this.timerId=n,this.A_=s,this.R_=l,this.V_=c,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),l=Math.max(0,n-s);l>0&&he("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,l,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="PersistentStream";class JE{constructor(e,n,s,l,c,d,g,p){this.xi=e,this.S_=s,this.D_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new ZE(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(Er(n.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,l])=>{this.v_===n&&this.z_(s,l)},s=>{e(()=>{const l=new de(W.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(l)})})}z_(e,n){const s=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(l=>{s(()=>this.j_(l))}),this.stream.onMessage(l=>{s(()=>++this.M_==1?this.J_(l):this.onNext(l))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return he(z_,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(he(z_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class a2 extends JE{constructor(e,n,s,l,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,d),this.serializer=c}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=dR(this.serializer,e),s=function(c){if(!("targetChange"in c))return ke.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?ke.min():d.readTime?Li(d.readTime):ke.min()}(e);return this.listener.Y_(n,s)}Z_(e){const n={};n.database=sm(this.serializer),n.addTarget=function(c,d){let g;const p=d.target;if(g=Wf(p)?{documents:gR(c,p)}:{query:pR(c,p).gt},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=jE(c,d.resumeToken);const y=nm(c,d.expectedCount);y!==null&&(g.expectedCount=y)}else if(d.snapshotVersion.compareTo(ke.min())>0){g.readTime=eh(c,d.snapshotVersion.toTimestamp());const y=nm(c,d.expectedCount);y!==null&&(g.expectedCount=y)}return g}(this.serializer,e);const s=vR(this.serializer,e);s&&(n.labels=s),this.Q_(n)}X_(e){const n={};n.database=sm(this.serializer),n.removeTarget=e,this.Q_(n)}}class o2 extends JE{constructor(e,n,s,l,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,d),this.serializer=c}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return dt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,dt(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){dt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=mR(e.writeResults,e.commitTime),s=Li(e.commitTime);return this.listener.ra(s,n)}ia(){const e={};e.database=sm(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>fR(this.serializer,s))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{}class u2 extends l2{constructor(e,n,s,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.sa=!1}oa(){if(this.sa)throw new de(W.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.zo(e,im(n,s),l,c,d)).catch(c=>{throw c.name==="FirebaseError"?(c.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new de(W.UNKNOWN,c.toString())})}Yo(e,n,s,l,c){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.Yo(e,im(n,s),l,d,g,c)).catch(d=>{throw d.name==="FirebaseError"?(d.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new de(W.UNKNOWN,d.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class c2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Er(n),this.ua=!1):he("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="RemoteStore";class h2{constructor(e,n,s,l,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=c,this.Ra.No(d=>{s.enqueueAndForget(async()=>{na(this)&&(he(Ws,"Restarting streams for network reachability change."),await async function(p){const y=Le(p);y.da.add(4),await eu(y),y.Va.set("Unknown"),y.da.delete(4),await yh(y)}(this))})}),this.Va=new c2(s,l)}}async function yh(r){if(na(r))for(const e of r.Aa)await e(!0)}async function eu(r){for(const e of r.Aa)await e(!1)}function WE(r,e){const n=Le(r);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),Gm(n)?Fm(n):To(n).N_()&&Hm(n,e))}function qm(r,e){const n=Le(r),s=To(n);n.Ea.delete(e),s.N_()&&e1(n,e),n.Ea.size===0&&(s.N_()?s.k_():na(n)&&n.Va.set("Unknown"))}function Hm(r,e){if(r.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}To(r).Z_(e)}function e1(r,e){r.ma.Ke(e),To(r).X_(e)}function Fm(r){r.ma=new sR({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>r.Ea.get(e)||null,Pt:()=>r.datastore.serializer.databaseId}),To(r).start(),r.Va.ca()}function Gm(r){return na(r)&&!To(r).O_()&&r.Ea.size>0}function na(r){return Le(r).da.size===0}function t1(r){r.ma=void 0}async function d2(r){r.Va.set("Online")}async function f2(r){r.Ea.forEach((e,n)=>{Hm(r,e)})}async function m2(r,e){t1(r),Gm(r)?(r.Va.Pa(e),Fm(r)):r.Va.set("Unknown")}async function g2(r,e,n){if(r.Va.set("Online"),e instanceof zE&&e.state===2&&e.cause)try{await async function(l,c){const d=c.cause;for(const g of c.targetIds)l.Ea.has(g)&&(await l.remoteSyncer.rejectListen(g,d),l.Ea.delete(g),l.ma.removeTarget(g))}(r,e)}catch(s){he(Ws,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await nh(r,s)}else if(e instanceof Uc?r.ma.Xe(e):e instanceof LE?r.ma.ot(e):r.ma.nt(e),!n.isEqual(ke.min()))try{const s=await XE(r.localStore);n.compareTo(s)>=0&&await function(c,d){const g=c.ma.It(d);return g.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const T=c.Ea.get(y);T&&c.Ea.set(y,T.withResumeToken(p.resumeToken,d))}}),g.targetMismatches.forEach((p,y)=>{const T=c.Ea.get(p);if(!T)return;c.Ea.set(p,T.withResumeToken(pn.EMPTY_BYTE_STRING,T.snapshotVersion)),e1(c,p);const I=new is(T.target,p,y,T.sequenceNumber);Hm(c,I)}),c.remoteSyncer.applyRemoteEvent(g)}(r,n)}catch(s){he(Ws,"Failed to raise snapshot:",s),await nh(r,s)}}async function nh(r,e,n){if(!Eo(e))throw e;r.da.add(1),await eu(r),r.Va.set("Offline"),n||(n=()=>XE(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{he(Ws,"Retrying IndexedDB access"),await n(),r.da.delete(1),await yh(r)})}function n1(r,e){return e().catch(n=>nh(r,n,e))}async function vh(r){const e=Le(r),n=ms(e);let s=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Rm;for(;p2(e);)try{const l=await ZR(e.localStore,s);if(l===null){e.Ia.length===0&&n.k_();break}s=l.batchId,y2(e,l)}catch(l){await nh(e,l)}i1(e)&&r1(e)}function p2(r){return na(r)&&r.Ia.length<10}function y2(r,e){r.Ia.push(e);const n=ms(r);n.N_()&&n.ea&&n.ta(e.mutations)}function i1(r){return na(r)&&!ms(r).O_()&&r.Ia.length>0}function r1(r){ms(r).start()}async function v2(r){ms(r).ia()}async function _2(r){const e=ms(r);for(const n of r.Ia)e.ta(n.mutations)}async function E2(r,e,n){const s=r.Ia.shift(),l=Pm.from(s,e,n);await n1(r,()=>r.remoteSyncer.applySuccessfulWrite(l)),await vh(r)}async function T2(r,e){e&&ms(r).ea&&await async function(s,l){if(function(d){return iR(d)&&d!==W.ABORTED}(l.code)){const c=s.Ia.shift();ms(s).L_(),await n1(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l)),await vh(s)}}(r,e),i1(r)&&r1(r)}async function j_(r,e){const n=Le(r);n.asyncQueue.verifyOperationInProgress(),he(Ws,"RemoteStore received new credentials");const s=na(n);n.da.add(3),await eu(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await yh(n)}async function b2(r,e){const n=Le(r);e?(n.da.delete(2),await yh(n)):e||(n.da.add(2),await eu(n),n.Va.set("Unknown"))}function To(r){return r.fa||(r.fa=function(n,s,l){const c=Le(n);return c.oa(),new a2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)}(r.datastore,r.asyncQueue,{e_:d2.bind(null,r),n_:f2.bind(null,r),i_:m2.bind(null,r),Y_:g2.bind(null,r)}),r.Aa.push(async e=>{e?(r.fa.L_(),Gm(r)?Fm(r):r.Va.set("Unknown")):(await r.fa.stop(),t1(r))})),r.fa}function ms(r){return r.ga||(r.ga=function(n,s,l){const c=Le(n);return c.oa(),new o2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)}(r.datastore,r.asyncQueue,{e_:()=>Promise.resolve(),n_:v2.bind(null,r),i_:T2.bind(null,r),na:_2.bind(null,r),ra:E2.bind(null,r)}),r.Aa.push(async e=>{e?(r.ga.L_(),await vh(r)):(await r.ga.stop(),r.Ia.length>0&&(he(Ws,`Stopping write stream with ${r.Ia.length} pending writes`),r.Ia=[]))})),r.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n,s,l,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new ls,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,l,c){const d=Date.now()+s,g=new Qm(e,n,d,l,c);return g.start(s),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Km(r,e){if(Er("AsyncQueue",`${e}: ${r}`),Eo(r))return new de(W.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{static emptySet(e){return new so(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||be.comparator(n.key,s.key):(n,s)=>be.comparator(n.key,s.key),this.keyedMap=Rl(),this.sortedSet=new Dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof so)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new so;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(){this.pa=new Dt(be.comparator)}track(e){const n=e.doc.key,s=this.pa.get(n);s?e.type!==0&&s.type===3?this.pa=this.pa.insert(n,e):e.type===3&&s.type!==1?this.pa=this.pa.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.pa=this.pa.remove(n):e.type===1&&s.type===2?this.pa=this.pa.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):De(63341,{Vt:e,ya:s}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,s)=>{e.push(s)}),e}}class fo{constructor(e,n,s,l,c,d,g,p,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,l,c){const d=[];return n.forEach(g=>{d.push({type:0,doc:g})}),new fo(e,n,so.emptySet(n),d,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class w2{constructor(){this.queries=q_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=Le(n),c=l.queries;l.queries=q_(),c.forEach((d,g)=>{for(const p of g.Sa)p.onError(s)})})(this,new de(W.ABORTED,"Firestore shutting down"))}}function q_(){return new ta(r=>SE(r),hh)}async function s1(r,e){const n=Le(r);let s=3;const l=e.query;let c=n.queries.get(l);c?!c.Da()&&e.va()&&(s=2):(c=new A2,s=e.va()?0:1);try{switch(s){case 0:c.ba=await n.onListen(l,!0);break;case 1:c.ba=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(d){const g=Km(d,`Initialization of query '${Ja(e.query)}' failed`);return void e.onError(g)}n.queries.set(l,c),c.Sa.push(e),e.Fa(n.onlineState),c.ba&&e.Ma(c.ba)&&Ym(n)}async function a1(r,e){const n=Le(r),s=e.query;let l=3;const c=n.queries.get(s);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=e.va()?0:1:!c.Da()&&e.va()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function S2(r,e){const n=Le(r);let s=!1;for(const l of e){const c=l.query,d=n.queries.get(c);if(d){for(const g of d.Sa)g.Ma(l)&&(s=!0);d.ba=l}}s&&Ym(n)}function I2(r,e,n){const s=Le(r),l=s.queries.get(e);if(l)for(const c of l.Sa)c.onError(n);s.queries.delete(e)}function Ym(r){r.Ca.forEach(e=>{e.next()})}var lm,H_;(H_=lm||(lm={})).xa="default",H_.Cache="cache";class o1{constructor(e,n,s){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(e){if(!this.options.includeMetadataChanges){const s=[];for(const l of e.docChanges)l.type!==3&&s.push(l);e=new fo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const s=n!=="Offline";return(!this.options.Qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=fo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==lm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e){this.key=e}}class u1{constructor(e){this.key=e}}class R2{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ze(),this.mutatedKeys=Ze(),this.Za=IE(e),this.Xa=new so(this.Za)}get eu(){return this.Ha}tu(e,n){const s=n?n.nu:new B_,l=n?n.Xa:this.Xa;let c=n?n.mutatedKeys:this.mutatedKeys,d=l,g=!1;const p=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal((T,I)=>{const D=l.get(T),G=dh(this.query,I)?I:null,te=!!D&&this.mutatedKeys.has(D.key),X=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let ne=!1;D&&G?D.data.isEqual(G.data)?te!==X&&(s.track({type:3,doc:G}),ne=!0):this.ru(D,G)||(s.track({type:2,doc:G}),ne=!0,(p&&this.Za(G,p)>0||y&&this.Za(G,y)<0)&&(g=!0)):!D&&G?(s.track({type:0,doc:G}),ne=!0):D&&!G&&(s.track({type:1,doc:D}),ne=!0,(p||y)&&(g=!0)),ne&&(G?(d=d.add(G),c=X?c.add(T):c.delete(T)):(d=d.delete(T),c=c.delete(T)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),c=c.delete(T.key),s.track({type:1,doc:T})}return{Xa:d,nu:s,Cs:g,mutatedKeys:c}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,l){const c=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const d=e.nu.wa();d.sort((T,I)=>function(G,te){const X=ne=>{switch(ne){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De(20277,{Vt:ne})}};return X(G)-X(te)}(T.type,I.type)||this.Za(T.doc,I.doc)),this.iu(s),l=l!=null&&l;const g=n&&!l?this.su():[],p=this.Ya.size===0&&this.current&&!l?1:0,y=p!==this.Ja;return this.Ja=p,d.length!==0||y?{snapshot:new fo(this.query,e.Xa,c,d,e.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:g}:{ou:g}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new B_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Ze(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const n=[];return e.forEach(s=>{this.Ya.has(s)||n.push(new u1(s))}),this.Ya.forEach(s=>{e.has(s)||n.push(new l1(s))}),n}au(e){this.Ha=e.$s,this.Ya=Ze();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return fo.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const $m="SyncEngine";class C2{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class x2{constructor(e){this.key=e,this.cu=!1}}class D2{constructor(e,n,s,l,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.lu={},this.hu=new ta(g=>SE(g),hh),this.Pu=new Map,this.Tu=new Set,this.Iu=new Dt(be.comparator),this.Eu=new Map,this.du=new Lm,this.Au={},this.Ru=new Map,this.Vu=ho.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function N2(r,e,n=!0){const s=g1(r);let l;const c=s.hu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.uu()):l=await c1(s,e,n,!0),l}async function O2(r,e){const n=g1(r);await c1(n,e,!0,!1)}async function c1(r,e,n,s){const l=await JR(r.localStore,Ui(e)),c=l.targetId,d=r.sharedClientState.addLocalQueryTarget(c,n);let g;return s&&(g=await M2(r,e,c,d==="current",l.resumeToken)),r.isPrimaryClient&&n&&WE(r.remoteStore,l),g}async function M2(r,e,n,s,l){r.fu=(I,D,G)=>async function(X,ne,Me,Ae){let Ee=ne.view.tu(Me);Ee.Cs&&(Ee=await P_(X.localStore,ne.query,!1).then(({documents:x})=>ne.view.tu(x,Ee)));const ze=Ae&&Ae.targetChanges.get(ne.targetId),we=Ae&&Ae.targetMismatches.get(ne.targetId)!=null,Be=ne.view.applyChanges(Ee,X.isPrimaryClient,ze,we);return G_(X,ne.targetId,Be.ou),Be.snapshot}(r,I,D,G);const c=await P_(r.localStore,e,!0),d=new R2(e,c.$s),g=d.tu(c.documents),p=Wl.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),y=d.applyChanges(g,r.isPrimaryClient,p);G_(r,n,y.ou);const T=new C2(e,n,d);return r.hu.set(e,T),r.Pu.has(n)?r.Pu.get(n).push(e):r.Pu.set(n,[e]),y.snapshot}async function V2(r,e,n){const s=Le(r),l=s.hu.get(e),c=s.Pu.get(l.targetId);if(c.length>1)return s.Pu.set(l.targetId,c.filter(d=>!hh(d,e))),void s.hu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await am(s.localStore,l.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(l.targetId),n&&qm(s.remoteStore,l.targetId),um(s,l.targetId)}).catch(_o)):(um(s,l.targetId),await am(s.localStore,l.targetId,!0))}async function P2(r,e){const n=Le(r),s=n.hu.get(e),l=n.Pu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),qm(n.remoteStore,s.targetId))}async function k2(r,e,n){const s=H2(r);try{const l=await function(d,g){const p=Le(d),y=Yt.now(),T=g.reduce((G,te)=>G.add(te.key),Ze());let I,D;return p.persistence.runTransaction("Locally write mutations","readwrite",G=>{let te=Tr(),X=Ze();return p.Bs.getEntries(G,T).next(ne=>{te=ne,te.forEach((Me,Ae)=>{Ae.isValidDocument()||(X=X.add(Me))})}).next(()=>p.localDocuments.getOverlayedDocuments(G,te)).next(ne=>{I=ne;const Me=[];for(const Ae of g){const Ee=JI(Ae,I.get(Ae.key).overlayedDocument);Ee!=null&&Me.push(new ys(Ae.key,Ee,yE(Ee.value.mapValue),Yn.exists(!0)))}return p.mutationQueue.addMutationBatch(G,y,Me,g)}).next(ne=>{D=ne;const Me=ne.applyToLocalDocumentSet(I,X);return p.documentOverlayCache.saveOverlays(G,ne.batchId,Me)})}).then(()=>({batchId:D.batchId,changes:CE(I)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(l.batchId),function(d,g,p){let y=d.Au[d.currentUser.toKey()];y||(y=new Dt(Fe)),y=y.insert(g,p),d.Au[d.currentUser.toKey()]=y}(s,l.batchId,n),await tu(s,l.changes),await vh(s.remoteStore)}catch(l){const c=Km(l,"Failed to persist write");n.reject(c)}}async function h1(r,e){const n=Le(r);try{const s=await $R(n.localStore,e);e.targetChanges.forEach((l,c)=>{const d=n.Eu.get(c);d&&(dt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.cu=!0:l.modifiedDocuments.size>0?dt(d.cu,14607):l.removedDocuments.size>0&&(dt(d.cu,42227),d.cu=!1))}),await tu(n,s,e)}catch(s){await _o(s)}}function F_(r,e,n){const s=Le(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.hu.forEach((c,d)=>{const g=d.view.Fa(e);g.snapshot&&l.push(g.snapshot)}),function(d,g){const p=Le(d);p.onlineState=g;let y=!1;p.queries.forEach((T,I)=>{for(const D of I.Sa)D.Fa(g)&&(y=!0)}),y&&Ym(p)}(s.eventManager,e),l.length&&s.lu.Y_(l),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function U2(r,e,n){const s=Le(r);s.sharedClientState.updateQueryState(e,"rejected",n);const l=s.Eu.get(e),c=l&&l.key;if(c){let d=new Dt(be.comparator);d=d.insert(c,bn.newNoDocument(c,ke.min()));const g=Ze().add(c),p=new gh(ke.min(),new Map,new Dt(Fe),d,g);await h1(s,p),s.Iu=s.Iu.remove(c),s.Eu.delete(e),Xm(s)}else await am(s.localStore,e,!1).then(()=>um(s,e,n)).catch(_o)}async function L2(r,e){const n=Le(r),s=e.batch.batchId;try{const l=await YR(n.localStore,e);f1(n,s,null),d1(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await tu(n,l)}catch(l){await _o(l)}}async function z2(r,e,n){const s=Le(r);try{const l=await function(d,g){const p=Le(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let T;return p.mutationQueue.lookupMutationBatch(y,g).next(I=>(dt(I!==null,37113),T=I.keys(),p.mutationQueue.removeMutationBatch(y,I))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,T,g)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T)).next(()=>p.localDocuments.getDocuments(y,T))})}(s.localStore,e);f1(s,e,n),d1(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await tu(s,l)}catch(l){await _o(l)}}function d1(r,e){(r.Ru.get(e)||[]).forEach(n=>{n.resolve()}),r.Ru.delete(e)}function f1(r,e,n){const s=Le(r);let l=s.Au[s.currentUser.toKey()];if(l){const c=l.get(e);c&&(n?c.reject(n):c.resolve(),l=l.remove(e)),s.Au[s.currentUser.toKey()]=l}}function um(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Pu.get(e))r.hu.delete(s),n&&r.lu.gu(s,n);r.Pu.delete(e),r.isPrimaryClient&&r.du.Hr(e).forEach(s=>{r.du.containsKey(s)||m1(r,s)})}function m1(r,e){r.Tu.delete(e.path.canonicalString());const n=r.Iu.get(e);n!==null&&(qm(r.remoteStore,n),r.Iu=r.Iu.remove(e),r.Eu.delete(n),Xm(r))}function G_(r,e,n){for(const s of n)s instanceof l1?(r.du.addReference(s.key,e),j2(r,s)):s instanceof u1?(he($m,"Document no longer in limbo: "+s.key),r.du.removeReference(s.key,e),r.du.containsKey(s.key)||m1(r,s.key)):De(19791,{pu:s})}function j2(r,e){const n=e.key,s=n.path.canonicalString();r.Iu.get(n)||r.Tu.has(s)||(he($m,"New document in limbo: "+n),r.Tu.add(s),Xm(r))}function Xm(r){for(;r.Tu.size>0&&r.Iu.size<r.maxConcurrentLimboResolutions;){const e=r.Tu.values().next().value;r.Tu.delete(e);const n=new be(At.fromString(e)),s=r.Vu.next();r.Eu.set(s,new x2(n)),r.Iu=r.Iu.insert(n,s),WE(r.remoteStore,new is(Ui(Om(n.path)),s,"TargetPurposeLimboResolution",lh.le))}}async function tu(r,e,n){const s=Le(r),l=[],c=[],d=[];s.hu.isEmpty()||(s.hu.forEach((g,p)=>{d.push(s.fu(p,e,n).then(y=>{var T;if((y||n)&&s.isPrimaryClient){const I=y?!y.fromCache:(T=n==null?void 0:n.targetChanges.get(p.targetId))===null||T===void 0?void 0:T.current;s.sharedClientState.updateQueryState(p.targetId,I?"current":"not-current")}if(y){l.push(y);const I=jm.Rs(p.targetId,y);c.push(I)}}))}),await Promise.all(d),s.lu.Y_(l),await async function(p,y){const T=Le(p);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>J.forEach(y,D=>J.forEach(D.ds,G=>T.persistence.referenceDelegate.addReference(I,D.targetId,G)).next(()=>J.forEach(D.As,G=>T.persistence.referenceDelegate.removeReference(I,D.targetId,G)))))}catch(I){if(!Eo(I))throw I;he(Bm,"Failed to update sequence numbers: "+I)}for(const I of y){const D=I.targetId;if(!I.fromCache){const G=T.xs.get(D),te=G.snapshotVersion,X=G.withLastLimboFreeSnapshotVersion(te);T.xs=T.xs.insert(D,X)}}}(s.localStore,c))}async function B2(r,e){const n=Le(r);if(!n.currentUser.isEqual(e)){he($m,"User change. New user:",e.toKey());const s=await $E(n.localStore,e);n.currentUser=e,function(c,d){c.Ru.forEach(g=>{g.forEach(p=>{p.reject(new de(W.CANCELLED,d))})}),c.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await tu(n,s.ks)}}function q2(r,e){const n=Le(r),s=n.Eu.get(e);if(s&&s.cu)return Ze().add(s.key);{let l=Ze();const c=n.Pu.get(e);if(!c)return l;for(const d of c){const g=n.hu.get(d);l=l.unionWith(g.view.eu)}return l}}function g1(r){const e=Le(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=h1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=q2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=U2.bind(null,e),e.lu.Y_=S2.bind(null,e.eventManager),e.lu.gu=I2.bind(null,e.eventManager),e}function H2(r){const e=Le(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=z2.bind(null,e),e}class ih{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ph(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return KR(this.persistence,new FR,e.initialUser,this.serializer)}Su(e){return new YE(zm.fi,this.serializer)}bu(e){return new e2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ih.provider={build:()=>new ih};class F2 extends ih{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){dt(this.persistence.referenceDelegate instanceof th,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new xR(s,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?kn.withCacheSize(this.cacheSizeBytes):kn.DEFAULT;return new YE(s=>th.fi(s,n),this.serializer)}}class cm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>F_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=B2.bind(null,this.syncEngine),await b2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new w2}()}createDatastore(e){const n=ph(e.databaseInfo.databaseId),s=function(c){return new s2(c)}(e.databaseInfo);return function(c,d,g,p){return new u2(c,d,g,p)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,l,c,d,g){return new h2(s,l,c,d,g)}(this.localStore,this.datastore,e.asyncQueue,n=>F_(this.syncEngine,n,0),function(){return L_.C()?new L_:new t2}())}createSyncEngine(e,n){return function(l,c,d,g,p,y,T){const I=new D2(l,c,d,g,p,y);return T&&(I.mu=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(l){const c=Le(l);he(Ws,"RemoteStore shutting down."),c.da.add(5),await eu(c),c.Ra.shutdown(),c.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}cm.provider={build:()=>new cm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Er("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="FirestoreClient";class G2{constructor(e,n,s,l,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=Tn.UNAUTHENTICATED,this.clientId=oE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async d=>{he(gs,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(he(gs,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ls;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Km(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Lf(r,e){r.asyncQueue.verifyOperationInProgress(),he(gs,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener(async l=>{s.isEqual(l)||(await $E(e.localStore,l),s=l)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function Q_(r,e){r.asyncQueue.verifyOperationInProgress();const n=await Q2(r);he(gs,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener(s=>j_(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,l)=>j_(e.remoteStore,l)),r._onlineComponents=e}async function Q2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){he(gs,"Using user provided OfflineComponentProvider");try{await Lf(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(l){return l.name==="FirebaseError"?l.code===W.FAILED_PRECONDITION||l.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11}(n))throw n;oo("Error using user provided cache. Falling back to memory cache: "+n),await Lf(r,new ih)}}else he(gs,"Using default OfflineComponentProvider"),await Lf(r,new F2(void 0));return r._offlineComponents}async function y1(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(he(gs,"Using user provided OnlineComponentProvider"),await Q_(r,r._uninitializedComponentsProvider._online)):(he(gs,"Using default OnlineComponentProvider"),await Q_(r,new cm))),r._onlineComponents}function K2(r){return y1(r).then(e=>e.syncEngine)}async function hm(r){const e=await y1(r),n=e.eventManager;return n.onListen=N2.bind(null,e.syncEngine),n.onUnlisten=V2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=O2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=P2.bind(null,e.syncEngine),n}function Y2(r,e,n={}){const s=new ls;return r.asyncQueue.enqueueAndForget(async()=>function(c,d,g,p,y){const T=new p1({next:D=>{T.xu(),d.enqueueAndForget(()=>a1(c,I)),D.fromCache&&p.source==="server"?y.reject(new de(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(D)},error:D=>y.reject(D)}),I=new o1(g,T,{includeMetadataChanges:!0,Qa:!0});return s1(c,I)}(await hm(r),r.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(r,e,n){if(!n)throw new de(W.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function $2(r,e,n,s){if(e===!0&&s===!0)throw new de(W.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function Y_(r){if(!be.isDocumentKey(r))throw new de(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function $_(r){if(be.isDocumentKey(r))throw new de(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function _h(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":De(12329,{type:typeof r})}function pi(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new de(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_h(r);throw new de(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1="firestore.googleapis.com",X_=!0;class Z_{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new de(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=E1,this.ssl=X_}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:X_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=KE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<RR)throw new de(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=v1((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new de(W.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new de(W.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new de(W.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,l){return s.timeoutSeconds===l.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Eh{constructor(e,n,s,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Z_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Z_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new rI;switch(s.type){case"firstParty":return new lI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new de(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=K_.get(n);s&&(he("ComponentProvider","Removing Datastore"),K_.delete(n),s.terminate())}(this),Promise.resolve()}}function X2(r,e,n,s={}){var l;r=pi(r,Eh);const c=go(e),d=r._getSettings(),g=Object.assign(Object.assign({},d),{emulatorOptions:r._getEmulatorOptions()}),p=`${e}:${n}`;c&&(f0(`https://${p}`),m0("Firestore",!0)),d.host!==E1&&d.host!==p&&oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},d),{host:p,ssl:c,emulatorOptions:s});if(!$s(y,g)&&(r._setSettings(y),s.mockUserToken)){let T,I;if(typeof s.mockUserToken=="string")T=s.mockUserToken,I=Tn.MOCK_USER;else{T=Rb(s.mockUserToken,(l=r._app)===null||l===void 0?void 0:l.options.projectId);const D=s.mockUserToken.sub||s.mockUserToken.user_id;if(!D)throw new de(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new Tn(D)}r._authCredentials=new sI(new sE(T,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ia(this.firestore,e,this._query)}}class Dn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new us(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dn(this.firestore,e,this._key)}}class us extends ia{constructor(e,n,s){super(e,n,Om(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dn(this.firestore,null,new be(e))}withConverter(e){return new us(this.firestore,e,this._path)}}function Al(r,e,...n){if(r=Xt(r),_1("collection","path",e),r instanceof Eh){const s=At.fromString(e,...n);return $_(s),new us(r,null,s)}{if(!(r instanceof Dn||r instanceof us))throw new de(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(At.fromString(e,...n));return $_(s),new us(r.firestore,null,s)}}function Jr(r,e,...n){if(r=Xt(r),arguments.length===1&&(e=oE.newId()),_1("doc","path",e),r instanceof Eh){const s=At.fromString(e,...n);return Y_(s),new Dn(r,null,new be(s))}{if(!(r instanceof Dn||r instanceof us))throw new de(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(At.fromString(e,...n));return Y_(s),new Dn(r.firestore,r instanceof us?r.converter:null,new be(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="AsyncQueue";class W_{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new ZE(this,"async_queue_retry"),this.rc=()=>{const s=Uf();s&&he(J_,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=e;const n=Uf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Uf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new ls;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Eo(e))throw e;he(J_,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(s=>{throw this.Xu=s,this.ec=!1,Er("INTERNAL UNHANDLED ERROR: ",e0(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=n,n}enqueueAfterDelay(e,n,s){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const l=Qm.createAndSchedule(this,e,n,s,c=>this.uc(c));return this.Zu.push(l),l}oc(){this.Xu&&De(47125,{cc:e0(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function e0(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(r){return function(n,s){if(typeof n!="object"||n===null)return!1;const l=n;for(const c of s)if(c in l&&typeof l[c]=="function")return!0;return!1}(r,["next","error","complete"])}class ea extends Eh{constructor(e,n,s,l){super(e,n,s,l),this.type="firestore",this._queue=new W_,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new W_(e),this._firestoreClient=void 0,await e}}}function Z2(r,e){const n=typeof r=="object"?r:v0(),s=typeof r=="string"?r:Yc,l=pm(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=Sb("firestore");c&&X2(l,...c)}return l}function Th(r){if(r._terminated)throw new de(W.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||J2(r),r._firestoreClient}function J2(r){var e,n,s;const l=r._freezeSettings(),c=function(g,p,y,T){return new AI(g,p,y,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,v1(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,l);r._componentsProvider||!((n=l.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=l.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:l.localCache._offlineComponentProvider,_online:l.localCache._onlineComponentProvider}),r._firestoreClient=new G2(r._authCredentials,r._appCheckCredentials,r._queue,c,r._componentsProvider&&function(g){const p=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(p),_online:p}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mo(pn.fromBase64String(e))}catch(n){throw new de(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new mo(pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=/^__.*__$/;class eC{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ys(e,this.data,this.fieldMask,n,this.fieldTransforms):new Jl(e,this.data,n,this.fieldTransforms)}}class T1{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ys(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function b1(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De(40011,{Ic:r})}}class eg{constructor(e,n,s,l,c,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Ec(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new eg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),l=this.dc({path:s,Rc:!1});return l.Vc(e),l}mc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),l=this.dc({path:s,Rc:!1});return l.Ec(),l}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return rh(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(b1(this.Ic)&&W2.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class tC{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||ph(e)}bc(e,n,s,l=!1){return new eg({Ic:e,methodName:n,wc:s,path:gn.emptyPath(),Rc:!1,yc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bh(r){const e=r._freezeSettings(),n=ph(r._databaseId);return new tC(r._databaseId,!!e.ignoreUndefinedProperties,n)}function A1(r,e,n,s,l,c={}){const d=r.bc(c.merge||c.mergeFields?2:0,e,n,l);tg("Data must be an object, but it was:",d,s);const g=I1(s,d);let p,y;if(c.merge)p=new Kn(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const T=[];for(const I of c.mergeFields){const D=dm(e,I,n);if(!d.contains(D))throw new de(W.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);C1(T,D)||T.push(D)}p=new Kn(T),y=d.fieldTransforms.filter(I=>p.covers(I.field))}else p=null,y=d.fieldTransforms;return new eC(new Un(g),p,y)}class Ah extends Zm{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ah}}function w1(r,e,n,s){const l=r.bc(1,e,n);tg("Data must be an object, but it was:",l,s);const c=[],d=Un.empty();ps(s,(p,y)=>{const T=ng(e,p,n);y=Xt(y);const I=l.mc(T);if(y instanceof Ah)c.push(T);else{const D=iu(y,I);D!=null&&(c.push(T),d.set(T,D))}});const g=new Kn(c);return new T1(d,g,l.fieldTransforms)}function S1(r,e,n,s,l,c){const d=r.bc(1,e,n),g=[dm(e,s,n)],p=[l];if(c.length%2!=0)throw new de(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let D=0;D<c.length;D+=2)g.push(dm(e,c[D])),p.push(c[D+1]);const y=[],T=Un.empty();for(let D=g.length-1;D>=0;--D)if(!C1(y,g[D])){const G=g[D];let te=p[D];te=Xt(te);const X=d.mc(G);if(te instanceof Ah)y.push(G);else{const ne=iu(te,X);ne!=null&&(y.push(G),T.set(G,ne))}}const I=new Kn(y);return new T1(T,I,d.fieldTransforms)}function nC(r,e,n,s=!1){return iu(n,r.bc(s?4:3,e))}function iu(r,e){if(R1(r=Xt(r)))return tg("Unsupported field value:",e,r),I1(r,e);if(r instanceof Zm)return function(s,l){if(!b1(l.Ic))throw l.gc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.gc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(s,l){const c=[];let d=0;for(const g of s){let p=iu(g,l.fc(d));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),d++}return{arrayValue:{values:c}}}(r,e)}return function(s,l){if((s=Xt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return QI(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=Yt.fromDate(s);return{timestampValue:eh(l.serializer,c)}}if(s instanceof Yt){const c=new Yt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:eh(l.serializer,c)}}if(s instanceof Jm)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof mo)return{bytesValue:jE(l.serializer,s._byteString)};if(s instanceof Dn){const c=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw l.gc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Um(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof Wm)return function(d,g){return{mapValue:{fields:{[gE]:{stringValue:pE},[$c]:{arrayValue:{values:d.toArray().map(y=>{if(typeof y!="number")throw g.gc("VectorValues must only contain numeric values.");return Mm(g.serializer,y)})}}}}}}(s,l);throw l.gc(`Unsupported field value: ${_h(s)}`)}(r,e)}function I1(r,e){const n={};return uE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ps(r,(s,l)=>{const c=iu(l,e.Ac(s));c!=null&&(n[s]=c)}),{mapValue:{fields:n}}}function R1(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Yt||r instanceof Jm||r instanceof mo||r instanceof Dn||r instanceof Zm||r instanceof Wm)}function tg(r,e,n){if(!R1(n)||!function(l){return typeof l=="object"&&l!==null&&(Object.getPrototypeOf(l)===Object.prototype||Object.getPrototypeOf(l)===null)}(n)){const s=_h(n);throw s==="an object"?e.gc(r+" a custom object"):e.gc(r+" "+s)}}function dm(r,e,n){if((e=Xt(e))instanceof nu)return e._internalPath;if(typeof e=="string")return ng(r,e);throw rh("Field path arguments must be of type string or ",r,!1,void 0,n)}const iC=new RegExp("[~\\*/\\[\\]]");function ng(r,e,n){if(e.search(iC)>=0)throw rh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new nu(...e.split("."))._internalPath}catch{throw rh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function rh(r,e,n,s,l){const c=s&&!s.isEmpty(),d=l!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(c||d)&&(p+=" (found",c&&(p+=` in field ${s}`),d&&(p+=` in document ${l}`),p+=")"),new de(W.INVALID_ARGUMENT,g+r+p)}function C1(r,e){return r.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,n,s,l,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ig("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class rC extends x1{data(){return super.data()}}function ig(r,e){return typeof e=="string"?ng(r,e):e instanceof nu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new de(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rg{}class sC extends rg{}function wl(r,e,...n){let s=[];e instanceof rg&&s.push(e),s=s.concat(n),function(c){const d=c.filter(p=>p instanceof sg).length,g=c.filter(p=>p instanceof wh).length;if(d>1||d>0&&g>0)throw new de(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const l of s)r=l._apply(r);return r}class wh extends sC{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new wh(e,n,s)}_apply(e){const n=this._parse(e);return N1(e._query,n),new ia(e.firestore,e.converter,em(e._query,n))}_parse(e){const n=bh(e.firestore);return function(c,d,g,p,y,T,I){let D;if(y.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new de(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){i0(I,T);const te=[];for(const X of I)te.push(n0(p,c,X));D={arrayValue:{values:te}}}else D=n0(p,c,I)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||i0(I,T),D=nC(g,d,I,T==="in"||T==="not-in");return qt.create(y,T,D)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function $a(r,e,n){const s=e,l=ig("where",r);return wh._create(l,s,n)}class sg extends rg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new sg(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:yi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(l,c){let d=l;const g=c.getFlattenedFilters();for(const p of g)N1(d,p),d=em(d,p)}(e._query,n),new ia(e.firestore,e.converter,em(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function n0(r,e,n){if(typeof(n=Xt(n))=="string"){if(n==="")throw new de(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wE(e)&&n.indexOf("/")!==-1)throw new de(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(At.fromString(n));if(!be.isDocumentKey(s))throw new de(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return p_(r,new be(s))}if(n instanceof Dn)return p_(r,n._key);throw new de(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_h(n)}.`)}function i0(r,e){if(!Array.isArray(r)||r.length===0)throw new de(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function N1(r,e){const n=function(l,c){for(const d of l)for(const g of d.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null}(r.filters,function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new de(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class aC{convertValue(e,n="none"){switch(fs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw De(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ps(e,(l,c)=>{s[l]=this.convertValue(c,n)}),s}convertVectorValue(e){var n,s,l;const c=(l=(s=(n=e.fields)===null||n===void 0?void 0:n[$c].arrayValue)===null||s===void 0?void 0:s.values)===null||l===void 0?void 0:l.map(d=>Ut(d.doubleValue));return new Wm(c)}convertGeoPoint(e){return new Jm(Ut(e.latitude),Ut(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=ch(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(zl(e));default:return null}}convertTimestamp(e){const n=hs(e);return new Yt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=At.fromString(e);dt(QE(s),9688,{name:e});const l=new jl(s.get(1),s.get(3)),c=new be(s.popFirst(5));return l.isEqual(n)||Er(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class M1 extends x1{constructor(e,n,s,l,c,d){super(e,n,s,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Lc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(ig("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Lc extends M1{data(e={}){return super.data(e)}}class V1{constructor(e,n,s,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new xl(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Lc(this._firestore,this._userDataWriter,s.key,s,new xl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map(g=>{const p=new Lc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new xl(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}})}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(g=>c||g.type!==3).map(g=>{const p=new Lc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new xl(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,T=-1;return g.type!==0&&(y=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),T=d.indexOf(g.doc.key)),{type:oC(g.type),doc:p,oldIndex:y,newIndex:T}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function oC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De(61501,{type:r})}}class ag extends aC{constructor(e){super(),this.firestore=e}convertBytes(e){return new mo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Dn(this.firestore,null,n)}}function Cc(r){r=pi(r,ia);const e=pi(r.firestore,ea),n=Th(e),s=new ag(e);return D1(r._query),Y2(n,r._query).then(l=>new V1(e,s,r,l))}function lC(r,e,n){r=pi(r,Dn);const s=pi(r.firestore,ea),l=O1(r.converter,e,n);return og(s,[A1(bh(s),"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,Yn.none())])}function r0(r,e,n,...s){r=pi(r,Dn);const l=pi(r.firestore,ea),c=bh(l);let d;return d=typeof(e=Xt(e))=="string"||e instanceof nu?S1(c,"updateDoc",r._key,e,n,s):w1(c,"updateDoc",r._key,e),og(l,[d.toMutation(r._key,Yn.exists(!0))])}function uC(r,...e){var n,s,l;r=Xt(r);let c={includeMetadataChanges:!1,source:"default"},d=0;typeof e[d]!="object"||t0(e[d])||(c=e[d],d++);const g={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(t0(e[d])){const I=e[d];e[d]=(n=I.next)===null||n===void 0?void 0:n.bind(I),e[d+1]=(s=I.error)===null||s===void 0?void 0:s.bind(I),e[d+2]=(l=I.complete)===null||l===void 0?void 0:l.bind(I)}let p,y,T;if(r instanceof Dn)y=pi(r.firestore,ea),T=Om(r._key.path),p={next:I=>{e[d]&&e[d](cC(y,r,I))},error:e[d+1],complete:e[d+2]};else{const I=pi(r,ia);y=pi(I.firestore,ea),T=I._query;const D=new ag(y);p={next:G=>{e[d]&&e[d](new V1(y,D,I,G))},error:e[d+1],complete:e[d+2]},D1(r._query)}return function(D,G,te,X){const ne=new p1(X),Me=new o1(G,ne,te);return D.asyncQueue.enqueueAndForget(async()=>s1(await hm(D),Me)),()=>{ne.xu(),D.asyncQueue.enqueueAndForget(async()=>a1(await hm(D),Me))}}(Th(y),T,g,p)}function og(r,e){return function(s,l){const c=new ls;return s.asyncQueue.enqueueAndForget(async()=>k2(await K2(s),l,c)),c.promise}(Th(r),e)}function cC(r,e,n){const s=n.docs.get(e._key),l=new ag(r);return new M1(r,l,e._key,s,new xl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=bh(e)}set(e,n,s){this._verifyNotCommitted();const l=zf(e,this._firestore),c=O1(l.converter,n,s),d=A1(this._dataReader,"WriteBatch.set",l._key,c,l.converter!==null,s);return this._mutations.push(d.toMutation(l._key,Yn.none())),this}update(e,n,s,...l){this._verifyNotCommitted();const c=zf(e,this._firestore);let d;return d=typeof(n=Xt(n))=="string"||n instanceof nu?S1(this._dataReader,"WriteBatch.update",c._key,n,s,l):w1(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(d.toMutation(c._key,Yn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=zf(e,this._firestore);return this._mutations=this._mutations.concat(new Vm(n._key,Yn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new de(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zf(r,e){if((r=Xt(r)).firestore!==e)throw new de(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(r){return Th(r=pi(r,ea)),new hC(r,e=>og(r,e))}(function(e,n=!0){(function(l){vo=l})(po),ao(new Xs("firestore",(s,{instanceIdentifier:l,options:c})=>{const d=s.getProvider("app").getImmediate(),g=new ea(new aI(s.getProvider("auth-internal")),new uI(d,s.getProvider("app-check-internal")),function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new de(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jl(y.options.projectId,T)}(d,l),d);return c=Object.assign({useFetchStreams:n},c),g._setSettings(c),g},"PUBLIC").setMultipleInstances(!0)),as(r_,s_,e),as(r_,s_,"esm2017")})();const lg=typeof __firebase_config<"u"?JSON.parse(__firebase_config):{apiKey:"AIzaSyDzxX9lnbrX2DDLqkdQWh2YIpiPvWhqSog",authDomain:"pedidosfrutam-160cb.firebaseapp.com",projectId:"pedidosfrutam-160cb",storageBucket:"pedidosfrutam-160cb.firebasestorage.app",messagingSenderId:"395673930325",appId:"1:395673930325:web:5668a07ce036107b08e2dc",measurementId:"G-3C5Y5NVJSL"},P1=y0(lg),Sl=nI(P1),sn=Z2(P1);console.log("Firebase Init: App initialized.");console.log("Firebase Init: Config used:",lg);const Xa=a0.forwardRef(({label:r,name:e,value:n,onChange:s,onBlur:l,placeholder:c="",className:d="",type:g="text",list:p,readOnly:y=!1},T)=>{const I=n==null?"":String(n);return P.jsxs("div",{className:"mb-2 w-full",children:[P.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-gray-700",children:r}),P.jsx("input",{type:g,id:e,name:e,value:I,onChange:s,onBlur:l,placeholder:c,className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-gray-50 border ${d}`,ref:T,list:p,readOnly:y})]})}),Pn=a0.forwardRef(({name:r,value:e,onChange:n,onBlur:s,type:l="text",placeholder:c="",readOnly:d=!1,isCanceledProp:g=!1,list:p},y)=>{const T=e==null?"":String(e);return P.jsx("input",{type:l,name:r,value:T,onChange:n,onBlur:s,placeholder:c,className:`w-full h-full p-px border-none bg-transparent focus:outline-none focus:ring-1 focus:ring-blue-500 rounded-md ${g?"line-through":""}`,ref:y,readOnly:d,list:p})}),dC=()=>{var Ir;const r=typeof __app_id<"u"?__app_id:lg.projectId;console.log("App Init: Using appId:",r);const[e,n]=ht.useState(null),[s,l]=ht.useState(!1),[c,d]=ht.useState(!0),[g,p]=ht.useState([]),[y,T]=ht.useState([]),[I,D]=ht.useState(""),[G,te]=ht.useState(""),[X,ne]=ht.useState(null);ht.useEffect(()=>{(async()=>{try{const F=Gw(Sl,async L=>{var ie,ge;if(L)n(L.uid),l(!0),console.log("Firebase Auth: User authenticated with UID:",L.uid);else{console.log("Firebase Auth: No user detected, attempting anonymous sign-in.");try{typeof __initial_auth_token<"u"&&__initial_auth_token?(await qw(Sl,__initial_auth_token),console.log("Firebase Auth: Signed in with custom token."),n((ie=Sl.currentUser)==null?void 0:ie.uid)):(await Uw(Sl),console.log("Firebase Auth: Signed in anonymously."),n((ge=Sl.currentUser)==null?void 0:ge.uid))}catch(fe){console.error("Firebase Auth: Error attempting sign-in (fallback or token):",fe),n(crypto.randomUUID())}finally{l(!0)}}});return()=>F()}catch(F){console.error("Firebase Auth: Error initializing Firebase Auth:",F),l(!0)}})()},[]);const Me=()=>{const A=new Date;A.setHours(0,0,0,0),A.setDate(A.getDate()+3-(A.getDay()+6)%7);const F=new Date(A.getFullYear(),0,4);return 1+Math.round(((A.getTime()-F.getTime())/864e5-3+(F.getDay()+6)%7)/7)},Ae={MANZANA:"MANZANA",MANZANAS:"MANZANA",MZ:"MANZANA",APPLE:"MANZANA",APPLES:"MANZANA",PERA:"PERA",PERAS:"PERA",PR:"PERA",PEAR:"PERA",PEARS:"PERA",UVA:"UVA",UVAS:"UVA",GRAPE:"UVA",GRAPES:"UVA",UV:"UVA",KIWI:"KIWI",KIWIS:"KIWI",NARANJA:"NARANJA",NARANJAS:"NARANJA",LIMON:"LIMON",LIMONES:"LIMON",LM:"LIMON",CEREZA:"CEREZA",CEREZAS:"CEREZA",CLEMENTINA:"CLEMENTINA",CLEMENTINAS:"CLEMENTINA",CIRUELA:"CIRUELA",CIRUELAS:"CIRUELA",DURAZNO:"DURAZNO",DURAZNOS:"DURAZNO",NECTARIN:"NECTARIN",NECTARINES:"NECTARIN"},Ee=A=>{if(typeof A!="string"||A.trim()==="")return"";const F=A.toUpperCase().trim();return Ae[F]||F},ze=(A,F,L="")=>{const ie=Me(),ge=(ue,xe)=>{const Re=Array.isArray(ue)?ue:[],$e=Array.from(new Set(Re.filter(ce=>typeof ce=="string"&&ce.trim()!=="").map(ce=>Ee(ce))));return $e.length>0?$e.join("-"):xe},fe=Array.from(new Set(Array.isArray(A)?A:[])).filter(ue=>typeof ue=="string"&&ue.trim()!==""),le=fe.length>0?fe[0].toUpperCase().replace(/[^A-Z0-9]/g,""):"PROVEEDOR",Te=ge(F,"ESPECIE");return`PED–W${ie}–${le}–${Te}`},we={reDestinatarios:"",deNombrePais:"",nave:"",fechaCarga:"",exporta:"",emailSubject:"",mailId:"",status:"draft",createdAt:null,createdBy:null,lastModifiedBy:null,updatedAt:null},Be={id:crypto.randomUUID(),pallets:"",especie:"",variedad:"",formato:"",calibre:"",categoria:"",preciosFOB:"",estado:"",isCanceled:!1},[x,w]=ht.useState(()=>({...we,emailSubject:ze([],[])})),[S,O]=ht.useState([Be]),[V,k]=ht.useState(0),[C,Nt]=ht.useState(!1),[wt,K]=ht.useState(""),[ae,pe]=ht.useState(!1),[at,N]=ht.useState(!1),[ee,oe]=ht.useState(!1),[re,ye]=ht.useState(null),[je,Se]=ht.useState(""),St=ht.useRef(null),Ge=ht.useRef({}),Ue=ht.useRef({}),Ot=["reDestinatarios","deNombrePais","nave","fechaCarga","exporta","emailSubject"],on=["pallets","especie","variedad","formato","calibre","categoria","preciosFOB"],wn=async A=>{if(console.log("Firestore: saveOrderToFirestore called."),!sn||!e){console.warn("Firestore: Not initialized or user not authenticated. Cannot save order.");return}try{const F=Al(sn,`artifacts/${r}/public/data/pedidos`),{header:L,items:ie}=A,ge=A.id||Jr(F).id;console.log("Firestore: Saving order with ID:",ge,"Data passed:",A);const fe={header:{...L,lastModifiedBy:e,updatedAt:Date.now()},items:JSON.stringify(ie)};console.log("Firestore: Data to be saved:",fe);const le=Jr(F,ge);await lC(le,fe),console.log("Firestore: Order saved/updated successfully:",ge)}catch(F){throw console.error("Firestore: Error saving/updating order:",F),F}},ji=async A=>{if(console.log("Firestore: handleSoftDeleteOrderInFirestore called for ID:",A),!sn||!e){console.warn("Firestore: Not initialized or user not authenticated. Cannot soft delete order.");return}try{const F=Jr(sn,`artifacts/${r}/public/data/pedidos`,A);console.log("Firestore: Attempting to mark document as 'deleted':",A),await r0(F,{"header.status":"deleted","header.lastModifiedBy":e,"header.updatedAt":Date.now()}),console.log("Firestore: Document marked as 'deleted' successfully for ID:",A)}catch(F){console.error("Firestore: Error marking order as deleted:",F)}};ht.useEffect(()=>{var ie;const A=x.reDestinatarios,F=((ie=S[0])==null?void 0:ie.especie)||"",L=ze([A],[F],x.mailId);L!==x.emailSubject&&(console.log("Subject Effect: Updating email subject from",x.emailSubject,"to",L),w(ge=>({...ge,emailSubject:L})))},[x.reDestinatarios,(Ir=S[0])==null?void 0:Ir.especie,x.emailSubject,x.mailId]),ht.useEffect(()=>{if(!sn||!e||!s){console.log("Firestore Listener: Firestore, userId, or auth not ready for data fetching.");return}d(!0);const A=Al(sn,`artifacts/${r}/public/data/pedidos`);console.log("Firestore Listener: Setting up snapshot listener for collection:",`artifacts/${r}/public/data/pedidos`);const F=wl(A),L=uC(F,async ie=>{console.log("Firestore Listener: Snapshot received. Number of docs:",ie.docs.length);let ge=ie.docs.map(le=>{const Te=le.data();let Ve=[];if(Te.items)if(typeof Te.items=="string")try{Ve=JSON.parse(Te.items),console.log(`Firestore Listener: Parsed items for doc ${le.id}.`)}catch(ue){console.error(`Firestore Listener: Error parsing items for doc ${le.id}:`,ue,`Raw data.items: "${Te.items}"`),Ve=[]}else Array.isArray(Te.items)&&(Ve=Te.items,console.log(`Firestore Listener: Items for doc ${le.id} already an array.`));return{id:le.id,header:Te.header,items:Ve}});ge=ge.map(le=>({...le,items:Array.isArray(le.items)?le.items:[le.items].filter(Boolean)})),ge.sort((le,Te)=>{var xe,Re;const Ve=((xe=le.header)==null?void 0:xe.createdAt)||0,ue=((Re=Te.header)==null?void 0:Re.createdAt)||0;return Ve-ue}),console.log("Firestore Listener: All orders fetched from Firestore (including sent) and sorted:",ge.map(le=>{var Te,Ve,ue;return{id:le.id,mailId:(Te=le.header)==null?void 0:Te.mailId,status:(Ve=le.header)==null?void 0:Ve.status,createdAt:(ue=le.header)==null?void 0:ue.createdAt}})),p(ge),d(!1);const fe=ge.filter(le=>{var Te;return((Te=le.header)==null?void 0:Te.status)==="draft"});if(fe.length===0&&!G&&X===null){console.log("Firestore Listener: No draft orders found after fetch. Creating new initial order.");const Te=Jr(A).id,Ve={...we,mailId:crypto.randomUUID().substring(0,8).toUpperCase(),emailSubject:ze([],[]),status:"draft",createdAt:Date.now(),createdBy:e,updatedAt:Date.now()},ue=[{...Be,id:crypto.randomUUID()}];try{await wn({id:Te,header:Ve,items:ue}),ne(Te),console.log("Firestore Listener: New order created and set as active:",Te)}catch(xe){console.error("Firestore Listener: ERROR: Failed to create initial draft order:",xe),d(!1)}}else fe.length>0&&X===null&&!G&&(ne(fe[0].id),console.log("Firestore Listener: Draft orders found, setting first (oldest) draft as active:",fe[0].id))},ie=>{console.error("Firestore Listener: Error fetching orders from Firestore:",ie),d(!1)});return()=>L()},[sn,e,s,r,G,X]),ht.useEffect(()=>{let A=[];console.log("Filter Effect: Effect filter by committedSearchTerm triggered. committedSearchTerm:",G,"Current activeOrderId before update:",X),console.log("Filter Effect: allOrdersFromFirestore at filter time:",g.map(L=>{var ie,ge;return{id:L.id,status:((ie=L.header)==null?void 0:ie.status)||"N/A",createdAt:(ge=L.header)==null?void 0:ge.createdAt}})),G?(console.log("Filter Effect: Search active. Filtering for Mail ID and not deleted."),A=g.filter(L=>{var fe,le,Te,Ve;const ie=(((fe=L.header)==null?void 0:fe.mailId)||"").toLowerCase().includes(G.toLowerCase()),ge=((le=L.header)==null?void 0:le.status)!=="deleted";return console.log(`Filter Effect - Search Check: Order ID ${L.id}, Mail ID "${(Te=L.header)==null?void 0:Te.mailId}", Status "${(Ve=L.header)==null?void 0:Ve.status}", matches search: ${ie}, not deleted: ${ge}`),ie&&ge})):(console.log("Filter Effect: No search term. Filtering for 'draft' status only."),A=g.filter(L=>{var ge,fe;const ie=((ge=L.header)==null?void 0:ge.status)==="draft";return console.log(`Filter Effect - Draft Check: Order ID ${L.id}, Status "${(fe=L.header)==null?void 0:fe.status}", isDraft: ${ie}`),ie}),console.log("Filter Effect: No search term, displaying only draft orders.")),A.sort((L,ie)=>{var le,Te;const ge=((le=L.header)==null?void 0:le.createdAt)||0,fe=((Te=ie.header)==null?void 0:Te.createdAt)||0;return ge-fe}),console.log("Filter Effect: displayedOrders after filter and sort:",A.length,A.map(L=>{var ie,ge;return{id:L.id,createdAt:(ie=L.header)==null?void 0:ie.createdAt,status:(ge=L.header)==null?void 0:ge.status}})),T(A);let F=null;if(G?A.find(ie=>ie.id===X)?(F=X,console.log("Filter Effect: Search active. Keeping current activeOrderId:",F)):A.length>0?(F=A[A.length-1].id,console.log("Filter Effect: Search active. Current active not in results. Setting to LAST (newest) filtered:",F)):(F=null,console.log("Filter Effect: Search active. No results found. Setting activeOrderId to null.")):A.find(ie=>ie.id===X)?(F=X,console.log("Filter Effect: No search. Keeping current activeOrderId (draft):",F)):A.length>0?(F=A[A.length-1].id,console.log("Filter Effect: No search. Current active not in drafts. Setting to LAST (newest) draft:",F)):(F=null,console.log("Filter Effect: No search. No drafts found. Setting activeOrderId to null.")),F!==X)ne(F),console.log("Filter Effect: activeOrderId changed from",X,"to",F);else if(F&&F===X){const L=A.findIndex(ie=>ie.id===X);L!==-1&&L!==V&&(k(L),console.log("Filter Effect: currentOrderIndex updated due to order sorting (activeOrderId unchanged):",L))}},[g,G,X]),ht.useEffect(()=>{if(console.log("UI Sync Effect: Triggered. displayedOrders.length:",y.length,"activeOrderId:",X),X&&y.length>0){const A=y.find(F=>F.id===X);if(A){console.log("UI Sync Effect: Syncing UI with order ID:",A.id,"Status:",A.header.status,"Mail ID:",A.header.mailId),w(A.header),O(A.items);const F=y.findIndex(L=>L.id===X);F!==-1&&F!==V&&(k(F),console.log("UI Sync Effect: New currentOrderIndex:",F))}else console.log("UI Sync Effect: Active order (",X,") not found in displayedOrders. Waiting for data synchronization. Current UI state maintained.")}else if(!X&&y.length>0){const A=y[0];A?(ne(A.id),console.log("UI Sync Effect: No activeOrderId, defaulting to first draft:",A.id)):(console.warn("UI Sync Effect: Unexpected state: activeOrderId is null but displayedOrders is not empty and no first draft found."),w({...we,emailSubject:ze([],[])}),O([Be]),k(0))}else!X&&y.length===0?(console.log("UI Sync Effect: No active order and no displayed orders. Resetting UI to a blank form."),w({...we,emailSubject:ze([],[])}),O([Be]),k(0)):X&&y.length===0&&(console.warn("UI Sync Effect: Stale activeOrderId detected. Clearing activeOrderId:",X),ne(null))},[X,y]);const yn=async()=>{if(console.log("Save Handler: saveCurrentFormDataToDisplayed called."),!sn||!e){console.warn("Save Handler: Firestore not initialized or user not authenticated. Cannot save order.");return}if(!X){console.log("Save Handler: saveCurrentFormDataToDisplayed called without activeOrderId. Skipping save for current form state.");return}const A={id:X,header:{...x},items:S.map(F=>({...F}))};console.log("Save Handler: Attempting to save current order data for ID:",A.id,"Mail ID:",A.header.mailId,"Status:",A.header.status),await wn(A),console.log("Save Handler: saveCurrentFormDataToDisplayed finished.")},$n=A=>{const{name:F,value:L}=A.target;console.log(`Header Change: Field '${F}' changed to '${L}'.`),w(ie=>({...ie,[F]:L}))},ui=A=>{const{name:F,value:L,type:ie}=A.target;ie!=="date"&&ie!=="number"&&F!=="emailSubject"&&F!=="mailId"&&(console.log(`Header Blur: Field '${F}' blurred. Value '${L}' capitalized.`),w(ge=>({...ge,[F]:L.toUpperCase()})))},_t=(A,F)=>{const{name:L,value:ie}=F.target;console.log(`Item Change: Item ID '${A}', Field '${L}' changed to '${ie}'.`),O(ge=>ge.map(le=>le.id===A?{...le,[L]:ie}:le))},Zt=(A,F)=>{const{name:L,value:ie,type:ge}=F.target;console.log(`Item Blur: Item ID '${A}', Field '${L}' blurred. Original value: '${ie}'.`),O(fe=>fe.map(Te=>{if(Te.id===A){let Ve=ie;if(L==="preciosFOB"){const ue=ie.match(/\d+([.,]\d+)?/g),xe=[];if(ue&&ue.length>0)for(const Re of ue){const $e=parseFloat(Re.replace(",","."));isNaN($e)||xe.push(`$ ${$e.toFixed(2).replace(".",",")}`)}xe.length>0?Ve=xe.join(" - "):Ve="",console.log(`Item Blur: PreciosFOB formatted to '${Ve}'.`)}else if(L==="calibre")Ve=ie.split(/[,;\s-]+/).filter(xe=>xe.trim()!=="").map(xe=>xe.trim().toUpperCase()).join(" - "),console.log(`Item Blur: Calibre formatted to '${Ve}'.`);else if(L==="categoria"){const ue=ie.match(/[a-zA-Z0-9]+/g);ue&&ue.length>0?Ve=ue.join(" - "):Ve="",Ve=Ve.toUpperCase(),console.log(`Item Blur: Categoria formatted to '${Ve}'.`)}else ge!=="number"&&(Ve=ie.toUpperCase(),console.log(`Item Blur: Other text field capitalized to '${Ve}'.`));return{...Te,[L]:Ve}}return Te}))},Ar=(A=null)=>{console.log("Add Item: handleAddItem called. Source ID:",A),O(F=>{let L;if(A){const ie=F.find(ge=>ge.id===A);if(ie){const ge={...ie,id:crypto.randomUUID(),isCanceled:!1},fe=F.findIndex(le=>le.id===A);L=[...F.slice(0,fe+1),ge,...F.slice(fe+1)],console.log("Add Item: Duplicated item. New item ID:",ge.id)}else L=[...F,{id:crypto.randomUUID(),pallets:"",especie:"",variedad:"",formato:"",calibre:"",categoria:"",preciosFOB:"",estado:"",isCanceled:!1}],console.log("Add Item: Source item not found, adding empty row.")}else L=[...F,{id:crypto.randomUUID(),pallets:"",especie:"",variedad:"",formato:"",calibre:"",categoria:"",preciosFOB:"",estado:"",isCanceled:!1}],console.log("Add Item: Adding empty row.");return wn({id:X,header:{...x},items:L}),console.log("Add Item: Triggering save to Firestore."),L})},Bi=A=>{console.log("Delete Item: handleDeleteItem called for ID:",A),O(F=>{if(F.length<=1)return console.log("Delete Item: Cannot delete the last row."),F;const L=F.filter(ie=>ie.id!==A);return wn({id:X,header:{...x},items:L}),console.log("Delete Item: Triggering save to Firestore after deletion."),L})},vi=A=>{console.log("Toggle Cancellation: Called for item ID:",A),O(F=>{const L=F.map(ie=>{if(ie.id===A){const ge=!ie.isCanceled;return console.log(`Toggle Cancellation: Item ${A} isCanceled changed to ${ge}.`),{...ie,isCanceled:ge,estado:ge?"CANCELADO":""}}return ie});return wn({id:X,header:{...x},items:L}),console.log("Toggle Cancellation: Triggering save to Firestore."),L})},ra=S.reduce((A,F)=>{if(F.isCanceled)return A;const L=parseFloat(F.pallets)||0;return A+L},0),wr=A=>{const F=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],L=["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"];try{const ie=new Date(A+"T00:00:00");if(isNaN(ie.getTime()))return console.warn("Date Format: Invalid date string received by formatDateToSpanish:",A),A;const ge=L[ie.getDay()],fe=ie.getDate(),le=F[ie.getMonth()],Te=ie.getFullYear();return`${ge} ${fe} de ${le} de ${Te}`}catch(ie){return console.error("Date Format: Error formatting date:",A,ie),A}},Sr=(A,F,L)=>{const ge=F.filter(ce=>!ce.isCanceled).reduce((ce,nt)=>{const it=parseFloat(nt.pallets)||0;return ce+it},0),fe=F.map(ce=>ce.estado).filter(ce=>ce&&ce.trim()!==""&&ce.toUpperCase()!=="CANCELADO"),le=fe.length>0?fe.join("–"):"",Te=A.nave,Ve=A.deNombrePais,ue=A.fechaCarga?wr(A.fechaCarga):"",xe=A.exporta,Re=A.status==="deleted"?"opacity: 0.6; text-decoration: line-through;":"",$e=`
            <div class="table-wrapper-email" style="overflow-x: auto; -webkit-overflow-scrolling: touch; margin-top: 10px; border-radius: 8px; border: 1px solid #ddd;">
                <table border="1" cellpadding="0" cellspacing="0" style="width: auto; min-width: 650px; border-collapse: collapse; border: none; box-sizing: border-box; text-align: left; table-layout: auto;">
                    <thead>
                        <tr style="background-color: #2563eb; color: #ffffff;">
                            <th style="padding: 3px 5px; border: 1px solid #1e40af; border-top-left-radius: 8px; text-align: center; font-size: 11px; box-sizing: border-box; white-space: nowrap;">Pallets</th>
                            <th style="padding: 3px 5px; border: 1px solid #1e40af; text-align: center; font-size: 11px; box-sizing: border-box; white-space: nowrap;">Especie</th>
                            <th style="padding: 3px 5px; border: 1px solid #1e40af; text-align: center; font-size: 11px; white-space: nowrap;">Variedad</th>
                            <th style="padding: 3px 5px; border: 1px solid #1e40af; text-align: center; font-size: 11px; white-space: nowrap;">Formato</th>
                            <th style="padding: 3px 5px; border: 1px solid #1e40af; text-align: center; font-size: 11px; white-space: nowrap;">Calibre</th>
                            <th style="padding: 3px 5px; border: 1px solid #1e40af; border-top-right-radius: 8px; text-align: center; font-size: 11px; box-sizing: border-box; white-space: nowrap;">Categoría</th>
                            <th style="padding: 3px 5px; border: 1px solid #1e40af; text-align: center; font-size: 11px; box-sizing: border-box; white-space: nowrap;">Precios FOB</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${F.map((ce,nt)=>{const it=ce.isCanceled?"color: #ef4444; text-decoration: line-through;":"";return`<tr style="${nt%2===0?"background-color: #f9f9f9;":"background-color: #ffffff;"}${it}"><td style="padding: 3px 5px; border: 1px solid #eee; text-align: center; box-sizing: border-box; font-size: 11px; white-space: nowrap;">${ce.pallets}</td><td style="padding: 3px 5px; border: 1px solid #eee; text-align: center; box-sizing: border-box; font-size: 11px; white-space: nowrap;">${ce.especie}</td><td style="padding: 3px 5px; border: 1px solid #eee; text-align: center; font-size: 11px; white-space: nowrap;">${ce.variedad}</td><td style="padding: 3px 5px; border: 1px solid #eee; text-align: center; font-size: 11px; white-space: nowrap;">${ce.formato}</td><td style="padding: 3px 5px; border: 1px solid #eee; text-align: center; font-size: 11px; white-space: nowrap;">${ce.calibre}</td><td style="padding: 3px 5px; border: 1px solid #eee; text-align: center; box-sizing: border-box; font-size: 11px; white-space: nowrap;">${ce.categoria}</td><td style="padding: 3px 5px; border: 1px solid #eee; text-align: center; box-sizing: border-box; font-size: 11px; white-space: nowrap;">${ce.preciosFOB}</td></tr>`}).join("")}
                        <tr style="background-color: #e0e0e0;">
                            <td colSpan="6" style="padding: 6px 15px 6px 6px; text-align: right; font-weight: bold; border: 1px solid #ccc; border-bottom-left-radius: 8px; margin-top: 15px; box-sizing: border-box; font-size: 11px; white-space: nowrap;">Total de Pallets:</td>
                            <td colSpan="1" style="padding: 6px; font-weight: bold; border: 1px solid #ccc; border-bottom-right-radius: 8px; text-align: center; box-sizing: border-box; font-size: 11px; white-space: nowrap;">
                                ${ge} Pallets
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        `;return`
        <div style="font-family: Arial, sans-serif; font-size: 14px; color: #333; margin-bottom: 20px; border: 1px solid #ddd; padding: 15px; border-radius: 8px; width: 100%; max-width: 900px; text-align: left; box-sizing: border-box; ${Re}">
            <div style="padding-bottom: 10px; border-bottom: 1px solid #eee; margin-bottom: 10px;">
                <p class="email-header-p" style="margin: 0; margin-bottom: 2px;"><strong>País:</strong> ${Ve}</p>
                <p class="email-header-p" style="margin: 0; margin-bottom: 2px;"><strong>Nave:</strong> ${Te}</p>
                <p class="email-header-p" style="margin: 0; margin-bottom: 2px;"><strong>Fecha de carga:</strong> ${ue}</p>
                <p class="email-header-p" style="margin: 0;"><strong>Exporta:</strong> ${xe}</p>
                <div style="clear: both;"></div> <!-- Clear float -->
            </div>
            ${$e}
            <p style="margin-top: 10px; font-weight: bold; font-size: 13px;">Observaciones: <span style="font-weight: normal; font-style: italic;">${le}</span></p>
        </div>
    `},sa=A=>{const F=document.createElement("div");F.innerHTML=A,F.style.position="absolute",F.style.left="-9999px",document.body.appendChild(F);const L=document.createRange();L.selectNodeContents(F);const ie=window.getSelection();ie.removeAllRanges(),ie.addRange(L),document.execCommand("copy"),document.body.removeChild(F),console.log("Clipboard: HTML content copied to clipboard.")},It=async()=>{if(console.log("Action: 'Add Order' button clicked."),!sn||!e){console.warn("Add Order: Firestore not initialized or user not authenticated. Cannot add new order.");return}X&&(console.log("Add Order: Saving current active order before creating a new one."),await yn());let A="";G?(A=G,console.log("Add Order: Inheriting Mail ID from committed search term:",A)):x.mailId&&x.status==="draft"?(A=x.mailId,console.log("Add Order: Inheriting Mail ID from current draft:",A)):(A=crypto.randomUUID().substring(0,8).toUpperCase(),console.log("Add Order: Generating new Mail ID for fresh order:",A));const F=Al(sn,`artifacts/${r}/public/data/pedidos`),ie=Jr(F).id,ge={...we,reDestinatarios:x.reDestinatarios,emailSubject:ze([x.reDestinatarios],[],A),mailId:A,status:"draft",createdAt:Date.now(),createdBy:e,updatedAt:Date.now()},fe=[{...Be,id:crypto.randomUUID()}];console.log("Add Order: Creating new order with ID:",ie,"and Mail ID:",A),await wn({id:ie,header:ge,items:fe}),ne(ie),console.log("Add Order: New order added, setting activeOrderId to new order:",ie)},lt=()=>{if(console.log("Navigation: handlePreviousOrder called. Before navigation:",{currentOrderIndex:V,activeOrderId:X,displayedOrdersLength:y.length}),V===0){console.log("Navigation: Already at the first (oldest) order.");return}yn();const A=V-1;if(y[A]){const F=y[A].id;ne(F),console.log("Navigation: Navigating to previous (older) order. New activeOrderId:",F)}else console.warn("Navigation: Could not find previous order at index:",A)},Sn=()=>{if(console.log("Navigation: handleNextOrder called. Before navigation:",{currentOrderIndex:V,activeOrderId:X,displayedOrdersLength:y.length}),V===y.length-1){console.log("Navigation: Already at the last (newest) order.");return}yn();const A=V+1;if(y[A]){const F=y[A].id;ne(F),console.log("Navigation: Navigating to next (newer) order. New activeOrderId:",F)}else console.warn("Navigation: Could not find next order at index:",A)},Jt=async()=>{console.log("Action: 'Delete Current Order' button clicked (soft delete).");try{if(await yn(),y.length<=1){console.log("Delete Order: Cannot delete the last order.");return}console.log("Delete Order: Passed initial check. displayedOrders.length:",y.length,"currentOrderIndex:",V),console.log("Delete Order: displayedOrders content at deletion attempt:",y.map(F=>{var L;return{id:F.id,status:(L=F.header)==null?void 0:L.status}})),console.log("Delete Order: Value of currentOrderIndex:",V);const A=y[V].id;console.log("Delete Order: Attempting to soft delete order with ID:",A),setTimeout(async()=>{await ji(A),console.log("Delete Order: Soft deletion initiated. Firestore onSnapshot will handle UI update.")},50)}catch(A){console.error("Error in handleDeleteCurrentOrder (soft delete):",A)}},aa=()=>{console.log("Action: Search button clicked. New search term:",I.toUpperCase()),te(I.toUpperCase())},bo=async()=>{console.log("Action: 'Clear Search' button clicked. Clearing search term."),X&&(console.log("Clear Search: Saving current active order before clearing search filter."),await yn()),D(""),te(""),console.log("Clear Search: Search filter cleared. UI will now display all active draft orders.")},qi=()=>window.innerWidth<=767,_i=async()=>{var A,F,L,ie,ge,fe;console.log("Action: 'Send Email' button clicked.");try{if(!sn||!e){console.warn("Send Email: Firestore not initialized or user not authenticated. Cannot send email.");return}console.log("Send Email: Saving current form data before consolidating for email."),await yn();const le=x.mailId;if(console.log("Send Email: Mail ID of the active order:",le),!le){console.error("Send Email: Mail ID is missing when attempting to send email. Cannot consolidate orders."),Nt(!1);return}const Te=Al(sn,`artifacts/${r}/public/data/pedidos`),Ve=x.reDestinatarios;if(Ve&&le){const Pe=wl(Te,$a("header.status","==","draft"),$a("header.reDestinatarios","==",Ve));console.log("Send Email: Querying for draft orders to group under Mail ID:",le,"and Supplier:",Ve);const rt=await Cc(Pe),st=s0(sn);rt.docs.forEach(ci=>{var Xn;const ln=(Xn=ci.data().header)==null?void 0:Xn.mailId;if(!ln||ln!==le){const oa=Jr(sn,`artifacts/${r}/public/data/pedidos`,ci.id);st.update(oa,{"header.mailId":le}),console.log(`Send Email - Grouping: Order ${ci.id} updated with Mail ID: ${le}`)}}),st._mutations.length>0?(await st.commit(),console.log("Send Email - Grouping: Batch update committed for grouping orders.")):console.log("Send Email - Grouping: No other draft orders to group or already grouped.")}else console.warn("Send Email - Grouping: Skipping grouping, missing currentProveedor or mailGlobalId.");const ue=wl(Te,$a("header.mailId","==",le));console.log(`Send Email: Querying Firestore for orders with header.mailId == '${le}' AFTER grouping update.`);let Re=(await Cc(ue)).docs.map(Pe=>({id:Pe.id,header:Pe.data().header,items:JSON.parse(Pe.data().items||"[]")}));Re=Re.filter(Pe=>{var rt;return((rt=Pe.header)==null?void 0:rt.status)!=="deleted"}),console.log("Send Email: Orders after filtering out 'deleted' ones:",Re.map(Pe=>{var rt;return{id:Pe.id,status:(rt=Pe.header)==null?void 0:rt.status}}));const $e={id:X,header:{...x},items:S.map(Pe=>({...Pe}))};console.log("Send Email: Active order's local state:",{id:$e.id,mailId:(A=$e.header)==null?void 0:A.mailId,status:(F=$e.header)==null?void 0:F.status});const ce=Re.findIndex(Pe=>Pe.id===X);ce!==-1?((L=$e.header)==null?void 0:L.status)!=="deleted"?(Re[ce]=$e,console.log("Send Email: Active order updated in consolidation list with local state (not deleted).")):(Re.splice(ce,1),console.log("Send Email: Active order was deleted locally, removed from consolidation list.")):$e.id&&((ie=$e.header)==null?void 0:ie.mailId)===le&&((ge=$e.header)==null?void 0:ge.status)!=="deleted"&&(Re.push($e),console.log("Send Email: Active order added to consolidation list (not deleted).")),Re.sort((Pe,rt)=>{var Ei,ln;const st=((Ei=Pe.header)==null?void 0:Ei.createdAt)||0,ci=((ln=rt.header)==null?void 0:ln.createdAt)||0;return st-ci}),console.log("Send Email: Orders after local state merge and sort:",Re.map(Pe=>{var rt,st;return{id:Pe.id,mailId:(rt=Pe.header)==null?void 0:rt.mailId,status:(st=Pe.header)==null?void 0:st.status}}));for(const Pe of Re)if(((fe=Pe.header)==null?void 0:fe.status)==="draft"){const rt=Jr(sn,`artifacts/${r}/public/data/pedidos`,Pe.id);await r0(rt,{"header.mailId":le,"header.status":"sent","header.lastModifiedBy":e,"header.updatedAt":Date.now()}),Pe.header.status="sent",Pe.header.mailId=le,console.log(`Send Email: Order ${Pe.id} marked as 'sent'.`)}if(Re.length===0){console.log("Send Email: No orders to send after consolidation (all filtered out or none existed)."),K('<p style="text-align: center; color: #888;">No hay pedidos activos para enviar con este ID de Mail. Todos los pedidos asociados están eliminados o no existen.</p>'),pe(!0),N(!1);return}let nt="";const it=new Set,bt=new Set;Re.forEach((Pe,rt)=>{nt+=`
            <h3 style="font-size: 18px; color: #2563eb; margin-top: 40px; margin-bottom: 15px; text-align: left;">Pedido #${rt+1}</h3>
            ${Sr(Pe.header,Pe.items,rt+1)}
        `,Pe.header.reDestinatarios&&it.add(Pe.header.reDestinatarios),Pe.items.forEach(st=>{st.especie&&bt.add(st.especie)})});const Rt=ze(Array.from(it),Array.from(bt),"");console.log("Send Email: Consolidated Email Subject (without Mail ID):",Rt);const Ht=`
        <!DOCTYPE html>
        <html>
        <head>
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Detalle de Pedido</title>
            <style>
              /* Global styles for email */
              body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f8f8f8; }
              .container { padding: 0px; box-sizing: border-box; text-align: left; }
              /* Responsive styles for email */
              @media only screen and (max-width: 767px) {
                  .email-header-p {
                      font-size: 12px !important;
                      margin-bottom: 1px !important;
                  }
                  .email-header-p:last-of-type {
                      margin-bottom: 4px !important;
                  }
                  h3 {
                      font-size: 16px !important;
                      margin-top: 20px !important;
                      margin-bottom: 10px !important;
                  }
                  /* Ensure bold for header labels in mobile preview */
                  .email-header-p strong {
                      font-weight: bold !important;
                  }
                  table th, table td {
                      font-size: 8px !important; /* Further reduced font size for mobile */
                      padding: 2px 2px !important; /* Further reduced padding for mobile */
                      white-space: nowrap; /* Force content onto one line */
                  }
                  table {
                      width: auto !important; /* Allow table to auto-size based on content/min-width */
                      min-width: 650px !important; /* Increased minimum width for content, allowing overflow-x to work */
                      table-layout: auto; /* Allow column widths to adjust to content */
                  }
                  /* Ensure the wrapper div for the table handles horizontal scrolling */
                  .table-wrapper-email {
                      overflow-x: auto !important;
                      -webkit-overflow-scrolling: touch !important;
                  }
              }
              /* General table styles */
              table {
                  max-width: 100%;
                  width: auto;
                  border-collapse: collapse;
                  table-layout: auto;
              }
              table th, table td {
                  border: 1px solid #eee;
                  padding: 3px 5px;
                  text-align: center;
                  vertical-align: top; /* Align content to top for multi-line cells */
                  white-space: nowrap; /* Force content onto one line */
              }
              table thead th {
                  background-color: #2563eb;
                  color: #ffffff;
              }
            </style>
        </head>
        <body>
            <div class="container">
                <div style="text-align: right; margin-bottom: 10px; font-weight: bold; font-size: 14px; color: #ef4444;">Mail ID: ${le}</div>
                ${nt}
            </div>
        </body>
        </html>
      `;sa(Ht),console.log("Send Email: Email content copied to clipboard.");const In="",Nn="El contenido del pedido ha sido copiado a tu portapapeles. Por favor, abre tu aplicación de correo y pega el contenido manualmente en el cuerpo del mensaje.";if(qi()){const Pe=`mailto:${In}?subject=${encodeURIComponent(Rt)}&body=${encodeURIComponent(Nn)}`;window.location.href=Pe,console.log("Send Email: Attempting to open mailto link for mobile.")}else window.open(`https://mail.google.com/mail/?view=cm&fs=1&tf=1&to=${In}&su=${encodeURIComponent(Rt)}&body=`,"_blank"),console.log("Send Email: Attempting to open Gmail compose window for desktop.");Nt(!1),D(""),te(""),N(!1),pe(!1),K(""),console.log("Send Email: UI states reset after email send.")}catch(le){console.error("Send Email: Failed to send email:",le)}},Hi=async()=>{var Ve,ue,xe,Re,$e;console.log("Action: 'Preview Order' button clicked."),console.log("Preview Order: Saving current form data before consolidating for preview."),await yn();const A=x.mailId;if(console.log("Preview Order: Mail ID of the active order for preview:",A),!A){console.warn("Preview Order: Cannot preview: No Mail ID associated with the current order."),K('<p style="text-align: center; color: #888;">No hay pedidos para previsualizar sin un ID de Mail asociado.</p>'),pe(!0);return}const F=Al(sn,`artifacts/${r}/public/data/pedidos`),L=x.reDestinatarios;if(L&&A){const ce=wl(F,$a("header.status","==","draft"),$a("header.reDestinatarios","==",L));console.log("Preview Order: Querying for draft orders to group under Mail ID:",A,"and Supplier:",L);const nt=await Cc(ce),it=s0(sn);nt.docs.forEach(bt=>{var In;const Ht=(In=bt.data().header)==null?void 0:In.mailId;if(!Ht||Ht!==A){const Nn=Jr(sn,`artifacts/${r}/public/data/pedidos`,bt.id);it.update(Nn,{"header.mailId":A}),console.log(`Preview Order - Grouping: Order ${bt.id} updated with Mail ID: ${A}`)}}),it._mutations.length>0?(await it.commit(),console.log("Preview Order - Grouping: Batch update committed for grouping orders (preview).")):console.log("Preview Order - Grouping: No other draft orders to group for preview or already grouped.")}else console.warn("Preview Order - Grouping: Skipping grouping for preview, missing currentProveedor or previewGlobalId.");const ie=wl(F,$a("header.mailId","==",A));console.log(`Preview Order: Querying Firestore for orders with header.mailId == '${A}' AFTER grouping update.`);let fe=(await Cc(ie)).docs.map(ce=>({id:ce.id,header:ce.data().header,items:JSON.parse(ce.data().items||"[]")}));fe=fe.filter(ce=>{var nt;return((nt=ce.header)==null?void 0:nt.status)!=="deleted"}),console.log("Preview Order: Orders after filtering out 'deleted' ones:",fe.map(ce=>{var nt;return{id:ce.id,status:(nt=ce.header)==null?void 0:nt.status}}));const le={id:X,header:{...x},items:S.map(ce=>({...ce}))};console.log("Preview Order: Active order's local state:",{id:le.id,mailId:(Ve=le.header)==null?void 0:Ve.mailId,status:(ue=le.header)==null?void 0:ue.status});const Te=fe.findIndex(ce=>ce.id===X);if(Te!==-1?((xe=le.header)==null?void 0:xe.status)!=="deleted"?(fe[Te]=le,console.log("Preview Order: Active order updated in consolidation list with local state (not deleted).")):(fe.splice(Te,1),console.log("Preview Order: Active order was deleted locally, removed from consolidation list.")):le.id&&((Re=le.header)==null?void 0:Re.mailId)===A&&(($e=le.header)==null?void 0:$e.status)!=="deleted"&&(fe.push(le),console.log("Preview Order: Active order added to consolidation list (not deleted).")),fe.sort((ce,nt)=>{var Rt,Ht;const it=((Rt=ce.header)==null?void 0:Rt.createdAt)||0,bt=((Ht=nt.header)==null?void 0:Ht.createdAt)||0;return it-bt}),console.log("Preview Order: Orders after local state merge and sort:",fe.map(ce=>{var nt,it;return{id:ce.id,mailId:(nt=ce.header)==null?void 0:nt.mailId,status:(it=ce.header)==null?void 0:it.status}})),fe.length===0)K('<p style="text-align: center; color: #888;">No hay pedidos activos para previsualizar con este ID de Mail. Todos los pedidos asociados están eliminados o no existen.</p>'),console.log("Preview Order: No orders to preview generated.");else{let ce="";fe.forEach((it,bt)=>{ce+=`
          <h3 style="font-size: 18px; color: #2563eb; margin-top: 20px; margin-bottom: 10px; text-align: left;">Pedido #${bt+1}</h3>
          ${Sr(it.header,it.items)}
        `});const nt=`
        <!DOCTYPE html>
        <html>
        <head>
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Previsualización de Pedido</title>
            <style>
              /* Global styles for preview */
              body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f8f8f8; }
              .container { padding: 0px; box-sizing: border-box; text-align: left; }
              /* Responsive styles for preview */
              @media only screen and (max-width: 767px) {
                  .email-header-p {
                      font-size: 12px !important;
                      margin-bottom: 1px !important;
                  }
                  .email-header-p:last-of-type {
                      margin-bottom: 4px !important;
                  }
                  h3 {
                      font-size: 16px !important;
                      margin-top: 20px !important;
                      margin-bottom: 10px !important;
                  }
                  /* Ensure bold for header labels in mobile preview */
                  .email-header-p strong {
                      font-weight: bold !important;
                  }
                  table th, table td {
                      font-size: 8px !important; /* Further reduced font size for mobile */
                      padding: 2px 2px !important; /* Further reduced padding for mobile */
                      white-space: nowrap; /* Force content onto one line */
                  }
                  table {
                      width: auto !important; /* Allow table to auto-size based on content/min-width */
                      min-width: 650px !important; /* Increased minimum width for content, allowing overflow-x to work */
                      table-layout: auto; /* Allow column widths to adjust to content */
                  }
                  .table-wrapper-email {
                      overflow-x: auto !important;
                      -webkit-overflow-scrolling: touch !important;
                  }
              }
              /* General table styles */
              table {
                  max-width: 100%;
                  width: auto;
                  border-collapse: collapse;
                  table-layout: auto;
              }
              table th, table td {
                  border: 1px solid #eee;
                  padding: 3px 5px;
                  text-align: center;
                  vertical-align: top;
                  white-space: nowrap; /* Force content onto one line */
              }
              table thead th {
                  background-color: #2563eb;
                  color: #ffffff;
              }
            </style>
        </head>
        <body>
            <div class="container">
                <div style="text-align: right; margin-bottom: 10px; font-weight: bold; font-size: 14px; color: #ef4444;">Mail ID: ${A}</div>
                ${ce}
            </div>
        </body>
        </html>
      `;K(nt),console.log("Preview Order: Preview content generated.")}pe(!0)},Ln=async()=>{console.log("Action: 'Finalize Order' button clicked.");let A=x.mailId;x.mailId?console.log("Finalize Order: Order already has Mail ID. Not generating new one:",x.mailId):(A=crypto.randomUUID().substring(0,8).toUpperCase(),console.log("Finalize Order: Generating new Mail ID:",A),w(F=>({...F,mailId:A}))),console.log("Finalize Order: Saving current form data before modal opens (with potentially new Mail ID)."),await yn(),Nt(!0),N(!1),pe(!1),K(""),console.log("Finalize Order: Modal opened with Mail ID:",A)},Fi=A=>{console.log("Observation Modal: Opening for item ID:",A);const F=S.find(L=>L.id===A);F&&(ye(F),Se(F.estado),oe(!0),console.log("Observation Modal: Data loaded for item:",A))};ht.useEffect(()=>{ee&&St.current&&(St.current.focus(),St.current.value&&St.current.select(),console.log("Observation Modal: Textarea focused."))},[ee]);const Gi=()=>{if(console.log("Observation Modal: Saving observation."),re){const A=je?je.charAt(0).toUpperCase()+je.slice(1).toLowerCase():"";console.log("Observation Modal: Formatted observation:",A);const F=S.map(L=>L.id===re.id?{...L,estado:A}:L);O(F),wn({id:X,header:{...x},items:F}),console.log("Observation Modal: Observation saved for item:",re.id,"Triggering Firestore save.")}oe(!1),ye(null),Se(""),console.log("Observation Modal: Closed.")},vs=()=>{console.log("Observation Modal: Closing (cancel)."),oe(!1),ye(null),Se(""),console.log("Observation Modal: Closed.")};if(ht.useEffect(()=>{const A=F=>{var Te,Ve;const L=document.activeElement;let ie=!1;if(!(ue=>ue.tagName==="INPUT"&&ue.name&&(Ot.includes(ue.name)||on.includes(ue.name)))(L))return;const fe=Ot.indexOf(L.name);let le=null;if(fe===-1)for(const ue in Ue.current){for(const xe in Ue.current[ue])if(Ue.current[ue][xe]===L){le={rowId:ue,colName:xe};break}if(le)break}if(F.key==="ArrowRight"||F.key==="ArrowLeft"||F.key==="ArrowUp"||F.key==="ArrowDown"){if(F.preventDefault(),console.log("Keyboard Nav: Arrow key pressed:",F.key),fe!==-1){let ue=fe;if(F.key==="ArrowRight")ue=(fe+1)%Ot.length;else if(F.key==="ArrowLeft")ue=(fe-1+Ot.length)%Ot.length;else if(F.key==="ArrowDown"){if(S.length>0){const xe=S[0].id,Re=on[0];Ue.current[xe]&&Ue.current[xe][Re]&&(Ue.current[xe][Re].focus(),ie=!0,console.log("Keyboard Nav: Moved from header to first table row."))}}else F.key==="ArrowUp"&&(ue=(fe-1+Ot.length)%Ot.length,Ge.current[Ot[ue]]&&(Ge.current[Ot[ue]].focus(),ie=!0,console.log("Keyboard Nav: Moved within header (ArrowUp).")));!ie&&Ge.current[Ot[ue]]&&(Ge.current[Ot[ue]].focus(),ie=!0,console.log("Keyboard Nav: Moved within header (ArrowLeft/Right)."))}else if(le){const{rowId:ue,colName:xe}=le,Re=S.findIndex(bt=>bt.id===ue),$e=on.indexOf(xe);let ce=Re,nt=$e;F.key==="ArrowRight"?(nt++,nt>=on.length&&(nt=0,ce++)):F.key==="ArrowLeft"?(nt--,nt<0&&(nt=on.length-1,ce--)):F.key==="ArrowDown"?ce++:F.key==="ArrowUp"&&ce--;let it=null;if(ce>=0&&ce<S.length){const bt=(Te=S[ce])==null?void 0:Te.id,Rt=on[nt];Ue.current[bt]&&Ue.current[bt][Rt]&&(it=Ue.current[bt][Rt],console.log(`Keyboard Nav: Moving to table cell [${ce}, ${Rt}].`))}else if(ce<0){const bt=Ot[Ot.length-1];it=Ge.current[bt],console.log("Keyboard Nav: Moving from table to last header input.")}else if(ce>=S.length){const bt=S.length-1,Rt=(Ve=S[bt])==null?void 0:Ve.id,Ht=on[$e];Rt&&Ue.current[Rt]&&Ue.current[Rt][Ht]&&(it=Ue.current[Rt][Ht],console.log("Keyboard Nav: Staying on last table row (ArrowDown)."))}it&&(it.focus(),ie=!0)}}};return document.addEventListener("keydown",A),()=>{document.removeEventListener("keydown",A)}},[S,x]),c)return console.log("Render: App is loading..."),P.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:P.jsx("div",{className:"text-blue-600 text-lg font-semibold",children:"Cargando pedidos..."})});const ve=x.status==="deleted";return console.log("Render: App is ready. Current activeOrderId:",X),console.log("Render: Current headerInfo:",x),console.log("Render: Current orderItems:",S),console.log("Render: Current order is deleted:",ve),P.jsxs("div",{className:"min-h-screen bg-gray-100 p-4 sm:p-6 lg:p-8 font-inter",children:[P.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-xl shadow-lg p-4 sm:p-6 space-y-6 relative",children:[P.jsx("img",{src:"https://www.vpcom.com/images/logo-vpc.png",onError:A=>{A.target.onerror=null,A.target.src="https://placehold.co/100x40/FFFFFF/000000?text=LogoVPC"},alt:"Logo VPC",className:"absolute top-4 right-4 w-20 sm:w-24 md:w-32 h-auto object-contain rounded-md z-10"}),e&&P.jsxs("div",{className:"absolute top-4 left-4 text-xs text-gray-500",children:["User ID: ",e]}),P.jsxs("div",{className:"border-b pb-4 mb-4 pt-16 sm:pt-0",children:[P.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-center text-gray-800 mb-4",children:"Pedidos Comercial Frutam"}),P.jsxs("div",{className:"flex items-end gap-2 mb-4",children:[P.jsxs("div",{className:"flex-grow",children:[P.jsx("label",{htmlFor:"searchTerm",className:"block text-sm font-medium text-gray-700",children:"Buscar por Mail ID:"}),P.jsx("input",{type:"text",id:"searchTerm",name:"searchTerm",value:I,onChange:A=>D(A.target.value),placeholder:"Ingrese el Mail ID (ej. 5B7D7692)",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-gray-50 border"})]}),P.jsx("button",{onClick:aa,className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-md shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-150 ease-in-out mt-auto",children:"Buscar"}),P.jsx("button",{onClick:bo,className:"px-4 py-2 bg-gray-300 text-gray-800 font-semibold rounded-md shadow-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2 transition duration-150 ease-in-out mt-auto",children:"Limpiar Búsqueda"})]}),P.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-4",children:[P.jsx("div",{children:P.jsx(Xa,{label:"Nombre de Proveedor:",name:"reDestinatarios",value:x.reDestinatarios,onChange:$n,onBlur:ui,placeholder:"Ingrese nombre de proveedor",ref:A=>Ge.current.reDestinatarios=A,readOnly:ve})}),P.jsx("div",{children:P.jsx(Xa,{label:"País:",name:"deNombrePais",value:x.deNombrePais,onChange:$n,onBlur:ui,placeholder:"País de destino",ref:A=>Ge.current.deDestinatarios=A,readOnly:ve})}),P.jsx("div",{children:P.jsx(Xa,{label:"Nave:",name:"nave",value:x.nave,onChange:$n,onBlur:ui,placeholder:"Nombre de Nave",ref:A=>Ge.current.nave=A,readOnly:ve})}),P.jsx("div",{children:P.jsx(Xa,{label:"Fecha de carga:",name:"fechaCarga",value:x.fechaCarga,onChange:$n,onBlur:ui,placeholder:"FECHA DE CARGA",type:"date",ref:A=>Ge.current.fechaCarga=A,readOnly:ve})}),P.jsx("div",{children:P.jsx(Xa,{label:"Exporta:",name:"exporta",value:x.exporta,onChange:$n,onBlur:ui,placeholder:"Exportadora",ref:A=>Ge.current.exporta=A,readOnly:ve})}),P.jsx("div",{children:P.jsx(Xa,{label:"Asunto del Email:",name:"emailSubject",value:x.emailSubject,onChange:$n,onBlur:ui,placeholder:"Asunto del Correo (Se auto-completa)",ref:A=>Ge.current.emailSubject=A,readOnly:!0})})]})]}),P.jsx("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4 mt-4 mb-6",children:P.jsxs("div",{className:"flex items-center justify-center w-full sm:w-auto",children:[P.jsxs("button",{onClick:lt,disabled:V===0,className:"flex items-center justify-center px-3 py-2 bg-gray-300 text-gray-800 font-semibold rounded-lg shadow-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2 transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed",title:"Ir al pedido anterior (más antiguo)",children:[P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:P.jsx("path",{fillRule:"evenodd",d:"M9.707 4.293a1 1 0 010 1.414L5.414 10l4.293 4.293a1 1 0 01-1.414 1.414l-5-5a1 1 0 010-1.414l5-5a1 1 0 011.414 0z",clipRule:"evenodd"})}),P.jsx("span",{className:"hidden sm:inline ml-1",children:"Anterior"})]}),P.jsxs("span",{className:"text-center text-gray-700 font-semibold text-lg mx-2 sm:mx-4 min-w-[150px] sm:min-w-0",children:[`Pedido ${V+1} de ${y.length}`,ve&&P.jsx("span",{className:"text-red-500 ml-2",children:"(Eliminado)"})]}),P.jsxs("button",{onClick:Sn,disabled:V===y.length-1,className:"flex items-center justify-center px-3 py-2 bg-gray-300 text-gray-800 font-semibold rounded-lg shadow-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2 transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed",title:"Ir al siguiente pedido (más reciente)",children:[P.jsx("span",{className:"hidden sm:inline mr-1",children:"Siguiente"}),P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:P.jsx("path",{fillRule:"evenodd",d:"M10.293 15.707a1 1 0 010-1.414L14.586 10l-4.293-4.293a1 1 0 111.414-1.414l5 5a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})}),y.length===0&&G?P.jsxs("div",{className:"text-center text-gray-600 text-lg my-8",children:["No se encontraron pedidos con el ID:"," ",P.jsx("span",{className:"font-semibold",children:G}),"."]}):P.jsxs(P.Fragment,{children:[" ",P.jsx("div",{className:"overflow-x-auto rounded-lg shadow-md",children:P.jsxs("table",{className:"min-w-full divide-y divide-gray-200 hidden md:table",children:[P.jsx("thead",{className:"bg-blue-600 text-white",children:P.jsxs("tr",{style:{backgroundColor:"#2563eb",color:"#ffffff"},children:[P.jsx("th",{scope:"col",className:"px-1 py-px text-xs font-medium uppercase tracking-wider rounded-tl-lg whitespace-nowrap",children:"Pallets"}),P.jsx("th",{scope:"col",className:"px-1 py-px text-xs font-medium uppercase tracking-wider whitespace-nowrap",children:"Especie"}),P.jsx("th",{scope:"col",className:"px-1 py-px text-xs font-medium uppercase tracking-wider whitespace-nowrap",children:"Variedad"}),P.jsx("th",{scope:"col",className:"px-1 py-px text-xs font-medium uppercase tracking-wider whitespace-nowrap",children:"Formato"}),P.jsx("th",{scope:"col",className:"px-1 py-px text-xs font-medium uppercase tracking-wider whitespace-nowrap",children:"Calibre"}),P.jsx("th",{scope:"col",className:"px-1 py-px text-xs font-medium uppercase tracking-wider rounded-tr-lg whitespace-nowrap",children:"Categoría"}),P.jsx("th",{scope:"col",className:"px-1 py-px text-xs font-medium uppercase tracking-wider whitespace-nowrap",children:"Precios FOB"}),P.jsx("th",{scope:"col",className:"px-1 py-px text-xs font-medium uppercase tracking-wider whitespace-nowrap",children:"Acciones"})]})}),P.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[S.map((A,F)=>P.jsxs("tr",{className:`hover:bg-gray-50 ${F%2===0?"bg-gray-50":"bg-white"} ${A.isCanceled||ve?"text-red-500":""}`,children:[P.jsx("td",{className:"px-1 py-px text-xs border-r whitespace-nowrap",style:{textAlign:"center"},children:P.jsx(Pn,{type:"number",name:"pallets",value:A.pallets,onChange:L=>_t(A.id,L),onBlur:L=>Zt(A.id,L),placeholder:"21",readOnly:A.isCanceled||ve,isCanceledProp:A.isCanceled||ve,ref:L=>{Ue.current[A.id]||(Ue.current[A.id]={}),Ue.current[A.id].pallets=L}})}),P.jsx("td",{className:"px-1 py-px text-xs border-r whitespace-nowrap",style:{textAlign:"center"},children:P.jsx(Pn,{name:"especie",value:A.especie,onChange:L=>_t(A.id,L),onBlur:L=>Zt(A.id,L),placeholder:"Manzana",readOnly:A.isCanceled||ve,isCanceledProp:A.isCanceled||ve,...A.especie&&A.especie.toUpperCase()==="MANZANAS"?{list:"apple-varieties"}:{},ref:L=>{Ue.current[A.id]||(Ue.current[A.id]={}),Ue.current[A.id].especie=L}})}),P.jsx("td",{className:"px-1 py-px text-xs border-r whitespace-nowrap",style:{textAlign:"center"},children:P.jsx(Pn,{name:"variedad",value:A.variedad,onChange:L=>_t(A.id,L),onBlur:L=>Zt(A.id,L),placeholder:"Galas",readOnly:A.isCanceled||ve,isCanceledProp:A.isCanceled||ve,...A.especie&&A.especie.toUpperCase()==="MANZANAS"?{list:"apple-varieties"}:{},ref:L=>{Ue.current[A.id]||(Ue.current[A.id]={}),Ue.current[A.id].variedad=L}})}),P.jsx("td",{className:"px-1 py-px text-xs border-r whitespace-nowrap",style:{textAlign:"center"},children:P.jsx(Pn,{name:"formato",value:A.formato,onChange:L=>_t(A.id,L),onBlur:L=>Zt(A.id,L),placeholder:"20 Kg",readOnly:A.isCanceled||ve,isCanceledProp:A.isCanceled||ve,ref:L=>{Ue.current[A.id]||(Ue.current[A.id]={}),Ue.current[A.id].formato=L}})}),P.jsx("td",{className:"px-1 py-px text-xs border-r whitespace-nowrap",style:{textAlign:"center"},children:P.jsx(Pn,{name:"calibre",value:A.calibre,onChange:L=>_t(A.id,L),onBlur:L=>Zt(A.id,L),placeholder:"100;113",readOnly:A.isCanceled||ve,isCanceledProp:A.isCanceled||ve,ref:L=>{Ue.current[A.id]||(Ue.current[A.id]={}),Ue.current[A.id].calibre=L}})}),P.jsx("td",{className:"px-1 py-px text-xs border-r whitespace-nowrap",style:{textAlign:"center"},children:P.jsx(Pn,{name:"categoria",value:A.categoria,onChange:L=>_t(A.id,L),onBlur:L=>Zt(A.id,L),placeholder:"PRE:XFY",readOnly:A.isCanceled||ve,isCanceledProp:A.isCanceled||ve,ref:L=>{Ue.current[A.id]||(Ue.current[A.id]={}),Ue.current[A.id].categoria=L}})}),P.jsx("td",{className:"px-1 py-px text-xs border-r whitespace-nowrap",style:{textAlign:"center"},children:P.jsx(Pn,{name:"preciosFOB",value:A.preciosFOB,onChange:L=>_t(A.id,L),onBlur:L=>Zt(A.id,L),placeholder:"$14",readOnly:A.isCanceled||ve,isCanceledProp:A.isCanceled||ve,ref:L=>{Ue.current[A.id]||(Ue.current[A.id]={}),Ue.current[A.id].preciosFOB=L}})}),P.jsxs("td",{className:"px-1 py-px text-right text-xs font-medium flex items-center justify-center h-full",children:[P.jsx("button",{onClick:()=>Fi(A.id),className:"text-blue-600 hover:text-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 p-1 rounded-md",title:"Editar Observación",disabled:ve,children:P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),P.jsx("button",{onClick:()=>Ar(A.id),className:"text-green-600 hover:text-green-900 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 p-1 rounded-md",title:"Duplicar fila",disabled:ve,children:P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:P.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})})}),P.jsx("button",{onClick:()=>vi(A.id),className:`ml-1 ${A.isCanceled?"text-gray-600 hover:text-gray-900":"text-red-600 hover:text-red-900"} focus:outline-none focus:ring-2 focus:ring-offset-2 p-1 rounded-md`,title:A.isCanceled?"Revertir cancelación":"Cancelar fila",disabled:ve,children:A.isCanceled?P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:P.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414L7.586 9H6a1 1 0 000 2h1.586l1.707 1.707a1 1 0 001.414-1.414L10.414 10H12a1 1 0 000-2h-1.586z",clipRule:"evenodd"})}):P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:P.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),P.jsx("button",{onClick:()=>Bi(A.id),className:`ml-1 text-red-600 hover:text-red-900 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 p-1 rounded-md ${S.length<=1||ve?"opacity-50 cursor-not-allowed":""}`,title:S.length<=1?"No se puede eliminar la última fila":"Eliminar fila",disabled:S.length<=1||ve,children:P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:P.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1zm2 3a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1zm-1 4a1 1 0 002 0v-4a1 1 0 00-2 0v4z"})})})]})]},A.id)),P.jsxs("tr",{style:{backgroundColor:"#e0e0e0"},children:[P.jsx("td",{colSpan:"6",style:{padding:"6px 15px 6px 6px",textAlign:"right",fontWeight:"bold",border:"1px solid #ccc",borderBottomLeftRadius:"8px",marginTop:"15px"},children:"Total de Pallets:"}),P.jsxs("td",{colSpan:"1",style:{padding:"6px",fontWeight:"bold",border:"1px solid #ccc",borderBottomRightRadius:"8px",textAlign:"center"},children:[ra," Pallets"]})]})]})]})}),P.jsxs("div",{className:"md:hidden space-y-4 p-2",children:[S.map((A,F)=>P.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg p-4 shadow-sm space-y-2 ${A.isCanceled||ve?"line-through text-red-500 opacity-70":""}`,children:[P.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100",children:[P.jsxs("span",{className:"text-xs font-semibold text-blue-600",children:["Artículo #",F+1]}),P.jsxs("div",{className:"flex space-x-2",children:[P.jsx("button",{onClick:()=>Fi(A.id),className:"text-blue-600 hover:text-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 p-1 rounded-md",title:"Editar Observación",disabled:ve,children:P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-5 w-5",children:P.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),P.jsx("button",{onClick:()=>Ar(A.id),className:"text-green-600 hover:text-green-900 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 p-1 rounded-md",title:"Duplicar fila",disabled:ve,children:P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:P.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z"})})}),P.jsx("button",{onClick:()=>vi(A.id),className:`ml-1 ${A.isCanceled?"text-gray-600 hover:text-gray-900":"text-red-600 hover:text-red-900"} focus:outline-none focus:ring-2 focus:ring-offset-2 p-1 rounded-md`,title:A.isCanceled?"Revertir cancelación":"Cancelar fila",disabled:ve,children:A.isCanceled?P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:P.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414L7.586 9H6a1 1 0 000 2h1.586l1.707 1.707a1 1 0 001.414-1.414L10.414 10H12a1 1 0 000-2h-1.586z"})}):P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:P.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"})})}),P.jsx("button",{onClick:()=>Bi(A.id),className:`ml-1 text-red-600 hover:text-red-900 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 p-1 rounded-md ${S.length<=1||ve?"opacity-50 cursor-not-allowed":""}`,title:S.length<=1?"No se puede eliminar la última fila":"Eliminar fila",disabled:S.length<=1||ve,children:P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:P.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1zm2 3a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1zm-1 4a1 1 0 002 0v-4a1 1 0 00-2 0v4z"})})})]})]}),P.jsxs("div",{className:"flex justify-between items-center text-sm",children:[P.jsx("span",{className:"font-semibold text-gray-500 w-1/2",children:"Pallets:"}),P.jsx(Pn,{name:"pallets",value:A.pallets,onChange:L=>_t(A.id,L),onBlur:L=>Zt(A.id,L),placeholder:"21",readOnly:A.isCanceled||ve,isCanceledProp:A.isCanceled||ve})]}),P.jsxs("div",{className:"flex justify-between items-center text-sm",children:[P.jsx("span",{className:"font-semibold text-gray-500 w-1/2",children:"Especie:"}),P.jsx(Pn,{name:"especie",value:A.especie,onChange:L=>_t(A.id,L),onBlur:L=>Zt(A.id,L),placeholder:"Manzana",readOnly:A.isCanceled||ve,isCanceledProp:A.isCanceled||ve,...A.especie&&A.especie.toUpperCase()==="MANZANAS"?{list:"apple-varieties"}:{}})]}),P.jsxs("div",{className:"flex justify-between items-center text-sm",children:[P.jsx("span",{className:"font-semibold text-gray-500 w-1/2",children:"Variedad:"}),P.jsx(Pn,{name:"variedad",value:A.variedad,onChange:L=>_t(A.id,L),onBlur:L=>Zt(A.id,L),placeholder:"Galas",readOnly:A.isCanceled||ve,isCanceledProp:A.isCanceled||ve,...A.especie&&A.especie.toUpperCase()==="MANZANAS"?{list:"apple-varieties"}:{}})]}),P.jsxs("div",{className:"flex justify-between items-center text-sm",children:[P.jsx("span",{className:"font-semibold text-gray-500 w-1/2",children:"Formato:"}),P.jsx(Pn,{name:"formato",value:A.formato,onChange:L=>_t(A.id,L),onBlur:L=>Zt(A.id,L),placeholder:"20 Kg",readOnly:A.isCanceled||ve,isCanceledProp:A.isCanceled||ve})]}),P.jsxs("div",{className:"flex justify-between items-center text-sm",children:[P.jsx("span",{className:"font-semibold text-gray-500 w-1/2",children:"Calibre:"}),P.jsx(Pn,{name:"calibre",value:A.calibre,onChange:L=>_t(A.id,L),onBlur:L=>Zt(A.id,L),placeholder:"100;113",readOnly:A.isCanceled||ve,isCanceledProp:A.isCanceled||ve})]}),P.jsxs("div",{className:"flex justify-between items-center text-sm",children:[P.jsx("span",{className:"font-semibold text-gray-500 w-1/2",children:"Categoría:"}),P.jsx(Pn,{name:"categoria",value:A.categoria,onChange:L=>_t(L.id,L),onBlur:L=>Zt(L.id,L),placeholder:"PRE:XFY",readOnly:A.isCanceled||ve,isCanceledProp:A.isCanceled||ve})]}),P.jsxs("div",{className:"flex justify-between items-center text-sm",children:[P.jsx("span",{className:"font-semibold text-gray-500 w-1/2",children:"Precios FOB:"}),P.jsx(Pn,{name:"preciosFOB",value:A.preciosFOB,onChange:L=>_t(A.id,L),onBlur:L=>Zt(A.id,L),placeholder:"$14",readOnly:A.isCanceled||ve,isCanceledProp:A.isCanceled||ve})]})]},A.id)),P.jsxs("div",{className:"bg-blue-100 border border-blue-200 rounded-lg py-2 px-3 shadow-sm text-center font-bold text-base text-blue-800 mt-4",children:["Total de Pallets: ",ra," Pallets"]})]})]}),P.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4 mt-6",children:[P.jsxs("button",{onClick:It,className:"flex items-center justify-center px-6 py-3 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:scale-105 w-full sm:w-auto",title:"Crear un nuevo pedido en blanco",disabled:ve,children:[P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:P.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z"})}),"Agregar Pedido"]}),P.jsxs("button",{onClick:Jt,disabled:y.length<=1||ve,className:`flex items-center justify-center px-6 py-3 bg-red-600 text-white font-semibold rounded-lg shadow-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:scale-105 w-full sm:w-auto ${y.length<=1||ve?"opacity-50 cursor-not-allowed":""}`,title:"Eliminar el pedido actual",children:[P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:P.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1zm2 3a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1zm-1 4a1 1 0 002 0v-4a1 1 0 00-2 0v4z"})}),"Eliminar Pedido"]}),P.jsxs("button",{onClick:Ln,className:"flex items-center justify-center px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:scale-105 w-full sm:w-auto",title:"Finalizar el pedido y ver opciones de envío",disabled:ve,children:[P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:P.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"})}),"Finalizar Pedido"]})]}),C&&P.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50",children:P.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-screen-lg mx-auto my-8 relative flex flex-col max-h-[90vh]",children:[P.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800 text-center",children:"Opciones de Pedido Finalizado"}),!ae&&P.jsxs("h3",{className:"text-sm text-gray-600 text-center mb-4 leading-relaxed",children:[P.jsx("strong",{children:"Instrucción importante:"})," Después de enviar el email, abre tu aplicación de correo y pega (Ctrl+V o Cmd+V) el contenido manualmente en el cuerpo del mensaje."]}),ae?P.jsxs(P.Fragment,{children:[P.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-800 text-center",children:"Previsualización del Pedido"}),P.jsx("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200 text-left flex-grow overflow-y-auto",children:P.jsx("div",{dangerouslySetInnerHTML:{__html:wt}})}),P.jsxs("div",{className:"flex justify-center mt-3 gap-2 flex-wrap sm:flex-nowrap",children:[P.jsx("button",{onClick:()=>pe(!1),className:"flex items-center justify-center px-4 py-2 text-sm bg-gray-600 text-white font-semibold rounded-lg shadow-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:scale-105 w-full sm:w-auto",children:"Volver a Opciones"}),P.jsxs("button",{onClick:_i,className:"flex items-center justify-center px-4 py-2 text-sm bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:scale-105 w-full sm:w-auto",title:"Copiar contenido y abrir cliente de correo",children:[P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:[P.jsx("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),P.jsx("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]}),"Enviar Email"]})]})]}):P.jsxs("div",{className:"flex justify-center gap-4 mb-4 flex-wrap sm:flex-nowrap",children:[P.jsxs("button",{onClick:Hi,className:"flex items-center justify-center px-4 py-2 text-sm bg-gray-600 text-white font-semibold rounded-lg shadow-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:scale-105 w-full sm:w-auto",title:"Previsualizar el pedido completo",children:[P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:P.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8c1.65 0 3-1.35 3-3V7a1 1 0 112 0v1a5 5 0 01-5 5H4a5 5 0 01-5-5v-1c0-1.65 1.35-3 3-3h1V4a1 1 0 11-2 0V3h-1a1 1 0 110-2h1a1 1 0 011 1v1h1a1 1 0 011 1V4zm0 2a2 2 0 100 4 2 2 0 000-4z"})}),"Previsualizar"]}),P.jsxs("button",{onClick:_i,className:"flex items-center justify-center px-4 py-2 text-sm bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:scale-105 w-full sm:w-auto",title:"Copiar contenido y abrir cliente de correo",children:[P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:[P.jsx("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),P.jsx("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]}),"Enviar Email"]})]}),P.jsx("div",{className:"flex justify-center mt-4",children:P.jsx("button",{onClick:()=>Nt(!1),className:"px-6 py-3 bg-red-500 text-white font-semibold rounded-lg shadow-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition duration-150 ease-in-out",children:"Cerrar"})})]})}),ee&&re&&P.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50",children:P.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-auto relative",children:[P.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800 text-center",children:"Editar Observación para Línea"}),P.jsxs("div",{className:"mb-4",children:[P.jsx("label",{htmlFor:"modalObservation",className:"block text-sm font-medium text-gray-700 mb-1",children:"Observación:"}),P.jsx("textarea",{id:"modalObservation",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 bg-gray-50 border",rows:"4",value:je,onChange:A=>Se(A.target.value),placeholder:"Ingrese la observación aquí...",ref:St})]}),P.jsxs("div",{className:"flex justify-end gap-3",children:[P.jsx("button",{onClick:vs,className:"px-4 py-2 bg-gray-300 text-gray-800 font-semibold rounded-lg shadow-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2 transition duration-150 ease-in-out",children:"Cancelar"}),P.jsx("button",{onClick:Gi,className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-150 ease-in-out",children:"Guardar"})]})]})}),P.jsxs("datalist",{id:"apple-varieties",children:[P.jsx("option",{value:"GALA"}),P.jsx("option",{value:"GRANNY"}),P.jsx("option",{value:"FUJI"}),P.jsx("option",{value:"PINK LADY"}),P.jsx("option",{value:"ROJA"}),P.jsx("option",{value:"CRIPPS PINK"})]})]})," "]})};pb.createRoot(document.getElementById("root")).render(P.jsx(ht.StrictMode,{children:P.jsx(dC,{})}));
